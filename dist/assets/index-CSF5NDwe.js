var bM=Object.defineProperty;var wM=(e,t,r)=>t in e?bM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Yg=(e,t,r)=>wM(e,typeof t!="symbol"?t+"":t,r);function jM(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const l=Object.getOwnPropertyDescriptor(n,i);l&&Object.defineProperty(e,i,l.get?l:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();function Ka(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wg={exports:{}},Mc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KN;function NM(){if(KN)return Mc;KN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,l){var u=null;if(l!==void 0&&(u=""+l),i.key!==void 0&&(u=""+i.key),"key"in i){l={};for(var d in i)d!=="key"&&(l[d]=i[d])}else l=i;return i=l.ref,{$$typeof:e,type:n,key:u,ref:i!==void 0?i:null,props:l}}return Mc.Fragment=t,Mc.jsx=r,Mc.jsxs=r,Mc}var YN;function _M(){return YN||(YN=1,Wg.exports=NM()),Wg.exports}var o=_M(),Xg={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WN;function SM(){if(WN)return Qe;WN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),x=Symbol.iterator;function b(L){return L===null||typeof L!="object"?null:(L=x&&L[x]||L["@@iterator"],typeof L=="function"?L:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,_={};function E(L,W,ve){this.props=L,this.context=W,this.refs=_,this.updater=ve||j}E.prototype.isReactComponent={},E.prototype.setState=function(L,W){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,W,"setState")},E.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function k(){}k.prototype=E.prototype;function A(L,W,ve){this.props=L,this.context=W,this.refs=_,this.updater=ve||j}var I=A.prototype=new k;I.constructor=A,N(I,E.prototype),I.isPureReactComponent=!0;var R=Array.isArray;function C(){}var P={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function oe(L,W,ve){var be=ve.ref;return{$$typeof:e,type:L,key:W,ref:be!==void 0?be:null,props:ve}}function H(L,W){return oe(L.type,W,L.props)}function $(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function U(L){var W={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ve){return W[ve]})}var ce=/\/+/g;function G(L,W){return typeof L=="object"&&L!==null&&L.key!=null?U(""+L.key):W.toString(36)}function V(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(C,C):(L.status="pending",L.then(function(W){L.status==="pending"&&(L.status="fulfilled",L.value=W)},function(W){L.status==="pending"&&(L.status="rejected",L.reason=W)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function D(L,W,ve,be,Te){var Ee=typeof L;(Ee==="undefined"||Ee==="boolean")&&(L=null);var Ce=!1;if(L===null)Ce=!0;else switch(Ee){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(L.$$typeof){case e:case t:Ce=!0;break;case p:return Ce=L._init,D(Ce(L._payload),W,ve,be,Te)}}if(Ce)return Te=Te(L),Ce=be===""?"."+G(L,0):be,R(Te)?(ve="",Ce!=null&&(ve=Ce.replace(ce,"$&/")+"/"),D(Te,W,ve,"",function(pe){return pe})):Te!=null&&($(Te)&&(Te=H(Te,ve+(Te.key==null||L&&L.key===Te.key?"":(""+Te.key).replace(ce,"$&/")+"/")+Ce)),W.push(Te)),1;Ce=0;var at=be===""?".":be+":";if(R(L))for(var z=0;z<L.length;z++)be=L[z],Ee=at+G(be,z),Ce+=D(be,W,ve,Ee,Te);else if(z=b(L),typeof z=="function")for(L=z.call(L),z=0;!(be=L.next()).done;)be=be.value,Ee=at+G(be,z++),Ce+=D(be,W,ve,Ee,Te);else if(Ee==="object"){if(typeof L.then=="function")return D(V(L),W,ve,be,Te);throw W=String(L),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function K(L,W,ve){if(L==null)return L;var be=[],Te=0;return D(L,be,"","",function(Ee){return W.call(ve,Ee,Te++)}),be}function fe(L){if(L._status===-1){var W=L._result;W=W(),W.then(function(ve){(L._status===0||L._status===-1)&&(L._status=1,L._result=ve)},function(ve){(L._status===0||L._status===-1)&&(L._status=2,L._result=ve)}),L._status===-1&&(L._status=0,L._result=W)}if(L._status===1)return L._result.default;throw L._result}var Ne=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},_e={map:K,forEach:function(L,W,ve){K(L,function(){W.apply(this,arguments)},ve)},count:function(L){var W=0;return K(L,function(){W++}),W},toArray:function(L){return K(L,function(W){return W})||[]},only:function(L){if(!$(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Qe.Activity=g,Qe.Children=_e,Qe.Component=E,Qe.Fragment=r,Qe.Profiler=i,Qe.PureComponent=A,Qe.StrictMode=n,Qe.Suspense=h,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(L){return P.H.useMemoCache(L)}},Qe.cache=function(L){return function(){return L.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(L,W,ve){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var be=N({},L.props),Te=L.key;if(W!=null)for(Ee in W.key!==void 0&&(Te=""+W.key),W)!Y.call(W,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&W.ref===void 0||(be[Ee]=W[Ee]);var Ee=arguments.length-2;if(Ee===1)be.children=ve;else if(1<Ee){for(var Ce=Array(Ee),at=0;at<Ee;at++)Ce[at]=arguments[at+2];be.children=Ce}return oe(L.type,Te,be)},Qe.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:l,_context:L},L},Qe.createElement=function(L,W,ve){var be,Te={},Ee=null;if(W!=null)for(be in W.key!==void 0&&(Ee=""+W.key),W)Y.call(W,be)&&be!=="key"&&be!=="__self"&&be!=="__source"&&(Te[be]=W[be]);var Ce=arguments.length-2;if(Ce===1)Te.children=ve;else if(1<Ce){for(var at=Array(Ce),z=0;z<Ce;z++)at[z]=arguments[z+2];Te.children=at}if(L&&L.defaultProps)for(be in Ce=L.defaultProps,Ce)Te[be]===void 0&&(Te[be]=Ce[be]);return oe(L,Ee,Te)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(L){return{$$typeof:d,render:L}},Qe.isValidElement=$,Qe.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:fe}},Qe.memo=function(L,W){return{$$typeof:m,type:L,compare:W===void 0?null:W}},Qe.startTransition=function(L){var W=P.T,ve={};P.T=ve;try{var be=L(),Te=P.S;Te!==null&&Te(ve,be),typeof be=="object"&&be!==null&&typeof be.then=="function"&&be.then(C,Ne)}catch(Ee){Ne(Ee)}finally{W!==null&&ve.types!==null&&(W.types=ve.types),P.T=W}},Qe.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Qe.use=function(L){return P.H.use(L)},Qe.useActionState=function(L,W,ve){return P.H.useActionState(L,W,ve)},Qe.useCallback=function(L,W){return P.H.useCallback(L,W)},Qe.useContext=function(L){return P.H.useContext(L)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(L,W){return P.H.useDeferredValue(L,W)},Qe.useEffect=function(L,W){return P.H.useEffect(L,W)},Qe.useEffectEvent=function(L){return P.H.useEffectEvent(L)},Qe.useId=function(){return P.H.useId()},Qe.useImperativeHandle=function(L,W,ve){return P.H.useImperativeHandle(L,W,ve)},Qe.useInsertionEffect=function(L,W){return P.H.useInsertionEffect(L,W)},Qe.useLayoutEffect=function(L,W){return P.H.useLayoutEffect(L,W)},Qe.useMemo=function(L,W){return P.H.useMemo(L,W)},Qe.useOptimistic=function(L,W){return P.H.useOptimistic(L,W)},Qe.useReducer=function(L,W,ve){return P.H.useReducer(L,W,ve)},Qe.useRef=function(L){return P.H.useRef(L)},Qe.useState=function(L){return P.H.useState(L)},Qe.useSyncExternalStore=function(L,W,ve){return P.H.useSyncExternalStore(L,W,ve)},Qe.useTransition=function(){return P.H.useTransition()},Qe.version="19.2.0",Qe}var XN;function Dl(){return XN||(XN=1,Xg.exports=SM()),Xg.exports}var w=Dl();const ao=Ka(w),EM=jM({__proto__:null,default:ao},[w]);var Zg={exports:{}},Ic={},Qg={exports:{}},Jg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZN;function AM(){return ZN||(ZN=1,(function(e){function t(D,K){var fe=D.length;D.push(K);e:for(;0<fe;){var Ne=fe-1>>>1,_e=D[Ne];if(0<i(_e,K))D[Ne]=K,D[fe]=_e,fe=Ne;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var K=D[0],fe=D.pop();if(fe!==K){D[0]=fe;e:for(var Ne=0,_e=D.length,L=_e>>>1;Ne<L;){var W=2*(Ne+1)-1,ve=D[W],be=W+1,Te=D[be];if(0>i(ve,fe))be<_e&&0>i(Te,ve)?(D[Ne]=Te,D[be]=fe,Ne=be):(D[Ne]=ve,D[W]=fe,Ne=W);else if(be<_e&&0>i(Te,fe))D[Ne]=Te,D[be]=fe,Ne=be;else break e}}return K}function i(D,K){var fe=D.sortIndex-K.sortIndex;return fe!==0?fe:D.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var h=[],m=[],p=1,g=null,x=3,b=!1,j=!1,N=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function I(D){for(var K=r(m);K!==null;){if(K.callback===null)n(m);else if(K.startTime<=D)n(m),K.sortIndex=K.expirationTime,t(h,K);else break;K=r(m)}}function R(D){if(N=!1,I(D),!j)if(r(h)!==null)j=!0,C||(C=!0,U());else{var K=r(m);K!==null&&V(R,K.startTime-D)}}var C=!1,P=-1,Y=5,oe=-1;function H(){return _?!0:!(e.unstable_now()-oe<Y)}function $(){if(_=!1,C){var D=e.unstable_now();oe=D;var K=!0;try{e:{j=!1,N&&(N=!1,k(P),P=-1),b=!0;var fe=x;try{t:{for(I(D),g=r(h);g!==null&&!(g.expirationTime>D&&H());){var Ne=g.callback;if(typeof Ne=="function"){g.callback=null,x=g.priorityLevel;var _e=Ne(g.expirationTime<=D);if(D=e.unstable_now(),typeof _e=="function"){g.callback=_e,I(D),K=!0;break t}g===r(h)&&n(h),I(D)}else n(h);g=r(h)}if(g!==null)K=!0;else{var L=r(m);L!==null&&V(R,L.startTime-D),K=!1}}break e}finally{g=null,x=fe,b=!1}K=void 0}}finally{K?U():C=!1}}}var U;if(typeof A=="function")U=function(){A($)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,G=ce.port2;ce.port1.onmessage=$,U=function(){G.postMessage(null)}}else U=function(){E($,0)};function V(D,K){P=E(function(){D(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(D){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var fe=x;x=K;try{return D()}finally{x=fe}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(D,K){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var fe=x;x=D;try{return K()}finally{x=fe}},e.unstable_scheduleCallback=function(D,K,fe){var Ne=e.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Ne+fe:Ne):fe=Ne,D){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=fe+_e,D={id:p++,callback:K,priorityLevel:D,startTime:fe,expirationTime:_e,sortIndex:-1},fe>Ne?(D.sortIndex=fe,t(m,D),r(h)===null&&D===r(m)&&(N?(k(P),P=-1):N=!0,V(R,fe-Ne))):(D.sortIndex=_e,t(h,D),j||b||(j=!0,C||(C=!0,U()))),D},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(D){var K=x;return function(){var fe=x;x=K;try{return D.apply(this,arguments)}finally{x=fe}}}})(Jg)),Jg}var QN;function OM(){return QN||(QN=1,Qg.exports=AM()),Qg.exports}var e0={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JN;function CM(){if(JN)return rn;JN=1;var e=Dl();function t(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)m+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function l(h,m,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:h,containerInfo:m,implementation:p}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,rn.createPortal=function(h,m){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return l(h,m,null,p)},rn.flushSync=function(h){var m=u.T,p=n.p;try{if(u.T=null,n.p=2,h)return h()}finally{u.T=m,n.p=p,n.d.f()}},rn.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(h,m))},rn.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},rn.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var p=m.as,g=d(p,m.crossOrigin),x=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;p==="style"?n.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:b}):p==="script"&&n.d.X(h,{crossOrigin:g,integrity:x,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},rn.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var p=d(m.as,m.crossOrigin);n.d.M(h,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(h)},rn.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var p=m.as,g=d(p,m.crossOrigin);n.d.L(h,p,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},rn.preloadModule=function(h,m){if(typeof h=="string")if(m){var p=d(m.as,m.crossOrigin);n.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(h)},rn.requestFormReset=function(h){n.d.r(h)},rn.unstable_batchedUpdates=function(h,m){return h(m)},rn.useFormState=function(h,m,p){return u.H.useFormState(h,m,p)},rn.useFormStatus=function(){return u.H.useHostTransitionStatus()},rn.version="19.2.0",rn}var e_;function ZA(){if(e_)return e0.exports;e_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),e0.exports=CM(),e0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function TM(){if(t_)return Ic;t_=1;var e=OM(),t=Dl(),r=ZA();function n(a){var s="https://react.dev/errors/"+a;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function l(a){var s=a,c=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,(s.flags&4098)!==0&&(c=s.return),a=s.return;while(a)}return s.tag===3?c:null}function u(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function d(a){if(a.tag===31){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function h(a){if(l(a)!==a)throw Error(n(188))}function m(a){var s=a.alternate;if(!s){if(s=l(a),s===null)throw Error(n(188));return s!==a?null:a}for(var c=a,f=s;;){var y=c.return;if(y===null)break;var v=y.alternate;if(v===null){if(f=y.return,f!==null){c=f;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===c)return h(y),a;if(v===f)return h(y),s;v=v.sibling}throw Error(n(188))}if(c.return!==f.return)c=y,f=v;else{for(var S=!1,T=y.child;T;){if(T===c){S=!0,c=y,f=v;break}if(T===f){S=!0,f=y,c=v;break}T=T.sibling}if(!S){for(T=v.child;T;){if(T===c){S=!0,c=v,f=y;break}if(T===f){S=!0,f=v,c=y;break}T=T.sibling}if(!S)throw Error(n(189))}}if(c.alternate!==f)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?a:s}function p(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a;for(a=a.child;a!==null;){if(s=p(a),s!==null)return s;a=a.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),A=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function U(a){return a===null||typeof a!="object"?null:(a=$&&a[$]||a["@@iterator"],typeof a=="function"?a:null)}var ce=Symbol.for("react.client.reference");function G(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ce?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case N:return"Fragment";case E:return"Profiler";case _:return"StrictMode";case R:return"Suspense";case C:return"SuspenseList";case oe:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case j:return"Portal";case A:return a.displayName||"Context";case k:return(a._context.displayName||"Context")+".Consumer";case I:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case P:return s=a.displayName||null,s!==null?s:G(a.type)||"Memo";case Y:s=a._payload,a=a._init;try{return G(a(s))}catch{}}return null}var V=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Ne=[],_e=-1;function L(a){return{current:a}}function W(a){0>_e||(a.current=Ne[_e],Ne[_e]=null,_e--)}function ve(a,s){_e++,Ne[_e]=a.current,a.current=s}var be=L(null),Te=L(null),Ee=L(null),Ce=L(null);function at(a,s){switch(ve(Ee,s),ve(Te,a),ve(be,null),s.nodeType){case 9:case 11:a=(a=s.documentElement)&&(a=a.namespaceURI)?gN(a):0;break;default:if(a=s.tagName,s=s.namespaceURI)s=gN(s),a=yN(s,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}W(be),ve(be,a)}function z(){W(be),W(Te),W(Ee)}function pe(a){a.memoizedState!==null&&ve(Ce,a);var s=be.current,c=yN(s,a.type);s!==c&&(ve(Te,a),ve(be,c))}function ue(a){Te.current===a&&(W(be),W(Te)),Ce.current===a&&(W(Ce),kc._currentValue=fe)}var re,Je;function Re(a){if(re===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);re=s&&s[1]||"",Je=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+re+a+Je}var Ze=!1;function Ke(a,s){if(!a||Ze)return"";Ze=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(de){var ie=de}Reflect.construct(a,[],xe)}else{try{xe.call()}catch(de){ie=de}a.call(xe.prototype)}}else{try{throw Error()}catch(de){ie=de}(xe=a())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(de){if(de&&ie&&typeof de.stack=="string")return[de.stack,ie.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=f.DetermineComponentFrameRoot(),S=v[0],T=v[1];if(S&&T){var B=S.split(`
`),te=T.split(`
`);for(y=f=0;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;for(;y<te.length&&!te[y].includes("DetermineComponentFrameRoot");)y++;if(f===B.length||y===te.length)for(f=B.length-1,y=te.length-1;1<=f&&0<=y&&B[f]!==te[y];)y--;for(;1<=f&&0<=y;f--,y--)if(B[f]!==te[y]){if(f!==1||y!==1)do if(f--,y--,0>y||B[f]!==te[y]){var me=`
`+B[f].replace(" at new "," at ");return a.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",a.displayName)),me}while(1<=f&&0<=y);break}}}finally{Ze=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?Re(c):""}function X(a,s){switch(a.tag){case 26:case 27:case 5:return Re(a.type);case 16:return Re("Lazy");case 13:return a.child!==s&&s!==null?Re("Suspense Fallback"):Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return Ke(a.type,!1);case 11:return Ke(a.type.render,!1);case 1:return Ke(a.type,!0);case 31:return Re("Activity");default:return""}}function Mt(a){try{var s="",c=null;do s+=X(a,c),c=a,a=a.return;while(a);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Fe=Object.prototype.hasOwnProperty,Kt=e.unstable_scheduleCallback,Ve=e.unstable_cancelCallback,Cn=e.unstable_shouldYield,Jr=e.unstable_requestPaint,tr=e.unstable_now,pn=e.unstable_getCurrentPriorityLevel,gn=e.unstable_ImmediatePriority,en=e.unstable_UserBlockingPriority,Ma=e.unstable_NormalPriority,Tn=e.unstable_LowPriority,ha=e.unstable_IdlePriority,ma=e.log,Ya=e.unstable_setDisableYieldValue,fr=null,we=null;function ct(a){if(typeof ma=="function"&&Ya(a),we&&typeof we.setStrictMode=="function")try{we.setStrictMode(fr,a)}catch{}}var Gt=Math.clz32?Math.clz32:le,pa=Math.log,ga=Math.LN2;function le(a){return a>>>=0,a===0?32:31-(pa(a)/ga|0)|0}var Mi=256,Ii=262144,ya=4194304;function Vn(a){var s=a&42;if(s!==0)return s;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Li(a,s,c){var f=a.pendingLanes;if(f===0)return 0;var y=0,v=a.suspendedLanes,S=a.pingedLanes;a=a.warmLanes;var T=f&134217727;return T!==0?(f=T&~v,f!==0?y=Vn(f):(S&=T,S!==0?y=Vn(S):c||(c=T&~a,c!==0&&(y=Vn(c))))):(T=f&~v,T!==0?y=Vn(T):S!==0?y=Vn(S):c||(c=f&~a,c!==0&&(y=Vn(c)))),y===0?0:s!==0&&s!==y&&(s&v)===0&&(v=y&-y,c=s&-s,v>=c||v===32&&(c&4194048)!==0)?s:y}function Wa(a,s){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&s)===0}function Gl(a,s){switch(a){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sr(){var a=ya;return ya<<=1,(ya&62914560)===0&&(ya=4194304),a}function se(a){for(var s=[],c=0;31>c;c++)s.push(a);return s}function Ge(a,s){a.pendingLanes|=s,s!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ft(a,s,c,f,y,v){var S=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var T=a.entanglements,B=a.expirationTimes,te=a.hiddenUpdates;for(c=S&~c;0<c;){var me=31-Gt(c),xe=1<<me;T[me]=0,B[me]=-1;var ie=te[me];if(ie!==null)for(te[me]=null,me=0;me<ie.length;me++){var de=ie[me];de!==null&&(de.lane&=-536870913)}c&=~xe}f!==0&&vt(a,f,0),v!==0&&y===0&&a.tag!==0&&(a.suspendedLanes|=v&~(S&~s))}function vt(a,s,c){a.pendingLanes|=s,a.suspendedLanes&=~s;var f=31-Gt(s);a.entangledLanes|=s,a.entanglements[f]=a.entanglements[f]|1073741824|c&261930}function _r(a,s){var c=a.entangledLanes|=s;for(a=a.entanglements;c;){var f=31-Gt(c),y=1<<f;y&s|a[f]&s&&(a[f]|=s),c&=~y}}function ln(a,s){var c=s&-s;return c=(c&42)!==0?1:xt(c),(c&(a.suspendedLanes|s))!==0?0:c}function xt(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function zt(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Gr(){var a=K.p;return a!==0?a:(a=window.event,a===void 0?32:$N(a.type))}function zi(a,s){var c=K.p;try{return K.p=a,s()}finally{K.p=c}}var ht=Math.random().toString(36).slice(2),jt="__reactFiber$"+ht,tn="__reactProps$"+ht,Ui="__reactContainer$"+ht,Hl="__reactEvents$"+ht,Hm="__reactListeners$"+ht,Fm="__reactHandles$"+ht,Wu="__reactResources$"+ht,Cs="__reactMarker$"+ht;function Fl(a){delete a[jt],delete a[tn],delete a[Hl],delete a[Hm],delete a[Fm]}function $i(a){var s=a[jt];if(s)return s;for(var c=a.parentNode;c;){if(s=c[Ui]||c[jt]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(a=_N(a);a!==null;){if(c=a[jt])return c;a=_N(a)}return s}a=c,c=a.parentNode}return null}function qi(a){if(a=a[jt]||a[Ui]){var s=a.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return a}return null}function Ts(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a.stateNode;throw Error(n(33))}function Bi(a){var s=a[Wu];return s||(s=a[Wu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function hr(a){a[Cs]=!0}var Xu=new Set,Zu={};function Xa(a,s){Gi(a,s),Gi(a+"Capture",s)}function Gi(a,s){for(Zu[a]=s,a=0;a<s.length;a++)Xu.add(s[a])}var Vm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qu={},Ju={};function ed(a){return Fe.call(Ju,a)?!0:Fe.call(Qu,a)?!1:Vm.test(a)?Ju[a]=!0:(Qu[a]=!0,!1)}function _o(a,s,c){if(ed(s))if(c===null)a.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(s);return}}a.setAttribute(s,""+c)}}function So(a,s,c){if(c===null)a.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(s);return}a.setAttribute(s,""+c)}}function va(a,s,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(s,c,""+f)}}function yn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function td(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Km(a,s,c){var f=Object.getOwnPropertyDescriptor(a.constructor.prototype,s);if(!a.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,v=f.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return y.call(this)},set:function(S){c=""+S,v.call(this,S)}}),Object.defineProperty(a,s,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(S){c=""+S},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function Vl(a){if(!a._valueTracker){var s=td(a)?"checked":"value";a._valueTracker=Km(a,s,""+a[s])}}function rd(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var c=s.getValue(),f="";return a&&(f=td(a)?a.checked?"true":"false":a.value),a=f,a!==c?(s.setValue(a),!0):!1}function Eo(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Ym=/[\n"\\]/g;function vn(a){return a.replace(Ym,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Kl(a,s,c,f,y,v,S,T){a.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?a.type=S:a.removeAttribute("type"),s!=null?S==="number"?(s===0&&a.value===""||a.value!=s)&&(a.value=""+yn(s)):a.value!==""+yn(s)&&(a.value=""+yn(s)):S!=="submit"&&S!=="reset"||a.removeAttribute("value"),s!=null?Yl(a,S,yn(s)):c!=null?Yl(a,S,yn(c)):f!=null&&a.removeAttribute("value"),y==null&&v!=null&&(a.defaultChecked=!!v),y!=null&&(a.checked=y&&typeof y!="function"&&typeof y!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?a.name=""+yn(T):a.removeAttribute("name")}function nd(a,s,c,f,y,v,S,T){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(a.type=v),s!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){Vl(a);return}c=c!=null?""+yn(c):"",s=s!=null?""+yn(s):c,T||s===a.value||(a.value=s),a.defaultValue=s}f=f??y,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=T?a.checked:!!f,a.defaultChecked=!!f,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(a.name=S),Vl(a)}function Yl(a,s,c){s==="number"&&Eo(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function Hi(a,s,c,f){if(a=a.options,s){s={};for(var y=0;y<c.length;y++)s["$"+c[y]]=!0;for(c=0;c<a.length;c++)y=s.hasOwnProperty("$"+a[c].value),a[c].selected!==y&&(a[c].selected=y),y&&f&&(a[c].defaultSelected=!0)}else{for(c=""+yn(c),s=null,y=0;y<a.length;y++){if(a[y].value===c){a[y].selected=!0,f&&(a[y].defaultSelected=!0);return}s!==null||a[y].disabled||(s=a[y])}s!==null&&(s.selected=!0)}}function ad(a,s,c){if(s!=null&&(s=""+yn(s),s!==a.value&&(a.value=s),c==null)){a.defaultValue!==s&&(a.defaultValue=s);return}a.defaultValue=c!=null?""+yn(c):""}function id(a,s,c,f){if(s==null){if(f!=null){if(c!=null)throw Error(n(92));if(V(f)){if(1<f.length)throw Error(n(93));f=f[0]}c=f}c==null&&(c=""),s=c}c=yn(s),a.defaultValue=c,f=a.textContent,f===c&&f!==""&&f!==null&&(a.value=f),Vl(a)}function Fi(a,s){if(s){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=s;return}}a.textContent=s}var Wm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sd(a,s,c){var f=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?a.setProperty(s,""):s==="float"?a.cssFloat="":a[s]="":f?a.setProperty(s,c):typeof c!="number"||c===0||Wm.has(s)?s==="float"?a.cssFloat=c:a[s]=(""+c).trim():a[s]=c+"px"}function od(a,s,c){if(s!=null&&typeof s!="object")throw Error(n(62));if(a=a.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var y in s)f=s[y],s.hasOwnProperty(y)&&c[y]!==f&&sd(a,y,f)}else for(var v in s)s.hasOwnProperty(v)&&sd(a,v,s[v])}function Wl(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ao(a){return Zm.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function xa(){}var Xl=null;function Zl(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var O=null,M=null;function q(a){var s=qi(a);if(s&&(a=s.stateNode)){var c=a[tn]||null;e:switch(a=s.stateNode,s.type){case"input":if(Kl(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+vn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var f=c[s];if(f!==a&&f.form===a.form){var y=f[tn]||null;if(!y)throw Error(n(90));Kl(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<c.length;s++)f=c[s],f.form===a.form&&rd(f)}break e;case"textarea":ad(a,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Hi(a,!!c.multiple,s,!1)}}}var Q=!1;function ge(a,s,c){if(Q)return a(s,c);Q=!0;try{var f=a(s);return f}finally{if(Q=!1,(O!==null||M!==null)&&(Hd(),O&&(s=O,a=M,M=O=null,q(s),a)))for(s=0;s<a.length;s++)q(a[s])}}function je(a,s){var c=a.stateNode;if(c===null)return null;var f=c[tn]||null;if(f===null)return null;c=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(n(231,s,typeof c));return c}var Oe=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),De=!1;if(Oe)try{var he={};Object.defineProperty(he,"passive",{get:function(){De=!0}}),window.addEventListener("test",he,he),window.removeEventListener("test",he,he)}catch{De=!1}var J=null,Se=null,Ie=null;function Ut(){if(Ie)return Ie;var a,s=Se,c=s.length,f,y="value"in J?J.value:J.textContent,v=y.length;for(a=0;a<c&&s[a]===y[a];a++);var S=c-a;for(f=1;f<=S&&s[c-f]===y[v-f];f++);return Ie=y.slice(a,1<f?1-f:void 0)}function tt(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function Be(){return!0}function Nt(){return!1}function ut(a){function s(c,f,y,v,S){this._reactName=c,this._targetInst=y,this.type=f,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var T in a)a.hasOwnProperty(T)&&(c=a[T],this[T]=c?c(v):v[T]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Be:Nt,this.isPropagationStopped=Nt,this}return g(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Be)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Be)},persist:function(){},isPersistent:Be}),s}var Le={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ct=ut(Le),_t=g({},Le,{view:0,detail:0}),Kn=ut(_t),mr,cn,Pr,ld=g({},_t,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jm,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Pr&&(Pr&&a.type==="mousemove"?(mr=a.screenX-Pr.screenX,cn=a.screenY-Pr.screenY):cn=mr=0,Pr=a),mr)},movementY:function(a){return"movementY"in a?a.movementY:cn}}),xw=ut(ld),xR=g({},ld,{dataTransfer:0}),bR=ut(xR),wR=g({},_t,{relatedTarget:0}),Qm=ut(wR),jR=g({},Le,{animationName:0,elapsedTime:0,pseudoElement:0}),NR=ut(jR),_R=g({},Le,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),SR=ut(_R),ER=g({},Le,{data:0}),bw=ut(ER),AR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TR(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=CR[a])?!!s[a]:!1}function Jm(){return TR}var kR=g({},_t,{key:function(a){if(a.key){var s=AR[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=tt(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?OR[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jm,charCode:function(a){return a.type==="keypress"?tt(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?tt(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),DR=ut(kR),RR=g({},ld,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ww=ut(RR),PR=g({},_t,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jm}),MR=ut(PR),IR=g({},Le,{propertyName:0,elapsedTime:0,pseudoElement:0}),LR=ut(IR),zR=g({},ld,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),UR=ut(zR),$R=g({},Le,{newState:0,oldState:0}),qR=ut($R),BR=[9,13,27,32],ep=Oe&&"CompositionEvent"in window,Ql=null;Oe&&"documentMode"in document&&(Ql=document.documentMode);var GR=Oe&&"TextEvent"in window&&!Ql,jw=Oe&&(!ep||Ql&&8<Ql&&11>=Ql),Nw=" ",_w=!1;function Sw(a,s){switch(a){case"keyup":return BR.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ew(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Oo=!1;function HR(a,s){switch(a){case"compositionend":return Ew(s);case"keypress":return s.which!==32?null:(_w=!0,Nw);case"textInput":return a=s.data,a===Nw&&_w?null:a;default:return null}}function FR(a,s){if(Oo)return a==="compositionend"||!ep&&Sw(a,s)?(a=Ut(),Ie=Se=J=null,Oo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return jw&&s.locale!=="ko"?null:s.data;default:return null}}var VR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Aw(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!VR[a.type]:s==="textarea"}function Ow(a,s,c,f){O?M?M.push(f):M=[f]:O=f,s=Zd(s,"onChange"),0<s.length&&(c=new Ct("onChange","change",null,c,f),a.push({event:c,listeners:s}))}var Jl=null,ec=null;function KR(a){uN(a,0)}function cd(a){var s=Ts(a);if(rd(s))return a}function Cw(a,s){if(a==="change")return s}var Tw=!1;if(Oe){var tp;if(Oe){var rp="oninput"in document;if(!rp){var kw=document.createElement("div");kw.setAttribute("oninput","return;"),rp=typeof kw.oninput=="function"}tp=rp}else tp=!1;Tw=tp&&(!document.documentMode||9<document.documentMode)}function Dw(){Jl&&(Jl.detachEvent("onpropertychange",Rw),ec=Jl=null)}function Rw(a){if(a.propertyName==="value"&&cd(ec)){var s=[];Ow(s,ec,a,Zl(a)),ge(KR,s)}}function YR(a,s,c){a==="focusin"?(Dw(),Jl=s,ec=c,Jl.attachEvent("onpropertychange",Rw)):a==="focusout"&&Dw()}function WR(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return cd(ec)}function XR(a,s){if(a==="click")return cd(s)}function ZR(a,s){if(a==="input"||a==="change")return cd(s)}function QR(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var kn=typeof Object.is=="function"?Object.is:QR;function tc(a,s){if(kn(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var c=Object.keys(a),f=Object.keys(s);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var y=c[f];if(!Fe.call(s,y)||!kn(a[y],s[y]))return!1}return!0}function Pw(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Mw(a,s){var c=Pw(a);a=0;for(var f;c;){if(c.nodeType===3){if(f=a+c.textContent.length,a<=s&&f>=s)return{node:c,offset:s-a};a=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Pw(c)}}function Iw(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?Iw(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function Lw(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var s=Eo(a.document);s instanceof a.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)a=s.contentWindow;else break;s=Eo(a.document)}return s}function np(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}var JR=Oe&&"documentMode"in document&&11>=document.documentMode,Co=null,ap=null,rc=null,ip=!1;function zw(a,s,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;ip||Co==null||Co!==Eo(f)||(f=Co,"selectionStart"in f&&np(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),rc&&tc(rc,f)||(rc=f,f=Zd(ap,"onSelect"),0<f.length&&(s=new Ct("onSelect","select",null,s,c),a.push({event:s,listeners:f}),s.target=Co)))}function ks(a,s){var c={};return c[a.toLowerCase()]=s.toLowerCase(),c["Webkit"+a]="webkit"+s,c["Moz"+a]="moz"+s,c}var To={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionrun:ks("Transition","TransitionRun"),transitionstart:ks("Transition","TransitionStart"),transitioncancel:ks("Transition","TransitionCancel"),transitionend:ks("Transition","TransitionEnd")},sp={},Uw={};Oe&&(Uw=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function Ds(a){if(sp[a])return sp[a];if(!To[a])return a;var s=To[a],c;for(c in s)if(s.hasOwnProperty(c)&&c in Uw)return sp[a]=s[c];return a}var $w=Ds("animationend"),qw=Ds("animationiteration"),Bw=Ds("animationstart"),eP=Ds("transitionrun"),tP=Ds("transitionstart"),rP=Ds("transitioncancel"),Gw=Ds("transitionend"),Hw=new Map,op="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");op.push("scrollEnd");function ba(a,s){Hw.set(a,s),Xa(s,[a])}var ud=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Yn=[],ko=0,lp=0;function dd(){for(var a=ko,s=lp=ko=0;s<a;){var c=Yn[s];Yn[s++]=null;var f=Yn[s];Yn[s++]=null;var y=Yn[s];Yn[s++]=null;var v=Yn[s];if(Yn[s++]=null,f!==null&&y!==null){var S=f.pending;S===null?y.next=y:(y.next=S.next,S.next=y),f.pending=y}v!==0&&Fw(c,y,v)}}function fd(a,s,c,f){Yn[ko++]=a,Yn[ko++]=s,Yn[ko++]=c,Yn[ko++]=f,lp|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function cp(a,s,c,f){return fd(a,s,c,f),hd(a)}function Rs(a,s){return fd(a,null,null,s),hd(a)}function Fw(a,s,c){a.lanes|=c;var f=a.alternate;f!==null&&(f.lanes|=c);for(var y=!1,v=a.return;v!==null;)v.childLanes|=c,f=v.alternate,f!==null&&(f.childLanes|=c),v.tag===22&&(a=v.stateNode,a===null||a._visibility&1||(y=!0)),a=v,v=v.return;return a.tag===3?(v=a.stateNode,y&&s!==null&&(y=31-Gt(c),a=v.hiddenUpdates,f=a[y],f===null?a[y]=[s]:f.push(s),s.lane=c|536870912),v):null}function hd(a){if(50<_c)throw _c=0,vg=null,Error(n(185));for(var s=a.return;s!==null;)a=s,s=a.return;return a.tag===3?a.stateNode:null}var Do={};function nP(a,s,c,f){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(a,s,c,f){return new nP(a,s,c,f)}function up(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Za(a,s){var c=a.alternate;return c===null?(c=Dn(a.tag,s,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=s,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,s=a.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function Vw(a,s){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=s,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,s=c.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a}function md(a,s,c,f,y,v){var S=0;if(f=a,typeof a=="function")up(a)&&(S=1);else if(typeof a=="string")S=lM(a,c,be.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case oe:return a=Dn(31,c,s,y),a.elementType=oe,a.lanes=v,a;case N:return Ps(c.children,y,v,s);case _:S=8,y|=24;break;case E:return a=Dn(12,c,s,y|2),a.elementType=E,a.lanes=v,a;case R:return a=Dn(13,c,s,y),a.elementType=R,a.lanes=v,a;case C:return a=Dn(19,c,s,y),a.elementType=C,a.lanes=v,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case A:S=10;break e;case k:S=9;break e;case I:S=11;break e;case P:S=14;break e;case Y:S=16,f=null;break e}S=29,c=Error(n(130,a===null?"null":typeof a,"")),f=null}return s=Dn(S,c,s,y),s.elementType=a,s.type=f,s.lanes=v,s}function Ps(a,s,c,f){return a=Dn(7,a,f,s),a.lanes=c,a}function dp(a,s,c){return a=Dn(6,a,null,s),a.lanes=c,a}function Kw(a){var s=Dn(18,null,null,0);return s.stateNode=a,s}function fp(a,s,c){return s=Dn(4,a.children!==null?a.children:[],a.key,s),s.lanes=c,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}var Yw=new WeakMap;function Wn(a,s){if(typeof a=="object"&&a!==null){var c=Yw.get(a);return c!==void 0?c:(s={value:a,source:s,stack:Mt(s)},Yw.set(a,s),s)}return{value:a,source:s,stack:Mt(s)}}var Ro=[],Po=0,pd=null,nc=0,Xn=[],Zn=0,Vi=null,Ia=1,La="";function Qa(a,s){Ro[Po++]=nc,Ro[Po++]=pd,pd=a,nc=s}function Ww(a,s,c){Xn[Zn++]=Ia,Xn[Zn++]=La,Xn[Zn++]=Vi,Vi=a;var f=Ia;a=La;var y=32-Gt(f)-1;f&=~(1<<y),c+=1;var v=32-Gt(s)+y;if(30<v){var S=y-y%5;v=(f&(1<<S)-1).toString(32),f>>=S,y-=S,Ia=1<<32-Gt(s)+y|c<<y|f,La=v+a}else Ia=1<<v|c<<y|f,La=a}function hp(a){a.return!==null&&(Qa(a,1),Ww(a,1,0))}function mp(a){for(;a===pd;)pd=Ro[--Po],Ro[Po]=null,nc=Ro[--Po],Ro[Po]=null;for(;a===Vi;)Vi=Xn[--Zn],Xn[Zn]=null,La=Xn[--Zn],Xn[Zn]=null,Ia=Xn[--Zn],Xn[Zn]=null}function Xw(a,s){Xn[Zn++]=Ia,Xn[Zn++]=La,Xn[Zn++]=Vi,Ia=s.id,La=s.overflow,Vi=a}var Hr=null,Ht=null,dt=!1,Ki=null,Qn=!1,pp=Error(n(519));function Yi(a){var s=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ac(Wn(s,a)),pp}function Zw(a){var s=a.stateNode,c=a.type,f=a.memoizedProps;switch(s[jt]=a,s[tn]=f,c){case"dialog":st("cancel",s),st("close",s);break;case"iframe":case"object":case"embed":st("load",s);break;case"video":case"audio":for(c=0;c<Ec.length;c++)st(Ec[c],s);break;case"source":st("error",s);break;case"img":case"image":case"link":st("error",s),st("load",s);break;case"details":st("toggle",s);break;case"input":st("invalid",s),nd(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":st("invalid",s);break;case"textarea":st("invalid",s),id(s,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||f.suppressHydrationWarning===!0||mN(s.textContent,c)?(f.popover!=null&&(st("beforetoggle",s),st("toggle",s)),f.onScroll!=null&&st("scroll",s),f.onScrollEnd!=null&&st("scrollend",s),f.onClick!=null&&(s.onclick=xa),s=!0):s=!1,s||Yi(a,!0)}function Qw(a){for(Hr=a.return;Hr;)switch(Hr.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:Hr=Hr.return}}function Mo(a){if(a!==Hr)return!1;if(!dt)return Qw(a),dt=!0,!1;var s=a.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||Rg(a.type,a.memoizedProps)),c=!c),c&&Ht&&Yi(a),Qw(a),s===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));Ht=NN(a)}else if(s===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));Ht=NN(a)}else s===27?(s=Ht,ls(a.type)?(a=zg,zg=null,Ht=a):Ht=s):Ht=Hr?ea(a.stateNode.nextSibling):null;return!0}function Ms(){Ht=Hr=null,dt=!1}function gp(){var a=Ki;return a!==null&&(jn===null?jn=a:jn.push.apply(jn,a),Ki=null),a}function ac(a){Ki===null?Ki=[a]:Ki.push(a)}var yp=L(null),Is=null,Ja=null;function Wi(a,s,c){ve(yp,s._currentValue),s._currentValue=c}function ei(a){a._currentValue=yp.current,W(yp)}function vp(a,s,c){for(;a!==null;){var f=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),a===c)break;a=a.return}}function xp(a,s,c,f){var y=a.child;for(y!==null&&(y.return=a);y!==null;){var v=y.dependencies;if(v!==null){var S=y.child;v=v.firstContext;e:for(;v!==null;){var T=v;v=y;for(var B=0;B<s.length;B++)if(T.context===s[B]){v.lanes|=c,T=v.alternate,T!==null&&(T.lanes|=c),vp(v.return,c,a),f||(S=null);break e}v=T.next}}else if(y.tag===18){if(S=y.return,S===null)throw Error(n(341));S.lanes|=c,v=S.alternate,v!==null&&(v.lanes|=c),vp(S,c,a),S=null}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===a){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}}function Io(a,s,c,f){a=null;for(var y=s,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var S=y.alternate;if(S===null)throw Error(n(387));if(S=S.memoizedProps,S!==null){var T=y.type;kn(y.pendingProps.value,S.value)||(a!==null?a.push(T):a=[T])}}else if(y===Ce.current){if(S=y.alternate,S===null)throw Error(n(387));S.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(a!==null?a.push(kc):a=[kc])}y=y.return}a!==null&&xp(s,a,c,f),s.flags|=262144}function gd(a){for(a=a.firstContext;a!==null;){if(!kn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ls(a){Is=a,Ja=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Fr(a){return Jw(Is,a)}function yd(a,s){return Is===null&&Ls(a),Jw(a,s)}function Jw(a,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Ja===null){if(a===null)throw Error(n(308));Ja=s,a.dependencies={lanes:0,firstContext:s},a.flags|=524288}else Ja=Ja.next=s;return c}var aP=typeof AbortController<"u"?AbortController:function(){var a=[],s=this.signal={aborted:!1,addEventListener:function(c,f){a.push(f)}};this.abort=function(){s.aborted=!0,a.forEach(function(c){return c()})}},iP=e.unstable_scheduleCallback,sP=e.unstable_NormalPriority,pr={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bp(){return{controller:new aP,data:new Map,refCount:0}}function ic(a){a.refCount--,a.refCount===0&&iP(sP,function(){a.controller.abort()})}var sc=null,wp=0,Lo=0,zo=null;function oP(a,s){if(sc===null){var c=sc=[];wp=0,Lo=_g(),zo={status:"pending",value:void 0,then:function(f){c.push(f)}}}return wp++,s.then(e1,e1),s}function e1(){if(--wp===0&&sc!==null){zo!==null&&(zo.status="fulfilled");var a=sc;sc=null,Lo=0,zo=null;for(var s=0;s<a.length;s++)(0,a[s])()}}function lP(a,s){var c=[],f={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return a.then(function(){f.status="fulfilled",f.value=s;for(var y=0;y<c.length;y++)(0,c[y])(s)},function(y){for(f.status="rejected",f.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),f}var t1=D.S;D.S=function(a,s){zj=tr(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&oP(a,s),t1!==null&&t1(a,s)};var zs=L(null);function jp(){var a=zs.current;return a!==null?a:It.pooledCache}function vd(a,s){s===null?ve(zs,zs.current):ve(zs,s.pool)}function r1(){var a=jp();return a===null?null:{parent:pr._currentValue,pool:a}}var Uo=Error(n(460)),Np=Error(n(474)),xd=Error(n(542)),bd={then:function(){}};function n1(a){return a=a.status,a==="fulfilled"||a==="rejected"}function a1(a,s,c){switch(c=a[c],c===void 0?a.push(s):c!==s&&(s.then(xa,xa),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,s1(a),a;default:if(typeof s.status=="string")s.then(xa,xa);else{if(a=It,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=s,a.status="pending",a.then(function(f){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=f}},function(f){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,s1(a),a}throw $s=s,Uo}}function Us(a){try{var s=a._init;return s(a._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?($s=c,Uo):c}}var $s=null;function i1(){if($s===null)throw Error(n(459));var a=$s;return $s=null,a}function s1(a){if(a===Uo||a===xd)throw Error(n(483))}var $o=null,oc=0;function wd(a){var s=oc;return oc+=1,$o===null&&($o=[]),a1($o,a,s)}function lc(a,s){s=s.props.ref,a.ref=s!==void 0?s:null}function jd(a,s){throw s.$$typeof===x?Error(n(525)):(a=Object.prototype.toString.call(s),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a)))}function o1(a){function s(Z,F){if(a){var ee=Z.deletions;ee===null?(Z.deletions=[F],Z.flags|=16):ee.push(F)}}function c(Z,F){if(!a)return null;for(;F!==null;)s(Z,F),F=F.sibling;return null}function f(Z){for(var F=new Map;Z!==null;)Z.key!==null?F.set(Z.key,Z):F.set(Z.index,Z),Z=Z.sibling;return F}function y(Z,F){return Z=Za(Z,F),Z.index=0,Z.sibling=null,Z}function v(Z,F,ee){return Z.index=ee,a?(ee=Z.alternate,ee!==null?(ee=ee.index,ee<F?(Z.flags|=67108866,F):ee):(Z.flags|=67108866,F)):(Z.flags|=1048576,F)}function S(Z){return a&&Z.alternate===null&&(Z.flags|=67108866),Z}function T(Z,F,ee,ye){return F===null||F.tag!==6?(F=dp(ee,Z.mode,ye),F.return=Z,F):(F=y(F,ee),F.return=Z,F)}function B(Z,F,ee,ye){var He=ee.type;return He===N?me(Z,F,ee.props.children,ye,ee.key):F!==null&&(F.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===Y&&Us(He)===F.type)?(F=y(F,ee.props),lc(F,ee),F.return=Z,F):(F=md(ee.type,ee.key,ee.props,null,Z.mode,ye),lc(F,ee),F.return=Z,F)}function te(Z,F,ee,ye){return F===null||F.tag!==4||F.stateNode.containerInfo!==ee.containerInfo||F.stateNode.implementation!==ee.implementation?(F=fp(ee,Z.mode,ye),F.return=Z,F):(F=y(F,ee.children||[]),F.return=Z,F)}function me(Z,F,ee,ye,He){return F===null||F.tag!==7?(F=Ps(ee,Z.mode,ye,He),F.return=Z,F):(F=y(F,ee),F.return=Z,F)}function xe(Z,F,ee){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=dp(""+F,Z.mode,ee),F.return=Z,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case b:return ee=md(F.type,F.key,F.props,null,Z.mode,ee),lc(ee,F),ee.return=Z,ee;case j:return F=fp(F,Z.mode,ee),F.return=Z,F;case Y:return F=Us(F),xe(Z,F,ee)}if(V(F)||U(F))return F=Ps(F,Z.mode,ee,null),F.return=Z,F;if(typeof F.then=="function")return xe(Z,wd(F),ee);if(F.$$typeof===A)return xe(Z,yd(Z,F),ee);jd(Z,F)}return null}function ie(Z,F,ee,ye){var He=F!==null?F.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return He!==null?null:T(Z,F,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return ee.key===He?B(Z,F,ee,ye):null;case j:return ee.key===He?te(Z,F,ee,ye):null;case Y:return ee=Us(ee),ie(Z,F,ee,ye)}if(V(ee)||U(ee))return He!==null?null:me(Z,F,ee,ye,null);if(typeof ee.then=="function")return ie(Z,F,wd(ee),ye);if(ee.$$typeof===A)return ie(Z,F,yd(Z,ee),ye);jd(Z,ee)}return null}function de(Z,F,ee,ye,He){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return Z=Z.get(ee)||null,T(F,Z,""+ye,He);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:return Z=Z.get(ye.key===null?ee:ye.key)||null,B(F,Z,ye,He);case j:return Z=Z.get(ye.key===null?ee:ye.key)||null,te(F,Z,ye,He);case Y:return ye=Us(ye),de(Z,F,ee,ye,He)}if(V(ye)||U(ye))return Z=Z.get(ee)||null,me(F,Z,ye,He,null);if(typeof ye.then=="function")return de(Z,F,ee,wd(ye),He);if(ye.$$typeof===A)return de(Z,F,ee,yd(F,ye),He);jd(F,ye)}return null}function Me(Z,F,ee,ye){for(var He=null,mt=null,ze=F,rt=F=0,lt=null;ze!==null&&rt<ee.length;rt++){ze.index>rt?(lt=ze,ze=null):lt=ze.sibling;var pt=ie(Z,ze,ee[rt],ye);if(pt===null){ze===null&&(ze=lt);break}a&&ze&&pt.alternate===null&&s(Z,ze),F=v(pt,F,rt),mt===null?He=pt:mt.sibling=pt,mt=pt,ze=lt}if(rt===ee.length)return c(Z,ze),dt&&Qa(Z,rt),He;if(ze===null){for(;rt<ee.length;rt++)ze=xe(Z,ee[rt],ye),ze!==null&&(F=v(ze,F,rt),mt===null?He=ze:mt.sibling=ze,mt=ze);return dt&&Qa(Z,rt),He}for(ze=f(ze);rt<ee.length;rt++)lt=de(ze,Z,rt,ee[rt],ye),lt!==null&&(a&&lt.alternate!==null&&ze.delete(lt.key===null?rt:lt.key),F=v(lt,F,rt),mt===null?He=lt:mt.sibling=lt,mt=lt);return a&&ze.forEach(function(hs){return s(Z,hs)}),dt&&Qa(Z,rt),He}function Ye(Z,F,ee,ye){if(ee==null)throw Error(n(151));for(var He=null,mt=null,ze=F,rt=F=0,lt=null,pt=ee.next();ze!==null&&!pt.done;rt++,pt=ee.next()){ze.index>rt?(lt=ze,ze=null):lt=ze.sibling;var hs=ie(Z,ze,pt.value,ye);if(hs===null){ze===null&&(ze=lt);break}a&&ze&&hs.alternate===null&&s(Z,ze),F=v(hs,F,rt),mt===null?He=hs:mt.sibling=hs,mt=hs,ze=lt}if(pt.done)return c(Z,ze),dt&&Qa(Z,rt),He;if(ze===null){for(;!pt.done;rt++,pt=ee.next())pt=xe(Z,pt.value,ye),pt!==null&&(F=v(pt,F,rt),mt===null?He=pt:mt.sibling=pt,mt=pt);return dt&&Qa(Z,rt),He}for(ze=f(ze);!pt.done;rt++,pt=ee.next())pt=de(ze,Z,rt,pt.value,ye),pt!==null&&(a&&pt.alternate!==null&&ze.delete(pt.key===null?rt:pt.key),F=v(pt,F,rt),mt===null?He=pt:mt.sibling=pt,mt=pt);return a&&ze.forEach(function(xM){return s(Z,xM)}),dt&&Qa(Z,rt),He}function Dt(Z,F,ee,ye){if(typeof ee=="object"&&ee!==null&&ee.type===N&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:e:{for(var He=ee.key;F!==null;){if(F.key===He){if(He=ee.type,He===N){if(F.tag===7){c(Z,F.sibling),ye=y(F,ee.props.children),ye.return=Z,Z=ye;break e}}else if(F.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===Y&&Us(He)===F.type){c(Z,F.sibling),ye=y(F,ee.props),lc(ye,ee),ye.return=Z,Z=ye;break e}c(Z,F);break}else s(Z,F);F=F.sibling}ee.type===N?(ye=Ps(ee.props.children,Z.mode,ye,ee.key),ye.return=Z,Z=ye):(ye=md(ee.type,ee.key,ee.props,null,Z.mode,ye),lc(ye,ee),ye.return=Z,Z=ye)}return S(Z);case j:e:{for(He=ee.key;F!==null;){if(F.key===He)if(F.tag===4&&F.stateNode.containerInfo===ee.containerInfo&&F.stateNode.implementation===ee.implementation){c(Z,F.sibling),ye=y(F,ee.children||[]),ye.return=Z,Z=ye;break e}else{c(Z,F);break}else s(Z,F);F=F.sibling}ye=fp(ee,Z.mode,ye),ye.return=Z,Z=ye}return S(Z);case Y:return ee=Us(ee),Dt(Z,F,ee,ye)}if(V(ee))return Me(Z,F,ee,ye);if(U(ee)){if(He=U(ee),typeof He!="function")throw Error(n(150));return ee=He.call(ee),Ye(Z,F,ee,ye)}if(typeof ee.then=="function")return Dt(Z,F,wd(ee),ye);if(ee.$$typeof===A)return Dt(Z,F,yd(Z,ee),ye);jd(Z,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,F!==null&&F.tag===6?(c(Z,F.sibling),ye=y(F,ee),ye.return=Z,Z=ye):(c(Z,F),ye=dp(ee,Z.mode,ye),ye.return=Z,Z=ye),S(Z)):c(Z,F)}return function(Z,F,ee,ye){try{oc=0;var He=Dt(Z,F,ee,ye);return $o=null,He}catch(ze){if(ze===Uo||ze===xd)throw ze;var mt=Dn(29,ze,null,Z.mode);return mt.lanes=ye,mt.return=Z,mt}finally{}}}var qs=o1(!0),l1=o1(!1),Xi=!1;function _p(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sp(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Zi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Qi(a,s,c){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(bt&2)!==0){var y=f.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),f.pending=s,s=hd(a),Fw(a,null,c),s}return fd(a,f,s,c),hd(a)}function cc(a,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var f=s.lanes;f&=a.pendingLanes,c|=f,s.lanes=c,_r(a,c)}}function Ep(a,s){var c=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var y=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var S={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?y=v=S:v=v.next=S,c=c.next}while(c!==null);v===null?y=v=s:v=v.next=s}else y=v=s;c={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:f.shared,callbacks:f.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=s:a.next=s,c.lastBaseUpdate=s}var Ap=!1;function uc(){if(Ap){var a=zo;if(a!==null)throw a}}function dc(a,s,c,f){Ap=!1;var y=a.updateQueue;Xi=!1;var v=y.firstBaseUpdate,S=y.lastBaseUpdate,T=y.shared.pending;if(T!==null){y.shared.pending=null;var B=T,te=B.next;B.next=null,S===null?v=te:S.next=te,S=B;var me=a.alternate;me!==null&&(me=me.updateQueue,T=me.lastBaseUpdate,T!==S&&(T===null?me.firstBaseUpdate=te:T.next=te,me.lastBaseUpdate=B))}if(v!==null){var xe=y.baseState;S=0,me=te=B=null,T=v;do{var ie=T.lane&-536870913,de=ie!==T.lane;if(de?(ot&ie)===ie:(f&ie)===ie){ie!==0&&ie===Lo&&(Ap=!0),me!==null&&(me=me.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Me=a,Ye=T;ie=s;var Dt=c;switch(Ye.tag){case 1:if(Me=Ye.payload,typeof Me=="function"){xe=Me.call(Dt,xe,ie);break e}xe=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Ye.payload,ie=typeof Me=="function"?Me.call(Dt,xe,ie):Me,ie==null)break e;xe=g({},xe,ie);break e;case 2:Xi=!0}}ie=T.callback,ie!==null&&(a.flags|=64,de&&(a.flags|=8192),de=y.callbacks,de===null?y.callbacks=[ie]:de.push(ie))}else de={lane:ie,tag:T.tag,payload:T.payload,callback:T.callback,next:null},me===null?(te=me=de,B=xe):me=me.next=de,S|=ie;if(T=T.next,T===null){if(T=y.shared.pending,T===null)break;de=T,T=de.next,de.next=null,y.lastBaseUpdate=de,y.shared.pending=null}}while(!0);me===null&&(B=xe),y.baseState=B,y.firstBaseUpdate=te,y.lastBaseUpdate=me,v===null&&(y.shared.lanes=0),ns|=S,a.lanes=S,a.memoizedState=xe}}function c1(a,s){if(typeof a!="function")throw Error(n(191,a));a.call(s)}function u1(a,s){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)c1(c[a],s)}var qo=L(null),Nd=L(0);function d1(a,s){a=ci,ve(Nd,a),ve(qo,s),ci=a|s.baseLanes}function Op(){ve(Nd,ci),ve(qo,qo.current)}function Cp(){ci=Nd.current,W(qo),W(Nd)}var Rn=L(null),Jn=null;function Ji(a){var s=a.alternate;ve(or,or.current&1),ve(Rn,a),Jn===null&&(s===null||qo.current!==null||s.memoizedState!==null)&&(Jn=a)}function Tp(a){ve(or,or.current),ve(Rn,a),Jn===null&&(Jn=a)}function f1(a){a.tag===22?(ve(or,or.current),ve(Rn,a),Jn===null&&(Jn=a)):es()}function es(){ve(or,or.current),ve(Rn,Rn.current)}function Pn(a){W(Rn),Jn===a&&(Jn=null),W(or)}var or=L(0);function _d(a){for(var s=a;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Ig(c)||Lg(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ti=0,et=null,Tt=null,gr=null,Sd=!1,Bo=!1,Bs=!1,Ed=0,fc=0,Go=null,cP=0;function rr(){throw Error(n(321))}function kp(a,s){if(s===null)return!1;for(var c=0;c<s.length&&c<a.length;c++)if(!kn(a[c],s[c]))return!1;return!0}function Dp(a,s,c,f,y,v){return ti=v,et=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,D.H=a===null||a.memoizedState===null?W1:Kp,Bs=!1,v=c(f,y),Bs=!1,Bo&&(v=m1(s,c,f,y)),h1(a),v}function h1(a){D.H=pc;var s=Tt!==null&&Tt.next!==null;if(ti=0,gr=Tt=et=null,Sd=!1,fc=0,Go=null,s)throw Error(n(300));a===null||yr||(a=a.dependencies,a!==null&&gd(a)&&(yr=!0))}function m1(a,s,c,f){et=a;var y=0;do{if(Bo&&(Go=null),fc=0,Bo=!1,25<=y)throw Error(n(301));if(y+=1,gr=Tt=null,a.updateQueue!=null){var v=a.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}D.H=X1,v=s(c,f)}while(Bo);return v}function uP(){var a=D.H,s=a.useState()[0];return s=typeof s.then=="function"?hc(s):s,a=a.useState()[0],(Tt!==null?Tt.memoizedState:null)!==a&&(et.flags|=1024),s}function Rp(){var a=Ed!==0;return Ed=0,a}function Pp(a,s,c){s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~c}function Mp(a){if(Sd){for(a=a.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}Sd=!1}ti=0,gr=Tt=et=null,Bo=!1,fc=Ed=0,Go=null}function un(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gr===null?et.memoizedState=gr=a:gr=gr.next=a,gr}function lr(){if(Tt===null){var a=et.alternate;a=a!==null?a.memoizedState:null}else a=Tt.next;var s=gr===null?et.memoizedState:gr.next;if(s!==null)gr=s,Tt=a;else{if(a===null)throw et.alternate===null?Error(n(467)):Error(n(310));Tt=a,a={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},gr===null?et.memoizedState=gr=a:gr=gr.next=a}return gr}function Ad(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hc(a){var s=fc;return fc+=1,Go===null&&(Go=[]),a=a1(Go,a,s),s=et,(gr===null?s.memoizedState:gr.next)===null&&(s=s.alternate,D.H=s===null||s.memoizedState===null?W1:Kp),a}function Od(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return hc(a);if(a.$$typeof===A)return Fr(a)}throw Error(n(438,String(a)))}function Ip(a){var s=null,c=et.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var f=et.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Ad(),et.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(a),f=0;f<a;f++)c[f]=H;return s.index++,c}function ri(a,s){return typeof s=="function"?s(a):s}function Cd(a){var s=lr();return Lp(s,Tt,a)}function Lp(a,s,c){var f=a.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=c;var y=a.baseQueue,v=f.pending;if(v!==null){if(y!==null){var S=y.next;y.next=v.next,v.next=S}s.baseQueue=y=v,f.pending=null}if(v=a.baseState,y===null)a.memoizedState=v;else{s=y.next;var T=S=null,B=null,te=s,me=!1;do{var xe=te.lane&-536870913;if(xe!==te.lane?(ot&xe)===xe:(ti&xe)===xe){var ie=te.revertLane;if(ie===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),xe===Lo&&(me=!0);else if((ti&ie)===ie){te=te.next,ie===Lo&&(me=!0);continue}else xe={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},B===null?(T=B=xe,S=v):B=B.next=xe,et.lanes|=ie,ns|=ie;xe=te.action,Bs&&c(v,xe),v=te.hasEagerState?te.eagerState:c(v,xe)}else ie={lane:xe,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},B===null?(T=B=ie,S=v):B=B.next=ie,et.lanes|=xe,ns|=xe;te=te.next}while(te!==null&&te!==s);if(B===null?S=v:B.next=T,!kn(v,a.memoizedState)&&(yr=!0,me&&(c=zo,c!==null)))throw c;a.memoizedState=v,a.baseState=S,a.baseQueue=B,f.lastRenderedState=v}return y===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function zp(a){var s=lr(),c=s.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=a;var f=c.dispatch,y=c.pending,v=s.memoizedState;if(y!==null){c.pending=null;var S=y=y.next;do v=a(v,S.action),S=S.next;while(S!==y);kn(v,s.memoizedState)||(yr=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),c.lastRenderedState=v}return[v,f]}function p1(a,s,c){var f=et,y=lr(),v=dt;if(v){if(c===void 0)throw Error(n(407));c=c()}else c=s();var S=!kn((Tt||y).memoizedState,c);if(S&&(y.memoizedState=c,yr=!0),y=y.queue,qp(v1.bind(null,f,y,a),[a]),y.getSnapshot!==s||S||gr!==null&&gr.memoizedState.tag&1){if(f.flags|=2048,Ho(9,{destroy:void 0},y1.bind(null,f,y,c,s),null),It===null)throw Error(n(349));v||(ti&127)!==0||g1(f,s,c)}return c}function g1(a,s,c){a.flags|=16384,a={getSnapshot:s,value:c},s=et.updateQueue,s===null?(s=Ad(),et.updateQueue=s,s.stores=[a]):(c=s.stores,c===null?s.stores=[a]:c.push(a))}function y1(a,s,c,f){s.value=c,s.getSnapshot=f,x1(s)&&b1(a)}function v1(a,s,c){return c(function(){x1(s)&&b1(a)})}function x1(a){var s=a.getSnapshot;a=a.value;try{var c=s();return!kn(a,c)}catch{return!0}}function b1(a){var s=Rs(a,2);s!==null&&Nn(s,a,2)}function Up(a){var s=un();if(typeof a=="function"){var c=a;if(a=c(),Bs){ct(!0);try{c()}finally{ct(!1)}}}return s.memoizedState=s.baseState=a,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:a},s}function w1(a,s,c,f){return a.baseState=c,Lp(a,Tt,typeof f=="function"?f:ri)}function dP(a,s,c,f,y){if(Dd(a))throw Error(n(485));if(a=s.action,a!==null){var v={payload:y,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};D.T!==null?c(!0):v.isTransition=!1,f(v),c=s.pending,c===null?(v.next=s.pending=v,j1(s,v)):(v.next=c.next,s.pending=c.next=v)}}function j1(a,s){var c=s.action,f=s.payload,y=a.state;if(s.isTransition){var v=D.T,S={};D.T=S;try{var T=c(y,f),B=D.S;B!==null&&B(S,T),N1(a,s,T)}catch(te){$p(a,s,te)}finally{v!==null&&S.types!==null&&(v.types=S.types),D.T=v}}else try{v=c(y,f),N1(a,s,v)}catch(te){$p(a,s,te)}}function N1(a,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){_1(a,s,f)},function(f){return $p(a,s,f)}):_1(a,s,c)}function _1(a,s,c){s.status="fulfilled",s.value=c,S1(s),a.state=c,s=a.pending,s!==null&&(c=s.next,c===s?a.pending=null:(c=c.next,s.next=c,j1(a,c)))}function $p(a,s,c){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=c,S1(s),s=s.next;while(s!==f)}a.action=null}function S1(a){a=a.listeners;for(var s=0;s<a.length;s++)(0,a[s])()}function E1(a,s){return s}function A1(a,s){if(dt){var c=It.formState;if(c!==null){e:{var f=et;if(dt){if(Ht){t:{for(var y=Ht,v=Qn;y.nodeType!==8;){if(!v){y=null;break t}if(y=ea(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){Ht=ea(y.nextSibling),f=y.data==="F!";break e}}Yi(f)}f=!1}f&&(s=c[0])}}return c=un(),c.memoizedState=c.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:E1,lastRenderedState:s},c.queue=f,c=V1.bind(null,et,f),f.dispatch=c,f=Up(!1),v=Vp.bind(null,et,!1,f.queue),f=un(),y={state:s,dispatch:null,action:a,pending:null},f.queue=y,c=dP.bind(null,et,y,v,c),y.dispatch=c,f.memoizedState=a,[s,c,!1]}function O1(a){var s=lr();return C1(s,Tt,a)}function C1(a,s,c){if(s=Lp(a,s,E1)[0],a=Cd(ri)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=hc(s)}catch(S){throw S===Uo?xd:S}else f=s;s=lr();var y=s.queue,v=y.dispatch;return c!==s.memoizedState&&(et.flags|=2048,Ho(9,{destroy:void 0},fP.bind(null,y,c),null)),[f,v,a]}function fP(a,s){a.action=s}function T1(a){var s=lr(),c=Tt;if(c!==null)return C1(s,c,a);lr(),s=s.memoizedState,c=lr();var f=c.queue.dispatch;return c.memoizedState=a,[s,f,!1]}function Ho(a,s,c,f){return a={tag:a,create:c,deps:f,inst:s,next:null},s=et.updateQueue,s===null&&(s=Ad(),et.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=a.next=a:(f=c.next,c.next=a,a.next=f,s.lastEffect=a),a}function k1(){return lr().memoizedState}function Td(a,s,c,f){var y=un();et.flags|=a,y.memoizedState=Ho(1|s,{destroy:void 0},c,f===void 0?null:f)}function kd(a,s,c,f){var y=lr();f=f===void 0?null:f;var v=y.memoizedState.inst;Tt!==null&&f!==null&&kp(f,Tt.memoizedState.deps)?y.memoizedState=Ho(s,v,c,f):(et.flags|=a,y.memoizedState=Ho(1|s,v,c,f))}function D1(a,s){Td(8390656,8,a,s)}function qp(a,s){kd(2048,8,a,s)}function hP(a){et.flags|=4;var s=et.updateQueue;if(s===null)s=Ad(),et.updateQueue=s,s.events=[a];else{var c=s.events;c===null?s.events=[a]:c.push(a)}}function R1(a){var s=lr().memoizedState;return hP({ref:s,nextImpl:a}),function(){if((bt&2)!==0)throw Error(n(440));return s.impl.apply(void 0,arguments)}}function P1(a,s){return kd(4,2,a,s)}function M1(a,s){return kd(4,4,a,s)}function I1(a,s){if(typeof s=="function"){a=a();var c=s(a);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function L1(a,s,c){c=c!=null?c.concat([a]):null,kd(4,4,I1.bind(null,s,a),c)}function Bp(){}function z1(a,s){var c=lr();s=s===void 0?null:s;var f=c.memoizedState;return s!==null&&kp(s,f[1])?f[0]:(c.memoizedState=[a,s],a)}function U1(a,s){var c=lr();s=s===void 0?null:s;var f=c.memoizedState;if(s!==null&&kp(s,f[1]))return f[0];if(f=a(),Bs){ct(!0);try{a()}finally{ct(!1)}}return c.memoizedState=[f,s],f}function Gp(a,s,c){return c===void 0||(ti&1073741824)!==0&&(ot&261930)===0?a.memoizedState=s:(a.memoizedState=c,a=$j(),et.lanes|=a,ns|=a,c)}function $1(a,s,c,f){return kn(c,s)?c:qo.current!==null?(a=Gp(a,c,f),kn(a,s)||(yr=!0),a):(ti&42)===0||(ti&1073741824)!==0&&(ot&261930)===0?(yr=!0,a.memoizedState=c):(a=$j(),et.lanes|=a,ns|=a,s)}function q1(a,s,c,f,y){var v=K.p;K.p=v!==0&&8>v?v:8;var S=D.T,T={};D.T=T,Vp(a,!1,s,c);try{var B=y(),te=D.S;if(te!==null&&te(T,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var me=lP(B,f);mc(a,s,me,Ln(a))}else mc(a,s,f,Ln(a))}catch(xe){mc(a,s,{then:function(){},status:"rejected",reason:xe},Ln())}finally{K.p=v,S!==null&&T.types!==null&&(S.types=T.types),D.T=S}}function mP(){}function Hp(a,s,c,f){if(a.tag!==5)throw Error(n(476));var y=B1(a).queue;q1(a,y,s,fe,c===null?mP:function(){return G1(a),c(f)})}function B1(a){var s=a.memoizedState;if(s!==null)return s;s={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:fe},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:c},next:null},a.memoizedState=s,a=a.alternate,a!==null&&(a.memoizedState=s),s}function G1(a){var s=B1(a);s.next===null&&(s=a.alternate.memoizedState),mc(a,s.next.queue,{},Ln())}function Fp(){return Fr(kc)}function H1(){return lr().memoizedState}function F1(){return lr().memoizedState}function pP(a){for(var s=a.return;s!==null;){switch(s.tag){case 24:case 3:var c=Ln();a=Zi(c);var f=Qi(s,a,c);f!==null&&(Nn(f,s,c),cc(f,s,c)),s={cache:bp()},a.payload=s;return}s=s.return}}function gP(a,s,c){var f=Ln();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Dd(a)?K1(s,c):(c=cp(a,s,c,f),c!==null&&(Nn(c,a,f),Y1(c,s,f)))}function V1(a,s,c){var f=Ln();mc(a,s,c,f)}function mc(a,s,c,f){var y={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Dd(a))K1(s,y);else{var v=a.alternate;if(a.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,T=v(S,c);if(y.hasEagerState=!0,y.eagerState=T,kn(T,S))return fd(a,s,y,0),It===null&&dd(),!1}catch{}finally{}if(c=cp(a,s,y,f),c!==null)return Nn(c,a,f),Y1(c,s,f),!0}return!1}function Vp(a,s,c,f){if(f={lane:2,revertLane:_g(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Dd(a)){if(s)throw Error(n(479))}else s=cp(a,c,f,2),s!==null&&Nn(s,a,2)}function Dd(a){var s=a.alternate;return a===et||s!==null&&s===et}function K1(a,s){Bo=Sd=!0;var c=a.pending;c===null?s.next=s:(s.next=c.next,c.next=s),a.pending=s}function Y1(a,s,c){if((c&4194048)!==0){var f=s.lanes;f&=a.pendingLanes,c|=f,s.lanes=c,_r(a,c)}}var pc={readContext:Fr,use:Od,useCallback:rr,useContext:rr,useEffect:rr,useImperativeHandle:rr,useLayoutEffect:rr,useInsertionEffect:rr,useMemo:rr,useReducer:rr,useRef:rr,useState:rr,useDebugValue:rr,useDeferredValue:rr,useTransition:rr,useSyncExternalStore:rr,useId:rr,useHostTransitionStatus:rr,useFormState:rr,useActionState:rr,useOptimistic:rr,useMemoCache:rr,useCacheRefresh:rr};pc.useEffectEvent=rr;var W1={readContext:Fr,use:Od,useCallback:function(a,s){return un().memoizedState=[a,s===void 0?null:s],a},useContext:Fr,useEffect:D1,useImperativeHandle:function(a,s,c){c=c!=null?c.concat([a]):null,Td(4194308,4,I1.bind(null,s,a),c)},useLayoutEffect:function(a,s){return Td(4194308,4,a,s)},useInsertionEffect:function(a,s){Td(4,2,a,s)},useMemo:function(a,s){var c=un();s=s===void 0?null:s;var f=a();if(Bs){ct(!0);try{a()}finally{ct(!1)}}return c.memoizedState=[f,s],f},useReducer:function(a,s,c){var f=un();if(c!==void 0){var y=c(s);if(Bs){ct(!0);try{c(s)}finally{ct(!1)}}}else y=s;return f.memoizedState=f.baseState=y,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:y},f.queue=a,a=a.dispatch=gP.bind(null,et,a),[f.memoizedState,a]},useRef:function(a){var s=un();return a={current:a},s.memoizedState=a},useState:function(a){a=Up(a);var s=a.queue,c=V1.bind(null,et,s);return s.dispatch=c,[a.memoizedState,c]},useDebugValue:Bp,useDeferredValue:function(a,s){var c=un();return Gp(c,a,s)},useTransition:function(){var a=Up(!1);return a=q1.bind(null,et,a.queue,!0,!1),un().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,s,c){var f=et,y=un();if(dt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=s(),It===null)throw Error(n(349));(ot&127)!==0||g1(f,s,c)}y.memoizedState=c;var v={value:c,getSnapshot:s};return y.queue=v,D1(v1.bind(null,f,v,a),[a]),f.flags|=2048,Ho(9,{destroy:void 0},y1.bind(null,f,v,c,s),null),c},useId:function(){var a=un(),s=It.identifierPrefix;if(dt){var c=La,f=Ia;c=(f&~(1<<32-Gt(f)-1)).toString(32)+c,s="_"+s+"R_"+c,c=Ed++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=cP++,s="_"+s+"r_"+c.toString(32)+"_";return a.memoizedState=s},useHostTransitionStatus:Fp,useFormState:A1,useActionState:A1,useOptimistic:function(a){var s=un();s.memoizedState=s.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=Vp.bind(null,et,!0,c),c.dispatch=s,[a,s]},useMemoCache:Ip,useCacheRefresh:function(){return un().memoizedState=pP.bind(null,et)},useEffectEvent:function(a){var s=un(),c={impl:a};return s.memoizedState=c,function(){if((bt&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}},Kp={readContext:Fr,use:Od,useCallback:z1,useContext:Fr,useEffect:qp,useImperativeHandle:L1,useInsertionEffect:P1,useLayoutEffect:M1,useMemo:U1,useReducer:Cd,useRef:k1,useState:function(){return Cd(ri)},useDebugValue:Bp,useDeferredValue:function(a,s){var c=lr();return $1(c,Tt.memoizedState,a,s)},useTransition:function(){var a=Cd(ri)[0],s=lr().memoizedState;return[typeof a=="boolean"?a:hc(a),s]},useSyncExternalStore:p1,useId:H1,useHostTransitionStatus:Fp,useFormState:O1,useActionState:O1,useOptimistic:function(a,s){var c=lr();return w1(c,Tt,a,s)},useMemoCache:Ip,useCacheRefresh:F1};Kp.useEffectEvent=R1;var X1={readContext:Fr,use:Od,useCallback:z1,useContext:Fr,useEffect:qp,useImperativeHandle:L1,useInsertionEffect:P1,useLayoutEffect:M1,useMemo:U1,useReducer:zp,useRef:k1,useState:function(){return zp(ri)},useDebugValue:Bp,useDeferredValue:function(a,s){var c=lr();return Tt===null?Gp(c,a,s):$1(c,Tt.memoizedState,a,s)},useTransition:function(){var a=zp(ri)[0],s=lr().memoizedState;return[typeof a=="boolean"?a:hc(a),s]},useSyncExternalStore:p1,useId:H1,useHostTransitionStatus:Fp,useFormState:T1,useActionState:T1,useOptimistic:function(a,s){var c=lr();return Tt!==null?w1(c,Tt,a,s):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:Ip,useCacheRefresh:F1};X1.useEffectEvent=R1;function Yp(a,s,c,f){s=a.memoizedState,c=c(f,s),c=c==null?s:g({},s,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var Wp={enqueueSetState:function(a,s,c){a=a._reactInternals;var f=Ln(),y=Zi(f);y.payload=s,c!=null&&(y.callback=c),s=Qi(a,y,f),s!==null&&(Nn(s,a,f),cc(s,a,f))},enqueueReplaceState:function(a,s,c){a=a._reactInternals;var f=Ln(),y=Zi(f);y.tag=1,y.payload=s,c!=null&&(y.callback=c),s=Qi(a,y,f),s!==null&&(Nn(s,a,f),cc(s,a,f))},enqueueForceUpdate:function(a,s){a=a._reactInternals;var c=Ln(),f=Zi(c);f.tag=2,s!=null&&(f.callback=s),s=Qi(a,f,c),s!==null&&(Nn(s,a,c),cc(s,a,c))}};function Z1(a,s,c,f,y,v,S){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,v,S):s.prototype&&s.prototype.isPureReactComponent?!tc(c,f)||!tc(y,v):!0}function Q1(a,s,c,f){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,f),s.state!==a&&Wp.enqueueReplaceState(s,s.state,null)}function Gs(a,s){var c=s;if("ref"in s){c={};for(var f in s)f!=="ref"&&(c[f]=s[f])}if(a=a.defaultProps){c===s&&(c=g({},c));for(var y in a)c[y]===void 0&&(c[y]=a[y])}return c}function J1(a){ud(a)}function ej(a){console.error(a)}function tj(a){ud(a)}function Rd(a,s){try{var c=a.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function rj(a,s,c){try{var f=a.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Xp(a,s,c){return c=Zi(c),c.tag=3,c.payload={element:null},c.callback=function(){Rd(a,s)},c}function nj(a){return a=Zi(a),a.tag=3,a}function aj(a,s,c,f){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var v=f.value;a.payload=function(){return y(v)},a.callback=function(){rj(s,c,f)}}var S=c.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(a.callback=function(){rj(s,c,f),typeof y!="function"&&(as===null?as=new Set([this]):as.add(this));var T=f.stack;this.componentDidCatch(f.value,{componentStack:T!==null?T:""})})}function yP(a,s,c,f,y){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=c.alternate,s!==null&&Io(s,c,y,!0),c=Rn.current,c!==null){switch(c.tag){case 31:case 13:return Jn===null?Fd():c.alternate===null&&nr===0&&(nr=3),c.flags&=-257,c.flags|=65536,c.lanes=y,f===bd?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([f]):s.add(f),wg(a,f,y)),!1;case 22:return c.flags|=65536,f===bd?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([f]):c.add(f)),wg(a,f,y)),!1}throw Error(n(435,c.tag))}return wg(a,f,y),Fd(),!1}if(dt)return s=Rn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,f!==pp&&(a=Error(n(422),{cause:f}),ac(Wn(a,c)))):(f!==pp&&(s=Error(n(423),{cause:f}),ac(Wn(s,c))),a=a.current.alternate,a.flags|=65536,y&=-y,a.lanes|=y,f=Wn(f,c),y=Xp(a.stateNode,f,y),Ep(a,y),nr!==4&&(nr=2)),!1;var v=Error(n(520),{cause:f});if(v=Wn(v,c),Nc===null?Nc=[v]:Nc.push(v),nr!==4&&(nr=2),s===null)return!0;f=Wn(f,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,a=y&-y,c.lanes|=a,a=Xp(c.stateNode,f,a),Ep(c,a),!1;case 1:if(s=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(as===null||!as.has(v))))return c.flags|=65536,y&=-y,c.lanes|=y,y=nj(y),aj(y,a,c,f),Ep(c,y),!1}c=c.return}while(c!==null);return!1}var Zp=Error(n(461)),yr=!1;function Vr(a,s,c,f){s.child=a===null?l1(s,null,c,f):qs(s,a.child,c,f)}function ij(a,s,c,f,y){c=c.render;var v=s.ref;if("ref"in f){var S={};for(var T in f)T!=="ref"&&(S[T]=f[T])}else S=f;return Ls(s),f=Dp(a,s,c,S,v,y),T=Rp(),a!==null&&!yr?(Pp(a,s,y),ni(a,s,y)):(dt&&T&&hp(s),s.flags|=1,Vr(a,s,f,y),s.child)}function sj(a,s,c,f,y){if(a===null){var v=c.type;return typeof v=="function"&&!up(v)&&v.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=v,oj(a,s,v,f,y)):(a=md(c.type,null,f,s,s.mode,y),a.ref=s.ref,a.return=s,s.child=a)}if(v=a.child,!ig(a,y)){var S=v.memoizedProps;if(c=c.compare,c=c!==null?c:tc,c(S,f)&&a.ref===s.ref)return ni(a,s,y)}return s.flags|=1,a=Za(v,f),a.ref=s.ref,a.return=s,s.child=a}function oj(a,s,c,f,y){if(a!==null){var v=a.memoizedProps;if(tc(v,f)&&a.ref===s.ref)if(yr=!1,s.pendingProps=f=v,ig(a,y))(a.flags&131072)!==0&&(yr=!0);else return s.lanes=a.lanes,ni(a,s,y)}return Qp(a,s,c,f,y)}function lj(a,s,c,f){var y=f.children,v=a!==null?a.memoizedState:null;if(a===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|c:c,a!==null){for(f=s.child=a.child,y=0;f!==null;)y=y|f.lanes|f.childLanes,f=f.sibling;f=y&~v}else f=0,s.child=null;return cj(a,s,v,c,f)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},a!==null&&vd(s,v!==null?v.cachePool:null),v!==null?d1(s,v):Op(),f1(s);else return f=s.lanes=536870912,cj(a,s,v!==null?v.baseLanes|c:c,c,f)}else v!==null?(vd(s,v.cachePool),d1(s,v),es(),s.memoizedState=null):(a!==null&&vd(s,null),Op(),es());return Vr(a,s,y,c),s.child}function gc(a,s){return a!==null&&a.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function cj(a,s,c,f,y){var v=jp();return v=v===null?null:{parent:pr._currentValue,pool:v},s.memoizedState={baseLanes:c,cachePool:v},a!==null&&vd(s,null),Op(),f1(s),a!==null&&Io(a,s,f,!0),s.childLanes=y,null}function Pd(a,s){return s=Id({mode:s.mode,children:s.children},a.mode),s.ref=a.ref,a.child=s,s.return=a,s}function uj(a,s,c){return qs(s,a.child,null,c),a=Pd(s,s.pendingProps),a.flags|=2,Pn(s),s.memoizedState=null,a}function vP(a,s,c){var f=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,a===null){if(dt){if(f.mode==="hidden")return a=Pd(s,f),s.lanes=536870912,gc(null,a);if(Tp(s),(a=Ht)?(a=jN(a,Qn),a=a!==null&&a.data==="&"?a:null,a!==null&&(s.memoizedState={dehydrated:a,treeContext:Vi!==null?{id:Ia,overflow:La}:null,retryLane:536870912,hydrationErrors:null},c=Kw(a),c.return=s,s.child=c,Hr=s,Ht=null)):a=null,a===null)throw Yi(s);return s.lanes=536870912,null}return Pd(s,f)}var v=a.memoizedState;if(v!==null){var S=v.dehydrated;if(Tp(s),y)if(s.flags&256)s.flags&=-257,s=uj(a,s,c);else if(s.memoizedState!==null)s.child=a.child,s.flags|=128,s=null;else throw Error(n(558));else if(yr||Io(a,s,c,!1),y=(c&a.childLanes)!==0,yr||y){if(f=It,f!==null&&(S=ln(f,c),S!==0&&S!==v.retryLane))throw v.retryLane=S,Rs(a,S),Nn(f,a,S),Zp;Fd(),s=uj(a,s,c)}else a=v.treeContext,Ht=ea(S.nextSibling),Hr=s,dt=!0,Ki=null,Qn=!1,a!==null&&Xw(s,a),s=Pd(s,f),s.flags|=4096;return s}return a=Za(a.child,{mode:f.mode,children:f.children}),a.ref=s.ref,s.child=a,a.return=s,a}function Md(a,s){var c=s.ref;if(c===null)a!==null&&a.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(a===null||a.ref!==c)&&(s.flags|=4194816)}}function Qp(a,s,c,f,y){return Ls(s),c=Dp(a,s,c,f,void 0,y),f=Rp(),a!==null&&!yr?(Pp(a,s,y),ni(a,s,y)):(dt&&f&&hp(s),s.flags|=1,Vr(a,s,c,y),s.child)}function dj(a,s,c,f,y,v){return Ls(s),s.updateQueue=null,c=m1(s,f,c,y),h1(a),f=Rp(),a!==null&&!yr?(Pp(a,s,v),ni(a,s,v)):(dt&&f&&hp(s),s.flags|=1,Vr(a,s,c,v),s.child)}function fj(a,s,c,f,y){if(Ls(s),s.stateNode===null){var v=Do,S=c.contextType;typeof S=="object"&&S!==null&&(v=Fr(S)),v=new c(f,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Wp,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=f,v.state=s.memoizedState,v.refs={},_p(s),S=c.contextType,v.context=typeof S=="object"&&S!==null?Fr(S):Do,v.state=s.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&(Yp(s,c,S,f),v.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&Wp.enqueueReplaceState(v,v.state,null),dc(s,f,v,y),uc(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(a===null){v=s.stateNode;var T=s.memoizedProps,B=Gs(c,T);v.props=B;var te=v.context,me=c.contextType;S=Do,typeof me=="object"&&me!==null&&(S=Fr(me));var xe=c.getDerivedStateFromProps;me=typeof xe=="function"||typeof v.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,me||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T||te!==S)&&Q1(s,v,f,S),Xi=!1;var ie=s.memoizedState;v.state=ie,dc(s,f,v,y),uc(),te=s.memoizedState,T||ie!==te||Xi?(typeof xe=="function"&&(Yp(s,c,xe,f),te=s.memoizedState),(B=Xi||Z1(s,c,B,f,ie,te,S))?(me||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=te),v.props=f,v.state=te,v.context=S,f=B):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{v=s.stateNode,Sp(a,s),S=s.memoizedProps,me=Gs(c,S),v.props=me,xe=s.pendingProps,ie=v.context,te=c.contextType,B=Do,typeof te=="object"&&te!==null&&(B=Fr(te)),T=c.getDerivedStateFromProps,(te=typeof T=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==xe||ie!==B)&&Q1(s,v,f,B),Xi=!1,ie=s.memoizedState,v.state=ie,dc(s,f,v,y),uc();var de=s.memoizedState;S!==xe||ie!==de||Xi||a!==null&&a.dependencies!==null&&gd(a.dependencies)?(typeof T=="function"&&(Yp(s,c,T,f),de=s.memoizedState),(me=Xi||Z1(s,c,me,f,ie,de,B)||a!==null&&a.dependencies!==null&&gd(a.dependencies))?(te||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(f,de,B),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(f,de,B)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===a.memoizedProps&&ie===a.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===a.memoizedProps&&ie===a.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=de),v.props=f,v.state=de,v.context=B,f=me):(typeof v.componentDidUpdate!="function"||S===a.memoizedProps&&ie===a.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===a.memoizedProps&&ie===a.memoizedState||(s.flags|=1024),f=!1)}return v=f,Md(a,s),f=(s.flags&128)!==0,v||f?(v=s.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,a!==null&&f?(s.child=qs(s,a.child,null,y),s.child=qs(s,null,c,y)):Vr(a,s,c,y),s.memoizedState=v.state,a=s.child):a=ni(a,s,y),a}function hj(a,s,c,f){return Ms(),s.flags|=256,Vr(a,s,c,f),s.child}var Jp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function eg(a){return{baseLanes:a,cachePool:r1()}}function tg(a,s,c){return a=a!==null?a.childLanes&~c:0,s&&(a|=In),a}function mj(a,s,c){var f=s.pendingProps,y=!1,v=(s.flags&128)!==0,S;if((S=v)||(S=a!==null&&a.memoizedState===null?!1:(or.current&2)!==0),S&&(y=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,a===null){if(dt){if(y?Ji(s):es(),(a=Ht)?(a=jN(a,Qn),a=a!==null&&a.data!=="&"?a:null,a!==null&&(s.memoizedState={dehydrated:a,treeContext:Vi!==null?{id:Ia,overflow:La}:null,retryLane:536870912,hydrationErrors:null},c=Kw(a),c.return=s,s.child=c,Hr=s,Ht=null)):a=null,a===null)throw Yi(s);return Lg(a)?s.lanes=32:s.lanes=536870912,null}var T=f.children;return f=f.fallback,y?(es(),y=s.mode,T=Id({mode:"hidden",children:T},y),f=Ps(f,y,c,null),T.return=s,f.return=s,T.sibling=f,s.child=T,f=s.child,f.memoizedState=eg(c),f.childLanes=tg(a,S,c),s.memoizedState=Jp,gc(null,f)):(Ji(s),rg(s,T))}var B=a.memoizedState;if(B!==null&&(T=B.dehydrated,T!==null)){if(v)s.flags&256?(Ji(s),s.flags&=-257,s=ng(a,s,c)):s.memoizedState!==null?(es(),s.child=a.child,s.flags|=128,s=null):(es(),T=f.fallback,y=s.mode,f=Id({mode:"visible",children:f.children},y),T=Ps(T,y,c,null),T.flags|=2,f.return=s,T.return=s,f.sibling=T,s.child=f,qs(s,a.child,null,c),f=s.child,f.memoizedState=eg(c),f.childLanes=tg(a,S,c),s.memoizedState=Jp,s=gc(null,f));else if(Ji(s),Lg(T)){if(S=T.nextSibling&&T.nextSibling.dataset,S)var te=S.dgst;S=te,f=Error(n(419)),f.stack="",f.digest=S,ac({value:f,source:null,stack:null}),s=ng(a,s,c)}else if(yr||Io(a,s,c,!1),S=(c&a.childLanes)!==0,yr||S){if(S=It,S!==null&&(f=ln(S,c),f!==0&&f!==B.retryLane))throw B.retryLane=f,Rs(a,f),Nn(S,a,f),Zp;Ig(T)||Fd(),s=ng(a,s,c)}else Ig(T)?(s.flags|=192,s.child=a.child,s=null):(a=B.treeContext,Ht=ea(T.nextSibling),Hr=s,dt=!0,Ki=null,Qn=!1,a!==null&&Xw(s,a),s=rg(s,f.children),s.flags|=4096);return s}return y?(es(),T=f.fallback,y=s.mode,B=a.child,te=B.sibling,f=Za(B,{mode:"hidden",children:f.children}),f.subtreeFlags=B.subtreeFlags&65011712,te!==null?T=Za(te,T):(T=Ps(T,y,c,null),T.flags|=2),T.return=s,f.return=s,f.sibling=T,s.child=f,gc(null,f),f=s.child,T=a.child.memoizedState,T===null?T=eg(c):(y=T.cachePool,y!==null?(B=pr._currentValue,y=y.parent!==B?{parent:B,pool:B}:y):y=r1(),T={baseLanes:T.baseLanes|c,cachePool:y}),f.memoizedState=T,f.childLanes=tg(a,S,c),s.memoizedState=Jp,gc(a.child,f)):(Ji(s),c=a.child,a=c.sibling,c=Za(c,{mode:"visible",children:f.children}),c.return=s,c.sibling=null,a!==null&&(S=s.deletions,S===null?(s.deletions=[a],s.flags|=16):S.push(a)),s.child=c,s.memoizedState=null,c)}function rg(a,s){return s=Id({mode:"visible",children:s},a.mode),s.return=a,a.child=s}function Id(a,s){return a=Dn(22,a,null,s),a.lanes=0,a}function ng(a,s,c){return qs(s,a.child,null,c),a=rg(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function pj(a,s,c){a.lanes|=s;var f=a.alternate;f!==null&&(f.lanes|=s),vp(a.return,s,c)}function ag(a,s,c,f,y,v){var S=a.memoizedState;S===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:y,treeForkCount:v}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=f,S.tail=c,S.tailMode=y,S.treeForkCount=v)}function gj(a,s,c){var f=s.pendingProps,y=f.revealOrder,v=f.tail;f=f.children;var S=or.current,T=(S&2)!==0;if(T?(S=S&1|2,s.flags|=128):S&=1,ve(or,S),Vr(a,s,f,c),f=dt?nc:0,!T&&a!==null&&(a.flags&128)!==0)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&pj(a,c,s);else if(a.tag===19)pj(a,c,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(y){case"forwards":for(c=s.child,y=null;c!==null;)a=c.alternate,a!==null&&_d(a)===null&&(y=c),c=c.sibling;c=y,c===null?(y=s.child,s.child=null):(y=c.sibling,c.sibling=null),ag(s,!1,y,c,v,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=s.child,s.child=null;y!==null;){if(a=y.alternate,a!==null&&_d(a)===null){s.child=y;break}a=y.sibling,y.sibling=c,c=y,y=a}ag(s,!0,c,null,v,f);break;case"together":ag(s,!1,null,null,void 0,f);break;default:s.memoizedState=null}return s.child}function ni(a,s,c){if(a!==null&&(s.dependencies=a.dependencies),ns|=s.lanes,(c&s.childLanes)===0)if(a!==null){if(Io(a,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(a!==null&&s.child!==a.child)throw Error(n(153));if(s.child!==null){for(a=s.child,c=Za(a,a.pendingProps),s.child=c,c.return=s;a.sibling!==null;)a=a.sibling,c=c.sibling=Za(a,a.pendingProps),c.return=s;c.sibling=null}return s.child}function ig(a,s){return(a.lanes&s)!==0?!0:(a=a.dependencies,!!(a!==null&&gd(a)))}function xP(a,s,c){switch(s.tag){case 3:at(s,s.stateNode.containerInfo),Wi(s,pr,a.memoizedState.cache),Ms();break;case 27:case 5:pe(s);break;case 4:at(s,s.stateNode.containerInfo);break;case 10:Wi(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Tp(s),null;break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(Ji(s),s.flags|=128,null):(c&s.child.childLanes)!==0?mj(a,s,c):(Ji(s),a=ni(a,s,c),a!==null?a.sibling:null);Ji(s);break;case 19:var y=(a.flags&128)!==0;if(f=(c&s.childLanes)!==0,f||(Io(a,s,c,!1),f=(c&s.childLanes)!==0),y){if(f)return gj(a,s,c);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ve(or,or.current),f)break;return null;case 22:return s.lanes=0,lj(a,s,c,s.pendingProps);case 24:Wi(s,pr,a.memoizedState.cache)}return ni(a,s,c)}function yj(a,s,c){if(a!==null)if(a.memoizedProps!==s.pendingProps)yr=!0;else{if(!ig(a,c)&&(s.flags&128)===0)return yr=!1,xP(a,s,c);yr=(a.flags&131072)!==0}else yr=!1,dt&&(s.flags&1048576)!==0&&Ww(s,nc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var f=s.pendingProps;if(a=Us(s.elementType),s.type=a,typeof a=="function")up(a)?(f=Gs(a,f),s.tag=1,s=fj(null,s,a,f,c)):(s.tag=0,s=Qp(null,s,a,f,c));else{if(a!=null){var y=a.$$typeof;if(y===I){s.tag=11,s=ij(null,s,a,f,c);break e}else if(y===P){s.tag=14,s=sj(null,s,a,f,c);break e}}throw s=G(a)||a,Error(n(306,s,""))}}return s;case 0:return Qp(a,s,s.type,s.pendingProps,c);case 1:return f=s.type,y=Gs(f,s.pendingProps),fj(a,s,f,y,c);case 3:e:{if(at(s,s.stateNode.containerInfo),a===null)throw Error(n(387));f=s.pendingProps;var v=s.memoizedState;y=v.element,Sp(a,s),dc(s,f,null,c);var S=s.memoizedState;if(f=S.cache,Wi(s,pr,f),f!==v.cache&&xp(s,[pr],c,!0),uc(),f=S.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=hj(a,s,f,c);break e}else if(f!==y){y=Wn(Error(n(424)),s),ac(y),s=hj(a,s,f,c);break e}else{switch(a=s.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Ht=ea(a.firstChild),Hr=s,dt=!0,Ki=null,Qn=!0,c=l1(s,null,f,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Ms(),f===y){s=ni(a,s,c);break e}Vr(a,s,f,c)}s=s.child}return s;case 26:return Md(a,s),a===null?(c=ON(s.type,null,s.pendingProps,null))?s.memoizedState=c:dt||(c=s.type,a=s.pendingProps,f=Qd(Ee.current).createElement(c),f[jt]=s,f[tn]=a,Kr(f,c,a),hr(f),s.stateNode=f):s.memoizedState=ON(s.type,a.memoizedProps,s.pendingProps,a.memoizedState),null;case 27:return pe(s),a===null&&dt&&(f=s.stateNode=SN(s.type,s.pendingProps,Ee.current),Hr=s,Qn=!0,y=Ht,ls(s.type)?(zg=y,Ht=ea(f.firstChild)):Ht=y),Vr(a,s,s.pendingProps.children,c),Md(a,s),a===null&&(s.flags|=4194304),s.child;case 5:return a===null&&dt&&((y=f=Ht)&&(f=WP(f,s.type,s.pendingProps,Qn),f!==null?(s.stateNode=f,Hr=s,Ht=ea(f.firstChild),Qn=!1,y=!0):y=!1),y||Yi(s)),pe(s),y=s.type,v=s.pendingProps,S=a!==null?a.memoizedProps:null,f=v.children,Rg(y,v)?f=null:S!==null&&Rg(y,S)&&(s.flags|=32),s.memoizedState!==null&&(y=Dp(a,s,uP,null,null,c),kc._currentValue=y),Md(a,s),Vr(a,s,f,c),s.child;case 6:return a===null&&dt&&((a=c=Ht)&&(c=XP(c,s.pendingProps,Qn),c!==null?(s.stateNode=c,Hr=s,Ht=null,a=!0):a=!1),a||Yi(s)),null;case 13:return mj(a,s,c);case 4:return at(s,s.stateNode.containerInfo),f=s.pendingProps,a===null?s.child=qs(s,null,f,c):Vr(a,s,f,c),s.child;case 11:return ij(a,s,s.type,s.pendingProps,c);case 7:return Vr(a,s,s.pendingProps,c),s.child;case 8:return Vr(a,s,s.pendingProps.children,c),s.child;case 12:return Vr(a,s,s.pendingProps.children,c),s.child;case 10:return f=s.pendingProps,Wi(s,s.type,f.value),Vr(a,s,f.children,c),s.child;case 9:return y=s.type._context,f=s.pendingProps.children,Ls(s),y=Fr(y),f=f(y),s.flags|=1,Vr(a,s,f,c),s.child;case 14:return sj(a,s,s.type,s.pendingProps,c);case 15:return oj(a,s,s.type,s.pendingProps,c);case 19:return gj(a,s,c);case 31:return vP(a,s,c);case 22:return lj(a,s,c,s.pendingProps);case 24:return Ls(s),f=Fr(pr),a===null?(y=jp(),y===null&&(y=It,v=bp(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=c),y=v),s.memoizedState={parent:f,cache:y},_p(s),Wi(s,pr,y)):((a.lanes&c)!==0&&(Sp(a,s),dc(s,null,null,c),uc()),y=a.memoizedState,v=s.memoizedState,y.parent!==f?(y={parent:f,cache:f},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Wi(s,pr,f)):(f=v.cache,Wi(s,pr,f),f!==y.cache&&xp(s,[pr],c,!0))),Vr(a,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function ai(a){a.flags|=4}function sg(a,s,c,f,y){if((s=(a.mode&32)!==0)&&(s=!1),s){if(a.flags|=16777216,(y&335544128)===y)if(a.stateNode.complete)a.flags|=8192;else if(Hj())a.flags|=8192;else throw $s=bd,Np}else a.flags&=-16777217}function vj(a,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!RN(s))if(Hj())a.flags|=8192;else throw $s=bd,Np}function Ld(a,s){s!==null&&(a.flags|=4),a.flags&16384&&(s=a.tag!==22?sr():536870912,a.lanes|=s,Yo|=s)}function yc(a,s){if(!dt)switch(a.tailMode){case"hidden":s=a.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function Ft(a){var s=a.alternate!==null&&a.alternate.child===a.child,c=0,f=0;if(s)for(var y=a.child;y!==null;)c|=y.lanes|y.childLanes,f|=y.subtreeFlags&65011712,f|=y.flags&65011712,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)c|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=f,a.childLanes=c,s}function bP(a,s,c){var f=s.pendingProps;switch(mp(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(s),null;case 1:return Ft(s),null;case 3:return c=s.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),ei(pr),z(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(Mo(s)?ai(s):a===null||a.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,gp())),Ft(s),null;case 26:var y=s.type,v=s.memoizedState;return a===null?(ai(s),v!==null?(Ft(s),vj(s,v)):(Ft(s),sg(s,y,null,f,c))):v?v!==a.memoizedState?(ai(s),Ft(s),vj(s,v)):(Ft(s),s.flags&=-16777217):(a=a.memoizedProps,a!==f&&ai(s),Ft(s),sg(s,y,a,f,c)),null;case 27:if(ue(s),c=Ee.current,y=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==f&&ai(s);else{if(!f){if(s.stateNode===null)throw Error(n(166));return Ft(s),null}a=be.current,Mo(s)?Zw(s):(a=SN(y,f,c),s.stateNode=a,ai(s))}return Ft(s),null;case 5:if(ue(s),y=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==f&&ai(s);else{if(!f){if(s.stateNode===null)throw Error(n(166));return Ft(s),null}if(v=be.current,Mo(s))Zw(s);else{var S=Qd(Ee.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof f.is=="string"?S.createElement("select",{is:f.is}):S.createElement("select"),f.multiple?v.multiple=!0:f.size&&(v.size=f.size);break;default:v=typeof f.is=="string"?S.createElement(y,{is:f.is}):S.createElement(y)}}v[jt]=s,v[tn]=f;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=v;e:switch(Kr(v,y,f),y){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&ai(s)}}return Ft(s),sg(s,s.type,a===null?null:a.memoizedProps,s.pendingProps,c),null;case 6:if(a&&s.stateNode!=null)a.memoizedProps!==f&&ai(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(n(166));if(a=Ee.current,Mo(s)){if(a=s.stateNode,c=s.memoizedProps,f=null,y=Hr,y!==null)switch(y.tag){case 27:case 5:f=y.memoizedProps}a[jt]=s,a=!!(a.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||mN(a.nodeValue,c)),a||Yi(s,!0)}else a=Qd(a).createTextNode(f),a[jt]=s,s.stateNode=a}return Ft(s),null;case 31:if(c=s.memoizedState,a===null||a.memoizedState!==null){if(f=Mo(s),c!==null){if(a===null){if(!f)throw Error(n(318));if(a=s.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[jt]=s}else Ms(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ft(s),a=!1}else c=gp(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=c),a=!0;if(!a)return s.flags&256?(Pn(s),s):(Pn(s),null);if((s.flags&128)!==0)throw Error(n(558))}return Ft(s),null;case 13:if(f=s.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(y=Mo(s),f!==null&&f.dehydrated!==null){if(a===null){if(!y)throw Error(n(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[jt]=s}else Ms(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ft(s),y=!1}else y=gp(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(Pn(s),s):(Pn(s),null)}return Pn(s),(s.flags&128)!==0?(s.lanes=c,s):(c=f!==null,a=a!==null&&a.memoizedState!==null,c&&(f=s.child,y=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(y=f.alternate.memoizedState.cachePool.pool),v=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(v=f.memoizedState.cachePool.pool),v!==y&&(f.flags|=2048)),c!==a&&c&&(s.child.flags|=8192),Ld(s,s.updateQueue),Ft(s),null);case 4:return z(),a===null&&Og(s.stateNode.containerInfo),Ft(s),null;case 10:return ei(s.type),Ft(s),null;case 19:if(W(or),f=s.memoizedState,f===null)return Ft(s),null;if(y=(s.flags&128)!==0,v=f.rendering,v===null)if(y)yc(f,!1);else{if(nr!==0||a!==null&&(a.flags&128)!==0)for(a=s.child;a!==null;){if(v=_d(a),v!==null){for(s.flags|=128,yc(f,!1),a=v.updateQueue,s.updateQueue=a,Ld(s,a),s.subtreeFlags=0,a=c,c=s.child;c!==null;)Vw(c,a),c=c.sibling;return ve(or,or.current&1|2),dt&&Qa(s,f.treeForkCount),s.child}a=a.sibling}f.tail!==null&&tr()>Bd&&(s.flags|=128,y=!0,yc(f,!1),s.lanes=4194304)}else{if(!y)if(a=_d(v),a!==null){if(s.flags|=128,y=!0,a=a.updateQueue,s.updateQueue=a,Ld(s,a),yc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!v.alternate&&!dt)return Ft(s),null}else 2*tr()-f.renderingStartTime>Bd&&c!==536870912&&(s.flags|=128,y=!0,yc(f,!1),s.lanes=4194304);f.isBackwards?(v.sibling=s.child,s.child=v):(a=f.last,a!==null?a.sibling=v:s.child=v,f.last=v)}return f.tail!==null?(a=f.tail,f.rendering=a,f.tail=a.sibling,f.renderingStartTime=tr(),a.sibling=null,c=or.current,ve(or,y?c&1|2:c&1),dt&&Qa(s,f.treeForkCount),a):(Ft(s),null);case 22:case 23:return Pn(s),Cp(),f=s.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(c&536870912)!==0&&(s.flags&128)===0&&(Ft(s),s.subtreeFlags&6&&(s.flags|=8192)):Ft(s),c=s.updateQueue,c!==null&&Ld(s,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==c&&(s.flags|=2048),a!==null&&W(zs),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ei(pr),Ft(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function wP(a,s){switch(mp(s),s.tag){case 1:return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return ei(pr),z(),a=s.flags,(a&65536)!==0&&(a&128)===0?(s.flags=a&-65537|128,s):null;case 26:case 27:case 5:return ue(s),null;case 31:if(s.memoizedState!==null){if(Pn(s),s.alternate===null)throw Error(n(340));Ms()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 13:if(Pn(s),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Ms()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return W(or),null;case 4:return z(),null;case 10:return ei(s.type),null;case 22:case 23:return Pn(s),Cp(),a!==null&&W(zs),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 24:return ei(pr),null;case 25:return null;default:return null}}function xj(a,s){switch(mp(s),s.tag){case 3:ei(pr),z();break;case 26:case 27:case 5:ue(s);break;case 4:z();break;case 31:s.memoizedState!==null&&Pn(s);break;case 13:Pn(s);break;case 19:W(or);break;case 10:ei(s.type);break;case 22:case 23:Pn(s),Cp(),a!==null&&W(zs);break;case 24:ei(pr)}}function vc(a,s){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var y=f.next;c=y;do{if((c.tag&a)===a){f=void 0;var v=c.create,S=c.inst;f=v(),S.destroy=f}c=c.next}while(c!==y)}}catch(T){Et(s,s.return,T)}}function ts(a,s,c){try{var f=s.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var v=y.next;f=v;do{if((f.tag&a)===a){var S=f.inst,T=S.destroy;if(T!==void 0){S.destroy=void 0,y=s;var B=c,te=T;try{te()}catch(me){Et(y,B,me)}}}f=f.next}while(f!==v)}}catch(me){Et(s,s.return,me)}}function bj(a){var s=a.updateQueue;if(s!==null){var c=a.stateNode;try{u1(s,c)}catch(f){Et(a,a.return,f)}}}function wj(a,s,c){c.props=Gs(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(f){Et(a,s,f)}}function xc(a,s){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof c=="function"?a.refCleanup=c(f):c.current=f}}catch(y){Et(a,s,y)}}function za(a,s){var c=a.ref,f=a.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(y){Et(a,s,y)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){Et(a,s,y)}else c.current=null}function jj(a){var s=a.type,c=a.memoizedProps,f=a.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(y){Et(a,a.return,y)}}function og(a,s,c){try{var f=a.stateNode;GP(f,a.type,c,s),f[tn]=s}catch(y){Et(a,a.return,y)}}function Nj(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&ls(a.type)||a.tag===4}function lg(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Nj(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&ls(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function cg(a,s,c){var f=a.tag;if(f===5||f===6)a=a.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(a),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=xa));else if(f!==4&&(f===27&&ls(a.type)&&(c=a.stateNode,s=null),a=a.child,a!==null))for(cg(a,s,c),a=a.sibling;a!==null;)cg(a,s,c),a=a.sibling}function zd(a,s,c){var f=a.tag;if(f===5||f===6)a=a.stateNode,s?c.insertBefore(a,s):c.appendChild(a);else if(f!==4&&(f===27&&ls(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(zd(a,s,c),a=a.sibling;a!==null;)zd(a,s,c),a=a.sibling}function _j(a){var s=a.stateNode,c=a.memoizedProps;try{for(var f=a.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);Kr(s,f,c),s[jt]=a,s[tn]=c}catch(v){Et(a,a.return,v)}}var ii=!1,vr=!1,ug=!1,Sj=typeof WeakSet=="function"?WeakSet:Set,Mr=null;function jP(a,s){if(a=a.containerInfo,kg=sf,a=Lw(a),np(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var y=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var S=0,T=-1,B=-1,te=0,me=0,xe=a,ie=null;t:for(;;){for(var de;xe!==c||y!==0&&xe.nodeType!==3||(T=S+y),xe!==v||f!==0&&xe.nodeType!==3||(B=S+f),xe.nodeType===3&&(S+=xe.nodeValue.length),(de=xe.firstChild)!==null;)ie=xe,xe=de;for(;;){if(xe===a)break t;if(ie===c&&++te===y&&(T=S),ie===v&&++me===f&&(B=S),(de=xe.nextSibling)!==null)break;xe=ie,ie=xe.parentNode}xe=de}c=T===-1||B===-1?null:{start:T,end:B}}else c=null}c=c||{start:0,end:0}}else c=null;for(Dg={focusedElem:a,selectionRange:c},sf=!1,Mr=s;Mr!==null;)if(s=Mr,a=s.child,(s.subtreeFlags&1028)!==0&&a!==null)a.return=s,Mr=a;else for(;Mr!==null;){switch(s=Mr,v=s.alternate,a=s.flags,s.tag){case 0:if((a&4)!==0&&(a=s.updateQueue,a=a!==null?a.events:null,a!==null))for(c=0;c<a.length;c++)y=a[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&v!==null){a=void 0,c=s,y=v.memoizedProps,v=v.memoizedState,f=c.stateNode;try{var Me=Gs(c.type,y);a=f.getSnapshotBeforeUpdate(Me,v),f.__reactInternalSnapshotBeforeUpdate=a}catch(Ye){Et(c,c.return,Ye)}}break;case 3:if((a&1024)!==0){if(a=s.stateNode.containerInfo,c=a.nodeType,c===9)Mg(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Mg(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=s.sibling,a!==null){a.return=s.return,Mr=a;break}Mr=s.return}}function Ej(a,s,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:oi(a,c),f&4&&vc(5,c);break;case 1:if(oi(a,c),f&4)if(a=c.stateNode,s===null)try{a.componentDidMount()}catch(S){Et(c,c.return,S)}else{var y=Gs(c.type,s.memoizedProps);s=s.memoizedState;try{a.componentDidUpdate(y,s,a.__reactInternalSnapshotBeforeUpdate)}catch(S){Et(c,c.return,S)}}f&64&&bj(c),f&512&&xc(c,c.return);break;case 3:if(oi(a,c),f&64&&(a=c.updateQueue,a!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{u1(a,s)}catch(S){Et(c,c.return,S)}}break;case 27:s===null&&f&4&&_j(c);case 26:case 5:oi(a,c),s===null&&f&4&&jj(c),f&512&&xc(c,c.return);break;case 12:oi(a,c);break;case 31:oi(a,c),f&4&&Cj(a,c);break;case 13:oi(a,c),f&4&&Tj(a,c),f&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=kP.bind(null,c),ZP(a,c))));break;case 22:if(f=c.memoizedState!==null||ii,!f){s=s!==null&&s.memoizedState!==null||vr,y=ii;var v=vr;ii=f,(vr=s)&&!v?li(a,c,(c.subtreeFlags&8772)!==0):oi(a,c),ii=y,vr=v}break;case 30:break;default:oi(a,c)}}function Aj(a){var s=a.alternate;s!==null&&(a.alternate=null,Aj(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&Fl(s)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Yt=null,xn=!1;function si(a,s,c){for(c=c.child;c!==null;)Oj(a,s,c),c=c.sibling}function Oj(a,s,c){if(we&&typeof we.onCommitFiberUnmount=="function")try{we.onCommitFiberUnmount(fr,c)}catch{}switch(c.tag){case 26:vr||za(c,s),si(a,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:vr||za(c,s);var f=Yt,y=xn;ls(c.type)&&(Yt=c.stateNode,xn=!1),si(a,s,c),Oc(c.stateNode),Yt=f,xn=y;break;case 5:vr||za(c,s);case 6:if(f=Yt,y=xn,Yt=null,si(a,s,c),Yt=f,xn=y,Yt!==null)if(xn)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(c.stateNode)}catch(v){Et(c,s,v)}else try{Yt.removeChild(c.stateNode)}catch(v){Et(c,s,v)}break;case 18:Yt!==null&&(xn?(a=Yt,bN(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),rl(a)):bN(Yt,c.stateNode));break;case 4:f=Yt,y=xn,Yt=c.stateNode.containerInfo,xn=!0,si(a,s,c),Yt=f,xn=y;break;case 0:case 11:case 14:case 15:ts(2,c,s),vr||ts(4,c,s),si(a,s,c);break;case 1:vr||(za(c,s),f=c.stateNode,typeof f.componentWillUnmount=="function"&&wj(c,s,f)),si(a,s,c);break;case 21:si(a,s,c);break;case 22:vr=(f=vr)||c.memoizedState!==null,si(a,s,c),vr=f;break;default:si(a,s,c)}}function Cj(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{rl(a)}catch(c){Et(s,s.return,c)}}}function Tj(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{rl(a)}catch(c){Et(s,s.return,c)}}function NP(a){switch(a.tag){case 31:case 13:case 19:var s=a.stateNode;return s===null&&(s=a.stateNode=new Sj),s;case 22:return a=a.stateNode,s=a._retryCache,s===null&&(s=a._retryCache=new Sj),s;default:throw Error(n(435,a.tag))}}function Ud(a,s){var c=NP(a);s.forEach(function(f){if(!c.has(f)){c.add(f);var y=DP.bind(null,a,f);f.then(y,y)}})}function bn(a,s){var c=s.deletions;if(c!==null)for(var f=0;f<c.length;f++){var y=c[f],v=a,S=s,T=S;e:for(;T!==null;){switch(T.tag){case 27:if(ls(T.type)){Yt=T.stateNode,xn=!1;break e}break;case 5:Yt=T.stateNode,xn=!1;break e;case 3:case 4:Yt=T.stateNode.containerInfo,xn=!0;break e}T=T.return}if(Yt===null)throw Error(n(160));Oj(v,S,y),Yt=null,xn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)kj(s,a),s=s.sibling}var wa=null;function kj(a,s){var c=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:bn(s,a),wn(a),f&4&&(ts(3,a,a.return),vc(3,a),ts(5,a,a.return));break;case 1:bn(s,a),wn(a),f&512&&(vr||c===null||za(c,c.return)),f&64&&ii&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var y=wa;if(bn(s,a),wn(a),f&512&&(vr||c===null||za(c,c.return)),f&4){var v=c!==null?c.memoizedState:null;if(f=a.memoizedState,c===null)if(f===null)if(a.stateNode===null){e:{f=a.type,c=a.memoizedProps,y=y.ownerDocument||y;t:switch(f){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Cs]||v[jt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(f),y.head.insertBefore(v,y.querySelector("head > title"))),Kr(v,f,c),v[jt]=a,hr(v),f=v;break e;case"link":var S=kN("link","href",y).get(f+(c.href||""));if(S){for(var T=0;T<S.length;T++)if(v=S[T],v.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){S.splice(T,1);break t}}v=y.createElement(f),Kr(v,f,c),y.head.appendChild(v);break;case"meta":if(S=kN("meta","content",y).get(f+(c.content||""))){for(T=0;T<S.length;T++)if(v=S[T],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){S.splice(T,1);break t}}v=y.createElement(f),Kr(v,f,c),y.head.appendChild(v);break;default:throw Error(n(468,f))}v[jt]=a,hr(v),f=v}a.stateNode=f}else DN(y,a.type,a.stateNode);else a.stateNode=TN(y,f,a.memoizedProps);else v!==f?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,f===null?DN(y,a.type,a.stateNode):TN(y,f,a.memoizedProps)):f===null&&a.stateNode!==null&&og(a,a.memoizedProps,c.memoizedProps)}break;case 27:bn(s,a),wn(a),f&512&&(vr||c===null||za(c,c.return)),c!==null&&f&4&&og(a,a.memoizedProps,c.memoizedProps);break;case 5:if(bn(s,a),wn(a),f&512&&(vr||c===null||za(c,c.return)),a.flags&32){y=a.stateNode;try{Fi(y,"")}catch(Me){Et(a,a.return,Me)}}f&4&&a.stateNode!=null&&(y=a.memoizedProps,og(a,y,c!==null?c.memoizedProps:y)),f&1024&&(ug=!0);break;case 6:if(bn(s,a),wn(a),f&4){if(a.stateNode===null)throw Error(n(162));f=a.memoizedProps,c=a.stateNode;try{c.nodeValue=f}catch(Me){Et(a,a.return,Me)}}break;case 3:if(tf=null,y=wa,wa=Jd(s.containerInfo),bn(s,a),wa=y,wn(a),f&4&&c!==null&&c.memoizedState.isDehydrated)try{rl(s.containerInfo)}catch(Me){Et(a,a.return,Me)}ug&&(ug=!1,Dj(a));break;case 4:f=wa,wa=Jd(a.stateNode.containerInfo),bn(s,a),wn(a),wa=f;break;case 12:bn(s,a),wn(a);break;case 31:bn(s,a),wn(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Ud(a,f)));break;case 13:bn(s,a),wn(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(qd=tr()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Ud(a,f)));break;case 22:y=a.memoizedState!==null;var B=c!==null&&c.memoizedState!==null,te=ii,me=vr;if(ii=te||y,vr=me||B,bn(s,a),vr=me,ii=te,wn(a),f&8192)e:for(s=a.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(c===null||B||ii||vr||Hs(a)),c=null,s=a;;){if(s.tag===5||s.tag===26){if(c===null){B=c=s;try{if(v=B.stateNode,y)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{T=B.stateNode;var xe=B.memoizedProps.style,ie=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;T.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(Me){Et(B,B.return,Me)}}}else if(s.tag===6){if(c===null){B=s;try{B.stateNode.nodeValue=y?"":B.memoizedProps}catch(Me){Et(B,B.return,Me)}}}else if(s.tag===18){if(c===null){B=s;try{var de=B.stateNode;y?wN(de,!0):wN(B.stateNode,!1)}catch(Me){Et(B,B.return,Me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===a)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=a.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Ud(a,c))));break;case 19:bn(s,a),wn(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Ud(a,f)));break;case 30:break;case 21:break;default:bn(s,a),wn(a)}}function wn(a){var s=a.flags;if(s&2){try{for(var c,f=a.return;f!==null;){if(Nj(f)){c=f;break}f=f.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var y=c.stateNode,v=lg(a);zd(a,v,y);break;case 5:var S=c.stateNode;c.flags&32&&(Fi(S,""),c.flags&=-33);var T=lg(a);zd(a,T,S);break;case 3:case 4:var B=c.stateNode.containerInfo,te=lg(a);cg(a,te,B);break;default:throw Error(n(161))}}catch(me){Et(a,a.return,me)}a.flags&=-3}s&4096&&(a.flags&=-4097)}function Dj(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var s=a;Dj(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),a=a.sibling}}function oi(a,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Ej(a,s.alternate,s),s=s.sibling}function Hs(a){for(a=a.child;a!==null;){var s=a;switch(s.tag){case 0:case 11:case 14:case 15:ts(4,s,s.return),Hs(s);break;case 1:za(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&wj(s,s.return,c),Hs(s);break;case 27:Oc(s.stateNode);case 26:case 5:za(s,s.return),Hs(s);break;case 22:s.memoizedState===null&&Hs(s);break;case 30:Hs(s);break;default:Hs(s)}a=a.sibling}}function li(a,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,y=a,v=s,S=v.flags;switch(v.tag){case 0:case 11:case 15:li(y,v,c),vc(4,v);break;case 1:if(li(y,v,c),f=v,y=f.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(te){Et(f,f.return,te)}if(f=v,y=f.updateQueue,y!==null){var T=f.stateNode;try{var B=y.shared.hiddenCallbacks;if(B!==null)for(y.shared.hiddenCallbacks=null,y=0;y<B.length;y++)c1(B[y],T)}catch(te){Et(f,f.return,te)}}c&&S&64&&bj(v),xc(v,v.return);break;case 27:_j(v);case 26:case 5:li(y,v,c),c&&f===null&&S&4&&jj(v),xc(v,v.return);break;case 12:li(y,v,c);break;case 31:li(y,v,c),c&&S&4&&Cj(y,v);break;case 13:li(y,v,c),c&&S&4&&Tj(y,v);break;case 22:v.memoizedState===null&&li(y,v,c),xc(v,v.return);break;case 30:break;default:li(y,v,c)}s=s.sibling}}function dg(a,s){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&ic(c))}function fg(a,s){a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&ic(a))}function ja(a,s,c,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Rj(a,s,c,f),s=s.sibling}function Rj(a,s,c,f){var y=s.flags;switch(s.tag){case 0:case 11:case 15:ja(a,s,c,f),y&2048&&vc(9,s);break;case 1:ja(a,s,c,f);break;case 3:ja(a,s,c,f),y&2048&&(a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&ic(a)));break;case 12:if(y&2048){ja(a,s,c,f),a=s.stateNode;try{var v=s.memoizedProps,S=v.id,T=v.onPostCommit;typeof T=="function"&&T(S,s.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(B){Et(s,s.return,B)}}else ja(a,s,c,f);break;case 31:ja(a,s,c,f);break;case 13:ja(a,s,c,f);break;case 23:break;case 22:v=s.stateNode,S=s.alternate,s.memoizedState!==null?v._visibility&2?ja(a,s,c,f):bc(a,s):v._visibility&2?ja(a,s,c,f):(v._visibility|=2,Fo(a,s,c,f,(s.subtreeFlags&10256)!==0||!1)),y&2048&&dg(S,s);break;case 24:ja(a,s,c,f),y&2048&&fg(s.alternate,s);break;default:ja(a,s,c,f)}}function Fo(a,s,c,f,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=a,S=s,T=c,B=f,te=S.flags;switch(S.tag){case 0:case 11:case 15:Fo(v,S,T,B,y),vc(8,S);break;case 23:break;case 22:var me=S.stateNode;S.memoizedState!==null?me._visibility&2?Fo(v,S,T,B,y):bc(v,S):(me._visibility|=2,Fo(v,S,T,B,y)),y&&te&2048&&dg(S.alternate,S);break;case 24:Fo(v,S,T,B,y),y&&te&2048&&fg(S.alternate,S);break;default:Fo(v,S,T,B,y)}s=s.sibling}}function bc(a,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=a,f=s,y=f.flags;switch(f.tag){case 22:bc(c,f),y&2048&&dg(f.alternate,f);break;case 24:bc(c,f),y&2048&&fg(f.alternate,f);break;default:bc(c,f)}s=s.sibling}}var wc=8192;function Vo(a,s,c){if(a.subtreeFlags&wc)for(a=a.child;a!==null;)Pj(a,s,c),a=a.sibling}function Pj(a,s,c){switch(a.tag){case 26:Vo(a,s,c),a.flags&wc&&a.memoizedState!==null&&cM(c,wa,a.memoizedState,a.memoizedProps);break;case 5:Vo(a,s,c);break;case 3:case 4:var f=wa;wa=Jd(a.stateNode.containerInfo),Vo(a,s,c),wa=f;break;case 22:a.memoizedState===null&&(f=a.alternate,f!==null&&f.memoizedState!==null?(f=wc,wc=16777216,Vo(a,s,c),wc=f):Vo(a,s,c));break;default:Vo(a,s,c)}}function Mj(a){var s=a.alternate;if(s!==null&&(a=s.child,a!==null)){s.child=null;do s=a.sibling,a.sibling=null,a=s;while(a!==null)}}function jc(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];Mr=f,Lj(f,a)}Mj(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ij(a),a=a.sibling}function Ij(a){switch(a.tag){case 0:case 11:case 15:jc(a),a.flags&2048&&ts(9,a,a.return);break;case 3:jc(a);break;case 12:jc(a);break;case 22:var s=a.stateNode;a.memoizedState!==null&&s._visibility&2&&(a.return===null||a.return.tag!==13)?(s._visibility&=-3,$d(a)):jc(a);break;default:jc(a)}}function $d(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];Mr=f,Lj(f,a)}Mj(a)}for(a=a.child;a!==null;){switch(s=a,s.tag){case 0:case 11:case 15:ts(8,s,s.return),$d(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,$d(s));break;default:$d(s)}a=a.sibling}}function Lj(a,s){for(;Mr!==null;){var c=Mr;switch(c.tag){case 0:case 11:case 15:ts(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:ic(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Mr=f;else e:for(c=a;Mr!==null;){f=Mr;var y=f.sibling,v=f.return;if(Aj(f),f===c){Mr=null;break e}if(y!==null){y.return=v,Mr=y;break e}Mr=v}}}var _P={getCacheForType:function(a){var s=Fr(pr),c=s.data.get(a);return c===void 0&&(c=a(),s.data.set(a,c)),c},cacheSignal:function(){return Fr(pr).controller.signal}},SP=typeof WeakMap=="function"?WeakMap:Map,bt=0,It=null,it=null,ot=0,St=0,Mn=null,rs=!1,Ko=!1,hg=!1,ci=0,nr=0,ns=0,Fs=0,mg=0,In=0,Yo=0,Nc=null,jn=null,pg=!1,qd=0,zj=0,Bd=1/0,Gd=null,as=null,Sr=0,is=null,Wo=null,ui=0,gg=0,yg=null,Uj=null,_c=0,vg=null;function Ln(){return(bt&2)!==0&&ot!==0?ot&-ot:D.T!==null?_g():Gr()}function $j(){if(In===0)if((ot&536870912)===0||dt){var a=Ii;Ii<<=1,(Ii&3932160)===0&&(Ii=262144),In=a}else In=536870912;return a=Rn.current,a!==null&&(a.flags|=32),In}function Nn(a,s,c){(a===It&&(St===2||St===9)||a.cancelPendingCommit!==null)&&(Xo(a,0),ss(a,ot,In,!1)),Ge(a,c),((bt&2)===0||a!==It)&&(a===It&&((bt&2)===0&&(Fs|=c),nr===4&&ss(a,ot,In,!1)),Ua(a))}function qj(a,s,c){if((bt&6)!==0)throw Error(n(327));var f=!c&&(s&127)===0&&(s&a.expiredLanes)===0||Wa(a,s),y=f?OP(a,s):bg(a,s,!0),v=f;do{if(y===0){Ko&&!f&&ss(a,s,0,!1);break}else{if(c=a.current.alternate,v&&!EP(c)){y=bg(a,s,!1),v=!1;continue}if(y===2){if(v=s,a.errorRecoveryDisabledLanes&v)var S=0;else S=a.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var T=a;y=Nc;var B=T.current.memoizedState.isDehydrated;if(B&&(Xo(T,S).flags|=256),S=bg(T,S,!1),S!==2){if(hg&&!B){T.errorRecoveryDisabledLanes|=v,Fs|=v,y=4;break e}v=jn,jn=y,v!==null&&(jn===null?jn=v:jn.push.apply(jn,v))}y=S}if(v=!1,y!==2)continue}}if(y===1){Xo(a,0),ss(a,s,0,!0);break}e:{switch(f=a,v=y,v){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:ss(f,s,In,!rs);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(y=qd+300-tr(),10<y)){if(ss(f,s,In,!rs),Li(f,0,!0)!==0)break e;ui=s,f.timeoutHandle=vN(Bj.bind(null,f,c,jn,Gd,pg,s,In,Fs,Yo,rs,v,"Throttled",-0,0),y);break e}Bj(f,c,jn,Gd,pg,s,In,Fs,Yo,rs,v,null,-0,0)}}break}while(!0);Ua(a)}function Bj(a,s,c,f,y,v,S,T,B,te,me,xe,ie,de){if(a.timeoutHandle=-1,xe=s.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xa},Pj(s,v,xe);var Me=(v&62914560)===v?qd-tr():(v&4194048)===v?zj-tr():0;if(Me=uM(xe,Me),Me!==null){ui=v,a.cancelPendingCommit=Me(Xj.bind(null,a,s,v,c,f,y,S,T,B,me,xe,null,ie,de)),ss(a,v,S,!te);return}}Xj(a,s,v,c,f,y,S,T,B)}function EP(a){for(var s=a;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var y=c[f],v=y.getSnapshot;y=y.value;try{if(!kn(v(),y))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ss(a,s,c,f){s&=~mg,s&=~Fs,a.suspendedLanes|=s,a.pingedLanes&=~s,f&&(a.warmLanes|=s),f=a.expirationTimes;for(var y=s;0<y;){var v=31-Gt(y),S=1<<v;f[v]=-1,y&=~S}c!==0&&vt(a,c,s)}function Hd(){return(bt&6)===0?(Sc(0),!1):!0}function xg(){if(it!==null){if(St===0)var a=it.return;else a=it,Ja=Is=null,Mp(a),$o=null,oc=0,a=it;for(;a!==null;)xj(a.alternate,a),a=a.return;it=null}}function Xo(a,s){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,VP(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),ui=0,xg(),It=a,it=c=Za(a.current,null),ot=s,St=0,Mn=null,rs=!1,Ko=Wa(a,s),hg=!1,Yo=In=mg=Fs=ns=nr=0,jn=Nc=null,pg=!1,(s&8)!==0&&(s|=s&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=s;0<f;){var y=31-Gt(f),v=1<<y;s|=a[y],f&=~v}return ci=s,dd(),c}function Gj(a,s){et=null,D.H=pc,s===Uo||s===xd?(s=i1(),St=3):s===Np?(s=i1(),St=4):St=s===Zp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Mn=s,it===null&&(nr=1,Rd(a,Wn(s,a.current)))}function Hj(){var a=Rn.current;return a===null?!0:(ot&4194048)===ot?Jn===null:(ot&62914560)===ot||(ot&536870912)!==0?a===Jn:!1}function Fj(){var a=D.H;return D.H=pc,a===null?pc:a}function Vj(){var a=D.A;return D.A=_P,a}function Fd(){nr=4,rs||(ot&4194048)!==ot&&Rn.current!==null||(Ko=!0),(ns&134217727)===0&&(Fs&134217727)===0||It===null||ss(It,ot,In,!1)}function bg(a,s,c){var f=bt;bt|=2;var y=Fj(),v=Vj();(It!==a||ot!==s)&&(Gd=null,Xo(a,s)),s=!1;var S=nr;e:do try{if(St!==0&&it!==null){var T=it,B=Mn;switch(St){case 8:xg(),S=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(s=!0);var te=St;if(St=0,Mn=null,Zo(a,T,B,te),c&&Ko){S=0;break e}break;default:te=St,St=0,Mn=null,Zo(a,T,B,te)}}AP(),S=nr;break}catch(me){Gj(a,me)}while(!0);return s&&a.shellSuspendCounter++,Ja=Is=null,bt=f,D.H=y,D.A=v,it===null&&(It=null,ot=0,dd()),S}function AP(){for(;it!==null;)Kj(it)}function OP(a,s){var c=bt;bt|=2;var f=Fj(),y=Vj();It!==a||ot!==s?(Gd=null,Bd=tr()+500,Xo(a,s)):Ko=Wa(a,s);e:do try{if(St!==0&&it!==null){s=it;var v=Mn;t:switch(St){case 1:St=0,Mn=null,Zo(a,s,v,1);break;case 2:case 9:if(n1(v)){St=0,Mn=null,Yj(s);break}s=function(){St!==2&&St!==9||It!==a||(St=7),Ua(a)},v.then(s,s);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:n1(v)?(St=0,Mn=null,Yj(s)):(St=0,Mn=null,Zo(a,s,v,7));break;case 5:var S=null;switch(it.tag){case 26:S=it.memoizedState;case 5:case 27:var T=it;if(S?RN(S):T.stateNode.complete){St=0,Mn=null;var B=T.sibling;if(B!==null)it=B;else{var te=T.return;te!==null?(it=te,Vd(te)):it=null}break t}}St=0,Mn=null,Zo(a,s,v,5);break;case 6:St=0,Mn=null,Zo(a,s,v,6);break;case 8:xg(),nr=6;break e;default:throw Error(n(462))}}CP();break}catch(me){Gj(a,me)}while(!0);return Ja=Is=null,D.H=f,D.A=y,bt=c,it!==null?0:(It=null,ot=0,dd(),nr)}function CP(){for(;it!==null&&!Cn();)Kj(it)}function Kj(a){var s=yj(a.alternate,a,ci);a.memoizedProps=a.pendingProps,s===null?Vd(a):it=s}function Yj(a){var s=a,c=s.alternate;switch(s.tag){case 15:case 0:s=dj(c,s,s.pendingProps,s.type,void 0,ot);break;case 11:s=dj(c,s,s.pendingProps,s.type.render,s.ref,ot);break;case 5:Mp(s);default:xj(c,s),s=it=Vw(s,ci),s=yj(c,s,ci)}a.memoizedProps=a.pendingProps,s===null?Vd(a):it=s}function Zo(a,s,c,f){Ja=Is=null,Mp(s),$o=null,oc=0;var y=s.return;try{if(yP(a,y,s,c,ot)){nr=1,Rd(a,Wn(c,a.current)),it=null;return}}catch(v){if(y!==null)throw it=y,v;nr=1,Rd(a,Wn(c,a.current)),it=null;return}s.flags&32768?(dt||f===1?a=!0:Ko||(ot&536870912)!==0?a=!1:(rs=a=!0,(f===2||f===9||f===3||f===6)&&(f=Rn.current,f!==null&&f.tag===13&&(f.flags|=16384))),Wj(s,a)):Vd(s)}function Vd(a){var s=a;do{if((s.flags&32768)!==0){Wj(s,rs);return}a=s.return;var c=bP(s.alternate,s,ci);if(c!==null){it=c;return}if(s=s.sibling,s!==null){it=s;return}it=s=a}while(s!==null);nr===0&&(nr=5)}function Wj(a,s){do{var c=wP(a.alternate,a);if(c!==null){c.flags&=32767,it=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(a=a.sibling,a!==null)){it=a;return}it=a=c}while(a!==null);nr=6,it=null}function Xj(a,s,c,f,y,v,S,T,B){a.cancelPendingCommit=null;do Kd();while(Sr!==0);if((bt&6)!==0)throw Error(n(327));if(s!==null){if(s===a.current)throw Error(n(177));if(v=s.lanes|s.childLanes,v|=lp,ft(a,c,v,S,T,B),a===It&&(it=It=null,ot=0),Wo=s,is=a,ui=c,gg=v,yg=y,Uj=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,RP(Ma,function(){return tN(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=D.T,D.T=null,y=K.p,K.p=2,S=bt,bt|=4;try{jP(a,s,c)}finally{bt=S,K.p=y,D.T=f}}Sr=1,Zj(),Qj(),Jj()}}function Zj(){if(Sr===1){Sr=0;var a=is,s=Wo,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=D.T,D.T=null;var f=K.p;K.p=2;var y=bt;bt|=4;try{kj(s,a);var v=Dg,S=Lw(a.containerInfo),T=v.focusedElem,B=v.selectionRange;if(S!==T&&T&&T.ownerDocument&&Iw(T.ownerDocument.documentElement,T)){if(B!==null&&np(T)){var te=B.start,me=B.end;if(me===void 0&&(me=te),"selectionStart"in T)T.selectionStart=te,T.selectionEnd=Math.min(me,T.value.length);else{var xe=T.ownerDocument||document,ie=xe&&xe.defaultView||window;if(ie.getSelection){var de=ie.getSelection(),Me=T.textContent.length,Ye=Math.min(B.start,Me),Dt=B.end===void 0?Ye:Math.min(B.end,Me);!de.extend&&Ye>Dt&&(S=Dt,Dt=Ye,Ye=S);var Z=Mw(T,Ye),F=Mw(T,Dt);if(Z&&F&&(de.rangeCount!==1||de.anchorNode!==Z.node||de.anchorOffset!==Z.offset||de.focusNode!==F.node||de.focusOffset!==F.offset)){var ee=xe.createRange();ee.setStart(Z.node,Z.offset),de.removeAllRanges(),Ye>Dt?(de.addRange(ee),de.extend(F.node,F.offset)):(ee.setEnd(F.node,F.offset),de.addRange(ee))}}}}for(xe=[],de=T;de=de.parentNode;)de.nodeType===1&&xe.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<xe.length;T++){var ye=xe[T];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}sf=!!kg,Dg=kg=null}finally{bt=y,K.p=f,D.T=c}}a.current=s,Sr=2}}function Qj(){if(Sr===2){Sr=0;var a=is,s=Wo,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=D.T,D.T=null;var f=K.p;K.p=2;var y=bt;bt|=4;try{Ej(a,s.alternate,s)}finally{bt=y,K.p=f,D.T=c}}Sr=3}}function Jj(){if(Sr===4||Sr===3){Sr=0,Jr();var a=is,s=Wo,c=ui,f=Uj;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Sr=5:(Sr=0,Wo=is=null,eN(a,a.pendingLanes));var y=a.pendingLanes;if(y===0&&(as=null),zt(c),s=s.stateNode,we&&typeof we.onCommitFiberRoot=="function")try{we.onCommitFiberRoot(fr,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=D.T,y=K.p,K.p=2,D.T=null;try{for(var v=a.onRecoverableError,S=0;S<f.length;S++){var T=f[S];v(T.value,{componentStack:T.stack})}}finally{D.T=s,K.p=y}}(ui&3)!==0&&Kd(),Ua(a),y=a.pendingLanes,(c&261930)!==0&&(y&42)!==0?a===vg?_c++:(_c=0,vg=a):_c=0,Sc(0)}}function eN(a,s){(a.pooledCacheLanes&=s)===0&&(s=a.pooledCache,s!=null&&(a.pooledCache=null,ic(s)))}function Kd(){return Zj(),Qj(),Jj(),tN()}function tN(){if(Sr!==5)return!1;var a=is,s=gg;gg=0;var c=zt(ui),f=D.T,y=K.p;try{K.p=32>c?32:c,D.T=null,c=yg,yg=null;var v=is,S=ui;if(Sr=0,Wo=is=null,ui=0,(bt&6)!==0)throw Error(n(331));var T=bt;if(bt|=4,Ij(v.current),Rj(v,v.current,S,c),bt=T,Sc(0,!1),we&&typeof we.onPostCommitFiberRoot=="function")try{we.onPostCommitFiberRoot(fr,v)}catch{}return!0}finally{K.p=y,D.T=f,eN(a,s)}}function rN(a,s,c){s=Wn(c,s),s=Xp(a.stateNode,s,2),a=Qi(a,s,2),a!==null&&(Ge(a,2),Ua(a))}function Et(a,s,c){if(a.tag===3)rN(a,a,c);else for(;s!==null;){if(s.tag===3){rN(s,a,c);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(as===null||!as.has(f))){a=Wn(c,a),c=nj(2),f=Qi(s,c,2),f!==null&&(aj(c,f,s,a),Ge(f,2),Ua(f));break}}s=s.return}}function wg(a,s,c){var f=a.pingCache;if(f===null){f=a.pingCache=new SP;var y=new Set;f.set(s,y)}else y=f.get(s),y===void 0&&(y=new Set,f.set(s,y));y.has(c)||(hg=!0,y.add(c),a=TP.bind(null,a,s,c),s.then(a,a))}function TP(a,s,c){var f=a.pingCache;f!==null&&f.delete(s),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,It===a&&(ot&c)===c&&(nr===4||nr===3&&(ot&62914560)===ot&&300>tr()-qd?(bt&2)===0&&Xo(a,0):mg|=c,Yo===ot&&(Yo=0)),Ua(a)}function nN(a,s){s===0&&(s=sr()),a=Rs(a,s),a!==null&&(Ge(a,s),Ua(a))}function kP(a){var s=a.memoizedState,c=0;s!==null&&(c=s.retryLane),nN(a,c)}function DP(a,s){var c=0;switch(a.tag){case 31:case 13:var f=a.stateNode,y=a.memoizedState;y!==null&&(c=y.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(n(314))}f!==null&&f.delete(s),nN(a,c)}function RP(a,s){return Kt(a,s)}var Yd=null,Qo=null,jg=!1,Wd=!1,Ng=!1,os=0;function Ua(a){a!==Qo&&a.next===null&&(Qo===null?Yd=Qo=a:Qo=Qo.next=a),Wd=!0,jg||(jg=!0,MP())}function Sc(a,s){if(!Ng&&Wd){Ng=!0;do for(var c=!1,f=Yd;f!==null;){if(a!==0){var y=f.pendingLanes;if(y===0)var v=0;else{var S=f.suspendedLanes,T=f.pingedLanes;v=(1<<31-Gt(42|a)+1)-1,v&=y&~(S&~T),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(c=!0,oN(f,v))}else v=ot,v=Li(f,f===It?v:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(v&3)===0||Wa(f,v)||(c=!0,oN(f,v));f=f.next}while(c);Ng=!1}}function PP(){aN()}function aN(){Wd=jg=!1;var a=0;os!==0&&FP()&&(a=os);for(var s=tr(),c=null,f=Yd;f!==null;){var y=f.next,v=iN(f,s);v===0?(f.next=null,c===null?Yd=y:c.next=y,y===null&&(Qo=c)):(c=f,(a!==0||(v&3)!==0)&&(Wd=!0)),f=y}Sr!==0&&Sr!==5||Sc(a),os!==0&&(os=0)}function iN(a,s){for(var c=a.suspendedLanes,f=a.pingedLanes,y=a.expirationTimes,v=a.pendingLanes&-62914561;0<v;){var S=31-Gt(v),T=1<<S,B=y[S];B===-1?((T&c)===0||(T&f)!==0)&&(y[S]=Gl(T,s)):B<=s&&(a.expiredLanes|=T),v&=~T}if(s=It,c=ot,c=Li(a,a===s?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,c===0||a===s&&(St===2||St===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&Ve(f),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||Wa(a,c)){if(s=c&-c,s===a.callbackPriority)return s;switch(f!==null&&Ve(f),zt(c)){case 2:case 8:c=en;break;case 32:c=Ma;break;case 268435456:c=ha;break;default:c=Ma}return f=sN.bind(null,a),c=Kt(c,f),a.callbackPriority=s,a.callbackNode=c,s}return f!==null&&f!==null&&Ve(f),a.callbackPriority=2,a.callbackNode=null,2}function sN(a,s){if(Sr!==0&&Sr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(Kd()&&a.callbackNode!==c)return null;var f=ot;return f=Li(a,a===It?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(qj(a,f,s),iN(a,tr()),a.callbackNode!=null&&a.callbackNode===c?sN.bind(null,a):null)}function oN(a,s){if(Kd())return null;qj(a,s,!0)}function MP(){KP(function(){(bt&6)!==0?Kt(gn,PP):aN()})}function _g(){if(os===0){var a=Lo;a===0&&(a=Mi,Mi<<=1,(Mi&261888)===0&&(Mi=256)),os=a}return os}function lN(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Ao(""+a)}function cN(a,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,a.id&&c.setAttribute("form",a.id),s.parentNode.insertBefore(c,s),a=new FormData(a),c.parentNode.removeChild(c),a}function IP(a,s,c,f,y){if(s==="submit"&&c&&c.stateNode===y){var v=lN((y[tn]||null).action),S=f.submitter;S&&(s=(s=S[tn]||null)?lN(s.formAction):S.getAttribute("formAction"),s!==null&&(v=s,S=null));var T=new Ct("action","action",null,f,y);a.push({event:T,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(os!==0){var B=S?cN(y,S):new FormData(y);Hp(c,{pending:!0,data:B,method:y.method,action:v},null,B)}}else typeof v=="function"&&(T.preventDefault(),B=S?cN(y,S):new FormData(y),Hp(c,{pending:!0,data:B,method:y.method,action:v},v,B))},currentTarget:y}]})}}for(var Sg=0;Sg<op.length;Sg++){var Eg=op[Sg],LP=Eg.toLowerCase(),zP=Eg[0].toUpperCase()+Eg.slice(1);ba(LP,"on"+zP)}ba($w,"onAnimationEnd"),ba(qw,"onAnimationIteration"),ba(Bw,"onAnimationStart"),ba("dblclick","onDoubleClick"),ba("focusin","onFocus"),ba("focusout","onBlur"),ba(eP,"onTransitionRun"),ba(tP,"onTransitionStart"),ba(rP,"onTransitionCancel"),ba(Gw,"onTransitionEnd"),Gi("onMouseEnter",["mouseout","mouseover"]),Gi("onMouseLeave",["mouseout","mouseover"]),Gi("onPointerEnter",["pointerout","pointerover"]),Gi("onPointerLeave",["pointerout","pointerover"]),Xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ec));function uN(a,s){s=(s&4)!==0;for(var c=0;c<a.length;c++){var f=a[c],y=f.event;f=f.listeners;e:{var v=void 0;if(s)for(var S=f.length-1;0<=S;S--){var T=f[S],B=T.instance,te=T.currentTarget;if(T=T.listener,B!==v&&y.isPropagationStopped())break e;v=T,y.currentTarget=te;try{v(y)}catch(me){ud(me)}y.currentTarget=null,v=B}else for(S=0;S<f.length;S++){if(T=f[S],B=T.instance,te=T.currentTarget,T=T.listener,B!==v&&y.isPropagationStopped())break e;v=T,y.currentTarget=te;try{v(y)}catch(me){ud(me)}y.currentTarget=null,v=B}}}}function st(a,s){var c=s[Hl];c===void 0&&(c=s[Hl]=new Set);var f=a+"__bubble";c.has(f)||(dN(s,a,2,!1),c.add(f))}function Ag(a,s,c){var f=0;s&&(f|=4),dN(c,a,f,s)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Og(a){if(!a[Xd]){a[Xd]=!0,Xu.forEach(function(c){c!=="selectionchange"&&(UP.has(c)||Ag(c,!1,a),Ag(c,!0,a))});var s=a.nodeType===9?a:a.ownerDocument;s===null||s[Xd]||(s[Xd]=!0,Ag("selectionchange",!1,s))}}function dN(a,s,c,f){switch($N(s)){case 2:var y=hM;break;case 8:y=mM;break;default:y=Gg}c=y.bind(null,s,c,a),y=void 0,!De||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),f?y!==void 0?a.addEventListener(s,c,{capture:!0,passive:y}):a.addEventListener(s,c,!0):y!==void 0?a.addEventListener(s,c,{passive:y}):a.addEventListener(s,c,!1)}function Cg(a,s,c,f,y){var v=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var T=f.stateNode.containerInfo;if(T===y)break;if(S===4)for(S=f.return;S!==null;){var B=S.tag;if((B===3||B===4)&&S.stateNode.containerInfo===y)return;S=S.return}for(;T!==null;){if(S=$i(T),S===null)return;if(B=S.tag,B===5||B===6||B===26||B===27){f=v=S;continue e}T=T.parentNode}}f=f.return}ge(function(){var te=v,me=Zl(c),xe=[];e:{var ie=Hw.get(a);if(ie!==void 0){var de=Ct,Me=a;switch(a){case"keypress":if(tt(c)===0)break e;case"keydown":case"keyup":de=DR;break;case"focusin":Me="focus",de=Qm;break;case"focusout":Me="blur",de=Qm;break;case"beforeblur":case"afterblur":de=Qm;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=xw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=bR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=MR;break;case $w:case qw:case Bw:de=NR;break;case Gw:de=LR;break;case"scroll":case"scrollend":de=Kn;break;case"wheel":de=UR;break;case"copy":case"cut":case"paste":de=SR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=ww;break;case"toggle":case"beforetoggle":de=qR}var Ye=(s&4)!==0,Dt=!Ye&&(a==="scroll"||a==="scrollend"),Z=Ye?ie!==null?ie+"Capture":null:ie;Ye=[];for(var F=te,ee;F!==null;){var ye=F;if(ee=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||ee===null||Z===null||(ye=je(F,Z),ye!=null&&Ye.push(Ac(F,ye,ee))),Dt)break;F=F.return}0<Ye.length&&(ie=new de(ie,Me,null,c,me),xe.push({event:ie,listeners:Ye}))}}if((s&7)===0){e:{if(ie=a==="mouseover"||a==="pointerover",de=a==="mouseout"||a==="pointerout",ie&&c!==Xl&&(Me=c.relatedTarget||c.fromElement)&&($i(Me)||Me[Ui]))break e;if((de||ie)&&(ie=me.window===me?me:(ie=me.ownerDocument)?ie.defaultView||ie.parentWindow:window,de?(Me=c.relatedTarget||c.toElement,de=te,Me=Me?$i(Me):null,Me!==null&&(Dt=l(Me),Ye=Me.tag,Me!==Dt||Ye!==5&&Ye!==27&&Ye!==6)&&(Me=null)):(de=null,Me=te),de!==Me)){if(Ye=xw,ye="onMouseLeave",Z="onMouseEnter",F="mouse",(a==="pointerout"||a==="pointerover")&&(Ye=ww,ye="onPointerLeave",Z="onPointerEnter",F="pointer"),Dt=de==null?ie:Ts(de),ee=Me==null?ie:Ts(Me),ie=new Ye(ye,F+"leave",de,c,me),ie.target=Dt,ie.relatedTarget=ee,ye=null,$i(me)===te&&(Ye=new Ye(Z,F+"enter",Me,c,me),Ye.target=ee,Ye.relatedTarget=Dt,ye=Ye),Dt=ye,de&&Me)t:{for(Ye=$P,Z=de,F=Me,ee=0,ye=Z;ye;ye=Ye(ye))ee++;ye=0;for(var He=F;He;He=Ye(He))ye++;for(;0<ee-ye;)Z=Ye(Z),ee--;for(;0<ye-ee;)F=Ye(F),ye--;for(;ee--;){if(Z===F||F!==null&&Z===F.alternate){Ye=Z;break t}Z=Ye(Z),F=Ye(F)}Ye=null}else Ye=null;de!==null&&fN(xe,ie,de,Ye,!1),Me!==null&&Dt!==null&&fN(xe,Dt,Me,Ye,!0)}}e:{if(ie=te?Ts(te):window,de=ie.nodeName&&ie.nodeName.toLowerCase(),de==="select"||de==="input"&&ie.type==="file")var mt=Cw;else if(Aw(ie))if(Tw)mt=ZR;else{mt=WR;var ze=YR}else de=ie.nodeName,!de||de.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?te&&Wl(te.elementType)&&(mt=Cw):mt=XR;if(mt&&(mt=mt(a,te))){Ow(xe,mt,c,me);break e}ze&&ze(a,ie,te),a==="focusout"&&te&&ie.type==="number"&&te.memoizedProps.value!=null&&Yl(ie,"number",ie.value)}switch(ze=te?Ts(te):window,a){case"focusin":(Aw(ze)||ze.contentEditable==="true")&&(Co=ze,ap=te,rc=null);break;case"focusout":rc=ap=Co=null;break;case"mousedown":ip=!0;break;case"contextmenu":case"mouseup":case"dragend":ip=!1,zw(xe,c,me);break;case"selectionchange":if(JR)break;case"keydown":case"keyup":zw(xe,c,me)}var rt;if(ep)e:{switch(a){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else Oo?Sw(a,c)&&(lt="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(lt="onCompositionStart");lt&&(jw&&c.locale!=="ko"&&(Oo||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&Oo&&(rt=Ut()):(J=me,Se="value"in J?J.value:J.textContent,Oo=!0)),ze=Zd(te,lt),0<ze.length&&(lt=new bw(lt,a,null,c,me),xe.push({event:lt,listeners:ze}),rt?lt.data=rt:(rt=Ew(c),rt!==null&&(lt.data=rt)))),(rt=GR?HR(a,c):FR(a,c))&&(lt=Zd(te,"onBeforeInput"),0<lt.length&&(ze=new bw("onBeforeInput","beforeinput",null,c,me),xe.push({event:ze,listeners:lt}),ze.data=rt)),IP(xe,a,te,c,me)}uN(xe,s)})}function Ac(a,s,c){return{instance:a,listener:s,currentTarget:c}}function Zd(a,s){for(var c=s+"Capture",f=[];a!==null;){var y=a,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=je(a,c),y!=null&&f.unshift(Ac(a,y,v)),y=je(a,s),y!=null&&f.push(Ac(a,y,v))),a.tag===3)return f;a=a.return}return[]}function $P(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function fN(a,s,c,f,y){for(var v=s._reactName,S=[];c!==null&&c!==f;){var T=c,B=T.alternate,te=T.stateNode;if(T=T.tag,B!==null&&B===f)break;T!==5&&T!==26&&T!==27||te===null||(B=te,y?(te=je(c,v),te!=null&&S.unshift(Ac(c,te,B))):y||(te=je(c,v),te!=null&&S.push(Ac(c,te,B)))),c=c.return}S.length!==0&&a.push({event:s,listeners:S})}var qP=/\r\n?/g,BP=/\u0000|\uFFFD/g;function hN(a){return(typeof a=="string"?a:""+a).replace(qP,`
`).replace(BP,"")}function mN(a,s){return s=hN(s),hN(a)===s}function kt(a,s,c,f,y,v){switch(c){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||Fi(a,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&Fi(a,""+f);break;case"className":So(a,"class",f);break;case"tabIndex":So(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":So(a,c,f);break;case"style":od(a,f,v);break;case"data":if(s!=="object"){So(a,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||c!=="href")){a.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(c);break}f=Ao(""+f),a.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(s!=="input"&&kt(a,s,"name",y.name,y,null),kt(a,s,"formEncType",y.formEncType,y,null),kt(a,s,"formMethod",y.formMethod,y,null),kt(a,s,"formTarget",y.formTarget,y,null)):(kt(a,s,"encType",y.encType,y,null),kt(a,s,"method",y.method,y,null),kt(a,s,"target",y.target,y,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(c);break}f=Ao(""+f),a.setAttribute(c,f);break;case"onClick":f!=null&&(a.onclick=xa);break;case"onScroll":f!=null&&st("scroll",a);break;case"onScrollEnd":f!=null&&st("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(c=f.__html,c!=null){if(y.children!=null)throw Error(n(60));a.innerHTML=c}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}c=Ao(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,""+f):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":f===!0?a.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,f):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(c,f):a.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(c):a.setAttribute(c,f);break;case"popover":st("beforetoggle",a),st("toggle",a),_o(a,"popover",f);break;case"xlinkActuate":va(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":va(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":va(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":va(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":va(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":va(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":va(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":va(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":va(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":_o(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Xm.get(c)||c,_o(a,c,f))}}function Tg(a,s,c,f,y,v){switch(c){case"style":od(a,f,v);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(c=f.__html,c!=null){if(y.children!=null)throw Error(n(60));a.innerHTML=c}}break;case"children":typeof f=="string"?Fi(a,f):(typeof f=="number"||typeof f=="bigint")&&Fi(a,""+f);break;case"onScroll":f!=null&&st("scroll",a);break;case"onScrollEnd":f!=null&&st("scrollend",a);break;case"onClick":f!=null&&(a.onclick=xa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zu.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),s=c.slice(2,y?c.length-7:void 0),v=a[tn]||null,v=v!=null?v[c]:null,typeof v=="function"&&a.removeEventListener(s,v,y),typeof f=="function")){typeof v!="function"&&v!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(s,f,y);break e}c in a?a[c]=f:f===!0?a.setAttribute(c,""):_o(a,c,f)}}}function Kr(a,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",a),st("load",a);var f=!1,y=!1,v;for(v in c)if(c.hasOwnProperty(v)){var S=c[v];if(S!=null)switch(v){case"src":f=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:kt(a,s,v,S,c,null)}}y&&kt(a,s,"srcSet",c.srcSet,c,null),f&&kt(a,s,"src",c.src,c,null);return;case"input":st("invalid",a);var T=v=S=y=null,B=null,te=null;for(f in c)if(c.hasOwnProperty(f)){var me=c[f];if(me!=null)switch(f){case"name":y=me;break;case"type":S=me;break;case"checked":B=me;break;case"defaultChecked":te=me;break;case"value":v=me;break;case"defaultValue":T=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(n(137,s));break;default:kt(a,s,f,me,c,null)}}nd(a,v,T,B,te,S,y,!1);return;case"select":st("invalid",a),f=S=v=null;for(y in c)if(c.hasOwnProperty(y)&&(T=c[y],T!=null))switch(y){case"value":v=T;break;case"defaultValue":S=T;break;case"multiple":f=T;default:kt(a,s,y,T,c,null)}s=v,c=S,a.multiple=!!f,s!=null?Hi(a,!!f,s,!1):c!=null&&Hi(a,!!f,c,!0);return;case"textarea":st("invalid",a),v=y=f=null;for(S in c)if(c.hasOwnProperty(S)&&(T=c[S],T!=null))switch(S){case"value":f=T;break;case"defaultValue":y=T;break;case"children":v=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(n(91));break;default:kt(a,s,S,T,c,null)}id(a,f,y,v);return;case"option":for(B in c)if(c.hasOwnProperty(B)&&(f=c[B],f!=null))switch(B){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:kt(a,s,B,f,c,null)}return;case"dialog":st("beforetoggle",a),st("toggle",a),st("cancel",a),st("close",a);break;case"iframe":case"object":st("load",a);break;case"video":case"audio":for(f=0;f<Ec.length;f++)st(Ec[f],a);break;case"image":st("error",a),st("load",a);break;case"details":st("toggle",a);break;case"embed":case"source":case"link":st("error",a),st("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in c)if(c.hasOwnProperty(te)&&(f=c[te],f!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:kt(a,s,te,f,c,null)}return;default:if(Wl(s)){for(me in c)c.hasOwnProperty(me)&&(f=c[me],f!==void 0&&Tg(a,s,me,f,c,void 0));return}}for(T in c)c.hasOwnProperty(T)&&(f=c[T],f!=null&&kt(a,s,T,f,c,null))}function GP(a,s,c,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,S=null,T=null,B=null,te=null,me=null;for(de in c){var xe=c[de];if(c.hasOwnProperty(de)&&xe!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":B=xe;default:f.hasOwnProperty(de)||kt(a,s,de,null,f,xe)}}for(var ie in f){var de=f[ie];if(xe=c[ie],f.hasOwnProperty(ie)&&(de!=null||xe!=null))switch(ie){case"type":v=de;break;case"name":y=de;break;case"checked":te=de;break;case"defaultChecked":me=de;break;case"value":S=de;break;case"defaultValue":T=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(n(137,s));break;default:de!==xe&&kt(a,s,ie,de,f,xe)}}Kl(a,S,T,B,te,me,v,y);return;case"select":de=S=T=ie=null;for(v in c)if(B=c[v],c.hasOwnProperty(v)&&B!=null)switch(v){case"value":break;case"multiple":de=B;default:f.hasOwnProperty(v)||kt(a,s,v,null,f,B)}for(y in f)if(v=f[y],B=c[y],f.hasOwnProperty(y)&&(v!=null||B!=null))switch(y){case"value":ie=v;break;case"defaultValue":T=v;break;case"multiple":S=v;default:v!==B&&kt(a,s,y,v,f,B)}s=T,c=S,f=de,ie!=null?Hi(a,!!c,ie,!1):!!f!=!!c&&(s!=null?Hi(a,!!c,s,!0):Hi(a,!!c,c?[]:"",!1));return;case"textarea":de=ie=null;for(T in c)if(y=c[T],c.hasOwnProperty(T)&&y!=null&&!f.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:kt(a,s,T,null,f,y)}for(S in f)if(y=f[S],v=c[S],f.hasOwnProperty(S)&&(y!=null||v!=null))switch(S){case"value":ie=y;break;case"defaultValue":de=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(n(91));break;default:y!==v&&kt(a,s,S,y,f,v)}ad(a,ie,de);return;case"option":for(var Me in c)if(ie=c[Me],c.hasOwnProperty(Me)&&ie!=null&&!f.hasOwnProperty(Me))switch(Me){case"selected":a.selected=!1;break;default:kt(a,s,Me,null,f,ie)}for(B in f)if(ie=f[B],de=c[B],f.hasOwnProperty(B)&&ie!==de&&(ie!=null||de!=null))switch(B){case"selected":a.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:kt(a,s,B,ie,f,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ye in c)ie=c[Ye],c.hasOwnProperty(Ye)&&ie!=null&&!f.hasOwnProperty(Ye)&&kt(a,s,Ye,null,f,ie);for(te in f)if(ie=f[te],de=c[te],f.hasOwnProperty(te)&&ie!==de&&(ie!=null||de!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(n(137,s));break;default:kt(a,s,te,ie,f,de)}return;default:if(Wl(s)){for(var Dt in c)ie=c[Dt],c.hasOwnProperty(Dt)&&ie!==void 0&&!f.hasOwnProperty(Dt)&&Tg(a,s,Dt,void 0,f,ie);for(me in f)ie=f[me],de=c[me],!f.hasOwnProperty(me)||ie===de||ie===void 0&&de===void 0||Tg(a,s,me,ie,f,de);return}}for(var Z in c)ie=c[Z],c.hasOwnProperty(Z)&&ie!=null&&!f.hasOwnProperty(Z)&&kt(a,s,Z,null,f,ie);for(xe in f)ie=f[xe],de=c[xe],!f.hasOwnProperty(xe)||ie===de||ie==null&&de==null||kt(a,s,xe,ie,f,de)}function pN(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function HP(){if(typeof performance.getEntriesByType=="function"){for(var a=0,s=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var y=c[f],v=y.transferSize,S=y.initiatorType,T=y.duration;if(v&&T&&pN(S)){for(S=0,T=y.responseEnd,f+=1;f<c.length;f++){var B=c[f],te=B.startTime;if(te>T)break;var me=B.transferSize,xe=B.initiatorType;me&&pN(xe)&&(B=B.responseEnd,S+=me*(B<T?1:(T-te)/(B-te)))}if(--f,s+=8*(v+S)/(y.duration/1e3),a++,10<a)break}}if(0<a)return s/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var kg=null,Dg=null;function Qd(a){return a.nodeType===9?a:a.ownerDocument}function gN(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yN(a,s){if(a===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&s==="foreignObject"?0:a}function Rg(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Pg=null;function FP(){var a=window.event;return a&&a.type==="popstate"?a===Pg?!1:(Pg=a,!0):(Pg=null,!1)}var vN=typeof setTimeout=="function"?setTimeout:void 0,VP=typeof clearTimeout=="function"?clearTimeout:void 0,xN=typeof Promise=="function"?Promise:void 0,KP=typeof queueMicrotask=="function"?queueMicrotask:typeof xN<"u"?function(a){return xN.resolve(null).then(a).catch(YP)}:vN;function YP(a){setTimeout(function(){throw a})}function ls(a){return a==="head"}function bN(a,s){var c=s,f=0;do{var y=c.nextSibling;if(a.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(f===0){a.removeChild(y),rl(s);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")Oc(a.ownerDocument.documentElement);else if(c==="head"){c=a.ownerDocument.head,Oc(c);for(var v=c.firstChild;v;){var S=v.nextSibling,T=v.nodeName;v[Cs]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&v.rel.toLowerCase()==="stylesheet"||c.removeChild(v),v=S}}else c==="body"&&Oc(a.ownerDocument.body);c=y}while(c);rl(s)}function wN(a,s){var c=a;a=0;do{var f=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(a===0)break;a--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||a++;c=f}while(c)}function Mg(a){var s=a.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Mg(c),Fl(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function WP(a,s,c,f){for(;a.nodeType===1;){var y=c;if(a.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[Cs])switch(s){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(v=a.getAttribute("rel"),v==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(v!==y.rel||a.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||a.getAttribute("title")!==(y.title==null?null:y.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(v=a.getAttribute("src"),(v!==(y.src==null?null:y.src)||a.getAttribute("type")!==(y.type==null?null:y.type)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(s==="input"&&a.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&a.getAttribute("name")===v)return a}else return a;if(a=ea(a.nextSibling),a===null)break}return null}function XP(a,s,c){if(s==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=ea(a.nextSibling),a===null))return null;return a}function jN(a,s){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!s||(a=ea(a.nextSibling),a===null))return null;return a}function Ig(a){return a.data==="$?"||a.data==="$~"}function Lg(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function ZP(a,s){var c=a.ownerDocument;if(a.data==="$~")a._reactRetry=s;else if(a.data!=="$?"||c.readyState!=="loading")s();else{var f=function(){s(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function ea(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break;if(s===8){if(s=a.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return a}var zg=null;function NN(a){a=a.nextSibling;for(var s=0;a;){if(a.nodeType===8){var c=a.data;if(c==="/$"||c==="/&"){if(s===0)return ea(a.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}a=a.nextSibling}return null}function _N(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return a;s--}else c!=="/$"&&c!=="/&"||s++}a=a.previousSibling}return null}function SN(a,s,c){switch(s=Qd(c),a){case"html":if(a=s.documentElement,!a)throw Error(n(452));return a;case"head":if(a=s.head,!a)throw Error(n(453));return a;case"body":if(a=s.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function Oc(a){for(var s=a.attributes;s.length;)a.removeAttributeNode(s[0]);Fl(a)}var ta=new Map,EN=new Set;function Jd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var di=K.d;K.d={f:QP,r:JP,D:eM,C:tM,L:rM,m:nM,X:iM,S:aM,M:sM};function QP(){var a=di.f(),s=Hd();return a||s}function JP(a){var s=qi(a);s!==null&&s.tag===5&&s.type==="form"?G1(s):di.r(a)}var Jo=typeof document>"u"?null:document;function AN(a,s,c){var f=Jo;if(f&&typeof s=="string"&&s){var y=vn(s);y='link[rel="'+a+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),EN.has(y)||(EN.add(y),a={rel:a,crossOrigin:c,href:s},f.querySelector(y)===null&&(s=f.createElement("link"),Kr(s,"link",a),hr(s),f.head.appendChild(s)))}}function eM(a){di.D(a),AN("dns-prefetch",a,null)}function tM(a,s){di.C(a,s),AN("preconnect",a,s)}function rM(a,s,c){di.L(a,s,c);var f=Jo;if(f&&a&&s){var y='link[rel="preload"][as="'+vn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+vn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+vn(c.imageSizes)+'"]')):y+='[href="'+vn(a)+'"]';var v=y;switch(s){case"style":v=el(a);break;case"script":v=tl(a)}ta.has(v)||(a=g({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:a,as:s},c),ta.set(v,a),f.querySelector(y)!==null||s==="style"&&f.querySelector(Cc(v))||s==="script"&&f.querySelector(Tc(v))||(s=f.createElement("link"),Kr(s,"link",a),hr(s),f.head.appendChild(s)))}}function nM(a,s){di.m(a,s);var c=Jo;if(c&&a){var f=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+vn(f)+'"][href="'+vn(a)+'"]',v=y;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=tl(a)}if(!ta.has(v)&&(a=g({rel:"modulepreload",href:a},s),ta.set(v,a),c.querySelector(y)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Tc(v)))return}f=c.createElement("link"),Kr(f,"link",a),hr(f),c.head.appendChild(f)}}}function aM(a,s,c){di.S(a,s,c);var f=Jo;if(f&&a){var y=Bi(f).hoistableStyles,v=el(a);s=s||"default";var S=y.get(v);if(!S){var T={loading:0,preload:null};if(S=f.querySelector(Cc(v)))T.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":s},c),(c=ta.get(v))&&Ug(a,c);var B=S=f.createElement("link");hr(B),Kr(B,"link",a),B._p=new Promise(function(te,me){B.onload=te,B.onerror=me}),B.addEventListener("load",function(){T.loading|=1}),B.addEventListener("error",function(){T.loading|=2}),T.loading|=4,ef(S,s,f)}S={type:"stylesheet",instance:S,count:1,state:T},y.set(v,S)}}}function iM(a,s){di.X(a,s);var c=Jo;if(c&&a){var f=Bi(c).hoistableScripts,y=tl(a),v=f.get(y);v||(v=c.querySelector(Tc(y)),v||(a=g({src:a,async:!0},s),(s=ta.get(y))&&$g(a,s),v=c.createElement("script"),hr(v),Kr(v,"link",a),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(y,v))}}function sM(a,s){di.M(a,s);var c=Jo;if(c&&a){var f=Bi(c).hoistableScripts,y=tl(a),v=f.get(y);v||(v=c.querySelector(Tc(y)),v||(a=g({src:a,async:!0,type:"module"},s),(s=ta.get(y))&&$g(a,s),v=c.createElement("script"),hr(v),Kr(v,"link",a),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(y,v))}}function ON(a,s,c,f){var y=(y=Ee.current)?Jd(y):null;if(!y)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=el(c.href),c=Bi(y).hoistableStyles,f=c.get(s),f||(f={type:"style",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=el(c.href);var v=Bi(y).hoistableStyles,S=v.get(a);if(S||(y=y.ownerDocument||y,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(a,S),(v=y.querySelector(Cc(a)))&&!v._p&&(S.instance=v,S.state.loading=5),ta.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ta.set(a,c),v||oM(y,a,c,S.state))),s&&f===null)throw Error(n(528,""));return S}if(s&&f!==null)throw Error(n(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=tl(c),c=Bi(y).hoistableScripts,f=c.get(s),f||(f={type:"script",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function el(a){return'href="'+vn(a)+'"'}function Cc(a){return'link[rel="stylesheet"]['+a+"]"}function CN(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function oM(a,s,c,f){a.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=a.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),Kr(s,"link",c),hr(s),a.head.appendChild(s))}function tl(a){return'[src="'+vn(a)+'"]'}function Tc(a){return"script[async]"+a}function TN(a,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var f=a.querySelector('style[data-href~="'+vn(c.href)+'"]');if(f)return s.instance=f,hr(f),f;var y=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),hr(f),Kr(f,"style",y),ef(f,c.precedence,a),s.instance=f;case"stylesheet":y=el(c.href);var v=a.querySelector(Cc(y));if(v)return s.state.loading|=4,s.instance=v,hr(v),v;f=CN(c),(y=ta.get(y))&&Ug(f,y),v=(a.ownerDocument||a).createElement("link"),hr(v);var S=v;return S._p=new Promise(function(T,B){S.onload=T,S.onerror=B}),Kr(v,"link",f),s.state.loading|=4,ef(v,c.precedence,a),s.instance=v;case"script":return v=tl(c.src),(y=a.querySelector(Tc(v)))?(s.instance=y,hr(y),y):(f=c,(y=ta.get(v))&&(f=g({},c),$g(f,y)),a=a.ownerDocument||a,y=a.createElement("script"),hr(y),Kr(y,"link",f),a.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,ef(f,c.precedence,a));return s.instance}function ef(a,s,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=f.length?f[f.length-1]:null,v=y,S=0;S<f.length;S++){var T=f[S];if(T.dataset.precedence===s)v=T;else if(v!==y)break}v?v.parentNode.insertBefore(a,v.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(a,s.firstChild))}function Ug(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.title==null&&(a.title=s.title)}function $g(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.integrity==null&&(a.integrity=s.integrity)}var tf=null;function kN(a,s,c){if(tf===null){var f=new Map,y=tf=new Map;y.set(c,f)}else y=tf,f=y.get(c),f||(f=new Map,y.set(c,f));if(f.has(a))return f;for(f.set(a,null),c=c.getElementsByTagName(a),y=0;y<c.length;y++){var v=c[y];if(!(v[Cs]||v[jt]||a==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(s)||"";S=a+S;var T=f.get(S);T?T.push(v):f.set(S,[v])}}return f}function DN(a,s,c){a=a.ownerDocument||a,a.head.insertBefore(c,s==="title"?a.querySelector("head > title"):null)}function lM(a,s,c){if(c===1||s.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return a=s.disabled,typeof s.precedence=="string"&&a==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function RN(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function cM(a,s,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=el(f.href),v=s.querySelector(Cc(y));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(a.count++,a=rf.bind(a),s.then(a,a)),c.state.loading|=4,c.instance=v,hr(v);return}v=s.ownerDocument||s,f=CN(f),(y=ta.get(y))&&Ug(f,y),v=v.createElement("link"),hr(v);var S=v;S._p=new Promise(function(T,B){S.onload=T,S.onerror=B}),Kr(v,"link",f),c.instance=v}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(a.count++,c=rf.bind(a),s.addEventListener("load",c),s.addEventListener("error",c))}}var qg=0;function uM(a,s){return a.stylesheets&&a.count===0&&af(a,a.stylesheets),0<a.count||0<a.imgCount?function(c){var f=setTimeout(function(){if(a.stylesheets&&af(a,a.stylesheets),a.unsuspend){var v=a.unsuspend;a.unsuspend=null,v()}},6e4+s);0<a.imgBytes&&qg===0&&(qg=62500*HP());var y=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&af(a,a.stylesheets),a.unsuspend)){var v=a.unsuspend;a.unsuspend=null,v()}},(a.imgBytes>qg?50:800)+s);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(f),clearTimeout(y)}}:null}function rf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)af(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var nf=null;function af(a,s){a.stylesheets=null,a.unsuspend!==null&&(a.count++,nf=new Map,s.forEach(dM,a),nf=null,rf.call(a))}function dM(a,s){if(!(s.state.loading&4)){var c=nf.get(a);if(c)var f=c.get(null);else{c=new Map,nf.set(a,c);for(var y=a.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var S=y[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(c.set(S.dataset.precedence,S),f=S)}f&&c.set(null,f)}y=s.instance,S=y.getAttribute("data-precedence"),v=c.get(S)||f,v===f&&c.set(null,y),c.set(S,y),this.count++,f=rf.bind(this),y.addEventListener("load",f),y.addEventListener("error",f),v?v.parentNode.insertBefore(y,v.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(y,a.firstChild)),s.state.loading|=4}}var kc={$$typeof:A,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function fM(a,s,c,f,y,v,S,T,B){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=se(0),this.hiddenUpdates=se(null),this.identifierPrefix=f,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function PN(a,s,c,f,y,v,S,T,B,te,me,xe){return a=new fM(a,s,c,S,B,te,me,xe,T),s=1,v===!0&&(s|=24),v=Dn(3,null,null,s),a.current=v,v.stateNode=a,s=bp(),s.refCount++,a.pooledCache=s,s.refCount++,v.memoizedState={element:f,isDehydrated:c,cache:s},_p(v),a}function MN(a){return a?(a=Do,a):Do}function IN(a,s,c,f,y,v){y=MN(y),f.context===null?f.context=y:f.pendingContext=y,f=Zi(s),f.payload={element:c},v=v===void 0?null:v,v!==null&&(f.callback=v),c=Qi(a,f,s),c!==null&&(Nn(c,a,s),cc(c,a,s))}function LN(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<s?c:s}}function Bg(a,s){LN(a,s),(a=a.alternate)&&LN(a,s)}function zN(a){if(a.tag===13||a.tag===31){var s=Rs(a,67108864);s!==null&&Nn(s,a,67108864),Bg(a,67108864)}}function UN(a){if(a.tag===13||a.tag===31){var s=Ln();s=xt(s);var c=Rs(a,s);c!==null&&Nn(c,a,s),Bg(a,s)}}var sf=!0;function hM(a,s,c,f){var y=D.T;D.T=null;var v=K.p;try{K.p=2,Gg(a,s,c,f)}finally{K.p=v,D.T=y}}function mM(a,s,c,f){var y=D.T;D.T=null;var v=K.p;try{K.p=8,Gg(a,s,c,f)}finally{K.p=v,D.T=y}}function Gg(a,s,c,f){if(sf){var y=Hg(f);if(y===null)Cg(a,s,f,of,c),qN(a,f);else if(gM(y,a,s,c,f))f.stopPropagation();else if(qN(a,f),s&4&&-1<pM.indexOf(a)){for(;y!==null;){var v=qi(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=Vn(v.pendingLanes);if(S!==0){var T=v;for(T.pendingLanes|=2,T.entangledLanes|=2;S;){var B=1<<31-Gt(S);T.entanglements[1]|=B,S&=~B}Ua(v),(bt&6)===0&&(Bd=tr()+500,Sc(0))}}break;case 31:case 13:T=Rs(v,2),T!==null&&Nn(T,v,2),Hd(),Bg(v,2)}if(v=Hg(f),v===null&&Cg(a,s,f,of,c),v===y)break;y=v}y!==null&&f.stopPropagation()}else Cg(a,s,f,null,c)}}function Hg(a){return a=Zl(a),Fg(a)}var of=null;function Fg(a){if(of=null,a=$i(a),a!==null){var s=l(a);if(s===null)a=null;else{var c=s.tag;if(c===13){if(a=u(s),a!==null)return a;a=null}else if(c===31){if(a=d(s),a!==null)return a;a=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;a=null}else s!==a&&(a=null)}}return of=a,null}function $N(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pn()){case gn:return 2;case en:return 8;case Ma:case Tn:return 32;case ha:return 268435456;default:return 32}default:return 32}}var Vg=!1,cs=null,us=null,ds=null,Dc=new Map,Rc=new Map,fs=[],pM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qN(a,s){switch(a){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":Dc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rc.delete(s.pointerId)}}function Pc(a,s,c,f,y,v){return a===null||a.nativeEvent!==v?(a={blockedOn:s,domEventName:c,eventSystemFlags:f,nativeEvent:v,targetContainers:[y]},s!==null&&(s=qi(s),s!==null&&zN(s)),a):(a.eventSystemFlags|=f,s=a.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),a)}function gM(a,s,c,f,y){switch(s){case"focusin":return cs=Pc(cs,a,s,c,f,y),!0;case"dragenter":return us=Pc(us,a,s,c,f,y),!0;case"mouseover":return ds=Pc(ds,a,s,c,f,y),!0;case"pointerover":var v=y.pointerId;return Dc.set(v,Pc(Dc.get(v)||null,a,s,c,f,y)),!0;case"gotpointercapture":return v=y.pointerId,Rc.set(v,Pc(Rc.get(v)||null,a,s,c,f,y)),!0}return!1}function BN(a){var s=$i(a.target);if(s!==null){var c=l(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){a.blockedOn=s,zi(a.priority,function(){UN(c)});return}}else if(s===31){if(s=d(c),s!==null){a.blockedOn=s,zi(a.priority,function(){UN(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function lf(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var c=Hg(a.nativeEvent);if(c===null){c=a.nativeEvent;var f=new c.constructor(c.type,c);Xl=f,c.target.dispatchEvent(f),Xl=null}else return s=qi(c),s!==null&&zN(s),a.blockedOn=c,!1;s.shift()}return!0}function GN(a,s,c){lf(a)&&c.delete(s)}function yM(){Vg=!1,cs!==null&&lf(cs)&&(cs=null),us!==null&&lf(us)&&(us=null),ds!==null&&lf(ds)&&(ds=null),Dc.forEach(GN),Rc.forEach(GN)}function cf(a,s){a.blockedOn===s&&(a.blockedOn=null,Vg||(Vg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,yM)))}var uf=null;function HN(a){uf!==a&&(uf=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){uf===a&&(uf=null);for(var s=0;s<a.length;s+=3){var c=a[s],f=a[s+1],y=a[s+2];if(typeof f!="function"){if(Fg(f||c)===null)continue;break}var v=qi(c);v!==null&&(a.splice(s,3),s-=3,Hp(v,{pending:!0,data:y,method:c.method,action:f},f,y))}}))}function rl(a){function s(B){return cf(B,a)}cs!==null&&cf(cs,a),us!==null&&cf(us,a),ds!==null&&cf(ds,a),Dc.forEach(s),Rc.forEach(s);for(var c=0;c<fs.length;c++){var f=fs[c];f.blockedOn===a&&(f.blockedOn=null)}for(;0<fs.length&&(c=fs[0],c.blockedOn===null);)BN(c),c.blockedOn===null&&fs.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var y=c[f],v=c[f+1],S=y[tn]||null;if(typeof v=="function")S||HN(c);else if(S){var T=null;if(v&&v.hasAttribute("formAction")){if(y=v,S=v[tn]||null)T=S.formAction;else if(Fg(y)!==null)continue}else T=S.action;typeof T=="function"?c[f+1]=T:(c.splice(f,3),f-=3),HN(c)}}}function FN(){function a(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return y=S})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,y=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function Kg(a){this._internalRoot=a}df.prototype.render=Kg.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw Error(n(409));var c=s.current,f=Ln();IN(c,f,a,s,null,null)},df.prototype.unmount=Kg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;IN(a.current,2,null,a,null,null),Hd(),s[Ui]=null}};function df(a){this._internalRoot=a}df.prototype.unstable_scheduleHydration=function(a){if(a){var s=Gr();a={blockedOn:null,target:a,priority:s};for(var c=0;c<fs.length&&s!==0&&s<fs[c].priority;c++);fs.splice(c,0,a),c===0&&BN(a)}};var VN=t.version;if(VN!=="19.2.0")throw Error(n(527,VN,"19.2.0"));K.findDOMNode=function(a){var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=m(s),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var vM={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{fr=ff.inject(vM),we=ff}catch{}}return Ic.createRoot=function(a,s){if(!i(a))throw Error(n(299));var c=!1,f="",y=J1,v=ej,S=tj;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=PN(a,1,!1,null,null,c,f,null,y,v,S,FN),a[Ui]=s.current,Og(a),new Kg(s)},Ic.hydrateRoot=function(a,s,c){if(!i(a))throw Error(n(299));var f=!1,y="",v=J1,S=ej,T=tj,B=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(T=c.onRecoverableError),c.formState!==void 0&&(B=c.formState)),s=PN(a,1,!0,s,c??null,f,y,B,v,S,T,FN),s.context=MN(null),c=s.current,f=Ln(),f=xt(f),y=Zi(f),y.callback=null,Qi(c,y,f),c=f,s.current.lanes=c,Ge(s,c),Ua(s),a[Ui]=s.current,Og(a),new df(s)},Ic.version="19.2.0",Ic}var r_;function kM(){if(r_)return Zg.exports;r_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Zg.exports=TM(),Zg.exports}var DM=kM();const RM=Ka(DM);var Ae=(e=>(e.ADMIN="ADMIN",e.GENERAL_MANAGER="GENERAL_MANAGER",e.MANAGER="MANAGER",e.WORKER="WORKER",e))(Ae||{}),nt=(e=>(e.PENDING="PENDING",e.APPROVED="APPROVED",e.REJECTED="REJECTED",e.IN_TRANSIT="IN_TRANSIT",e.DELIVERED="DELIVERED",e.CONFIRMED="CONFIRMED",e))(nt||{}),Ar=(e=>(e.CENTRAL="CENTRAL",e.BRANCH="BRANCH",e.FIELD="FIELD",e))(Ar||{}),wt=(e=>(e.FULL_DAY="D",e.HALF_DAY="D/2",e.ABSENT="F",e))(wt||{}),Pt=(e=>(e.CONSUMABLE="CONSUMABLE",e.ASSET="ASSET",e))(Pt||{}),Jt=(e=>(e.NEW="NEW",e.GOOD="GOOD",e.FAIR="FAIR",e.POOR="POOR",e.DAMAGED="DAMAGED",e))(Jt||{}),Ea=(e=>(e.SALE="SALE",e.EXPENSE="EXPENSE",e))(Ea||{}),_n=(e=>(e.CASH="CASH",e.CARD="CARD",e.MOBILE_MONEY="MOBILE_MONEY",e.BANK_TRANSFER="BANK_TRANSFER",e.CHEQUE="CHEQUE",e))(_n||{});function Bh(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function PM(e,t,r,n){function i(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function d(p){try{m(n.next(p))}catch(g){u(g)}}function h(p){try{m(n.throw(p))}catch(g){u(g)}}function m(p){p.done?l(p.value):i(p.value).then(d,h)}m((n=n.apply(e,t||[])).next())})}const MM=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class ux extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class IM extends ux{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class n_ extends ux{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class a_ extends ux{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Wy;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Wy||(Wy={}));class LM{constructor(t,{headers:r={},customFetch:n,region:i=Wy.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=MM(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return PM(this,arguments,void 0,function*(r,n={}){var i;let l,u;try{const{headers:d,method:h,body:m,signal:p,timeout:g}=n;let x={},{region:b}=n;b||(b=this.region);const j=new URL(`${this.url}/${r}`);b&&b!=="any"&&(x["x-region"]=b,j.searchParams.set("forceFunctionRegion",b));let N;m&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",N=m):typeof m=="string"?(x["Content-Type"]="text/plain",N=m):typeof FormData<"u"&&m instanceof FormData?N=m:(x["Content-Type"]="application/json",N=JSON.stringify(m)):m&&typeof m!="string"&&!(typeof Blob<"u"&&m instanceof Blob)&&!(m instanceof ArrayBuffer)&&!(typeof FormData<"u"&&m instanceof FormData)?N=JSON.stringify(m):N=m;let _=p;g&&(u=new AbortController,l=setTimeout(()=>u.abort(),g),p?(_=u.signal,p.addEventListener("abort",()=>u.abort())):_=u.signal);const E=yield this.fetch(j.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),d),body:N,signal:_}).catch(R=>{throw new IM(R)}),k=E.headers.get("x-relay-error");if(k&&k==="true")throw new n_(E);if(!E.ok)throw new a_(E);let A=((i=E.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),I;return A==="application/json"?I=yield E.json():A==="application/octet-stream"||A==="application/pdf"?I=yield E.blob():A==="text/event-stream"?I=E:A==="multipart/form-data"?I=yield E.formData():I=yield E.text(),{data:I,error:null,response:E}}catch(d){return{data:null,error:d,response:d instanceof a_||d instanceof n_?d.context:void 0}}finally{l&&clearTimeout(l)}})}}var zM=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},UM=class{constructor(e){var t,r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(n=e.urlLengthLimit)!==null&&n!==void 0?n:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let u=null,d=null,h=null,m=l.status,p=l.statusText;if(l.ok){var g,x;if(r.method!=="HEAD"){var b;const E=await l.text();E===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((b=r.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?d=E:d=JSON.parse(E))}const N=(g=r.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),_=(x=l.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");N&&_&&_.length>1&&(h=parseInt(_[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var j;const N=await l.text();try{u=JSON.parse(N),Array.isArray(u)&&l.status===404&&(d=[],u=null,m=200,p="OK")}catch{l.status===404&&N===""?(m=204,p="No Content"):u={message:N}}if(u&&r.isMaybeSingle&&(!(u==null||(j=u.details)===null||j===void 0)&&j.includes("0 rows"))&&(u=null,m=200,p="OK"),u&&r.shouldThrowOnError)throw new zM(u)}return{error:u,data:d,count:h,status:m,statusText:p}});return this.shouldThrowOnError||(i=i.catch(l=>{var u;let d="",h="",m="";const p=l==null?void 0:l.cause;if(p){var g,x,b,j;const E=(g=p==null?void 0:p.message)!==null&&g!==void 0?g:"",k=(x=p==null?void 0:p.code)!==null&&x!==void 0?x:"";d=`${(b=l==null?void 0:l.name)!==null&&b!==void 0?b:"FetchError"}: ${l==null?void 0:l.message}`,d+=`

Caused by: ${(j=p==null?void 0:p.name)!==null&&j!==void 0?j:"Error"}: ${E}`,k&&(d+=` (${k})`),p!=null&&p.stack&&(d+=`
${p.stack}`)}else{var N;d=(N=l==null?void 0:l.stack)!==null&&N!==void 0?N:""}const _=this.url.toString().length;return(l==null?void 0:l.name)==="AbortError"||(l==null?void 0:l.code)==="ABORT_ERR"?(m="",h="Request was aborted (timeout or manual cancellation)",_>this.urlLengthLimit&&(h+=`. Note: Your request URL is ${_} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((p==null?void 0:p.name)==="HeadersOverflowError"||(p==null?void 0:p.code)==="UND_ERR_HEADERS_OVERFLOW")&&(m="",h="HTTP headers exceeded server limits (typically 16KB)",_>this.urlLengthLimit&&(h+=`. Your request URL is ${_} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:d,hint:h,code:m},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}},$M=class extends UM{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const l=i?`${i}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,l=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(l,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:l="text"}={}){var u;const d=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${h}"; options=${d};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const i_=new RegExp("[,()]");var fl=class extends $M{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&i_.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&i_.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const l=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${l}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},qM=class{constructor(e,{headers:t={},schema:r,fetch:n,urlLengthLimit:i=8e3}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},i=r?"HEAD":"GET";let l=!1;const u=(e??"*").split("").map(m=>/\s/.test(m)&&!l?"":(m==='"'&&(l=!l),m)).join(""),{url:d,headers:h}=this.cloneRequestState();return d.searchParams.set("select",u),n&&h.append("Prefer",`count=${n}`),new fl({method:i,url:d,headers:h,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const i="POST",{url:l,headers:u}=this.cloneRequestState();if(t&&u.append("Prefer",`count=${t}`),r||u.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(d.length>0){const h=[...new Set(d)].map(m=>`"${m}"`);l.searchParams.set("columns",h.join(","))}}return new fl({method:i,url:l,headers:u,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){var l;const u="POST",{url:d,headers:h}=this.cloneRequestState();if(h.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&d.searchParams.set("on_conflict",t),n&&h.append("Prefer",`count=${n}`),i||h.append("Prefer","missing=default"),Array.isArray(e)){const m=e.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(m.length>0){const p=[...new Set(m)].map(g=>`"${g}"`);d.searchParams.set("columns",p.join(","))}}return new fl({method:u,url:d,headers:h,schema:this.schema,body:e,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var r;const n="PATCH",{url:i,headers:l}=this.cloneRequestState();return t&&l.append("Prefer",`count=${t}`),new fl({method:n,url:i,headers:l,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new fl({method:r,url:n,headers:i,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function Qc(e){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qc(e)}function BM(e,t){if(Qc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GM(e){var t=BM(e,"string");return Qc(t)=="symbol"?t:t+""}function HM(e,t,r){return(t=GM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s_(Object(r),!0).forEach(function(n){HM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var FM=class QA{constructor(t,{headers:r={},schema:n,fetch:i,timeout:l,urlLengthLimit:u=8e3}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.urlLengthLimit=u;const d=i??globalThis.fetch;l!==void 0&&l>0?this.fetch=(h,m)=>{const p=new AbortController,g=setTimeout(()=>p.abort(),l),x=m==null?void 0:m.signal;if(x){if(x.aborted)return clearTimeout(g),d(h,m);const b=()=>{clearTimeout(g),p.abort()};return x.addEventListener("abort",b,{once:!0}),d(h,hf(hf({},m),{},{signal:p.signal})).finally(()=>{clearTimeout(g),x.removeEventListener("abort",b)})}return d(h,hf(hf({},m),{},{signal:p.signal})).finally(()=>clearTimeout(g))}:this.fetch=d}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new qM(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new QA(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,r={},{head:n=!1,get:i=!1,count:l}={}){var u;let d;const h=new URL(`${this.url}/rpc/${t}`);let m;const p=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(p)),g=n&&Object.values(r).some(p);g?(d="POST",m=r):n||i?(d=n?"HEAD":"GET",Object.entries(r).filter(([b,j])=>j!==void 0).map(([b,j])=>[b,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([b,j])=>{h.searchParams.append(b,j)})):(d="POST",m=r);const x=new Headers(this.headers);return g?x.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&x.set("Prefer",`count=${l}`),new fl({method:d,url:h,headers:x,schema:this.schemaName,body:m,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch,urlLengthLimit:this.urlLengthLimit})}};class VM{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const i=n.node,l=parseInt(i.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const KM="2.96.0",YM=`realtime-js/${KM}`,WM="1.0.0",JA="2.0.0",o_=JA,Xy=1e4,XM=1e3,ZM=100;var ms;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ms||(ms={}));var Er;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Er||(Er={}));var Sa;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Sa||(Sa={}));var Zy;(function(e){e.websocket="websocket"})(Zy||(Zy={}));var Qs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Qs||(Qs={}));class QM{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const i=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var r,n;const i=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},u=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(t,r,n){var i,l;const u=t.topic,d=(i=t.ref)!==null&&i!==void 0?i:"",h=(l=t.join_ref)!==null&&l!==void 0?l:"",m=t.payload.event,p=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},g=Object.keys(p).length===0?"":JSON.stringify(p);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`metadata length ${g.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+d.length+u.length+m.length+g.length,b=new ArrayBuffer(this.HEADER_LENGTH+x);let j=new DataView(b),N=0;j.setUint8(N++,this.KINDS.userBroadcastPush),j.setUint8(N++,h.length),j.setUint8(N++,d.length),j.setUint8(N++,u.length),j.setUint8(N++,m.length),j.setUint8(N++,g.length),j.setUint8(N++,r),Array.from(h,E=>j.setUint8(N++,E.charCodeAt(0))),Array.from(d,E=>j.setUint8(N++,E.charCodeAt(0))),Array.from(u,E=>j.setUint8(N++,E.charCodeAt(0))),Array.from(m,E=>j.setUint8(N++,E.charCodeAt(0))),Array.from(g,E=>j.setUint8(N++,E.charCodeAt(0)));var _=new Uint8Array(b.byteLength+n.byteLength);return _.set(new Uint8Array(b),0),_.set(new Uint8Array(n),b.byteLength),_.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[i,l,u,d,h]=n;return r({join_ref:i,ref:l,topic:u,event:d,payload:h})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,i)}}_decodeUserBroadcast(t,r,n){const i=r.getUint8(1),l=r.getUint8(2),u=r.getUint8(3),d=r.getUint8(4);let h=this.HEADER_LENGTH+4;const m=n.decode(t.slice(h,h+i));h=h+i;const p=n.decode(t.slice(h,h+l));h=h+l;const g=n.decode(t.slice(h,h+u));h=h+u;const x=t.slice(h,t.byteLength),b=d===this.JSON_ENCODING?JSON.parse(n.decode(x)):x,j={type:this.BROADCAST_EVENT,event:p,payload:b};return u>0&&(j.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class eO{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $t;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})($t||($t={}));const l_=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((l,u)=>(l[u]=JM(u,e,t,i),l),{}):{}},JM=(e,t,r,n)=>{const i=t.find(d=>d.name===e),l=i==null?void 0:i.type,u=r[e];return l&&!n.includes(l)?tO(l,u):Qy(u)},tO=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return n4(t,r)}switch(e){case $t.bool:return e4(t);case $t.float4:case $t.float8:case $t.int2:case $t.int4:case $t.int8:case $t.numeric:case $t.oid:return t4(t);case $t.json:case $t.jsonb:return r4(t);case $t.timestamp:return a4(t);case $t.abstime:case $t.date:case $t.daterange:case $t.int4range:case $t.int8range:case $t.money:case $t.reltime:case $t.text:case $t.time:case $t.timestamptz:case $t.timetz:case $t.tsrange:case $t.tstzrange:return Qy(t);default:return Qy(t)}},Qy=e=>e,e4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},t4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},r4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},n4=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let l;const u=e.slice(1,r);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(d=>tO(t,d))}return e},a4=e=>typeof e=="string"?e.replace(" ","T"):e,rO=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class t0{constructor(t,r,n={},i=Xy){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var c_;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(c_||(c_={}));class Wc{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wc.syncState(this.state,i,l,u),this.pendingDiffs.forEach(h=>{this.state=Wc.syncDiff(this.state,h,l,u)}),this.pendingDiffs=[],d()}),this.channel._on(n.diff,{},i=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Wc.syncDiff(this.state,i,l,u),d())}),this.onJoin((i,l,u)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:l,newPresences:u})}),this.onLeave((i,l,u)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const l=this.cloneDeep(t),u=this.transformState(r),d={},h={};return this.map(l,(m,p)=>{u[m]||(h[m]=p)}),this.map(u,(m,p)=>{const g=l[m];if(g){const x=p.map(_=>_.presence_ref),b=g.map(_=>_.presence_ref),j=p.filter(_=>b.indexOf(_.presence_ref)<0),N=g.filter(_=>x.indexOf(_.presence_ref)<0);j.length>0&&(d[m]=j),N.length>0&&(h[m]=N)}else d[m]=p}),this.syncDiff(l,{joins:d,leaves:h},n,i)}static syncDiff(t,r,n,i){const{joins:l,leaves:u}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(l,(d,h)=>{var m;const p=(m=t[d])!==null&&m!==void 0?m:[];if(t[d]=this.cloneDeep(h),p.length>0){const g=t[d].map(b=>b.presence_ref),x=p.filter(b=>g.indexOf(b.presence_ref)<0);t[d].unshift(...x)}n(d,p,h)}),this.map(u,(d,h)=>{let m=t[d];if(!m)return;const p=h.map(g=>g.presence_ref);m=m.filter(g=>p.indexOf(g.presence_ref)<0),t[d]=m,i(d,m,h),m.length===0&&delete t[d]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var u_;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(u_||(u_={}));var Xc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Xc||(Xc={}));var fi;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(fi||(fi={}));class gl{constructor(t,r={config:{}},n){var i,l;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Er.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new t0(this,Sa.join,this.params,this.timeout),this.rejoinTimer=new eO(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Er.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Er.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Er.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Er.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Er.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Sa.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new Wc(this),this.broadcastEndpointURL=rO(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,i,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Er.closed){const{config:{broadcast:u,presence:d,private:h}}=this.params,m=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(b=>b.filter))!==null&&i!==void 0?i:[],p=!!this.bindings[Xc.PRESENCE]&&this.bindings[Xc.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,g={},x={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:p}),postgres_changes:m,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(b=>t==null?void 0:t(fi.CHANNEL_ERROR,b)),this._onClose(()=>t==null?void 0:t(fi.CLOSED)),this.updateJoinPayload(Object.assign({config:x},g)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var j;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){t==null||t(fi.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,_=(j=N==null?void 0:N.length)!==null&&j!==void 0?j:0,E=[];for(let k=0;k<_;k++){const A=N[k],{filter:{event:I,schema:R,table:C,filter:P}}=A,Y=b&&b[k];if(Y&&Y.event===I&&gl.isFilterValueEqual(Y.schema,R)&&gl.isFilterValueEqual(Y.table,C)&&gl.isFilterValueEqual(Y.filter,P))E.push(Object.assign(Object.assign({},A),{id:Y.id}));else{this.unsubscribe(),this.state=Er.errored,t==null||t(fi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,t&&t(fi.SUBSCRIBED);return}}).receive("error",b=>{this.state=Er.errored,t==null||t(fi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(fi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Er.joined&&t===Xc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var i;if(r==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const m=await d.json();h=m.error||m.message||h}catch{}return Promise.reject(new Error(h))}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=t,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=m.body)===null||i===void 0?void 0:i.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,d,h;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Er.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Sa.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new t0(this,Sa.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Er.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,l=setTimeout(()=>i.abort(),n),u=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(l),u}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new t0(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>ZM){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,l;const u=t.toLocaleLowerCase(),{close:d,error:h,leave:m,join:p}=Sa;if(n&&[d,h,m,p].indexOf(u)>=0&&n!==this._joinRef())return;let x=this._onMessage(u,r,n);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var j,N,_;return((j=b.filter)===null||j===void 0?void 0:j.event)==="*"||((_=(N=b.filter)===null||N===void 0?void 0:N.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===u}).map(b=>b.callback(x,n)):(l=this.bindings[u])===null||l===void 0||l.filter(b=>{var j,N,_,E,k,A;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const I=b.id,R=(j=b.filter)===null||j===void 0?void 0:j.event;return I&&((N=r.ids)===null||N===void 0?void 0:N.includes(I))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const I=(k=(E=b==null?void 0:b.filter)===null||E===void 0?void 0:E.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return I==="*"||I===((A=r==null?void 0:r.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof x=="object"&&"ids"in x){const j=x.data,{schema:N,table:_,commit_timestamp:E,type:k,errors:A}=j;x=Object.assign(Object.assign({},{schema:N,table:_,commit_timestamp:E,eventType:k,new:{},old:{},errors:A}),this._getPayloadRecords(j))}b.callback(x,n)})}_isClosed(){return this.state===Er.closed}_isJoined(){return this.state===Er.joined}_isJoining(){return this.state===Er.joining}_isLeaving(){return this.state===Er.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),l={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(l):this.bindings[i]=[l],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var l;return!(((l=i.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===n&&gl.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Sa.close,{},t)}_onError(t){this._on(Sa.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Er.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=l_(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=l_(t.columns,t.old_record)),r}}const r0=()=>{},mf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},i4=[1e3,2e3,5e3,1e4],s4=1e4,o4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class l4{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xy,this.transport=null,this.heartbeatIntervalMs=mf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=r0,this.ref=0,this.reconnectTimer=null,this.vsn=o_,this.logger=r0,this.conn=null,this.sendBuffer=[],this.serializer=new QM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...l)=>i(...l):(...l)=>fetch(...l),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Zy.websocket}`,this.httpEndpoint=rO(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=VM.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ms.connecting:return Qs.Connecting;case ms.open:return Qs.Open;case ms.closing:return Qs.Closing;default:return Qs.Closed}}isConnected(){return this.connectionState()===Qs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(l=>l.topic===n);if(i)return i;{const l=new gl(`realtime:${t}`,r,this);return this.channels.push(l),l}}push(t){const{topic:r,event:n,payload:i,ref:l}=t,u=()=>{this.encode(t,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${r} ${n} (${l})`,i),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(XM,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},mf.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const m=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",m)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:i,payload:l,ref:u}=r,d=u?`(${u})`:"",h=l.status||"";this.log("receive",`${h} ${n} ${i} ${d}`.trim(),l),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(i,l,u)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===ms.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ms.open||this.conn.readyState===ms.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Sa.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([o4],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const l={access_token:r,version:YM};r&&i.updateJoinPayload(l),i.joinedOnce&&i._isJoined()&&i._push(Sa.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new eO(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},mf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,l,u,d,h,m,p,g,x,b;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Xy,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:mf.HEARTBEAT_INTERVAL,this.worker=(l=t==null?void 0:t.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=t==null?void 0:t.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=t==null?void 0:t.heartbeatCallback)!==null&&d!==void 0?d:r0,this.vsn=(h=t==null?void 0:t.vsn)!==null&&h!==void 0?h:o_,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=t==null?void 0:t.reconnectAfterMs)!==null&&m!==void 0?m:(j=>i4[j-1]||s4),this.vsn){case WM:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:((j,N)=>N(JSON.stringify(j))),this.decode=(g=t==null?void 0:t.decode)!==null&&g!==void 0?g:((j,N)=>N(JSON.parse(j)));break;case JA:this.encode=(x=t==null?void 0:t.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(b=t==null?void 0:t.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Jc=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function c4(e,t,r){const n=new URL(t,e);if(r)for(const[i,l]of Object.entries(r))l!==void 0&&n.searchParams.set(i,l);return n.toString()}async function u4(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function d4(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:l,headers:u}){const d=c4(e.baseUrl,n,i),h=await u4(e.auth),m=await t(d,{method:r,headers:{...l?{"Content-Type":"application/json"}:{},...h,...u},body:l?JSON.stringify(l):void 0}),p=await m.text(),g=(m.headers.get("content-type")||"").includes("application/json"),x=g&&p?JSON.parse(p):p;if(!m.ok){const b=g?x:void 0,j=b==null?void 0:b.error;throw new Jc((j==null?void 0:j.message)??`Request failed with status ${m.status}`,{status:m.status,icebergType:j==null?void 0:j.type,icebergCode:j==null?void 0:j.code,details:b})}return{status:m.status,headers:m.headers,data:x}}}}function pf(e){return e.join("")}var f4=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:pf(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${pf(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pf(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${pf(e.namespace)}`}),!0}catch(t){if(t instanceof Jc&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Jc&&r.status===409)return;throw r}}};function nl(e){return e.join("")}var h4=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${nl(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${nl(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${nl(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${nl(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${nl(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${nl(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Jc&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Jc&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},m4=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=d4({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new f4(this.client,t),this.tableOps=new h4(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Gh=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function Hh(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var gf=class extends Gh{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},nO=class extends Gh{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const p4=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),g4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Jy=e=>{if(Array.isArray(e))return e.map(r=>Jy(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[i]=Jy(n)}),t},y4=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function eu(e){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(e)}function v4(e,t){if(eu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x4(e){var t=v4(e,"string");return eu(t)=="symbol"?t:t+""}function b4(e,t,r){return(t=x4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d_(Object(r),!0).forEach(function(n){b4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const f_=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},w4=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const i=e,l=i.status||500;if(typeof i.json=="function")i.json().then(u=>{const d=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||l+"";t(new gf(f_(u),l,d,n))}).catch(()=>{if(n==="vectors"){const u=l+"";t(new gf(i.statusText||`HTTP ${l} error`,l,u,n))}else{const u=l+"";t(new gf(i.statusText||`HTTP ${l} error`,l,u,n))}});else{const u=l+"";t(new gf(i.statusText||`HTTP ${l} error`,l,u,n))}}else t(new nO(f_(e),e,n))},j4=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?We(We({},i),r):(g4(n)?(i.headers=We({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,t!=null&&t.duplex&&(i.duplex=t.duplex),We(We({},i),r))};async function Lc(e,t,r,n,i,l,u){return new Promise((d,h)=>{e(r,j4(t,n,i,l)).then(m=>{if(!m.ok)throw m;if(n!=null&&n.noResolveJson)return m;if(u==="vectors"){const p=m.headers.get("content-type");if(m.headers.get("content-length")==="0"||m.status===204)return{};if(!p||!p.includes("application/json"))return{}}return m.json()}).then(m=>d(m)).catch(m=>w4(m,h,n,u))})}function aO(e="storage"){return{get:async(t,r,n,i)=>Lc(t,"GET",r,n,i,void 0,e),post:async(t,r,n,i,l)=>Lc(t,"POST",r,i,l,n,e),put:async(t,r,n,i,l)=>Lc(t,"PUT",r,i,l,n,e),head:async(t,r,n,i)=>Lc(t,"HEAD",r,We(We({},n),{},{noResolveJson:!0}),i,void 0,e),remove:async(t,r,n,i,l)=>Lc(t,"DELETE",r,i,l,n,e)}}const N4=aO("storage"),{get:tu,post:_a,put:ev,head:_4,remove:dx}=N4,$n=aO("vectors");var Rl=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=p4(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=We(We({},this.headers),{},{[e]:t}),this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Hh(r))return{data:null,error:r};throw r}}},S4=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Hh(t))return{data:null,error:t};throw t}}};let iO;iO=Symbol.toStringTag;var E4=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[iO]="BlobDownloadBuilder",this.promise=null}asStream(){return new S4(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Hh(t))return{data:null,error:t};throw t}}};const A4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},h_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var O4=class extends Rl{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var i=this;return i.handleOperation(async()=>{let l;const u=We(We({},h_),n);let d=We(We({},i.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),h&&l.append("metadata",i.encodeMetadata(h)),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),h&&!l.has("metadata")&&l.append("metadata",i.encodeMetadata(h))):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,h&&(d["x-metadata"]=i.toBase64(i.encodeMetadata(h))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),n!=null&&n.headers&&(d=We(We({},d),n.headers));const m=i._removeEmptyFolders(t),p=i._getFinalPath(m),g=await(e=="PUT"?ev:_a)(i.fetch,`${i.url}/object/${p}`,l,We({headers:d},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{path:m,id:g.Id,fullPath:g.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var i=this;const l=i._removeEmptyFolders(e),u=i._getFinalPath(l),d=new URL(i.url+`/object/upload/sign/${u}`);return d.searchParams.set("token",t),i.handleOperation(async()=>{let h;const m=We({upsert:h_.upsert},n),p=We(We({},i.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",m.cacheControl),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.append("cacheControl",m.cacheControl)):(h=r,p["cache-control"]=`max-age=${m.cacheControl}`,p["content-type"]=m.contentType),{path:l,fullPath:(await ev(i.fetch,d.toString(),h,{headers:p})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const i=We({},r.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const l=await _a(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:i}),u=new URL(r.url+l.url),d=u.searchParams.get("token");if(!d)throw new Gh("No token returned by API");return{signedUrl:u.toString(),path:e,token:d}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await _a(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await _a(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let i=n._getFinalPath(e),l=await _a(n.fetch,`${n.url}/object/sign/${i}`,We({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const u=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${l.signedURL}${u}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const i=await _a(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i.map(u=>We(We({},u),{},{signedUrl:u.signedURL?encodeURI(`${n.url}${u.signedURL}${l}`):null}))})}download(e,t,r){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),l=i?`?${i}`:"",u=this._getFinalPath(e),d=()=>tu(this.fetch,`${this.url}/${n}/${u}${l}`,{headers:this.headers,noResolveJson:!0},r);return new E4(d,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>Jy(await tu(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await _4(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Hh(n)&&n instanceof nO){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});u!==""&&n.push(u);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await dx(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const i=We(We(We({},A4),t),{},{prefix:e||""});return await _a(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=We({},e);return await _a(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const C4="2.96.0",_u={"X-Client-Info":`storage-js/${C4}`};var T4=class extends Rl{constructor(e,t={},r,n){const i=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const l=i.href.replace(/\/$/,""),u=We(We({},_u),t);super(l,u,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await tu(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await tu(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await _a(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await ev(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await _a(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await dx(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},k4=class extends Rl{constructor(e,t={},r){const n=e.replace(/\/$/,""),i=We(We({},_u),t);super(n,i,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await _a(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await tu(t.fetch,i,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await dx(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!y4(e))throw new Gh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new m4({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,l){const u=i[l];return typeof u!="function"?u:async(...d)=>{try{return{data:await u.apply(i,d),error:null}}catch(h){if(n)throw h;return{data:null,error:h}}}}})}},D4=class extends Rl{constructor(e,t={},r){const n=e.replace(/\/$/,""),i=We(We({},_u),{},{"Content-Type":"application/json"},t);super(n,i,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await $n.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await $n.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await $n.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await $n.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},R4=class extends Rl{constructor(e,t={},r){const n=e.replace(/\/$/,""),i=We(We({},_u),{},{"Content-Type":"application/json"},t);super(n,i,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await $n.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await $n.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await $n.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await $n.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await $n.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},P4=class extends Rl{constructor(e,t={},r){const n=e.replace(/\/$/,""),i=We(We({},_u),{},{"Content-Type":"application/json"},t);super(n,i,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await $n.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await $n.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await $n.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await $n.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},M4=class extends P4{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new I4(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},I4=class extends D4{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new L4(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},L4=class extends R4{constructor(e,t,r,n,i){super(e,t,i),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},z4=class extends T4{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new O4(this.url,this.headers,e,this.fetch)}get vectors(){return new M4(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new k4(this.url+"/iceberg",this.headers,this.fetch)}};const sO="2.96.0",hl=30*1e3,tv=3,n0=tv*hl,U4="http://localhost:9999",$4="supabase.auth.token",q4={"X-Client-Info":`gotrue-js/${sO}`},rv="X-Supabase-Api-Version",oO={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},B4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,G4=600*1e3;class ru extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function qe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class H4 extends ru{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function F4(e){return qe(e)&&e.name==="AuthApiError"}class Js extends ru{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Oi extends ru{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class zn extends Oi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function a0(e){return qe(e)&&e.name==="AuthSessionMissingError"}class al extends Oi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yf extends Oi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class vf extends Oi{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function V4(e){return qe(e)&&e.name==="AuthImplicitGrantRedirectError"}class m_ extends Oi{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class K4 extends Oi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class nv extends Oi{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function i0(e){return qe(e)&&e.name==="AuthRetryableFetchError"}class p_ extends Oi{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class av extends Oi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Gf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),g_=` 	
\r=`.split(""),Y4=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<g_.length;t+=1)e[g_[t].charCodeAt(0)]=-2;for(let t=0;t<Gf.length;t+=1)e[Gf[t].charCodeAt(0)]=t;return e})();function y_(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Gf[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Gf[n]),t.queuedBits-=6}}function lO(e,t,r){const n=Y4[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function v_(e){const t=[],r=u=>{t.push(String.fromCodePoint(u))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},l=u=>{Z4(u,n,r)};for(let u=0;u<e.length;u+=1)lO(e.charCodeAt(u),i,l);return t.join("")}function W4(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function X4(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}W4(n,t)}}function Z4(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function xl(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)lO(e.charCodeAt(i),r,n);return new Uint8Array(t)}function Q4(e){const t=[];return X4(e,r=>t.push(r)),new Uint8Array(t)}function eo(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>y_(i,r,n)),y_(null,r,n),t.join("")}function J4(e){return Math.round(Date.now()/1e3)+e}function eI(){return Symbol("auth-callback")}const Wr=()=>typeof window<"u"&&typeof document<"u",Vs={tested:!1,writable:!1},cO=()=>{if(!Wr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vs.tested)return Vs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Vs.tested=!0,Vs.writable=!0}catch{Vs.tested=!0,Vs.writable=!1}return Vs.writable};function tI(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,l)=>{t[l]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const uO=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),rI=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ml=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ks=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Yr=async(e,t)=>{await e.removeItem(t)};class Fh{constructor(){this.promise=new Fh.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Fh.promiseConstructor=Promise;function xf(e){const t=e.split(".");if(t.length!==3)throw new av("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!B4.test(t[n]))throw new av("JWT not in base64url format");return{header:JSON.parse(v_(t[0])),payload:JSON.parse(v_(t[1])),signature:xl(t[2]),raw:{header:t[0],payload:t[1]}}}async function nI(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function aI(e,t){return new Promise((n,i)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await e(l);if(!t(l,null,u)){n(u);return}}catch(u){if(!t(l,u)){i(u);return}}})()})}function iI(e){return("0"+e.toString(16)).substr(-2)}function sI(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let l=0;l<56;l++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,iI).join("")}async function oI(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(l=>String.fromCharCode(l)).join("")}async function lI(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await oI(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function il(e,t,r=!1){const n=sI();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await ml(e,`${t}-code-verifier`,i);const l=await lI(n);return[l,n===l?"plain":"s256"]}const cI=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uI(e){const t=e.headers.get(rv);if(!t||!t.match(cI))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function dI(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function fI(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const hI=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function sl(e){if(!hI.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function s0(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mI(e,t){return new Proxy(e,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const l=n.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,i)}})}function x_(e){return JSON.parse(JSON.stringify(e))}const Ys=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),pI=[502,503,504];async function b_(e){var t;if(!rI(e))throw new nv(Ys(e),0);if(pI.includes(e.status))throw new nv(Ys(e),e.status);let r;try{r=await e.json()}catch(l){throw new Js(Ys(l),l)}let n;const i=uI(e);if(i&&i.getTime()>=oO["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new p_(Ys(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new zn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new p_(Ys(r),e.status,r.weak_password.reasons);throw new H4(Ys(r),e.status||500,n)}const gI=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function Xe(e,t,r,n){var i;const l=Object.assign({},n==null?void 0:n.headers);l[rv]||(l[rv]=oO["2024-01-01"].name),n!=null&&n.jwt&&(l.Authorization=`Bearer ${n.jwt}`);const u=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(u.redirect_to=n.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await yI(e,t,r+d,{headers:l,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(h):{data:Object.assign({},h),error:null}}async function yI(e,t,r,n,i,l){const u=gI(t,n,i,l);let d;try{d=await e(r,Object.assign({},u))}catch(h){throw console.error(h),new nv(Ys(h),0)}if(d.ok||await b_(d),n!=null&&n.noResolveJson)return d;try{return await d.json()}catch(h){await b_(h)}}function Na(e){var t;let r=null;bI(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=J4(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function w_(e){const t=Na(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ys(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function vI(e){return{data:e,error:null}}function xI(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:l}=e,u=Bh(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:l},h=Object.assign({},u);return{data:{properties:d,user:h},error:null}}function j_(e){return e}function bI(e){return e.access_token&&e.refresh_token&&e.expires_in}const o0=["global","local","others"];class wI{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=uO(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=o0[0]){if(o0.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${o0.join(", ")}`);try{return await Xe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ys})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Bh(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await Xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:xI,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(qe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Xe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ys})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,l,u,d,h;try{const m={nextPage:null,lastPage:0,total:0},p=await Xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(l=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&l!==void 0?l:""},xform:j_});if(p.error)throw p.error;const g=await p.json(),x=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(h=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(j=>{const N=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(j.split(";")[1].split("=")[1]);m[`${_}Page`]=N}),m.total=parseInt(x)),{data:Object.assign(Object.assign({},g),m),error:null}}catch(m){if(qe(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){sl(t);try{return await Xe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ys})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){sl(t);try{return await Xe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:ys})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){sl(t);try{return await Xe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:ys})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){sl(t.userId);try{const{data:r,error:n}=await Xe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){sl(t.userId),sl(t.id);try{return{data:await Xe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,i,l,u,d,h;try{const m={nextPage:null,lastPage:0,total:0},p=await Xe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(l=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&l!==void 0?l:""},xform:j_});if(p.error)throw p.error;const g=await p.json(),x=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(h=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(j=>{const N=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(j.split(";")[1].split("=")[1]);m[`${_}Page`]=N}),m.total=parseInt(x)),{data:Object.assign(Object.assign({},g),m),error:null}}catch(m){if(qe(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await Xe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Xe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Xe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Xe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Xe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}}function N_(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const ol={debug:!!(globalThis&&cO()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dO extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class __ extends dO{}async function jI(e,t,r){ol.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;t>0&&setTimeout(()=>{n.abort(),ol.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve();try{return await globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){ol.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{ol.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw ol.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new __(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ol.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}catch(i){throw(i==null?void 0:i.name)==="AbortError"?new __(`Acquiring an exclusive Navigator LockManager lock "${e}" timed out waiting ${t}ms`):i}}function NI(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function fO(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function _I(e){return parseInt(e,16)}function SI(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function EI(e){var t;const{chainId:r,domain:n,expirationTime:i,issuedAt:l=new Date,nonce:u,notBefore:d,requestId:h,resources:m,scheme:p,uri:g,version:x}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const b=fO(e.address),j=p?`${p}://${n}`:n,N=e.statement?`${e.statement}
`:"",_=`${j} wants you to sign in with your Ethereum account:
${b}

${N}`;let E=`URI: ${g}
Version: ${x}
Chain ID: ${r}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(i&&(E+=`
Expiration Time: ${i.toISOString()}`),d&&(E+=`
Not Before: ${d.toISOString()}`),h&&(E+=`
Request ID: ${h}`),m){let k=`
Resources:`;for(const A of m){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);k+=`
- ${A}`}E+=k}return`${_}
${E}`}class xr extends Error{constructor({message:t,code:r,cause:n,name:i}){var l;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(l=i??(n instanceof Error?n.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=r}}class Hf extends xr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function AI({error:e,options:t}){var r,n,i;const{publicKey:l}=t;if(!l)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new xr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new xr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=l.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new xr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=l.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new xr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new xr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new xr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return l.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new xr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new xr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(hO(u)){if(l.rp.id!==u)return new xr({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new xr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new xr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new xr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new xr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function OI({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new xr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new xr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(hO(n)){if(r.rpId!==n)return new xr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new xr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new xr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new xr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class CI{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const TI=new CI;function kI(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,i=Bh(e,["challenge","user","excludeCredentials"]),l=xl(t).buffer,u=Object.assign(Object.assign({},r),{id:xl(r.id).buffer}),d=Object.assign(Object.assign({},i),{challenge:l,user:u});if(n&&n.length>0){d.excludeCredentials=new Array(n.length);for(let h=0;h<n.length;h++){const m=n[h];d.excludeCredentials[h]=Object.assign(Object.assign({},m),{id:xl(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function DI(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Bh(e,["challenge","allowCredentials"]),i=xl(t).buffer,l=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){l.allowCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const d=r[u];l.allowCredentials[u]=Object.assign(Object.assign({},d),{id:xl(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function RI(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:eo(new Uint8Array(e.response.attestationObject)),clientDataJSON:eo(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function PI(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:eo(new Uint8Array(i.authenticatorData)),clientDataJSON:eo(new Uint8Array(i.clientDataJSON)),signature:eo(new Uint8Array(i.signature)),userHandle:i.userHandle?eo(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function hO(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function S_(){var e,t;return!!(Wr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function MI(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Hf("Browser returned unexpected credential type",t)}:{data:null,error:new Hf("Empty credential response",t)}}catch(t){return{data:null,error:AI({error:t,options:e})}}}async function II(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Hf("Browser returned unexpected credential type",t)}:{data:null,error:new Hf("Empty credential response",t)}}catch(t){return{data:null,error:OI({error:t,options:e})}}}const LI={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},zI={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ff(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of e)if(i)for(const l in i){const u=i[l];if(u!==void 0)if(Array.isArray(u))n[l]=u;else if(r(u))n[l]=u;else if(t(u)){const d=n[l];t(d)?n[l]=Ff(d,u):n[l]=Ff(u)}else n[l]=u}return n}function UI(e,t){return Ff(LI,e,t||{})}function $I(e,t){return Ff(zI,e,t||{})}class qI{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:i},l){var u;try{const{data:d,error:h}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!d)return{data:null,error:h};const m=i??TI.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:p}=d.webauthn.credential_options.publicKey;if(!p.name){const g=n;if(g)p.name=`${p.id}:${g}`;else{const b=(await this.client.getUser()).data.user,j=((u=b==null?void 0:b.user_metadata)===null||u===void 0?void 0:u.name)||(b==null?void 0:b.email)||(b==null?void 0:b.id)||"User";p.name=`${p.id}:${j}`}}p.displayName||(p.displayName=p.name)}switch(d.webauthn.type){case"create":{const p=UI(d.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:g,error:x}=await MI({publicKey:p,signal:m});return g?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:g}},error:null}:{data:null,error:x}}case"request":{const p=$I(d.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:g,error:x}=await II(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:p,signal:m}));return g?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:g}},error:null}:{data:null,error:x}}}}catch(d){return qe(d)?{data:null,error:d}:{data:null,error:new Js("Unexpected error in challenge",d)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},l){if(!r)return{data:null,error:new ru("rpId is required for WebAuthn authentication")};try{if(!S_())return{data:null,error:new Js("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:l});if(!u)return{data:null,error:d};const{webauthn:h}=u;return this._verify({factorId:t,challengeId:u.challengeId,webauthn:{type:h.type,rpId:r,rpOrigins:n,credential_response:h.credential_response}})}catch(u){return qe(u)?{data:null,error:u}:{data:null,error:new Js("Unexpected error in authenticate",u)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},l){if(!r)return{data:null,error:new ru("rpId is required for WebAuthn registration")};try{if(!S_())return{data:null,error:new Js("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:t});if(!u)return await this.client.mfa.listFactors().then(p=>{var g;return(g=p.data)===null||g===void 0?void 0:g.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:d};const{data:h,error:m}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:l});return h?this._verify({factorId:u.id,challengeId:h.challengeId,webauthn:{rpId:r,rpOrigins:n,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:m}}catch(u){return qe(u)?{data:null,error:u}:{data:null,error:new Js("Unexpected error in register",u)}}}}NI();const BI={url:U4,storageKey:$4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:q4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function E_(e,t,r){return await r()}const ll={};class nu{get jwks(){var t,r;return(r=(t=ll[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ll[this.storageKey]=Object.assign(Object.assign({},ll[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ll[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ll[this.storageKey]=Object.assign(Object.assign({},ll[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},BI),t);if(this.storageKey=l.storageKey,this.instanceID=(r=nu.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,nu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Wr()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new wI({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=uO(l.fetch),this.lock=l.lock||E_,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&Wr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=jI:this.lock=E_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new qI(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:cO()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=N_(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=N_(this.memoryStorage)),Wr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u);try{await this._notifyAllSubscribers(u.data.event,u.data.session,!1)}catch(d){this._debug("#broadcastChannel","error",d)}})}this.initialize().catch(u=>{this._debug("#initialize()","error",u)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${sO}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Wr()&&(r=tI(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Wr()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:l}=await this._getSessionFromURL(r,n);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),V4(l)){const h=(t=l.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:u,redirectType:d}=i;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return qe(r)?this._returnResult({error:r}):this._returnResult({error:new Js("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const l=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Na}),{data:u,error:d}=l;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const h=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(l){if(qe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(t){var r,n,i;try{let l;if("email"in t){const{email:p,password:g,options:x}=t;let b=null,j=null;this.flowType==="pkce"&&([b,j]=await il(this.storage,this.storageKey)),l=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:p,password:g,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:b,code_challenge_method:j},xform:Na})}else if("phone"in t){const{phone:p,password:g,options:x}=t;l=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},channel:(i=x==null?void 0:x.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:Na})}else throw new yf("You must provide either an email or phone number and a password");const{data:u,error:d}=l;if(d||!u)return await Yr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const h=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(l){if(await Yr(this.storage,`${this.storageKey}-code-verifier`),qe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(t){try{let r;if("email"in t){const{email:l,password:u,options:d}=t;r=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:w_})}else if("phone"in t){const{phone:l,password:u,options:d}=t;r=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:w_})}else throw new yf("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const l=new al;return this._returnResult({data:{user:null,session:null},error:l})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,i,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,i,l,u,d,h,m,p,g,x;let b,j;if("message"in t)b=t.message,j=t.signature;else{const{chain:N,wallet:_,statement:E,options:k}=t;let A;if(Wr())if(typeof _=="object")A=_;else{const oe=window;if("ethereum"in oe&&typeof oe.ethereum=="object"&&"request"in oe.ethereum&&typeof oe.ethereum.request=="function")A=oe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=_}const I=new URL((r=k==null?void 0:k.url)!==null&&r!==void 0?r:window.location.href),R=await A.request({method:"eth_requestAccounts"}).then(oe=>oe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=fO(R[0]);let P=(n=k==null?void 0:k.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!P){const oe=await A.request({method:"eth_chainId"});P=_I(oe)}const Y={domain:I.host,address:C,statement:E,uri:I.href,version:"1",chainId:P,nonce:(i=k==null?void 0:k.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(u=(l=k==null?void 0:k.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=k==null?void 0:k.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=k==null?void 0:k.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(m=k==null?void 0:k.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(p=k==null?void 0:k.signInWithEthereum)===null||p===void 0?void 0:p.resources};b=EI(Y),j=await A.request({method:"personal_sign",params:[SI(b),C]})}try{const{data:N,error:_}=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:j},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Na});if(_)throw _;if(!N||!N.session||!N.user){const E=new al;return this._returnResult({data:{user:null,session:null},error:E})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:_})}catch(N){if(qe(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async signInWithSolana(t){var r,n,i,l,u,d,h,m,p,g,x,b;let j,N;if("message"in t)j=t.message,N=t.signature;else{const{chain:_,wallet:E,statement:k,options:A}=t;let I;if(Wr())if(typeof E=="object")I=E;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))I=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=E}const R=new URL((r=A==null?void 0:A.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in I&&I.signIn){const C=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A==null?void 0:A.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),k?{statement:k}:null));let P;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")P=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)P=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)j=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),N=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${R.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(i=(n=A==null?void 0:A.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((l=A==null?void 0:A.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((u=A==null?void 0:A.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((d=A==null?void 0:A.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((h=A==null?void 0:A.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((m=A==null?void 0:A.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((g=(p=A==null?void 0:A.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...A.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const C=await I.signMessage(new TextEncoder().encode(j),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=C}}try{const{data:_,error:E}=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:eo(N)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Na});if(E)throw E;if(!_||!_.session||!_.user){const k=new al;return this._returnResult({data:{user:null,session:null},error:k})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:E})}catch(_){if(qe(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(t){const r=await Ks(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new K4;const{data:l,error:u}=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Na});if(await Yr(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const d=new al;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:i??null}),error:u})}catch(l){if(await Yr(this.storage,`${this.storageKey}-code-verifier`),qe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:l,nonce:u}=t,d=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Na}),{data:h,error:m}=d;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!h||!h.session||!h.user){const p=new al;return this._returnResult({data:{user:null,session:null},error:p})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:m})}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,i,l,u;try{if("email"in t){const{email:d,options:h}=t;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await il(this.storage,this.storageKey));const{error:g}=await Xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},create_user:(n=h==null?void 0:h.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:p},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in t){const{phone:d,options:h}=t,{data:m,error:p}=await Xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(i=h==null?void 0:h.data)!==null&&i!==void 0?i:{},create_user:(l=h==null?void 0:h.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(u=h==null?void 0:h.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:p})}throw new yf("You must provide either an email or phone number.")}catch(d){if(await Yr(this.storage,`${this.storageKey}-code-verifier`),qe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(t){var r,n;try{let i,l;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,l=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:u,error:d}=await Xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:i,xform:Na});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,m=u.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(i){if(qe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var r,n,i,l,u;try{let d=null,h=null;this.flowType==="pkce"&&([d,h]=await il(this.storage,this.storageKey));const m=await Xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:vI});return!((l=m.data)===null||l===void 0)&&l.url&&Wr()&&!(!((u=t.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(d){if(await Yr(this.storage,`${this.storageKey}-code-verifier`),qe(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new zn;const{error:i}=await Xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(qe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:l}=t,{error:u}=await Xe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in t){const{phone:n,type:i,options:l}=t,{data:u,error:d}=await Xe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new yf("You must provide either an email or phone number and a type")}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ks(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<n0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const u=await Ks(this.userStorage,this.storageKey+"-user");u!=null&&u.user?t.user=u.user:t.user=s0()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};t.user=mI(t.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ys}):await this._useSession(async r=>{var n,i,l;const{data:u,error:d}=r;if(d)throw d;return!(!((n=u.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new zn}:await Xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&l!==void 0?l:void 0,xform:ys})})}catch(r){if(qe(r))return a0(r)&&(await this._removeSession(),await Yr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:l}=n;if(l)throw l;if(!i.session)throw new zn;const u=i.session;let d=null,h=null;this.flowType==="pkce"&&t.email!=null&&([d,h]=await il(this.storage,this.storageKey));const{data:m,error:p}=await Xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:ys});if(p)throw p;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(n){if(await Yr(this.storage,`${this.storageKey}-code-verifier`),qe(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new zn;const r=Date.now()/1e3;let n=r,i=!0,l=null;const{payload:u}=xf(t.access_token);if(u.exp&&(n=u.exp,i=n<=r),i){const{data:d,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:h}=await this._getUser(t.access_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});l={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(r){if(qe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:u,error:d}=r;if(d)throw d;t=(n=u.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new zn;const{data:i,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Wr())throw new vf("No browser detected.");if(t.error||t.error_description||t.error_code)throw new vf(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new m_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vf("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new m_("No code detected.");const{data:k,error:A}=await this._exchangeCodeForSession(t.code);if(A)throw A;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:l,refresh_token:u,expires_in:d,expires_at:h,token_type:m}=t;if(!l||!d||!u||!m)throw new vf("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(d);let x=p+g;h&&(x=parseInt(h));const b=x-p;b*1e3<=hl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${g}s`);const j=x-g;p-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,x,p):p-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,x,p);const{data:N,error:_}=await this._getUser(l);if(_)throw _;const E={provider_token:n,provider_refresh_token:i,access_token:l,expires_in:g,expires_at:x,refresh_token:u,token_type:m,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:E,redirectType:t.type},error:null})}catch(n){if(qe(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ks(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:l}=r;if(l&&!a0(l))return this._returnResult({error:l});const u=(n=i.session)===null||n===void 0?void 0:n.access_token;if(u){const{error:d}=await this.admin.signOut(u,t);if(d&&!(F4(d)&&(d.status===404||d.status===401||d.status===403)||a0(d)))return this._returnResult({error:d})}return t!=="others"&&(await this._removeSession(),await Yr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=eI(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:l},error:u}=r;if(u)throw u;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await il(this.storage,this.storageKey,!0));try{return await Xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(await Yr(this.storage,`${this.storageKey}-code-verifier`),qe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:i}=await this._useSession(async l=>{var u,d,h,m,p;const{data:g,error:x}=l;if(x)throw x;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Xe(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(m=g.session)===null||m===void 0?void 0:m.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return Wr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(qe(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:l}}=r;if(i)throw i;const{options:u,provider:d,token:h,access_token:m,nonce:p}=t,g=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=l==null?void 0:l.access_token)!==null&&n!==void 0?n:void 0,body:{provider:d,id_token:h,access_token:m,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Na}),{data:x,error:b}=g;return b?this._returnResult({data:{user:null,session:null},error:b}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new al}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:b}))}catch(i){if(await Yr(this.storage,`${this.storageKey}-code-verifier`),qe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:l,error:u}=r;if(u)throw u;return await Xe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await aI(async i=>(i>0&&await nI(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await Xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Na})),(i,l)=>{const u=200*Math.pow(2,i);return l&&i0(l)&&Date.now()+u-n<hl})}catch(n){if(this._debug(r,"error",n),qe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Wr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Ks(this.storage,this.storageKey);if(i&&this.userStorage){let u=await Ks(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:i.user},await ml(this.userStorage,this.storageKey+"-user",u)),i.user=(t=u==null?void 0:u.user)!==null&&t!==void 0?t:s0()}else if(i&&!i.user&&!i.user){const u=await Ks(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(i.user=u.user,await Yr(this.storage,this.storageKey+"-user"),await ml(this.storage,this.storageKey,i)):i.user=s0()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const l=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<n0;if(this._debug(n,`session has${l?"":" not"} expired with margin of ${n0}s`),l){if(this.autoRefreshToken&&i.refresh_token){const{error:u}=await this._callRefreshToken(i.refresh_token);u&&(console.error(u),i0(u)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(i.access_token);!d&&(u!=null&&u.user)?(i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(n,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new zn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Fh;const{data:l,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!l.session)throw new zn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={data:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(i,"error",l),qe(l)){const u={data:null,error:l};return i0(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(u),u}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(l),l}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,r)}catch(h){l.push(h)}});if(await Promise.all(u),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Yr(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await ml(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const l=x_(i);await ml(this.storage,this.storageKey,l)}else{const i=x_(r);await ml(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Yr(this.storage,this.storageKey),await Yr(this.storage,this.storageKey+"-code-verifier"),await Yr(this.storage,this.storageKey+"-user"),this.userStorage&&await Yr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Wr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),hl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/hl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${hl}ms, refresh threshold is ${tv} ticks`),i<=tv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof dO)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[l,u]=await il(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});i.push(d.toString())}if(n!=null&&n.queryParams){const l=new URLSearchParams(n.queryParams);i.push(l.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:l}=r;return l?this._returnResult({data:null,error:l}):await Xe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:l,error:u}=r;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:h,error:m}=await Xe(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(n=l==null?void 0:l.session)===null||n===void 0?void 0:n.access_token});return m?this._returnResult({data:null,error:m}):(t.factorType==="totp"&&h.type==="totp"&&(!((i=h==null?void 0:h.totp)===null||i===void 0)&&i.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:l}=r;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?RI(t.webauthn.credential_response):PI(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:h}=await Xe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:u,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:h}))})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:l}=r;if(l)return this._returnResult({data:null,error:l});const u=await Xe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:kI(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:DI(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const l of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])i.all.push(l),l.status==="verified"&&i[l.factor_type].push(l);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,i,l;if(t)try{const{payload:b}=xf(t);let j=null;b.aal&&(j=b.aal);let N=j;const{data:{user:_},error:E}=await this.getUser(t);if(E)return this._returnResult({data:null,error:E});((n=(r=_==null?void 0:_.factors)===null||r===void 0?void 0:r.filter(I=>I.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(N="aal2");const A=b.amr||[];return{data:{currentLevel:j,nextLevel:N,currentAuthenticationMethods:A},error:null}}catch(b){if(qe(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:u},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=xf(u.access_token);let m=null;h.aal&&(m=h.aal);let p=m;((l=(i=u.user.factors)===null||i===void 0?void 0:i.filter(b=>b.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(p="aal2");const x=h.amr||[];return{data:{currentLevel:m,nextLevel:p,currentAuthenticationMethods:x},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await Xe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new zn})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:l}=n;if(l)return this._returnResult({data:null,error:l});if(!i)return this._returnResult({data:null,error:new zn});const u=await Xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&Wr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(n){if(qe(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:l}=n;if(l)return this._returnResult({data:null,error:l});if(!i)return this._returnResult({data:null,error:new zn});const u=await Xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&Wr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(n){if(qe(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Xe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new zn})})}catch(t){if(qe(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await Xe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new zn})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(d=>d.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(d=>d.kid===t),n&&this.jwks_cached_at+G4>i)return n;const{data:l,error:u}=await Xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=i,n=l.keys.find(d=>d.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:b,error:j}=await this.getSession();if(j||!b.session)return this._returnResult({data:null,error:j});n=b.session.access_token}const{header:i,payload:l,signature:u,raw:{header:d,payload:h}}=xf(n);r!=null&&r.allowExpired||dI(l.exp);const m=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:b}=await this.getUser(n);if(b)throw b;return{data:{claims:l,header:i,signature:u},error:null}}const p=fI(i.alg),g=await crypto.subtle.importKey("jwk",m,p,!0,["verify"]);if(!await crypto.subtle.verify(p,g,u,Q4(`${d}.${h}`)))throw new av("Invalid JWT signature");return{data:{claims:l,header:i,signature:u},error:null}}catch(n){if(qe(n))return this._returnResult({data:null,error:n});throw n}}}nu.nextInstanceID={};const GI=nu,HI="2.96.0";let Vc="";typeof Deno<"u"?Vc="deno":typeof document<"u"?Vc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vc="react-native":Vc="node";const FI={"X-Client-Info":`supabase-js-${Vc}/${HI}`},VI={headers:FI},KI={schema:"public"},YI={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},WI={};function au(e){"@babel/helpers - typeof";return au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},au(e)}function XI(e,t){if(au(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(au(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZI(e){var t=XI(e,"string");return au(t)=="symbol"?t:t+""}function QI(e,t,r){return(t=ZI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ar(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A_(Object(r),!0).forEach(function(n){QI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const JI=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),e3=()=>Headers,t3=(e,t,r)=>{const n=JI(r),i=e3();return async(l,u)=>{var d;const h=(d=await t())!==null&&d!==void 0?d:e;let m=new i(u==null?void 0:u.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${h}`),n(l,ar(ar({},u),{},{headers:m}))}};function r3(e){return e.endsWith("/")?e:e+"/"}function n3(e,t){var r,n;const{db:i,auth:l,realtime:u,global:d}=e,{db:h,auth:m,realtime:p,global:g}=t,x={db:ar(ar({},h),i),auth:ar(ar({},m),l),realtime:ar(ar({},p),u),storage:{},global:ar(ar(ar({},g),d),{},{headers:ar(ar({},(r=g==null?void 0:g.headers)!==null&&r!==void 0?r:{}),(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?x.accessToken=e.accessToken:delete x.accessToken,x}function a3(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(r3(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var i3=class extends GI{constructor(e){super(e)}},s3=class{constructor(e,t,r){var n,i;this.supabaseUrl=e,this.supabaseKey=t;const l=a3(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:KI,realtime:WI,auth:ar(ar({},YI),{},{storageKey:u}),global:VI},h=n3(r??{},d);if(this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=h.auth)!==null&&m!==void 0?m:{},this.headers,h.global.fetch)}this.fetch=t3(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(ar({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new FM(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch,timeout:h.db.timeout,urlLengthLimit:h.db.urlLengthLimit}),this.storage=new z4(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new LM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:l,flowType:u,lock:d,debug:h,throwOnError:m},p,g){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new i3({url:this.authUrl.href,headers:ar(ar({},x),p),storageKey:l,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,flowType:u,lock:d,debug:h,throwOnError:m,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new l4(this.realtimeUrl.href,ar(ar({},e),{},{params:ar(ar({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const o3=(e,t,r)=>new s3(e,t,r);function l3(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}l3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const c3="https://kwnbyiqzrphkembkwyvd.supabase.co",u3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt3bmJ5aXF6cnBoa2VtYmt3eXZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwNjcyNDYsImV4cCI6MjA3OTY0MzI0Nn0.EZOCsrZoudDfjQrWS0OmNgj-MPCO2X1_8mhiiWevS_g",ne=o3(c3,u3);function d3(e,t){const r=e.channel("public-all-changes"),n=["inventory","requisitions","transactions","invoices","items","users","requisition_sheets","requisition_sheet_items","fichas_individuais","chat_messages","chat_groups","chat_file_attachments","chat_group_members"];for(const l of n)r.on("postgres_changes",{event:"*",schema:"public",table:l},u=>{try{t(u)}catch(d){console.error("Realtime handler error:",d)}});return r.subscribe(),async()=>{try{r.unsubscribe&&await r.unsubscribe()}catch{}try{e.removeChannel&&await e.removeChannel(r)}catch{}}}function f3(e,t,r){const n=e.channel(`chat-group-${t}`);return n.on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`group_id=eq.${t}`},i=>r(i)).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chat_messages",filter:`group_id=eq.${t}`},i=>r(i)).subscribe(),async()=>{try{await n.unsubscribe()}catch(i){console.error("Error unsubscribing from chat messages:",i)}}}function h3(e,t,r){const n=e.channel(`typing-${t}`);return n.on("broadcast",{event:"typing"},i=>{r(i.payload)}).subscribe(),async()=>{try{await n.unsubscribe()}catch(i){console.error("Error unsubscribing from typing indicators:",i)}}}async function l0(e,t,r,n){await e.channel(`typing-${t}`).send({type:"broadcast",event:"typing",payload:{userId:r,isTyping:n}})}async function m3(e){try{const{data:{session:t}}=await ne.auth.getSession(),r="https://kwnbyiqzrphkembkwyvd.supabase.co";if(!(t!=null&&t.access_token))return{success:!1,error:"Usurio no autenticado. Faa login para criar usurios."};const n=await fetch(`${r}/functions/v1/create-user`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.access_token}`},body:JSON.stringify({email:e.email,password:e.password,userData:{name:e.name,role:e.role,locationId:e.locationId,jobTitle:e.jobTitle,defaultDailyGoal:e.defaultDailyGoal,dailyRate:e.dailyRate,halfDayRate:e.halfDayRate,absencePenalty:e.absencePenalty,bonusPerUnit:e.bonusPerUnit}})}),i=await n.text();let l={};try{l=i?JSON.parse(i):{}}catch{return{success:!1,error:"Invalid JSON response from Edge Function",raw:i}}return n.ok?{success:!0,data:l}:{success:!1,error:l.error||l.message||`Status ${n.status}`,status:n.status}}catch(t){return{success:!1,error:(t==null?void 0:t.message)||String(t)}}}const p3=[{id:"loc-central",name:"Almoxarifado Central (Maputo HQ)",type:Ar.CENTRAL,parentId:null},{id:"loc-nampula",name:"Filial Nampula",type:Ar.BRANCH,parentId:"loc-central"},{id:"loc-beira",name:"Filial Beira",type:Ar.BRANCH,parentId:"loc-central"},{id:"loc-tete",name:"Filial Tete (Moatize)",type:Ar.BRANCH,parentId:"loc-central"},{id:"loc-zambezia",name:"Filial Zambzia (Gur)",type:Ar.BRANCH,parentId:"loc-central"},{id:"loc-manica",name:"Filial Manica (Chimoio)",type:Ar.BRANCH,parentId:"loc-central"},{id:"loc-field-alpha",name:"Equipe Alpha (Nampula)",type:Ar.FIELD,parentId:"loc-nampula"},{id:"loc-field-bravo",name:"Equipe Bravo (Beira)",type:Ar.FIELD,parentId:"loc-beira"},{id:"loc-field-charlie",name:"Equipe Carvo (Tete)",type:Ar.FIELD,parentId:"loc-tete"},{id:"loc-field-delta",name:"Equipe Ch (Zambzia)",type:Ar.FIELD,parentId:"loc-zambezia"},{id:"loc-field-echo",name:"Equipe Madeira (Manica)",type:Ar.FIELD,parentId:"loc-manica"}],c0=236.5,u0=118,d0=95,f0=10;Ae.ADMIN,Ae.GENERAL_MANAGER,Ae.MANAGER,Ae.MANAGER,Ae.MANAGER,Ae.MANAGER,Ae.MANAGER,Ae.WORKER,Ae.WORKER,Ae.WORKER,Ae.WORKER,Ae.WORKER,Ae.WORKER;Pt.ASSET,Pt.CONSUMABLE,Pt.CONSUMABLE,Pt.ASSET,Pt.CONSUMABLE,Pt.ASSET;nt.PENDING,Jt.NEW,new Date(Date.now()-864e5).toISOString(),new Date(Date.now()-864e5).toISOString(),new Date(Date.now()-864e5).toISOString(),nt.APPROVED,Jt.NEW,new Date(Date.now()-1728e5).toISOString(),new Date(Date.now()-864e5).toISOString(),new Date(Date.now()-1728e5).toISOString(),new Date(Date.now()-864e5).toISOString();const h0=new Date(Date.now()-864e5).toISOString().split("T")[0];wt.FULL_DAY,wt.HALF_DAY,wt.FULL_DAY;const O_=[{id:"VIEW_DASHBOARD",label:"Visualizar Dashboard",category:"Geral"},{id:"VIEW_REPORTS",label:"Relatrios Dirios e Executivos",category:"Geral"},{id:"VIEW_REQUISITIONS",label:"Visualizar Requisies",category:"Logstica"},{id:"MANAGE_REQUISITIONS",label:"Aprovar/Rejeitar Requisies",category:"Logstica"},{id:"VIEW_INVENTORY",label:"Visualizar Estoque",category:"Logstica"},{id:"MANAGE_INVENTORY",label:"Adicionar/Criar Estoque",category:"Logstica"},{id:"VIEW_PERFORMANCE",label:"Visualizar Desempenho",category:"RH Operacional"},{id:"MANAGE_PERFORMANCE",label:"Lanar Produo/Presena",category:"RH Operacional"},{id:"VIEW_POS",label:"Acessar Ponto de Venda",category:"Vendas & Finanas"},{id:"MANAGE_POS",label:"Realizar Vendas/Despesas",category:"Vendas & Finanas"},{id:"VIEW_INVOICES",label:"Visualizar Documentos/Faturas",category:"Vendas & Finanas"},{id:"MANAGE_INVOICES",label:"Emitir/Gerenciar Faturas",category:"Vendas & Finanas"},{id:"VIEW_PATRIMONY",label:"Visualizar Patrimnio/Contabilidade",category:"Gesto"},{id:"VIEW_HR",label:"Visualizar Mdulo RH",category:"Gesto"},{id:"MANAGE_HR",label:"Gerenciar Funcionrios (Criar/Editar)",category:"Gesto"},{id:"VIEW_PAYROLL",label:"Visualizar Folha Salarial",category:"Gesto"},{id:"MANAGE_PAYROLL",label:"Processar Folha Salarial",category:"Gesto"},{id:"VIEW_SETTINGS",label:"Acessar Definies",category:"Sistema"},{id:"MANAGE_SETTINGS",label:"Gerenciar Configuraes (Locais/Itens)",category:"Sistema"},{id:"MANAGE_USERS",label:"Gerenciar Usurios",category:"Sistema"},{id:"MANAGE_PERMISSIONS",label:"Gerenciar Permisses",category:"Sistema"}],g3={[Ae.ADMIN]:["VIEW_DASHBOARD","VIEW_REPORTS","VIEW_REQUISITIONS","MANAGE_REQUISITIONS","VIEW_INVENTORY","MANAGE_INVENTORY","VIEW_PERFORMANCE","MANAGE_PERFORMANCE","VIEW_POS","MANAGE_POS","VIEW_INVOICES","MANAGE_INVOICES","VIEW_PATRIMONY","VIEW_HR","MANAGE_HR","VIEW_PAYROLL","MANAGE_PAYROLL","VIEW_SETTINGS","MANAGE_SETTINGS","MANAGE_USERS","MANAGE_PERMISSIONS"],[Ae.GENERAL_MANAGER]:["VIEW_DASHBOARD","VIEW_REPORTS","VIEW_REQUISITIONS","MANAGE_REQUISITIONS","VIEW_INVENTORY","MANAGE_INVENTORY","VIEW_PERFORMANCE","VIEW_POS","VIEW_INVOICES","MANAGE_INVOICES","VIEW_PATRIMONY","VIEW_HR","MANAGE_HR","VIEW_PAYROLL","VIEW_SETTINGS","MANAGE_SETTINGS","MANAGE_USERS"],[Ae.MANAGER]:["VIEW_DASHBOARD","VIEW_REQUISITIONS","VIEW_INVENTORY","MANAGE_INVENTORY","VIEW_PERFORMANCE","MANAGE_PERFORMANCE","VIEW_POS","MANAGE_POS","VIEW_INVOICES","MANAGE_INVOICES"],[Ae.WORKER]:["VIEW_DASHBOARD","VIEW_INVENTORY","VIEW_REQUISITIONS"]},mO=w.createContext(void 0),y3=({children:e})=>{const[t,r]=w.useState(null),[n,i]=w.useState([]),[l,u]=w.useState(null),[d,h]=w.useState(new Date),[m,p]=w.useState(null),[g,x]=w.useState([]),[b,j]=w.useState([]),[N,_]=w.useState([]),[E,k]=w.useState([]),[A,I]=w.useState([]),[R,C]=w.useState([]),[P,Y]=w.useState([]),[oe,H]=w.useState([]),[$,U]=w.useState([]),ce=O=>{var M;return{id:O.id,type:O.type,date:O.date,userId:O.user_id,locationId:O.location_id,clientName:O.client_name,clientNuit:O.client_nuit,description:O.description,category:O.category,amount:O.amount,paymentMethod:O.payment_method,items:((M=O.items)==null?void 0:M.map(q=>({itemId:q.item_id,name:q.name,quantity:q.quantity,unitPrice:q.unit_price})))||[],invoiceId:O.invoice_id||null}},G=O=>O?/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(O):!1,[V,D]=w.useState([]),[K,fe]=w.useState([]),[Ne,_e]=w.useState(g3),[L,W]=w.useState({}),[ve,be]=w.useState(["Equipamento","EPI","Tecnologia","Ferramenta"]),[Te,Ee]=w.useState(["Unidade","Par","Litros","Kg","Metros"]),[Ce,at]=w.useState([{id:"type-1",name:"Equipamento Pesado",behavior:Pt.ASSET},{id:"type-2",name:"Ferramenta Manual",behavior:Pt.ASSET},{id:"type-3",name:"EPI",behavior:Pt.CONSUMABLE},{id:"type-4",name:"Consumvel Operacional",behavior:Pt.CONSUMABLE},{id:"type-5",name:"Tecnologia/GPS",behavior:Pt.ASSET}]),[z,pe]=w.useState(["Dinheiro","Carto","M-Pesa","e-Mola","Transferncia Bancria","Cheque"]),[ue,re]=w.useState(["Combustvel","Manuteno","Salrios","Aluguel","Utilidades","Outros"]),[Je,Re]=w.useState({nome:"Sua Empresa Lda",nuit:"000000000",endereco:"Maputo, Moambique",contacto:"+258 84 000 0000"}),[Ze]=w.useState(["MZN","USD"]),[Ke,X]=w.useState("MZN"),[Mt,Fe]=w.useState([]),[Kt,Ve]=w.useState([]),[Cn,Jr]=w.useState([]),[tr,pn]=w.useState([]),[gn,en]=w.useState([]),[Ma,Tn]=w.useState([]),[ha,ma]=w.useState([]),[Ya,fr]=w.useState([]),[we,ct]=w.useState(!0),Gt=t?t.role===Ae.ADMIN||t.role===Ae.GENERAL_MANAGER:!1;w.useEffect(()=>{(async()=>{var Oe,De;const{data:{session:M}}=await ne.auth.getSession();let q=null;if(M!=null&&M.user){console.log(" Sesso encontrada para usurio:",M.user.id,M.user.email);const{data:he,error:J}=await ne.from("users").select("*").eq("id",M.user.id).single();if(he&&!J){console.log(" Dados do usurio carregados do Supabase:",he);const Se={id:he.id,name:he.name,role:he.role,locationId:he.location_id||null,jobTitle:he.job_title,defaultDailyGoal:he.default_daily_goal,dailyRate:he.daily_rate,halfDayRate:he.half_day_rate,absencePenalty:he.absence_penalty,bonusPerUnit:he.bonus_per_unit};console.log(" Usurio mapeado para aplicao:",Se),console.log(" Role do usurio (BD):",Se.role),q=Se,r(Se)}else if(J){console.error(" Erro ao buscar usurio do BD:",J);const Se={id:M.user.id,name:((Oe=M.user.user_metadata)==null?void 0:Oe.name)||M.user.email||"User",role:Ae.WORKER,locationId:null};console.warn(" Usando fallback (WORKER) pois usurio no existe no BD ainda"),q=Se,r(Se)}else{console.error(" userData vazio mas sem erro (situao estranha)");const Se={id:M.user.id,name:((De=M.user.user_metadata)==null?void 0:De.name)||M.user.email||"User",role:Ae.WORKER,locationId:null};q=Se,r(Se)}}else console.warn(" Nenhuma sesso disponvel");if(q&&(q.role===Ae.ADMIN||q.role===Ae.GENERAL_MANAGER)){const{data:he}=await ne.from("users").select("*");if(he){const J=he.map(Se=>({id:Se.id,name:Se.name,email:Se.email,role:Se.role,locationId:Se.location_id||null,jobTitle:Se.job_title,defaultDailyGoal:Se.default_daily_goal,dailyRate:Se.daily_rate,halfDayRate:Se.half_day_rate,absencePenalty:Se.absence_penalty,bonusPerUnit:Se.bonus_per_unit}));i(J)}}else q&&i([q]);try{if(q){const he=new Date().toISOString(),{error:J}=await ne.from("users").update({is_online:!0,last_seen:he}).eq("id",q.id).select().single();J&&console.error("Error updating user presence:",J.code,J.message)}}catch(he){console.error("Could not update presence for user",he)}const Q=ne.channel("public:users").on("postgres_changes",{event:"*",schema:"public",table:"users"},he=>{const J=he.new;J&&i(Se=>{const Ie=Se.findIndex(Be=>Be.id===J.id),Ut={id:J.id,name:J.name,email:J.email,role:J.role,locationId:J.location_id||null,jobTitle:J.job_title,defaultDailyGoal:J.default_daily_goal,dailyRate:J.daily_rate,halfDayRate:J.half_day_rate,absencePenalty:J.absence_penalty,bonusPerUnit:J.bonus_per_unit,isOnline:J.is_online,lastSeen:J.last_seen};if(Ie===-1)return[...Se,Ut];const tt=[...Se];return tt[Ie]={...tt[Ie],...Ut},tt})}).subscribe(),ge=async()=>{try{if(q){const he=new Date().toISOString(),{error:J}=await ne.from("users").update({is_online:!1,last_seen:he}).eq("id",q.id).select().single();J&&console.error("Error marking user offline:",J.code,J.message)}}catch(he){console.error("Could not mark user offline",he)}},je=()=>{document.visibilityState==="hidden"?ge():document.visibilityState==="visible"&&q&&ne.from("users").update({is_online:!0,last_seen:new Date().toISOString()}).eq("id",q.id).select().single().then(({error:he})=>{he&&console.error("Error updating visibility:",he.code,he.message)})};return window.addEventListener("beforeunload",ge),document.addEventListener("visibilitychange",je),()=>{window.removeEventListener("beforeunload",ge),document.removeEventListener("visibilitychange",je);try{Q.unsubscribe()}catch{}}})()},[]),w.useEffect(()=>{if(!we&&t){const O=setTimeout(()=>{console.log(" Forando atualizao do perfil do usurio aps carregamento inicial..."),ya()},500);return()=>clearTimeout(O)}},[we]);const pa=1200*1e3,ga=ao.useRef(null),le=(O,M=5e3)=>{ga.current&&clearTimeout(ga.current),console.log(" Notificao:",O),p(O),ga.current=setTimeout(()=>{p(null),ga.current=null},M)},Mi=O=>{if(!t)return!1;const M=Ne[t.role];return M?M.includes(O):!1},Ii=(O,M)=>{_e(q=>{const Q=q[O]||[],ge=Q.includes(M);let je;return ge?je=Q.filter(Oe=>Oe!==M):je=[...Q,M],{...q,[O]:je}}),le("Permisses atualizadas.")},ya=async()=>{console.log(" Sincronizando dados com o servidor..."),h(new Date);try{const{data:{session:O}}=await ne.auth.getSession();if(!(O!=null&&O.user)){console.warn(" Sem sesso de usurio disponvel");return}console.log(" Buscando dados frescos para usurio:",O.user.id);const{data:M,error:q}=await ne.from("users").select("*").eq("id",O.user.id).single();if(!q&&M){console.log(" Dados atualizados do Supabase:",M);const Q={id:M.id,name:M.name,role:M.role,locationId:M.location_id||null,jobTitle:M.job_title,defaultDailyGoal:M.default_daily_goal,dailyRate:M.daily_rate,halfDayRate:M.half_day_rate,absencePenalty:M.absence_penalty,bonusPerUnit:M.bonus_per_unit};if(console.log(" Dados mapeados:",Q),console.log(" Role atualizada:",M.role,"",Q.role),t&&t.role!==Q.role?(console.log(" ROLE ALTERADA! De",t==null?void 0:t.role,"para",Q.role),le(` Seu role foi atualizado para: ${Q.role}`,6e3)):console.log(" Role mantm-se:",Q.role),r(Q),Q.role===Ae.ADMIN||Q.role===Ae.GENERAL_MANAGER){console.log(" Usurio  ADMIN/GM, buscando lista completa de usurios");const{data:J}=await ne.from("users").select("*");if(J){const Se=J.map(Ie=>({id:Ie.id,name:Ie.name,role:Ie.role,locationId:Ie.location_id||null,jobTitle:Ie.job_title,defaultDailyGoal:Ie.default_daily_goal,dailyRate:Ie.daily_rate,halfDayRate:Ie.half_day_rate,absencePenalty:Ie.absence_penalty,bonusPerUnit:Ie.bonus_per_unit}));console.log(` ${Se.length} usurios carregados`),i(Se)}}else i([Q]);const{data:je}=await ne.from("requisition_sheets").select("*, items:requisition_sheet_items(*)").order("created_at",{ascending:!1});if(je){const J=je.map(Se=>({id:Se.id,requisitionNumber:Se.requisition_number,requesterId:Se.requester_id,sourceLocationId:Se.source_location_id,sourceLocationName:Se.source_location_name,targetLocationId:Se.target_location_id,targetLocationName:Se.target_location_name,status:Se.status,notes:Se.notes,createdAt:Se.created_at,updatedAt:Se.updated_at,items:(Se.items||[]).map(Ie=>({id:Ie.id,sheetId:Ie.sheet_id,itemId:Ie.item_id,itemName:Ie.item_name,quantity:Ie.quantity,unit:Ie.unit,condition:Ie.condition,isDelivered:Ie.is_delivered,notes:Ie.notes}))}));I(J)}const{data:Oe}=await ne.from("fichas_individuais").select("*").order("created_at",{ascending:!1});Oe&&Fe(Oe.map(J=>({id:J.id,codigo:J.codigo,tipo:J.tipo,entidade_id:J.entidade_id,entidade_tipo:J.entidade_tipo,data:J.data,produto_id:J.produto_id,produto:J.produto_name||J.produto,quantidade:J.quantidade,unidade:J.unidade,stock_antes:J.stock_antes,stock_depois:J.stock_depois,observacoes:J.observacoes,usuario_registou:J.usuario_registou,estado:J.estado,created_at:J.created_at,updated_at:J.updated_at})));const{data:De}=await ne.from("initial_stock").select("*");De&&Ve(De);const{data:he}=await ne.from("stock_alarms").select("*");if(he&&Jr(he),Q.role===Ae.ADMIN){const{data:J}=await ne.from("audit_log").select("*").order("timestamp",{ascending:!1});J&&pn(J)}}else q&&(q.code==="406"||q.status===406?console.error(" Erro 406 (Not Acceptable): Verifique se a query est correta. Error:",q.message):console.error(" Erro ao buscar dados do usurio:",q))}catch(O){console.error(" Error refreshing profile:",{message:O==null?void 0:O.message,status:O==null?void 0:O.status,details:O})}};w.useEffect(()=>{const O=setInterval(()=>{ya()},pa);return()=>clearInterval(O)},[g]),w.useEffect(()=>{if(we||!t)return;const O=d3(ne,async M=>{var je,Oe,De;const q=M.table||M.table_name||((je=M==null?void 0:M.schema)==null?void 0:je.table),Q=M.eventType||M.event||M.type||((Oe=M==null?void 0:M.change)==null?void 0:Oe.event),ge=M.record||M.new||M.new_record||((De=M==null?void 0:M.change)==null?void 0:De.new)||(M==null?void 0:M.after)||M.data;console.log(" Realtime event",{table:q,eventType:Q,record:ge});try{if(q==="inventory"){const{data:he}=await ne.from("inventory").select("*");if(he){const J=he.map(Se=>({itemId:Se.item_id,locationId:Se.location_id,quantity:Se.quantity}));_(J)}return}if(q==="requisitions"){const{data:he}=await ne.from("requisitions").select("*, logs:requisition_logs(*)").order("created_at",{ascending:!1});he&&k(he.map(J=>({...J,logs:J.logs||[]})));return}if(q==="requisition_sheets"||q==="requisition_sheet_items"){const{data:he}=await ne.from("requisition_sheets").select("*, items:requisition_sheet_items(*)").order("created_at",{ascending:!1});if(he){const J=he.map(Se=>({id:Se.id,requisitionNumber:Se.requisition_number,requesterId:Se.requester_id,sourceLocationId:Se.source_location_id,sourceLocationName:Se.source_location_name,targetLocationId:Se.target_location_id,targetLocationName:Se.target_location_name,status:Se.status,notes:Se.notes,createdAt:Se.created_at,updatedAt:Se.updated_at,items:(Se.items||[]).map(Ie=>({id:Ie.id,sheetId:Ie.sheet_id,itemId:Ie.item_id,itemName:Ie.item_name,quantity:Ie.quantity,unit:Ie.unit,condition:Ie.condition,isDelivered:Ie.is_delivered,notes:Ie.notes}))}));I(J)}return}if(q==="fichas_individuais"){const{data:he}=await ne.from("fichas_individuais").select("*").order("created_at",{ascending:!1});he&&Fe(he.map(J=>({id:J.id,codigo:J.codigo,tipo:J.tipo,entidade_id:J.entidade_id,entidade_tipo:J.entidade_tipo,data:J.data,produto_id:J.produto_id,produto:J.produto_name||J.produto,quantidade:J.quantidade,unidade:J.unidade,stock_antes:J.stock_antes,stock_depois:J.stock_depois,observacoes:J.observacoes,usuario_registou:J.usuario_registou,estado:J.estado,created_at:J.created_at,updated_at:J.updated_at})));return}if(q==="transactions"){const{data:he}=await ne.from("transactions").select("*, items:transaction_items(*)").order("date",{ascending:!1});he&&U(he.map(ce));return}if(q==="invoices"){const{data:he}=await ne.from("invoices").select("*, itens:invoice_items(*), pagamentos:invoice_payments(*)").order("created_at",{ascending:!1});he&&D(he.map(J=>({id:J.id,numero:J.numero,tipo:J.tipo,status:J.status,locationId:J.location_id,empresa:{nome:J.company_name,nuit:J.company_nuit,endereco:J.company_address,contacto:J.company_contact},cliente:{id:J.client_id,nome:J.client_name,nuit:J.client_nuit,endereco:J.client_address,contacto:J.client_contact},itens:(J.itens||[]).map(Se=>({itemId:Se.item_id,descricao:Se.description,quantidade:Se.quantity,precoUnitario:Se.unit_price,impostoPercent:Se.tax_percent})),pagamentos:(J.pagamentos||[]).map(Se=>({data:Se.date,valor:Se.amount,modalidade:Se.method,referencia:Se.reference})),moeda:J.currency,dataEmissao:J.issue_date,vencimento:J.due_date,observacoes:J.notes,createdBy:J.created_by})));return}if(q==="items"){const{data:he}=await ne.from("items").select("*");he&&x(he);return}if(q==="users"){const{data:{session:he}}=await ne.auth.getSession();if(!(he!=null&&he.user))return;const J=he.user.id,{data:Se}=await ne.from("users").select("*").eq("id",J).single();if(Se){const Ie={id:Se.id,name:Se.name,role:Se.role,locationId:Se.location_id||null,jobTitle:Se.job_title,defaultDailyGoal:Se.default_daily_goal,dailyRate:Se.daily_rate,halfDayRate:Se.half_day_rate,absencePenalty:Se.absence_penalty,bonusPerUnit:Se.bonus_per_unit};if(r(Ie),Ie.role===Ae.ADMIN||Ie.role===Ae.GENERAL_MANAGER){const{data:Ut}=await ne.from("users").select("*");Ut&&i(Ut.map(tt=>({id:tt.id,name:tt.name,role:tt.role,locationId:tt.location_id||null,jobTitle:tt.job_title,defaultDailyGoal:tt.default_daily_goal,dailyRate:tt.daily_rate,halfDayRate:tt.half_day_rate,absencePenalty:tt.absence_penalty,bonusPerUnit:tt.bonus_per_unit})))}}return}}catch(he){console.error("Erro ao processar evento realtime:",he)}});return()=>{O().catch(()=>null)}},[we,t]);const Vn=O=>{const M=b.find(q=>q.id===O);if(!(M!=null&&M.parentId)){const q=b.find(Q=>Q.type===Ar.CENTRAL);return(q==null?void 0:q.id)||O}return M.parentId},Li=async(O,M,q,Q)=>{if(!t)return;const ge=Q||t.locationId;if(!ge){le("Erro: Localizao de destino no definida.");return}const je=Vn(ge),{data:Oe,error:De}=await ne.from("requisitions").insert({requester_id:t.id,source_location_id:je,target_location_id:ge,item_id:O,quantity:M,status:nt.PENDING,condition:q}).select().single();if(De){le(`Erro ao criar requisio: ${De.message}`);return}await ne.from("requisition_logs").insert({requisition_id:Oe.id,actor_id:t.id,action:"CREATE",message:"Solicitao criada. Enviada para aprovao da Administrao/Direo."});const{data:he}=await ne.from("requisitions").select("*, logs:requisition_logs(*)").order("created_at",{ascending:!1});he&&k(he.map(J=>({...J,logs:J.logs||[]}))),le("Requisio criada com sucesso!")},Wa=async(O,M,q)=>{if(!t)return;const Q=Vn(O),{data:ge,error:je}=await ne.from("requisition_sheets").insert({requester_id:t.id,source_location_id:Q,source_location_name:Gr(Q),target_location_id:O,target_location_name:Gr(O),status:nt.PENDING,notes:q,requisition_number:`REQ-${new Date().getFullYear()}/${Math.floor(Math.random()*1e4)}`}).select().single();if(je){le(`Erro ao criar requisio: ${je.message}`);return}const Oe=M.map(he=>({sheet_id:ge.id,item_id:he.itemId||null,item_name:he.itemName,quantity:he.quantity,unit:he.unit,condition:he.condition||Jt.NEW,notes:he.notes})),{error:De}=await ne.from("requisition_sheet_items").insert(Oe);De?le(`Erro ao adicionar itens: ${De.message}`):(le("Requisio criada com sucesso!"),ya())},Gl=async(O,M)=>{if(!t)return;const q=E.find(he=>he.id===O);if(!q)return;const Q=t.role===Ae.ADMIN||t.role===Ae.GENERAL_MANAGER,ge=he=>{if(!t)return!1;if(he===t.locationId)return!0;const J=b.find(Se=>Se.id===he);return(J==null?void 0:J.parentId)===t.locationId},je=t.role===Ae.MANAGER&&(ge(q.sourceLocationId)||ge(q.targetLocationId));if(!Q&&!je&&t.role!==Ae.WORKER){le("ACESSO NEGADO: Voc no tem permisso para alterar este setor.");return}const{error:Oe}=await ne.from("requisitions").update({status:M}).eq("id",O).select().single();if(Oe){le(`Erro ao atualizar requisio: ${Oe.message}`);return}await ne.from("requisition_logs").insert({requisition_id:O,actor_id:t.id,action:M,message:`Status alterado para ${M} por ${t.name}`}),M===nt.APPROVED&&await sr(q.itemId,q.sourceLocationId,-q.quantity),M===nt.CONFIRMED&&await sr(q.itemId,q.targetLocationId,q.quantity);const{data:De}=await ne.from("requisitions").select("*, logs:requisition_logs(*)").order("created_at",{ascending:!1});De&&k(De.map(he=>({...he,logs:he.logs||[]}))),le(`Status da requisio atualizado: ${M}`)},sr=async(O,M,q)=>{const Q=N.find(ge=>ge.itemId===O&&ge.locationId===M);if(Q){const ge=Math.max(0,Q.quantity+q),{error:je}=await ne.from("inventory").update({quantity:ge}).match({item_id:O,location_id:M}).select().single();if(je){console.error("Error updating inventory:",je.code,je.message);return}_(Oe=>Oe.map(De=>De.itemId===O&&De.locationId===M?{...De,quantity:ge}:De))}else if(q>0){const{data:ge}=await ne.from("inventory").insert({item_id:O,location_id:M,quantity:q}).select().single();ge&&_(je=>[...je,ge])}},se=async(O,M,q,Q)=>{if(!t)return;if(!M||!G(M)){le("Erro: Localizao invlida. Selecione uma localizao vlida antes de adicionar estoque.");return}if(t.role===Ae.MANAGER&&M!==t.locationId){alert("Voc s pode adicionar estoque  sua prpria localizao.");return}_(Oe=>{const De=Oe.findIndex(he=>he.itemId===O&&he.locationId===M);if(De>=0){const he=[...Oe];return he[De]={...he[De],quantity:he[De].quantity+q},he}return[...Oe,{id:`temp-${Date.now()}`,itemId:O,locationId:M,quantity:q}]}),await sr(O,M,q);const ge=g.find(Oe=>Oe.id===O),je={id:`acc-${Date.now()}`,date:new Date().toISOString(),itemId:O,itemName:(ge==null?void 0:ge.name)||"Item Desconhecido",locationId:M,quantity:q,unitPrice:Q,totalValue:q*Q,type:(ge==null?void 0:ge.type)===Pt.ASSET?"ATIVO":"PASSIVO",userId:t.id};Y(Oe=>[je,...Oe]);try{const Oe=`Compra de estoque: ${q}x ${(ge==null?void 0:ge.name)||"Item Desconhecido"}`;await ne.from("transactions").insert({type:Ea.EXPENSE,user_id:t.id,location_id:M,description:Oe,category:"Compra de Estoque",amount:q*Q,payment_method:_n.CASH,date:new Date().toISOString()});const{data:De}=await ne.from("transactions").select("*, items:transaction_items(*)").order("date",{ascending:!1});De&&U(De.map(ce))}catch(Oe){console.error("Erro ao registrar despesa de estoque:",Oe)}le(`Estoque adicionado: ${q}x ${ge==null?void 0:ge.name}`)},Ge=async(O,M)=>{if(!t||t.role!==Ae.ADMIN){le(" ACESSO NEGADO: Apenas administradores podem editar itens.");return}try{const{data:q,error:Q}=await ne.from("items").update({name:M.name,sku:M.sku,category:M.category,unit:M.unit,type:M.type,price:M.price,is_for_sale:M.is_for_sale}).eq("id",O).select().single();if(Q)throw Q;x(ge=>ge.map(je=>je.id===O?q:je)),le(` Item "${M.name||"item"}" atualizado com sucesso.`)}catch(q){le(` Erro ao atualizar item: ${q.message}`)}},ft=async(O,M,q,Q,ge,je,Oe,De,he=!0)=>{const{data:J,error:Se}=await ne.from("items").insert({name:O,sku:M,category:q,unit:Q,type:ge,price:De,is_for_sale:he}).select().single();if(Se){le(`Erro ao cadastrar item: ${Se.message}`);return}const Ie=J;x(Ut=>[...Ut,Ie]),je>0?await se(Ie.id,Oe,je,De):le("Item cadastrado com sucesso.")},vt=async O=>{if(!t||t.role!==Ae.ADMIN){le(" ACESSO NEGADO: Apenas administradores podem apagar itens.");return}const{error:M}=await ne.from("items").delete().eq("id",O);if(M){if(M.status===403||/policy/i.test(M.message||"")){console.warn("RLS rejection on deleteItem",{userId:t.id,itemId:O,error:M}),le(" RLS policy rejected deletion (unauthorized).");return}const q=(M.message||"").toLowerCase();if(q.includes("foreign key")||q.includes("violates")||q.includes("conflict")||q.includes("cannot delete")){le(" Item tem registos associados (estoque ou dependncias). Remova-os antes de apagar.");return}le(` Erro ao apagar item: ${M.message}`);return}x(q=>q.filter(Q=>Q.id!==O)),le(" Item apagado com sucesso.")},_r=async(O,M)=>{if(!t)return;const q=A.find(ge=>ge.id===O);if(!q){le(`Erro: Ficha de requisio ${O} no encontrada.`);return}const{error:Q}=await ne.from("requisition_sheets").update({status:M,updated_at:new Date().toISOString()}).eq("id",O);if(Q){le(`Erro ao atualizar status: ${Q.message}`);return}if(M===nt.APPROVED)for(const ge of q.items)ge.itemId&&await sr(ge.itemId,q.sourceLocationId,-ge.quantity);if(M===nt.CONFIRMED)for(const ge of q.items)ge.itemId&&await sr(ge.itemId,q.targetLocationId,ge.quantity);I(ge=>ge.map(je=>je.id===O?{...je,status:M}:je)),le(`Status da requisio atualizado para ${M}.`)},ln=async(O,M)=>{if(!t)return;const{error:q}=await ne.from("requisition_sheet_items").update({is_delivered:M}).eq("id",O);if(q){le(`Erro ao atualizar entrega do item: ${q.message}`);return}I(Q=>Q.map(ge=>({...ge,items:ge.items.map(je=>je.id===O?{...je,isDelivered:M}:je)})))},xt=O=>N.filter(M=>M.locationId===O),zt=O=>{var M;return((M=g.find(q=>q.id===O))==null?void 0:M.name)||"Item desconhecido"},Gr=O=>{var M;return((M=b.find(q=>q.id===O))==null?void 0:M.name)||"Local desconhecido"},zi=O=>{var M;return((M=K.find(q=>q.id===O))==null?void 0:M.name)||"Cliente desconhecido"},ht=async O=>{if(!t)return;const M=t.role===Ae.ADMIN||t.role===Ae.GENERAL_MANAGER;if(R.findIndex(je=>je.id===O.id||je.workerId===O.workerId&&je.date===O.date)>=0&&!M){le("ACESSO NEGADO: Registros submetidos no podem ser alterados por Gerentes. Contate o Administrador.");return}if(!M&&t.role===Ae.MANAGER&&!jt(t.id).find(Oe=>Oe.id===O.workerId)){le("Erro: Voc no gerencia este funcionrio.");return}const{error:Q}=await ne.from("daily_performance").upsert({id:O.id,worker_id:O.workerId,date:O.date,status:O.status,production:O.production,notes:O.notes});if(Q){le(`Erro ao salvar registro: ${Q.message}`);return}const{data:ge}=await ne.from("daily_performance").select("*").order("date",{ascending:!1});ge&&C(ge),le("Registro de desempenho salvo.")},jt=O=>{const M=n.find(je=>je.id===O);if(!M)return[];const q=M.locationId,Q=b.filter(je=>je.parentId===q).map(je=>je.id),ge=[q,...Q];return n.filter(je=>je.role===Ae.WORKER&&je.locationId&&ge.includes(je.locationId))},tn=O=>{const M=b.filter(Q=>Q.parentId===O).map(Q=>Q.id),q=[O,...M];return n.filter(Q=>Q.role===Ae.WORKER&&Q.locationId&&q.includes(Q.locationId))},Ui=async O=>{try{const{error:M}=await ne.from("users").update({name:O.name,role:O.role,location_id:O.locationId,job_title:O.jobTitle,default_daily_goal:O.defaultDailyGoal,daily_rate:O.dailyRate,half_day_rate:O.halfDayRate,absence_penalty:O.absencePenalty,bonus_per_unit:O.bonusPerUnit}).eq("id",O.id).select().single();if(M)throw M;i(q=>q.map(Q=>Q.id===O.id?O:Q)),t&&t.id===O.id&&r(O),le("Dados do funcionrio atualizados com sucesso.")}catch(M){console.error("Erro ao atualizar usurio:",M),le(`Erro ao atualizar: ${M.message}`)}},Hl=async O=>{if(!t||t.role!==Ae.ADMIN){le(" ACESSO NEGADO: Apenas administradores podem apagar funcionrios.");return}if(O===t.id){le(" No  possvel apagar sua prpria conta.");return}const{error:M}=await ne.from("users").delete().eq("id",O);if(M){if(M.status===403||/policy/i.test(M.message||"")){console.warn("RLS rejection on deleteUser",{actorId:t.id,targetUserId:O,error:M}),le(" RLS policy rejected deletion (unauthorized).");return}const q=(M.message||"").toLowerCase();if(M.status===404||q.includes("not found")||q.includes("no rows")){le(" Usurio no encontrado.");return}if(q.includes("foreign key")||q.includes("violates")||q.includes("conflict")){le(" Erro de integridade: o usurio tem registos dependentes. Remova dependncias antes de apagar.");return}le(` Erro ao apagar funcionrio: ${M.message}`);return}i(q=>q.filter(Q=>Q.id!==O)),le(" Funcionrio apagado com sucesso.")},Hm=async(O,M,q)=>{const{data:Q,error:ge}=await ne.from("locations").insert({name:O,type:M,parent_id:q}).select().single();if(ge){le(`Erro ao adicionar localizao: ${ge.message}`);return}const je={id:Q.id,name:Q.name,type:Q.type,parentId:Q.parent_id};j([...b,je]),le("Nova localizao adicionada.")},Fm=async O=>{if(n.some(Q=>Q.locationId===O)){le("No  possvel remover. Existem usurios alocados para esta localizao.");return}const{error:q}=await ne.from("locations").delete().match({id:O});if(q){le(`Erro ao remover localizao: ${q.message}`);return}j(Q=>Q.filter(ge=>ge.id!==O)),le("Localizao removida com sucesso.")},Wu=O=>be([...ve,O]),Cs=O=>Ee([...Te,O]),Fl=(O,M)=>{const q={id:`type-${Date.now()}`,name:O,behavior:M};at([...Ce,q]),le("Novo tipo de item configurado.")},$i=O=>{z.includes(O)||(pe([...z,O]),le("Mtodo de pagamento adicionado."))},qi=O=>{if($.some(q=>q.paymentMethod===O)||V.some(q=>q.pagamentos.some(Q=>Q.modalidade===O))){le("No  possvel remover. Mtodo em uso.");return}pe(z.filter(q=>q!==O)),le("Mtodo de pagamento removido.")},Ts=O=>{ue.includes(O)||(re([...ue,O]),le("Categoria de despesa adicionada."))},Bi=O=>{if($.some(q=>q.category===O)){le("No  possvel remover. Categoria em uso.");return}re(ue.filter(q=>q!==O)),le("Categoria removida.")},hr=O=>{Re(O),le("Informaes da empresa atualizadas.")},Xu=async O=>{const{data:M,error:q}=await ne.from("clients").insert({name:O.name,nuit:O.nuit,email:O.email,contact:O.contact,address:O.address,notes:O.notes}).select().single();if(q){le(`Erro ao registrar cliente: ${q.message}`);return}fe(Q=>[...Q,M]),le(`Cliente ${O.name} registrado.`)},Zu=O=>{fe(M=>M.map(q=>q.id===O.id?O:q)),le("Dados do cliente atualizados.")},Xa=O=>{const M=V.filter(Q=>Q.cliente.id===O&&Q.status!=="CANCELADA");let q=0;return M.forEach(Q=>{const ge=Q.itens.reduce((he,J)=>he+J.quantidade*J.precoUnitario,0),je=Q.itens.reduce((he,J)=>he+J.quantidade*J.precoUnitario*((J.impostoPercent||0)/100),0),Oe=ge+je,De=Q.pagamentos.reduce((he,J)=>he+J.valor,0);q+=Oe-De}),Math.max(0,q)},Gi=async(O,M,q,Q,ge)=>{if(!t){le("Usurio no autenticado");return}if(!G(t.id)){le("Erro: ID do usurio invlido. Contate o administrador.");return}const je={type:Ea.SALE,user_id:t.id,client_name:M,client_nuit:q,amount:ge,payment_method:Q};if(t.locationId){if(!G(t.locationId)){le("Erro: Localizao do usurio invlida. Contate o administrador.");return}je.location_id=t.locationId}const{data:Oe,error:De}=await ne.from("transactions").insert(je).select().single();if(De){const J=De.message||"";J.toLowerCase().includes("foreign key")||J.toLowerCase().includes("violates foreign key")?le("Erro de integridade referencial ao processar venda. Verifique cliente, localizao ou produtos."):le(`Erro ao processar venda: ${J}`);return}for(const J of O)await ne.from("transaction_items").insert({transaction_id:Oe.id,item_id:J.itemId,name:J.name,quantity:J.quantity,unit_price:J.unitPrice}),t.locationId&&await sr(J.itemId,t.locationId,-J.quantity);const{data:he}=await ne.from("transactions").select("*, items:transaction_items(*)").order("date",{ascending:!1});he&&U(he.map(ce)),le("Venda realizada com sucesso!")},Vm=async(O,M,q,Q)=>{if(!t){le("Usurio no autenticado");return}const ge={type:Ea.EXPENSE,user_id:t.id,description:O,category:M,amount:q,payment_method:Q};if(!G(t.id)){le("Erro: ID do usurio invlido. Contate o administrador.");return}if(t.locationId){if(!G(t.locationId)){le("Erro: Localizao do usurio invlida. Contate o administrador.");return}ge.location_id=t.locationId}const{data:je,error:Oe}=await ne.from("transactions").insert(ge).select().single();if(Oe){const he=Oe.message||"";he.toLowerCase().includes("foreign key")||he.toLowerCase().includes("violates foreign key")?le("Erro de integridade referencial ao registrar despesa. Verifique cliente/locais."):le(`Erro ao registrar despesa: ${he}`);return}const{data:De}=await ne.from("transactions").select("*, items:transaction_items(*)").order("date",{ascending:!1});De&&U(De.map(ce)),le("Despesa registrada.")},Qu=()=>{const O=new Date().getFullYear(),M=V.filter(q=>q.numero.startsWith(`${O}/`)).length;return`${O}/${String(M+1).padStart(6,"0")}`},Ju=async O=>{var M,q,Q,ge,je,Oe,De,he,J,Se,Ie;try{if(!O.numero||O.numero.trim()===""){le("Nmero da fatura invlido.");return}const{data:Ut}=await ne.from("invoices").select("id").eq("numero",O.numero).limit(1);if(Ut&&Ut.length>0){le(`Nmero de fatura j existe: ${O.numero}`);return}if(O.locationId&&!G(O.locationId)){le("Localizao da fatura invlida. Remova ou selecione uma localizao vlida.");return}if(O.cliente&&O.cliente.id&&!G(O.cliente.id)){le("Cliente selecionado invlido. Verifique o cliente.");return}if(O.cliente.id){const Le=K.find(Ct=>Ct.id===O.cliente.id);if(Le){if(Le&&Le.is_blocked){const cn=Le.block_reason||"No especificado";le(`Cliente bloqueado: ${cn}`);return}const Ct=O.itens.reduce((cn,Pr)=>cn+Pr.quantidade*Pr.precoUnitario*(1+(Pr.impostoPercent||0)/100),0),_t=Le.credit_limit||0,Kn=Le.credit_used||0,mr=_t-Kn;if(Ct>mr&&mr>=0){le(`Crdito insuficiente. Limite: ${_t.toFixed(2)} MZN | Utilizado: ${Kn.toFixed(2)} MZN | Disponvel: ${mr.toFixed(2)} MZN`);return}}}const tt={id:O.id,numero:O.numero,tipo:O.tipo,status:O.status,location_id:O.locationId,company_name:((M=O.empresa)==null?void 0:M.nome)||null,company_nuit:((q=O.empresa)==null?void 0:q.nuit)||null,company_address:((Q=O.empresa)==null?void 0:Q.endereco)||null,company_contact:((ge=O.empresa)==null?void 0:ge.contacto)||null,client_id:((je=O.cliente)==null?void 0:je.id)||null,client_name:((Oe=O.cliente)==null?void 0:Oe.nome)||null,client_nuit:((De=O.cliente)==null?void 0:De.nuit)||null,client_address:((he=O.cliente)==null?void 0:he.endereco)||null,client_contact:((J=O.cliente)==null?void 0:J.contacto)||null,currency:O.moeda,issue_date:O.dataEmissao,due_date:O.vencimento||null,notes:O.observacoes||null,created_by:O.createdBy,is_editable:O.status==="RASCUNHO"},{data:Be,error:Nt}=await ne.from("invoices").insert(tt).select().single();if(Nt){const Le=Nt.message||"";Le.toLowerCase().includes("foreign key")||Le.toLowerCase().includes("violates foreign key")?le("Erro de integridade referencial: verifique cliente, localizao ou produtos relacionados."):Le.toLowerCase().includes("duplicate")||Le.toLowerCase().includes("unique")?le("Nmero de fatura duplicado. Use outro nmero."):le(`Erro ao salvar fatura: ${Le}`);return}if(O.itens&&O.itens.length>0){const Le=O.itens.map(_t=>({invoice_id:Be.id,item_id:_t.itemId||null,description:_t.descricao,quantity:_t.quantidade,unit_price:_t.precoUnitario,tax_percent:_t.impostoPercent||16})),{error:Ct}=await ne.from("invoice_items").insert(Le);Ct&&le(`Erro ao salvar itens da fatura: ${Ct.message}`)}try{await ne.from("invoice_audit_log").insert({invoice_id:Be.id,action:"CREATE",changed_fields:{old_values:null,new_values:{numero:O.numero,status:O.status,cliente:O.cliente.nome,total_items:O.itens.length}},user_id:(t==null?void 0:t.id)||O.createdBy||null})}catch(Le){console.warn("Failed to create audit log entry:",Le)}if(O.pagamentos&&O.pagamentos.length>0){const Le=O.pagamentos.map(_t=>({invoice_id:Be.id,date:_t.data||new Date().toISOString(),amount:_t.valor,method:_t.modalidade,reference:_t.referencia||null})),{error:Ct}=await ne.from("invoice_payments").insert(Le).select();Ct&&le(`Erro ao salvar pagamentos da fatura: ${Ct.message}`);try{for(const _t of Le){const Kn={type:Ea.SALE,user_id:(t==null?void 0:t.id)||O.createdBy||null,invoice_id:Be.id,client_name:((Se=O.cliente)==null?void 0:Se.nome)||((Ie=O.cliente)==null?void 0:Ie.id)||null,amount:_t.amount,payment_method:_t.method,location_id:O.locationId||(t==null?void 0:t.locationId)||null};await ne.from("transactions").insert(Kn)}}catch(_t){console.warn("failed to insert payment transactions for invoice",_t)}}(O.status==="EMITIDA"||O.status==="PAGA"||O.status==="PAGA_PARCIAL")&&(O.tipo==="FATURA"||O.tipo==="FATURA_RECIBO")&&O.itens.forEach(Le=>{Le.itemId&&sr(Le.itemId,O.locationId,-Le.quantidade)});const{data:ut}=await ne.from("invoices").select("*, itens:invoice_items(*), pagamentos:invoice_payments(*)").order("created_at",{ascending:!1});ut&&D(ut.map(Le=>({id:Le.id,numero:Le.numero,tipo:Le.tipo,status:Le.status,locationId:Le.location_id,empresa:{nome:Le.company_name,nuit:Le.company_nuit,endereco:Le.company_address,contacto:Le.company_contact},cliente:{id:Le.client_id,nome:Le.client_name,nuit:Le.client_nuit,endereco:Le.client_address,contacto:Le.client_contact},itens:(Le.itens||[]).map(Ct=>({itemId:Ct.item_id,descricao:Ct.description,quantidade:Ct.quantity,precoUnitario:Ct.unit_price,impostoPercent:Ct.tax_percent})),pagamentos:(Le.pagamentos||[]).map(Ct=>({data:Ct.date,valor:Ct.amount,modalidade:Ct.method,referencia:Ct.reference})),moeda:Le.currency,dataEmissao:Le.issue_date,vencimento:Le.due_date,observacoes:Le.notes,createdBy:Le.created_by}))),le(`Documento ${O.tipo} criado: ${O.numero}`)}catch(Ut){le(`Erro ao criar fatura: ${(Ut==null?void 0:Ut.message)||String(Ut)}`)}},ed=async O=>{var q,Q,ge,je,Oe,De,he,J,Se;const M=V.find(Ie=>Ie.id===O.id);try{const Ie={numero:O.numero,tipo:O.tipo,status:O.status,location_id:O.locationId,company_name:((q=O.empresa)==null?void 0:q.nome)||null,company_nuit:((Q=O.empresa)==null?void 0:Q.nuit)||null,company_address:((ge=O.empresa)==null?void 0:ge.endereco)||null,company_contact:((je=O.empresa)==null?void 0:je.contacto)||null,client_id:((Oe=O.cliente)==null?void 0:Oe.id)||null,client_name:((De=O.cliente)==null?void 0:De.nome)||null,client_nuit:((he=O.cliente)==null?void 0:he.nuit)||null,client_address:((J=O.cliente)==null?void 0:J.endereco)||null,client_contact:((Se=O.cliente)==null?void 0:Se.contacto)||null,currency:O.moeda,issue_date:O.dataEmissao,due_date:O.vencimento||null,notes:O.observacoes||null,created_by:O.createdBy},{error:Ut}=await ne.from("invoices").update(Ie).eq("id",O.id);if(Ut&&le(`Erro ao atualizar fatura: ${Ut.message}`),await ne.from("invoice_items").delete().eq("invoice_id",O.id),O.itens&&O.itens.length>0){const Be=O.itens.map(ut=>({invoice_id:O.id,item_id:ut.itemId||null,description:ut.descricao,quantity:ut.quantidade,unit_price:ut.precoUnitario,tax_percent:ut.impostoPercent||0})),{error:Nt}=await ne.from("invoice_items").insert(Be);Nt&&le(`Erro ao salvar itens da fatura: ${Nt.message}`)}if(await ne.from("invoice_payments").delete().eq("invoice_id",O.id),O.pagamentos&&O.pagamentos.length>0){const Be=O.pagamentos.map(ut=>({invoice_id:O.id,date:ut.data||new Date().toISOString(),amount:ut.valor,method:ut.modalidade,reference:ut.referencia||null})),{error:Nt}=await ne.from("invoice_payments").insert(Be);Nt&&le(`Erro ao salvar pagamentos da fatura: ${Nt.message}`)}const{data:tt}=await ne.from("invoices").select("*, itens:invoice_items(*), pagamentos:invoice_payments(*)").order("created_at",{ascending:!1});if(tt&&D(tt.map(Be=>({id:Be.id,numero:Be.numero,tipo:Be.tipo,status:Be.status,locationId:Be.location_id,empresa:{nome:Be.company_name,nuit:Be.company_nuit,endereco:Be.company_address,contacto:Be.company_contact},cliente:{id:Be.client_id,nome:Be.client_name,nuit:Be.client_nuit,endereco:Be.client_address,contacto:Be.client_contact},itens:(Be.itens||[]).map(Nt=>({itemId:Nt.item_id,descricao:Nt.description,quantidade:Nt.quantity,precoUnitario:Nt.unit_price,impostoPercent:Nt.tax_percent})),pagamentos:(Be.pagamentos||[]).map(Nt=>({data:Nt.date,valor:Nt.amount,modalidade:Nt.method,referencia:Nt.reference})),moeda:Be.currency,dataEmissao:Be.issue_date,vencimento:Be.due_date,observacoes:Be.notes,createdBy:Be.created_by}))),M){const Be=M.status==="RASCUNHO",Nt=O.status==="EMITIDA"||O.status==="PAGA"||O.status==="PAGA_PARCIAL",ut=O.tipo==="FATURA"||O.tipo==="FATURA_RECIBO";Be&&Nt&&ut&&O.itens.forEach(Le=>{Le.itemId&&sr(Le.itemId,O.locationId,-Le.quantidade)})}le(`Documento atualizado: ${O.numero}`)}catch(Ie){le(`Erro ao atualizar fatura: ${(Ie==null?void 0:Ie.message)||String(Ie)}`)}},_o=async O=>{try{const{error:M}=await ne.from("invoice_payments").delete().eq("invoice_id",O);M&&le(`Erro ao remover pagamentos da fatura: ${M.message}`);const{error:q}=await ne.from("invoice_items").delete().eq("invoice_id",O);q&&le(`Erro ao remover itens da fatura: ${q.message}`);const{error:Q}=await ne.from("invoices").delete().eq("id",O);if(Q){le(`Erro ao remover fatura: ${Q.message}`);return}const{data:ge}=await ne.from("invoices").select("*, itens:invoice_items(*), pagamentos:invoice_payments(*)").order("created_at",{ascending:!1});ge&&D(ge.map(je=>({id:je.id,numero:je.numero,tipo:je.tipo,status:je.status,locationId:je.location_id,empresa:{nome:je.company_name,nuit:je.company_nuit,endereco:je.company_address,contacto:je.company_contact},cliente:{id:je.client_id,nome:je.client_name,nuit:je.client_nuit,endereco:je.client_address,contacto:je.client_contact},itens:(je.itens||[]).map(Oe=>({itemId:Oe.item_id,descricao:Oe.description,quantidade:Oe.quantity,precoUnitario:Oe.unit_price,impostoPercent:Oe.tax_percent})),pagamentos:(je.pagamentos||[]).map(Oe=>({data:Oe.date,valor:Oe.amount,modalidade:Oe.method,referencia:Oe.reference})),moeda:je.currency,dataEmissao:je.issue_date,vencimento:je.due_date,observacoes:je.notes,createdBy:je.created_by}))),le("Fatura removida com sucesso.")}catch(M){le(`Erro ao remover fatura: ${(M==null?void 0:M.message)||String(M)}`)}},So=async(O,M)=>{var Ie,Ut;const q=V.find(tt=>tt.id===O);if(!q)return;try{const{data:tt}=await ne.from("invoices").select("id").eq("id",O).single();if(tt){const{error:Be}=await ne.from("invoice_payments").insert({invoice_id:O,date:M.data||new Date().toISOString(),amount:M.valor,method:M.modalidade,reference:M.referencia||null});Be&&le(`Erro ao persistir pagamento: ${Be.message}`);const Nt=[...q.pagamentos,M],ut=q.itens.reduce((cn,Pr)=>cn+Pr.quantidade*Pr.precoUnitario,0),Le=q.itens.reduce((cn,Pr)=>cn+Pr.quantidade*Pr.precoUnitario*((Pr.impostoPercent||0)/100),0),Ct=ut+Le,_t=Nt.reduce((cn,Pr)=>cn+Pr.valor,0);let Kn=q.status;_t>=Ct-.1?Kn="PAGA":_t>0&&(Kn="PAGA_PARCIAL");const{error:mr}=await ne.from("invoices").update({status:Kn}).eq("id",O);mr&&le(`Erro ao atualizar status da fatura: ${mr.message}`)}}catch(tt){console.warn("persisting invoice payment failed",tt)}const Q={type:Ea.SALE,user_id:t==null?void 0:t.id,invoice_id:O,description:`Recebimento (${q.numero})`,amount:M.valor,payment_method:M.modalidade};t!=null&&t.locationId&&(G(t.locationId)?t&&(Q.location_id=t.locationId):console.warn("Localizao do usurio invlida ao criar transao de pagamento; gravando sem location_id.")),(Ie=q.cliente)!=null&&Ie.nome?Q.client_name=q.cliente.nome:q.client_name&&(Q.client_name=q.client_name),(Ut=q.cliente)!=null&&Ut.nuit?Q.client_nuit=q.cliente.nuit:q.client_nuit&&(Q.client_nuit=q.client_nuit);try{if(!G(Q.user_id)){le("Erro: usurio invlido ao registrar transao. Contate o administrador.");return}const{data:tt,error:Be}=await ne.from("transactions").insert(Q).select().single();if(Be)le(`Erro ao registrar recebimento: ${Be.message}`);else{const{data:Nt}=await ne.from("transactions").select("*, items:transaction_items(*)").order("date",{ascending:!1});Nt&&U(Nt.map(ce))}}catch(tt){console.warn("failed to insert payment transaction",tt)}const ge=[...q.pagamentos,M],je=q.itens.reduce((tt,Be)=>tt+Be.quantidade*Be.precoUnitario,0),Oe=q.itens.reduce((tt,Be)=>tt+Be.quantidade*Be.precoUnitario*((Be.impostoPercent||0)/100),0),De=je+Oe,he=ge.reduce((tt,Be)=>tt+Be.valor,0);let J=q.status;he>=De-.1?J="PAGA":he>0&&(J="PAGA_PARCIAL");const Se={...q,pagamentos:ge,status:J};ed(Se),le(`Pagamento de ${M.valor} registrado.`)},va=(O,M)=>{W(q=>({...q,[O]:{advances:M}}))},yn=O=>{const M=R.filter(mr=>mr.workerId===O.id),q=M.filter(mr=>mr.status===wt.FULL_DAY).length,Q=M.filter(mr=>mr.status===wt.HALF_DAY).length,ge=M.filter(mr=>mr.status===wt.ABSENT).length,je=q+Q*.5,Oe=M.reduce((mr,cn)=>mr+(cn.production||0),0),De=O.defaultDailyGoal||0,he=je*De,J=he>0?Oe/he*100:0,Se=O.dailyRate||0,Ie=O.halfDayRate||0,Ut=O.bonusPerUnit||0,tt=O.absencePenalty||0,Be=q*Se+Q*Ie,ut=Math.max(0,Oe-he)*Ut,Le=L[O.id]||{advances:0},_t=ge*tt+Le.advances,Kn=Be+ut-_t;return{userId:O.id,userName:O.name,fullDays:q,halfDays:Q,absences:ge,targetProduction:he,realProduction:Oe,efficiency:Math.floor(J),baseSalary:Be,productionBonus:ut,totalDeductions:_t,netSalary:Kn}},td=async O=>{var M,q;if(!t)throw new Error("Ao no permitida: Usurio no autenticado.");if(!Gt)throw new Error("Apenas administradores podem criar usurios.");if(!O.password)throw new Error("Senha  obrigatria");try{le(` Criando usurio ${O.name}...`);const Q=await m3({name:O.name,email:O.email,password:O.password,role:String(O.role),locationId:O.locationId||null,jobTitle:O.jobTitle||null,defaultDailyGoal:O.defaultDailyGoal??null,dailyRate:O.dailyRate??null,halfDayRate:O.halfDayRate??null,absencePenalty:O.absencePenalty??null,bonusPerUnit:O.bonusPerUnit??null});if(!Q.success){console.error(" Edge Function error:",Q);const Oe=Q.error||`Erro ao criar usurio (status ${Q.status||"unknown"})`;throw le(` Erro: ${Oe}`),new Error(Oe)}console.log(" Usurio criado com sucesso! ID:",((M=Q.data)==null?void 0:M.userId)||((q=Q.data)==null?void 0:q.user_id)||null),le(" Usurio criado! Atualizando lista...");const{data:ge,error:je}=await ne.from("users").select("*");if(je)console.error("Erro ao buscar lista de usurios:",je),le(" Usurio criado, mas erro ao atualizar lista");else if(ge){const Oe=ge.map(De=>({id:De.id,name:De.name,role:De.role,locationId:De.location_id||null,jobTitle:De.job_title,defaultDailyGoal:De.default_daily_goal,dailyRate:De.daily_rate,halfDayRate:De.half_day_rate,absencePenalty:De.absence_penalty,bonusPerUnit:De.bonus_per_unit}));i(Oe),le(` Usurio ${O.name} criado com sucesso!`,6e3)}}catch(Q){console.error(" Exception ao criar usurio:",Q);const ge=(Q==null?void 0:Q.message)||"Erro desconhecido ao criar usurio";throw le(` Erro: ${ge}`,6e3),Q}},Km=async O=>{if(t)try{const M=n.find(he=>he.id===O.entidade_id),q=(M==null?void 0:M.locationId)||t.locationId;if(!q){le("Erro: No foi possvel determinar a localizao para sada de stock.");return}let Q=0;if(O.produto_id){const he=N.find(J=>J.itemId===O.produto_id&&J.locationId===q);Q=(he==null?void 0:he.quantity)||0}const{count:ge}=await ne.from("fichas_individuais").select("id",{count:"exact",head:!0}),je=`FICHA-${new Date().getFullYear()}-${String((ge||0)+1).padStart(4,"0")}`,{data:Oe,error:De}=await ne.from("fichas_individuais").insert({codigo:je,tipo:O.tipo,entidade_id:O.entidade_id,entidade_tipo:O.entidade_tipo,data:O.data,produto_id:O.produto_id,produto_name:O.produto,quantidade:O.quantidade,unidade:O.unidade,stock_antes:Q,stock_depois:Q-O.quantidade,observacoes:O.observacoes,usuario_registou:t.id,estado:"confirmado"}).select().single();if(De)throw De;O.produto_id&&await sr(O.produto_id,q,-O.quantidade),Fe(he=>[Oe,...he]),le("Entrega registrada e stock atualizado!")}catch(M){console.error("Erro ao criar ficha:",M),le(`Erro ao criar ficha: ${M.message}`)}},Vl=async O=>{if(t)try{const{error:M}=await ne.from("fichas_individuais").update({estado:"confirmado"}).eq("id",O);if(M)throw M;Fe(q=>q.map(Q=>Q.id===O?{...Q,estado:"confirmado"}:Q)),le("Ficha confirmada!")}catch(M){le(`Erro ao confirmar ficha: ${M.message}`)}},rd=async O=>{if(t)try{const{error:M}=await ne.from("fichas_individuais").update({estado:"trancado"}).eq("id",O);if(M)throw M;Fe(q=>q.map(Q=>Q.id===O?{...Q,estado:"trancado"}:Q)),le("Ficha trancada!")}catch(M){le(`Erro ao trancar ficha: ${M.message}`)}},Eo=async O=>{if(!t||t.role!==Ae.ADMIN){le("Apenas administradores podem editar fichas.");return}try{const{error:M}=await ne.from("fichas_individuais").update(O).eq("id",O.id);if(M)throw M;Fe(q=>q.map(Q=>Q.id===O.id?O:Q)),le("Ficha atualizada!")}catch(M){le(`Erro ao atualizar ficha: ${M.message}`)}},Ym=async O=>{if(!t||t.role!==Ae.ADMIN){le("Apenas administradores podem apagar fichas.");return}try{const{error:M}=await ne.from("fichas_individuais").delete().eq("id",O);if(M)throw M;Fe(q=>q.filter(Q=>Q.id!==O)),le("Ficha apagada!")}catch(M){le(`Erro ao apagar ficha: ${M.message}`)}},vn=async O=>{if(t)try{const{data:M,error:q}=await ne.from("initial_stock").insert({...O,usuario_registou:t.id}).select().single();if(q)throw q;Ve(Q=>[...Q,M]),le("Stock inicial criado!")}catch(M){le(`Erro ao criar stock inicial: ${M.message}`)}},Kl=async O=>{if(t)try{const{data:M,error:q}=await ne.from("stock_alarms").upsert(O).select().single();if(q)throw q;Jr(Q=>Q.map(ge=>ge.id===O.id?M:ge)),le("Alarme de stock atualizado!")}catch(M){le(`Erro ao atualizar alarme: ${M.message}`)}},nd=(O,M)=>tr.filter(q=>q.tabela===O&&q.record_id===M),Yl=async O=>{if(t)try{const{data:M,error:q}=await ne.from("cost_centers").insert({...O,created_at:new Date().toISOString()}).select().single();if(q)throw q;en(Q=>[...Q,M]),le("Centro de custo criado!")}catch(M){le(`Erro ao criar centro de custo: ${M.message}`)}},Hi=async O=>{if(t)try{const{data:M,error:q}=await ne.from("cost_centers").update(O).eq("id",O.id).select().single();if(q)throw q;en(Q=>Q.map(ge=>ge.id===O.id?M:ge)),le("Centro de custo atualizado!")}catch(M){le(`Erro ao atualizar centro de custo: ${M.message}`)}},ad=async O=>{if(t)try{const{error:M}=await ne.from("cost_centers").delete().eq("id",O);if(M)throw M;en(q=>q.filter(Q=>Q.id!==O)),le("Centro de custo removido!")}catch(M){le(`Erro ao remover centro de custo: ${M.message}`)}},id=async O=>{if(t)try{const M=O.quantity*O.unitPrice,{data:q,error:Q}=await ne.from("pending_invoice_items").insert({...O,total_value:M,invoiced_quantity:0,remaining_quantity:O.quantity,created_by:t.id,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(Q)throw Q;Tn(ge=>[...ge,q]),le("Item por faturar criado!")}catch(M){le(`Erro ao criar item pendente: ${M.message}`)}},Fi=async O=>{if(t)try{const{data:M,error:q}=await ne.from("pending_invoice_items").update({...O,updated_at:new Date().toISOString()}).eq("id",O.id).select().single();if(q)throw q;Tn(Q=>Q.map(ge=>ge.id===O.id?M:ge)),le("Item pendente atualizado!")}catch(M){le(`Erro ao atualizar item pendente: ${M.message}`)}},Wm=async O=>{if(t)try{const{error:M}=await ne.from("pending_invoice_items").delete().eq("id",O);if(M)throw M;Tn(q=>q.filter(Q=>Q.id!==O)),le("Item pendente removido!")}catch(M){le(`Erro ao remover item pendente: ${M.message}`)}},sd=async(O,M,q)=>{if(t)try{const{data:Q,error:ge}=await ne.from("invoice_pending_links").insert({invoice_item_id:O,pending_item_id:M,quantity_used:q,created_at:new Date().toISOString()}).select().single();if(ge)throw ge;ma(je=>[...je,Q]),le("Item ligado  fatura!")}catch(Q){le(`Erro ao ligar item: ${Q.message}`)}},od=async O=>{if(t)try{const{data:M,error:q}=await ne.from("credit_notes").insert({...O,created_by:t.id,created_at:new Date().toISOString()}).select().single();if(q)throw q;fr(Q=>[...Q,M]),le("Nota de crdito criada!")}catch(M){le(`Erro ao criar nota de crdito: ${M.message}`)}},Wl=async O=>{if(t)try{const{data:M,error:q}=await ne.from("credit_notes").update(O).eq("id",O.id).select().single();if(q)throw q;fr(Q=>Q.map(ge=>ge.id===O.id?M:ge)),le("Nota de crdito atualizada!")}catch(M){le(`Erro ao atualizar nota de crdito: ${M.message}`)}},Xm=async O=>{if(t)try{const{data:M,error:q}=await ne.from("clients").update({...O,credit_limit:O.creditLimit,current_balance:O.currentBalance,status:O.status,client_type:O.clientType}).eq("id",O.id).select().single();if(q)throw q;fe(Q=>Q.map(ge=>ge.id===O.id?M:ge)),le("Cliente atualizado!")}catch(M){le(`Erro ao atualizar cliente: ${M.message}`)}},Zm=O=>{const M=K.find(ge=>ge.id===O);if(!M)return{availableCredit:0,isBlocked:!0};const q=M.creditLimit-M.currentBalance,Q=M.status==="BLOCKED"||M.status==="SUSPENDED"||q<0;return{availableCredit:q,isBlocked:Q}},Ao=async(O,M)=>({period:`${O} - ${M}`,totalSales:0,totalInvoices:V.length,totalClients:K.length,salesByProduct:[],salesByClient:[]}),xa=async(O,M)=>({accountsReceivable:0,overdueAccounts:0,cashFlow:[],clientBalances:[]}),Xl=async(O,M)=>({costCenters:[],products:[]}),Zl=()=>{try{typeof window<"u"&&window.localStorage&&(console.log(" Limpando localStorage..."),localStorage.clear())}catch(O){console.warn("No foi possvel limpar localStorage:",O)}i([]),x([]),j([]),_([]),k([]),I([]),C([]),Y([]),H([]),U([]),D([]),fe([]),Fe([]),Ve([]),Jr([]),pn([]),en([]),Tn([]),ma([]),fr([]),be([]),Ee([]),at([]),pe([]),re([]),Re({nome:"",nuit:"",endereco:"",contacto:""}),X(Ze[0]||"MZN"),W({}),u(null),r(null),h(new Date),p(null),le("Dados locais reiniciados.")};return we?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-white to-blue-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-emerald-600 rounded-2xl mb-4 animate-pulse",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsx("p",{className:"text-gray-600",children:"Carregando dados..."})]})}):o.jsx(mO.Provider,{value:{currentUser:t,allUsers:n,items:g,locations:b,inventory:N,requisitions:E,requisitionSheets:A,performanceRecords:R,accountingEntries:P,transactions:$,invoices:V,clients:K,fichasIndividuais:Mt,initialStocks:Kt,stockAlarms:Cn,auditLogs:tr,logEntries:oe,costCenters:gn,pendingInvoiceItems:Ma,invoicePendingLinks:ha,creditNotes:Ya,selectedDepartmentId:l,lastUpdated:d,notification:m,isAdminOrGM:Gt,categories:ve,measureUnits:Te,itemTypes:Ce,rolePermissions:Ne,paymentMethods:z,expenseCategories:ue,companyInfo:Je,availableCurrencies:Ze,defaultCurrency:Ke,payrollParams:L,setSelectedDepartmentId:u,createRequisition:Li,createRequisitionSheet:Wa,updateRequisitionStatus:Gl,updateRequisitionSheetStatus:_r,updateRequisitionSheetItemDelivery:ln,getInventoryByLocation:xt,getItemName:zt,getLocationName:Gr,getClientName:zi,savePerformanceRecord:ht,getWorkersByManager:jt,getWorkersByLocation:tn,refreshData:ya,registerNewItem:ft,addToInventory:se,deleteItem:vt,updateItem:Ge,resetLocalData:Zl,addUser:td,updateUser:Ui,deleteUser:Hl,addLocation:Hm,removeLocation:Fm,addCategory:Wu,addMeasureUnit:Cs,addItemType:Fl,addPaymentMethod:$i,removePaymentMethod:qi,addExpenseCategory:Ts,removeExpenseCategory:Bi,updateCompanyInfo:hr,setDefaultCurrency:X,processSale:Gi,registerExpense:Vm,hasPermission:Mi,togglePermission:Ii,addInvoice:Ju,updateInvoice:ed,deleteInvoice:_o,getNextInvoiceNumber:Qu,registerPayment:So,addClient:Xu,updateClient:Zu,getClientBalance:Xa,updatePayrollParams:va,calculatePayrollForUser:yn,createFicha:Km,confirmFicha:Vl,lockFicha:rd,updateFicha:Eo,deleteFicha:Ym,createInitialStock:vn,updateStockAlarm:Kl,getAuditLogsForTable:nd,addCostCenter:Yl,updateCostCenter:Hi,deleteCostCenter:ad,createPendingInvoiceItem:id,updatePendingInvoiceItem:Fi,deletePendingInvoiceItem:Wm,linkInvoiceToPendingItem:sd,createCreditNote:od,updateCreditNote:Wl,updateClientExtended:Xm,getClientCreditStatus:Zm,generateSalesReport:Ao,generateFinancialReport:xa,generateProfitabilityReport:Xl},children:e})},Nr=()=>{const e=w.useContext(mO);if(!e)throw new Error("useLogistics must be used within a LogisticsProvider");return e};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),x3=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),C_=e=>{const t=x3(e);return t.charAt(0).toUpperCase()+t.slice(1)},pO=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),b3=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var w3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:l,iconNode:u,...d},h)=>w.createElement("svg",{ref:h,...w3,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:pO("lucide",i),...!l&&!b3(d)&&{"aria-hidden":"true"},...d},[...u.map(([m,p])=>w.createElement(m,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(e,t)=>{const r=w.forwardRef(({className:n,...i},l)=>w.createElement(j3,{ref:l,iconNode:t,className:pO(`lucide-${v3(C_(e))}`,`lucide-${e}`,n),...i}));return r.displayName=C_(e),r};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],_3=ke("activity",N3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],E3=ke("arrow-left",S3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Vh=ke("arrow-right",A3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],fx=ke("banknote",O3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],T3=ke("bell",C3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],io=ke("box",k3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],gO=ke("briefcase",D3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],yO=ke("building-2",R3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],M3=ke("calculator",P3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Su=ke("calendar",I3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],iv=ke("chart-column",L3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],U3=ke("chart-no-axes-column",z3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],vO=ke("chart-pie",$3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],T_=ke("chevron-down",q3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],G3=ke("chevron-left",B3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Vf=ke("chevron-right",H3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],k_=ke("chevron-up",F3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],so=ke("circle-alert",V3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],sa=ke("circle-check-big",K3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],W3=ke("circle-user",Y3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Kf=ke("circle-x",X3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],sv=ke("clipboard-check",Z3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],iu=ke("clock",Q3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],e5=ke("coins",J3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],xO=ke("credit-card",t5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Gn=ke("dollar-sign",r5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],hx=ke("download",n5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],la=ke("file-text",a5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],bO=ke("funnel",i5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],o5=ke("globe",s5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],mx=ke("history",l5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],wO=ke("landmark",c5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],d5=ke("layout-dashboard",u5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],h5=ke("loader-circle",f5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],p5=ke("log-in",m5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fo=ke("lock",g5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],v5=ke("log-out",y5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],D_=ke("mail",x5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],js=ke("map-pin",b5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],j5=ke("menu",w5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ov=ke("message-circle",N5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=[["path",{d:"M5 12h14",key:"1ays0h"}]],S5=ke("minus",_5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],m0=ke("package-check",E5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],px=ke("package",A5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],lv=ke("paperclip",O5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],T5=ke("phone",C5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Zr=ke("plus",k5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],gx=ke("printer",D5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],P5=ke("receipt",R5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],I5=ke("refresh-cw",M5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Kh=ke("save",L5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],U5=ke("scale",z5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],xs=ke("search",$5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],B5=ke("send",q5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],yx=ke("settings",G5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],F5=ke("shield-check",H5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],jO=ke("shield",V5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],cv=ke("shopping-cart",K5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],W5=ke("smartphone",Y5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],R_=ke("square-pen",X5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],NO=ke("tag",Z5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vi=ke("trash-2",Q5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],vx=ke("trending-down",J5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Eu=ke("trending-up",e6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],r6=ke("triangle-alert",t6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],$a=ke("truck",n6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],i6=ke("user-check",a6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],su=ke("user-plus",s6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Lf=ke("user",o6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Yh=ke("users",l6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],sn=ke("x",c6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],d6=ke("zap",u6),f6=({children:e,activeTab:t,onTabChange:r})=>{var V;const{currentUser:n,locations:i,selectedDepartmentId:l,setSelectedDepartmentId:u,requisitions:d,updateRequisitionStatus:h,getWorkersByLocation:m,refreshData:p,lastUpdated:g,notification:x,isAdminOrGM:b,hasPermission:j}=Nr(),[N,_]=w.useState(!1),[E,k]=w.useState(!1),A=async()=>{k(!0);try{console.log(" Usurio clicou em Sincronizar"),await p(),setTimeout(()=>{(n==null?void 0:n.role)==="WORKER"&&(n==null?void 0:n.email)==="davidjuniormuianga@gmail.com"&&(console.log(" Ainda WORKER aps refresh, fazendo hard reload..."),window.location.reload())},1e3)}finally{k(!1)}};if(!n)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-white to-blue-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-emerald-600 rounded-2xl mb-4 animate-pulse",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsx("p",{className:"text-gray-600",children:"Carregando..."})]})});const I=async()=>{confirm("Tem certeza que deseja sair?")&&(await ne.auth.signOut(),window.location.reload())},R=D=>{switch(D){case Ae.ADMIN:return"bg-purple-100 text-purple-800 border-purple-200";case Ae.GENERAL_MANAGER:return"bg-indigo-100 text-indigo-800 border-indigo-200";case Ae.MANAGER:return"bg-blue-100 text-blue-800 border-blue-200";case Ae.WORKER:return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800"}},C=D=>{r(D),_(!1)},P=D=>{u(D),C("dashboard"),_(!1)},Y=D=>{u(null),C(D),_(!1)},oe=d.filter(D=>D.status===nt.PENDING),H=oe.length>0,$=j("MANAGE_REQUISITIONS"),U=D=>{D.stopPropagation(),confirm(`Tem certeza que deseja aprovar TODAS as ${oe.length} requisies pendentes?`)&&(oe.forEach(K=>{h(K.id,nt.APPROVED)}),C("requisitions"))},ce=i.filter(D=>D.type===Ar.BRANCH),G=l?(V=i.find(D=>D.id===l))==null?void 0:V.name:"Viso Global";return o.jsxs("div",{className:"flex h-screen bg-gray-50 overflow-hidden",children:[N&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden backdrop-blur-sm transition-opacity",onClick:()=>_(!1)}),o.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-72 bg-slate-900 text-white flex flex-col shadow-2xl transform transition-transform duration-300 ease-in-out
        lg:static lg:w-64 lg:translate-x-0
        ${N?"translate-x-0":"-translate-x-full"}
      `,children:[o.jsxs("div",{className:"p-6 border-b border-slate-700 cursor-pointer flex justify-between items-center bg-slate-950",onClick:()=>Y("dashboard"),children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-8 h-8 rounded bg-emerald-600 flex items-center justify-center font-bold text-white shadow-lg shadow-emerald-900/50",children:"O"}),o.jsx("h1",{className:"text-lg font-bold tracking-tight leading-tight",children:"OFFICE FLORESTAL"})]}),o.jsx("p",{className:"text-[10px] text-slate-400 mt-1 uppercase tracking-wider",children:"Logstica & Gesto"})]}),o.jsx("button",{onClick:D=>{D.stopPropagation(),_(!1)},className:"lg:hidden text-slate-400 hover:text-white p-2","aria-label":"Fechar menu",title:"Fechar menu",children:o.jsx(sn,{size:24})})]}),o.jsxs("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto custom-scrollbar",children:[j("VIEW_DASHBOARD")&&o.jsxs("button",{onClick:()=>C("dashboard"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${t==="dashboard"?"bg-blue-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,children:[o.jsx(d5,{size:20}),o.jsx("span",{className:"font-medium text-sm",children:"Viso Geral"})]}),o.jsxs("button",{onClick:()=>C("chat"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${t==="chat"?"bg-blue-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,"aria-label":"Abrir chat de equipe",title:"Chat de Equipe",children:[o.jsx(ov,{size:20}),o.jsx("span",{className:"font-medium text-sm",children:"Chat"})]}),j("VIEW_REQUISITIONS")&&o.jsxs("div",{className:"space-y-1",children:[o.jsxs("button",{onClick:()=>C("requisitions"),className:`w-full flex items-center justify-between px-4 py-3 rounded-lg transition-all ${t==="requisitions"?"bg-blue-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx($a,{size:20}),o.jsx("span",{className:"font-medium text-sm",children:"Requisies"})]}),H&&o.jsx("span",{className:"bg-orange-500 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-sm",children:oe.length})]}),$&&H&&o.jsx("div",{className:"px-4 pb-2",children:o.jsxs("button",{onClick:U,className:"w-full text-xs bg-emerald-600 hover:bg-emerald-700 text-white py-2.5 rounded flex items-center justify-center gap-2 transition-colors shadow-sm font-medium border border-emerald-500",children:[o.jsx(sa,{size:14}),"Aprovar ",oe.length," Pendentes"]})})]}),j("VIEW_INVENTORY")&&o.jsxs("button",{onClick:()=>C("inventory"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${t==="inventory"?"bg-blue-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,children:[o.jsx(px,{size:20}),o.jsx("span",{className:"font-medium text-sm",children:"Estoque"})]}),j("VIEW_INVENTORY")&&o.jsxs("button",{onClick:()=>C("fichas"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${t==="fichas"?"bg-blue-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,children:[o.jsx(sv,{size:20}),o.jsx("span",{className:"font-medium text-sm",children:"Fichas Individuais"})]}),j("VIEW_PERFORMANCE")&&o.jsxs("button",{onClick:()=>C("performance"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${t==="performance"?"bg-blue-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,children:[o.jsx(sv,{size:20}),o.jsx("span",{className:"font-medium text-sm",children:"Desempenho"})]}),j("VIEW_POS")&&o.jsxs("div",{className:"space-y-1",children:[o.jsxs("button",{onClick:()=>C("pos"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${t==="pos"?"bg-blue-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,children:[o.jsx(cv,{size:20}),o.jsx("span",{className:"font-medium text-sm",children:"POS & Financeiro"})]}),b&&o.jsxs("div",{className:"pl-8 space-y-1",children:[o.jsxs("button",{onClick:()=>C("contas-receber"),className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-all ${t==="contas-receber"?"bg-blue-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,title:"Contas a Receber",children:[o.jsx(Gn,{size:16}),o.jsx("span",{children:"Contas a Receber"})]}),o.jsxs("button",{onClick:()=>C("expense-approvals"),className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-all ${t==="expense-approvals"?"bg-blue-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,title:"Aprovao de Despesas",children:[o.jsx(Gn,{size:16}),o.jsx("span",{children:"Aprovao de Despesas"})]}),o.jsxs("button",{onClick:()=>C("expense-reports"),className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-all ${t==="expense-reports"?"bg-blue-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,title:"Relatrios de Oramento",children:[o.jsx(Gn,{size:16}),o.jsx("span",{children:"Relatrios de Oramento"})]})]})]}),j("VIEW_PATRIMONY")&&o.jsxs("button",{onClick:()=>C("patrimony"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${t==="patrimony"?"bg-blue-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,children:[o.jsx(wO,{size:20}),o.jsx("span",{className:"font-medium text-sm",children:"Patrimnio"})]}),j("VIEW_HR")&&o.jsxs("button",{onClick:()=>C("hr"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${t==="hr"?"bg-blue-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,children:[o.jsx(gO,{size:20}),o.jsx("span",{className:"font-medium text-sm",children:"Recursos Humanos"})]}),j("VIEW_PAYROLL")&&o.jsxs("button",{onClick:()=>C("payroll"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${t==="payroll"?"bg-blue-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,children:[o.jsx(fx,{size:20}),o.jsx("span",{className:"font-medium text-sm",children:"Folha Salarial"})]}),j("VIEW_SETTINGS")&&o.jsxs("button",{onClick:()=>C("settings"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${t==="settings"?"bg-blue-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,children:[o.jsx(yx,{size:20}),o.jsx("span",{className:"font-medium text-sm",children:"Definies"})]}),j("MANAGE_PERMISSIONS")&&o.jsxs("button",{onClick:()=>C("permissions"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${t==="permissions"?"bg-blue-600 text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,children:[o.jsx(jO,{size:20}),o.jsx("span",{className:"font-medium text-sm",children:"Permisses"})]}),o.jsxs("div",{className:"pt-4 mt-2 border-t border-slate-700",children:[o.jsx("p",{className:"px-4 text-[10px] font-bold text-slate-500 uppercase mb-2 tracking-wider",children:"Filiais"}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("button",{onClick:()=>Y("dashboard"),className:`w-full flex items-center justify-between px-4 py-2.5 rounded-lg transition-colors text-sm ${l?"text-slate-400 hover:bg-slate-800 hover:text-slate-200":"bg-slate-800 text-white border border-slate-600"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(o5,{size:16}),o.jsx("span",{className:"font-medium",children:"Todas"})]}),!l&&o.jsx(sa,{size:14,className:"text-emerald-500"})]}),ce.map(D=>{const K=m(D.id).length;return o.jsxs("button",{onClick:()=>P(D.id),className:`w-full flex items-center justify-between px-4 py-2.5 rounded-lg transition-colors text-sm ${l===D.id?"bg-slate-800 text-white border border-slate-600":"text-slate-400 hover:bg-slate-800 hover:text-slate-200"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(yO,{size:16}),o.jsx("span",{className:"font-medium truncate max-w-[120px]",children:D.name.replace("Filial ","")})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[K>0&&o.jsx("span",{className:"text-[10px] bg-slate-950 text-slate-400 px-1.5 py-0.5 rounded-full",title:`${K} trabalhadores`,children:K}),l===D.id&&o.jsx(Vf,{size:14})]})]},D.id)})]})]})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative w-full h-full",children:[o.jsxs("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-4 lg:px-8 shadow-sm shrink-0 z-10",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>_(!0),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg lg:hidden active:bg-gray-200 transition-colors","aria-label":"Abrir menu",title:"Abrir menu",children:o.jsx(j5,{size:24})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800 capitalize flex items-center gap-2 leading-tight",children:t==="dashboard"?"Dashboard":t==="inventory"?"Estoque":t==="requisitions"?"Requisies":t==="performance"?"Desempenho":t==="hr"?"RH":t==="payroll"?"Folha Salarial":t==="contas-receber"?"Contas a Receber":t==="expense-approvals"?"Aprovao de Despesas":t==="expense-reports"?"Relatrios de Oramento":t==="settings"?"Definies":t==="patrimony"?"Patrimnio":t==="pos"?"POS & Vendas":t==="permissions"?"Permisses":"Office Florestal"}),l&&o.jsx("div",{className:"flex items-center text-xs text-blue-600 font-medium",children:o.jsx("span",{className:"truncate max-w-[200px]",children:G})})]})]}),o.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 bg-gray-50 px-2 md:px-3 py-1.5 rounded-full border border-gray-100",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),o.jsx("span",{className:"hidden md:inline",children:g.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),o.jsx("button",{onClick:A,disabled:E,className:`hover:text-blue-600 transition-colors p-1 ${E?"animate-spin text-blue-600":""}`,title:"Sincronizar agora",children:o.jsx(I5,{size:14})})]}),o.jsx("div",{className:`hidden md:block px-3 py-1 rounded-full text-xs font-bold border ${R(n.role)}`,children:n.role.replace("_"," ")}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 bg-gray-100 p-1.5 rounded-lg border border-gray-200",children:[o.jsx(W3,{size:20,className:"text-gray-500"}),o.jsx("span",{className:"text-xs font-bold truncate max-w-[60px] md:max-w-none",children:n.name.split(" ")[0]})]}),o.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors border border-red-200 hover:border-red-300",title:"Sair",children:[o.jsx(v5,{size:18}),o.jsx("span",{className:"hidden md:inline",children:"Sair"})]})]})]}),o.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-3 md:p-6 lg:p-8 scroll-smooth",children:o.jsx("div",{className:"max-w-7xl mx-auto h-full",children:e})}),x&&o.jsxs("div",{className:"fixed top-4 left-4 right-4 md:top-auto md:left-auto md:bottom-6 md:right-6 bg-slate-900/95 backdrop-blur text-white px-4 py-3 rounded-lg shadow-2xl z-[60] animate-in slide-in-from-top-4 md:slide-in-from-bottom-4 transition-all flex items-center gap-3 border border-slate-700",children:[o.jsx(T3,{size:20,className:"text-blue-400 shrink-0"}),o.jsx("div",{children:o.jsx("p",{className:"text-sm font-medium",children:x})})]})]})]})};function _O(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=_O(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ot(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=_O(e))&&(n&&(n+=" "),n+=t);return n}var h6=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function xx(e){if(typeof e!="string")return!1;var t=h6;return t.includes(e)}var m6=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],p6=new Set(m6);function SO(e){return typeof e!="string"?!1:p6.has(e)}function EO(e){return typeof e=="string"&&e.startsWith("data-")}function ka(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(SO(r)||EO(r))&&(t[r]=e[r]);return t}function ou(e){if(e==null)return null;if(w.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return ka(t)}return typeof e=="object"&&!Array.isArray(e)?ka(e):null}function ca(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(SO(r)||EO(r)||xx(r))&&(t[r]=e[r]);return t}var g6=["children","width","height","viewBox","className","style","title","desc"];function uv(){return uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uv.apply(null,arguments)}function y6(e,t){if(e==null)return{};var r,n,i=v6(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function v6(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bx=w.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:l,className:u,style:d,title:h,desc:m}=e,p=y6(e,g6),g=l||{width:n,height:i,x:0,y:0},x=Ot("recharts-surface",u);return w.createElement("svg",uv({},ca(p),{className:x,width:n,height:i,style:d,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),w.createElement("title",null,h),w.createElement("desc",null,m),r)}),x6=["children","className"];function dv(){return dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dv.apply(null,arguments)}function b6(e,t){if(e==null)return{};var r,n,i=w6(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function w6(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hn=w.forwardRef((e,t)=>{var{children:r,className:n}=e,i=b6(e,x6),l=Ot("recharts-layer",n);return w.createElement("g",dv({className:l},ca(i),{ref:t}),r)}),wx=ZA(),AO=w.createContext(null),j6=()=>w.useContext(AO);function qt(e){return function(){return e}}const OO=Math.cos,Yf=Math.sin,Ra=Math.sqrt,Wf=Math.PI,Wh=2*Wf,fv=Math.PI,hv=2*fv,Ws=1e-6,N6=hv-Ws;function CO(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function _6(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return CO;const r=10**t;return function(n){this._+=n[0];for(let i=1,l=n.length;i<l;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class S6{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?CO:_6(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,l,u){this._append`C${+t},${+r},${+n},${+i},${this._x1=+l},${this._y1=+u}`}arcTo(t,r,n,i,l){if(t=+t,r=+r,n=+n,i=+i,l=+l,l<0)throw new Error(`negative radius: ${l}`);let u=this._x1,d=this._y1,h=n-t,m=i-r,p=u-t,g=d-r,x=p*p+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(x>Ws)if(!(Math.abs(g*h-m*p)>Ws)||!l)this._append`L${this._x1=t},${this._y1=r}`;else{let b=n-u,j=i-d,N=h*h+m*m,_=b*b+j*j,E=Math.sqrt(N),k=Math.sqrt(x),A=l*Math.tan((fv-Math.acos((N+x-_)/(2*E*k)))/2),I=A/k,R=A/E;Math.abs(I-1)>Ws&&this._append`L${t+I*p},${r+I*g}`,this._append`A${l},${l},0,0,${+(g*b>p*j)},${this._x1=t+R*h},${this._y1=r+R*m}`}}arc(t,r,n,i,l,u){if(t=+t,r=+r,n=+n,u=!!u,n<0)throw new Error(`negative radius: ${n}`);let d=n*Math.cos(i),h=n*Math.sin(i),m=t+d,p=r+h,g=1^u,x=u?i-l:l-i;this._x1===null?this._append`M${m},${p}`:(Math.abs(this._x1-m)>Ws||Math.abs(this._y1-p)>Ws)&&this._append`L${m},${p}`,n&&(x<0&&(x=x%hv+hv),x>N6?this._append`A${n},${n},0,1,${g},${t-d},${r-h}A${n},${n},0,1,${g},${this._x1=m},${this._y1=p}`:x>Ws&&this._append`A${n},${n},0,${+(x>=fv)},${g},${this._x1=t+n*Math.cos(l)},${this._y1=r+n*Math.sin(l)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function jx(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new S6(t)}function Nx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function TO(e){this._context=e}TO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Xh(e){return new TO(e)}function kO(e){return e[0]}function DO(e){return e[1]}function RO(e,t){var r=qt(!0),n=null,i=Xh,l=null,u=jx(d);e=typeof e=="function"?e:e===void 0?kO:qt(e),t=typeof t=="function"?t:t===void 0?DO:qt(t);function d(h){var m,p=(h=Nx(h)).length,g,x=!1,b;for(n==null&&(l=i(b=u())),m=0;m<=p;++m)!(m<p&&r(g=h[m],m,h))===x&&((x=!x)?l.lineStart():l.lineEnd()),x&&l.point(+e(g,m,h),+t(g,m,h));if(b)return l=null,b+""||null}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:qt(+h),d):e},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:qt(+h),d):t},d.defined=function(h){return arguments.length?(r=typeof h=="function"?h:qt(!!h),d):r},d.curve=function(h){return arguments.length?(i=h,n!=null&&(l=i(n)),d):i},d.context=function(h){return arguments.length?(h==null?n=l=null:l=i(n=h),d):n},d}function bf(e,t,r){var n=null,i=qt(!0),l=null,u=Xh,d=null,h=jx(m);e=typeof e=="function"?e:e===void 0?kO:qt(+e),t=typeof t=="function"?t:qt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?DO:qt(+r);function m(g){var x,b,j,N=(g=Nx(g)).length,_,E=!1,k,A=new Array(N),I=new Array(N);for(l==null&&(d=u(k=h())),x=0;x<=N;++x){if(!(x<N&&i(_=g[x],x,g))===E)if(E=!E)b=x,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),j=x-1;j>=b;--j)d.point(A[j],I[j]);d.lineEnd(),d.areaEnd()}E&&(A[x]=+e(_,x,g),I[x]=+t(_,x,g),d.point(n?+n(_,x,g):A[x],r?+r(_,x,g):I[x]))}if(k)return d=null,k+""||null}function p(){return RO().defined(i).curve(u).context(l)}return m.x=function(g){return arguments.length?(e=typeof g=="function"?g:qt(+g),n=null,m):e},m.x0=function(g){return arguments.length?(e=typeof g=="function"?g:qt(+g),m):e},m.x1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:qt(+g),m):n},m.y=function(g){return arguments.length?(t=typeof g=="function"?g:qt(+g),r=null,m):t},m.y0=function(g){return arguments.length?(t=typeof g=="function"?g:qt(+g),m):t},m.y1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:qt(+g),m):r},m.lineX0=m.lineY0=function(){return p().x(e).y(t)},m.lineY1=function(){return p().x(e).y(r)},m.lineX1=function(){return p().x(n).y(t)},m.defined=function(g){return arguments.length?(i=typeof g=="function"?g:qt(!!g),m):i},m.curve=function(g){return arguments.length?(u=g,l!=null&&(d=u(l)),m):u},m.context=function(g){return arguments.length?(g==null?l=d=null:d=u(l=g),m):l},m}class PO{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function E6(e){return new PO(e,!0)}function A6(e){return new PO(e,!1)}const _x={draw(e,t){const r=Ra(t/Wf);e.moveTo(r,0),e.arc(0,0,r,0,Wh)}},O6={draw(e,t){const r=Ra(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},MO=Ra(1/3),C6=MO*2,T6={draw(e,t){const r=Ra(t/C6),n=r*MO;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},k6={draw(e,t){const r=Ra(t),n=-r/2;e.rect(n,n,r,r)}},D6=.8908130915292852,IO=Yf(Wf/10)/Yf(7*Wf/10),R6=Yf(Wh/10)*IO,P6=-OO(Wh/10)*IO,M6={draw(e,t){const r=Ra(t*D6),n=R6*r,i=P6*r;e.moveTo(0,-r),e.lineTo(n,i);for(let l=1;l<5;++l){const u=Wh*l/5,d=OO(u),h=Yf(u);e.lineTo(h*r,-d*r),e.lineTo(d*n-h*i,h*n+d*i)}e.closePath()}},p0=Ra(3),I6={draw(e,t){const r=-Ra(t/(p0*3));e.moveTo(0,r*2),e.lineTo(-p0*r,-r),e.lineTo(p0*r,-r),e.closePath()}},ra=-.5,na=Ra(3)/2,mv=1/Ra(12),L6=(mv/2+1)*3,z6={draw(e,t){const r=Ra(t/L6),n=r/2,i=r*mv,l=n,u=r*mv+r,d=-l,h=u;e.moveTo(n,i),e.lineTo(l,u),e.lineTo(d,h),e.lineTo(ra*n-na*i,na*n+ra*i),e.lineTo(ra*l-na*u,na*l+ra*u),e.lineTo(ra*d-na*h,na*d+ra*h),e.lineTo(ra*n+na*i,ra*i-na*n),e.lineTo(ra*l+na*u,ra*u-na*l),e.lineTo(ra*d+na*h,ra*h-na*d),e.closePath()}};function U6(e,t){let r=null,n=jx(i);e=typeof e=="function"?e:qt(e||_x),t=typeof t=="function"?t:qt(t===void 0?64:+t);function i(){let l;if(r||(r=l=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),l)return r=null,l+""||null}return i.type=function(l){return arguments.length?(e=typeof l=="function"?l:qt(l),i):e},i.size=function(l){return arguments.length?(t=typeof l=="function"?l:qt(+l),i):t},i.context=function(l){return arguments.length?(r=l??null,i):r},i}function Xf(){}function Zf(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function LO(e){this._context=e}LO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Zf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Zf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $6(e){return new LO(e)}function zO(e){this._context=e}zO.prototype={areaStart:Xf,areaEnd:Xf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Zf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function q6(e){return new zO(e)}function UO(e){this._context=e}UO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Zf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function B6(e){return new UO(e)}function $O(e){this._context=e}$O.prototype={areaStart:Xf,areaEnd:Xf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function G6(e){return new $O(e)}function P_(e){return e<0?-1:1}function M_(e,t,r){var n=e._x1-e._x0,i=t-e._x1,l=(e._y1-e._y0)/(n||i<0&&-0),u=(r-e._y1)/(i||n<0&&-0),d=(l*i+u*n)/(n+i);return(P_(l)+P_(u))*Math.min(Math.abs(l),Math.abs(u),.5*Math.abs(d))||0}function I_(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function g0(e,t,r){var n=e._x0,i=e._y0,l=e._x1,u=e._y1,d=(l-n)/3;e._context.bezierCurveTo(n+d,i+d*t,l-d,u-d*r,l,u)}function Qf(e){this._context=e}Qf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:g0(this,this._t0,I_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,g0(this,I_(this,r=M_(this,e,t)),r);break;default:g0(this,this._t0,r=M_(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function qO(e){this._context=new BO(e)}(qO.prototype=Object.create(Qf.prototype)).point=function(e,t){Qf.prototype.point.call(this,t,e)};function BO(e){this._context=e}BO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,l){this._context.bezierCurveTo(t,e,n,r,l,i)}};function H6(e){return new Qf(e)}function F6(e){return new qO(e)}function GO(e){this._context=e}GO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=L_(e),i=L_(t),l=0,u=1;u<r;++l,++u)this._context.bezierCurveTo(n[0][l],i[0][l],n[1][l],i[1][l],e[u],t[u]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function L_(e){var t,r=e.length-1,n,i=new Array(r),l=new Array(r),u=new Array(r);for(i[0]=0,l[0]=2,u[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,l[t]=4,u[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,l[r-1]=7,u[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/l[t-1],l[t]-=n,u[t]-=n*u[t-1];for(i[r-1]=u[r-1]/l[r-1],t=r-2;t>=0;--t)i[t]=(u[t]-i[t+1])/l[t];for(l[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)l[t]=2*e[t+1]-i[t+1];return[i,l]}function V6(e){return new GO(e)}function Zh(e,t){this._context=e,this._t=t}Zh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function K6(e){return new Zh(e,.5)}function Y6(e){return new Zh(e,0)}function W6(e){return new Zh(e,1)}function jl(e,t){if((u=e.length)>1)for(var r=1,n,i,l=e[t[0]],u,d=l.length;r<u;++r)for(i=l,l=e[t[r]],n=0;n<d;++n)l[n][1]+=l[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function pv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function X6(e,t){return e[t]}function Z6(e){const t=[];return t.key=e,t}function Q6(){var e=qt([]),t=pv,r=jl,n=X6;function i(l){var u=Array.from(e.apply(this,arguments),Z6),d,h=u.length,m=-1,p;for(const g of l)for(d=0,++m;d<h;++d)(u[d][m]=[0,+n(g,u[d].key,m,l)]).data=g;for(d=0,p=Nx(t(u));d<h;++d)u[p[d]].index=d;return r(u,p),u}return i.keys=function(l){return arguments.length?(e=typeof l=="function"?l:qt(Array.from(l)),i):e},i.value=function(l){return arguments.length?(n=typeof l=="function"?l:qt(+l),i):n},i.order=function(l){return arguments.length?(t=l==null?pv:typeof l=="function"?l:qt(Array.from(l)),i):t},i.offset=function(l){return arguments.length?(r=l??jl,i):r},i}function J6(e,t){if((n=e.length)>0){for(var r,n,i=0,l=e[0].length,u;i<l;++i){for(u=r=0;r<n;++r)u+=e[r][i][1]||0;if(u)for(r=0;r<n;++r)e[r][i][1]/=u}jl(e,t)}}function eL(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,l=n.length;r<l;++r){for(var u=0,d=0;u<i;++u)d+=e[u][r][1]||0;n[r][1]+=n[r][0]=-d/2}jl(e,t)}}function tL(e,t){if(!(!((u=e.length)>0)||!((l=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,l,u;n<l;++n){for(var d=0,h=0,m=0;d<u;++d){for(var p=e[t[d]],g=p[n][1]||0,x=p[n-1][1]||0,b=(g-x)/2,j=0;j<d;++j){var N=e[t[j]],_=N[n][1]||0,E=N[n-1][1]||0;b+=_-E}h+=g,m+=b*g}i[n-1][1]+=i[n-1][0]=r,h&&(r-=m/h)}i[n-1][1]+=i[n-1][0]=r,jl(e,t)}}var y0={},v0={},z_;function rL(){return z_||(z_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(v0)),v0}var x0={},U_;function HO(){return U_||(U_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(x0)),x0}var b0={},$_;function Sx(){return $_||($_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(b0)),b0}var w0={},j0={},q_;function nL(){return q_||(q_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(j0)),j0}var B_;function Ex(){return B_||(B_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nL(),r=Sx();function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const l=[],u=i.length;if(u===0)return l;let d=0,h="",m="",p=!1;for(i.charCodeAt(0)===46&&(l.push(""),d++);d<u;){const g=i[d];m?g==="\\"&&d+1<u?(d++,h+=i[d]):g===m?m="":h+=g:p?g==='"'||g==="'"?m=g:g==="]"?(p=!1,l.push(h),h=""):h+=g:g==="["?(p=!0,h&&(l.push(h),h="")):g==="."?h&&(l.push(h),h=""):h+=g,d++}return h&&l.push(h),l}e.toPath=n})(w0)),w0}var G_;function Ax(){return G_||(G_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rL(),r=HO(),n=Sx(),i=Ex();function l(d,h,m){if(d==null)return m;switch(typeof h){case"string":{if(t.isUnsafeProperty(h))return m;const p=d[h];return p===void 0?r.isDeepKey(h)?l(d,i.toPath(h),m):m:p}case"number":case"symbol":{typeof h=="number"&&(h=n.toKey(h));const p=d[h];return p===void 0?m:p}default:{if(Array.isArray(h))return u(d,h,m);if(Object.is(h==null?void 0:h.valueOf(),-0)?h="-0":h=String(h),t.isUnsafeProperty(h))return m;const p=d[h];return p===void 0?m:p}}}function u(d,h,m){if(h.length===0)return m;let p=d;for(let g=0;g<h.length;g++){if(p==null||t.isUnsafeProperty(h[g]))return m;p=p[h[g]]}return p===void 0?m:p}e.get=l})(y0)),y0}var N0,H_;function aL(){return H_||(H_=1,N0=Ax().get),N0}var iL=aL();const ho=Ka(iL);var Ur=e=>e===0?0:e>0?1:-1,Da=e=>typeof e=="number"&&e!=+e,wi=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,$e=e=>(typeof e=="number"||e instanceof Number)&&!Da(e),Ga=e=>$e(e)||typeof e=="string",sL=0,lu=e=>{var t=++sL;return"".concat(e||"").concat(t)},on=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!$e(t)&&typeof t!="string")return n;var l;if(wi(t)){if(r==null)return n;var u=t.indexOf("%");l=r*parseFloat(t.slice(0,u))/100}else l=+t;return Da(l)&&(l=n),i&&r!=null&&l>r&&(l=r),l},FO=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Or(e,t,r){return $e(e)&&$e(t)?e+r*(t-e):t}function oL(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):ho(n,t))===r)}var $r=e=>e===null||typeof e>"u",Au=e=>$r(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function lL(e){return e!=null}function Ou(){}var cL=["type","size","sizeType"];function gv(){return gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gv.apply(null,arguments)}function F_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function V_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F_(Object(r),!0).forEach(function(n){uL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uL(e,t,r){return(t=dL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dL(e){var t=fL(e,"string");return typeof t=="symbol"?t:t+""}function fL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hL(e,t){if(e==null)return{};var r,n,i=mL(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function mL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var VO={symbolCircle:_x,symbolCross:O6,symbolDiamond:T6,symbolSquare:k6,symbolStar:M6,symbolTriangle:I6,symbolWye:z6},pL=Math.PI/180,gL=e=>{var t="symbol".concat(Au(e));return VO[t]||_x},yL=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*pL;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},vL=(e,t)=>{VO["symbol".concat(Au(e))]=t},Ox=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=hL(e,cL),l=V_(V_({},i),{},{type:t,size:r,sizeType:n}),u="circle";typeof t=="string"&&(u=t);var d=()=>{var x=gL(u),b=U6().type(x).size(yL(r,n,u)),j=b();if(j!==null)return j},{className:h,cx:m,cy:p}=l,g=ca(l);return $e(m)&&$e(p)&&$e(r)?w.createElement("path",gv({},g,{className:Ot("recharts-symbols",h),transform:"translate(".concat(m,", ").concat(p,")"),d:d()})):null};Ox.registerSymbol=vL;var KO=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,xL=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(w.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{xx(i)&&(n[i]=(l=>r[i](r,l)))}),n},bL=(e,t,r)=>n=>(e(t,r,n),null),Cu=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var l=e[i];xx(i)&&typeof l=="function"&&(n||(n={}),n[i]=bL(l,t,r))}),n};function K_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K_(Object(r),!0).forEach(function(n){jL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jL(e,t,r){return(t=NL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NL(e){var t=_L(e,"string");return typeof t=="symbol"?t:t+""}function _L(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qr(e,t){var r=wL({},e),n=t,i=Object.keys(t),l=i.reduce((u,d)=>(u[d]===void 0&&n[d]!==void 0&&(u[d]=n[d]),u),r);return l}function Jf(){return Jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jf.apply(null,arguments)}function Y_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function SL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y_(Object(r),!0).forEach(function(n){EL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EL(e,t,r){return(t=AL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AL(e){var t=OL(e,"string");return typeof t=="symbol"?t:t+""}function OL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ia=32,CL={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function TL(e){var{data:t,iconType:r,inactiveColor:n}=e,i=ia/2,l=ia/6,u=ia/3,d=t.inactive?n:t.color,h=r??t.type;if(h==="none")return null;if(h==="plainline"){var m;return w.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:(m=t.payload)===null||m===void 0?void 0:m.strokeDasharray,x1:0,y1:i,x2:ia,y2:i,className:"recharts-legend-icon"})}if(h==="line")return w.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(u,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*u,",").concat(i,`
            H`).concat(ia,"M").concat(2*u,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(u,",").concat(i),className:"recharts-legend-icon"});if(h==="rect")return w.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(ia/8,"h").concat(ia,"v").concat(ia*3/4,"h").concat(-ia,"z"),className:"recharts-legend-icon"});if(w.isValidElement(t.legendIcon)){var p=SL({},t);return delete p.legendIcon,w.cloneElement(t.legendIcon,p)}return w.createElement(Ox,{fill:d,cx:i,cy:i,size:ia,sizeType:"diameter",type:h})}function kL(e){var{payload:t,iconSize:r,layout:n,formatter:i,inactiveColor:l,iconType:u}=e,d={x:0,y:0,width:ia,height:ia},h={display:n==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((p,g)=>{var x=p.formatter||i,b=Ot({"recharts-legend-item":!0,["legend-item-".concat(g)]:!0,inactive:p.inactive});if(p.type==="none")return null;var j=p.inactive?l:p.color,N=x?x(p.value,p,g):p.value;return w.createElement("li",Jf({className:b,style:h,key:"legend-item-".concat(g)},Cu(e,p,g)),w.createElement(bx,{width:r,height:r,viewBox:d,style:m,"aria-label":"".concat(N," legend icon")},w.createElement(TL,{data:p,iconType:u,inactiveColor:l})),w.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},N))})}var DL=e=>{var t=qr(e,CL),{payload:r,layout:n,align:i}=t;if(!r||!r.length)return null;var l={padding:0,margin:0,textAlign:n==="horizontal"?i:"left"};return w.createElement("ul",{className:"recharts-default-legend",style:l},w.createElement(kL,Jf({},t,{payload:r})))},_0={},S0={},W_;function RL(){return W_||(W_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let l=0;l<r.length;l++){const u=r[l],d=n(u);i.has(d)||i.set(d,u)}return Array.from(i.values())}e.uniqBy=t})(S0)),S0}var E0={},X_;function YO(){return X_||(X_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(E0)),E0}var A0={},O0={},C0={},Z_;function PL(){return Z_||(Z_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(C0)),C0}var Q_;function Cx(){return Q_||(Q_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PL();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(O0)),O0}var T0={},J_;function ML(){return J_||(J_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(T0)),T0}var eS;function IL(){return eS||(eS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cx(),r=ML();function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(A0)),A0}var k0={},D0={},tS;function LL(){return tS||(tS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ax();function r(n){return function(i){return t.get(i,n)}}e.property=r})(D0)),D0}var R0={},P0={},M0={},I0={},rS;function WO(){return rS||(rS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(I0)),I0}var L0={},nS;function XO(){return nS||(nS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(L0)),L0}var z0={},aS;function ZO(){return aS||(aS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(z0)),z0}var iS;function zL(){return iS||(iS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WO(),r=XO(),n=ZO();function i(p,g,x){return typeof x!="function"?i(p,g,()=>{}):l(p,g,function b(j,N,_,E,k,A){const I=x(j,N,_,E,k,A);return I!==void 0?!!I:l(j,N,b,A)},new Map)}function l(p,g,x,b){if(g===p)return!0;switch(typeof g){case"object":return u(p,g,x,b);case"function":return Object.keys(g).length>0?l(p,{...g},x,b):n.eq(p,g);default:return t.isObject(p)?typeof g=="string"?g==="":!0:n.eq(p,g)}}function u(p,g,x,b){if(g==null)return!0;if(Array.isArray(g))return h(p,g,x,b);if(g instanceof Map)return d(p,g,x,b);if(g instanceof Set)return m(p,g,x,b);const j=Object.keys(g);if(p==null)return j.length===0;if(j.length===0)return!0;if(b!=null&&b.has(g))return b.get(g)===p;b==null||b.set(g,p);try{for(let N=0;N<j.length;N++){const _=j[N];if(!r.isPrimitive(p)&&!(_ in p)||g[_]===void 0&&p[_]!==void 0||g[_]===null&&p[_]!==null||!x(p[_],g[_],_,p,g,b))return!1}return!0}finally{b==null||b.delete(g)}}function d(p,g,x,b){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[j,N]of g.entries()){const _=p.get(j);if(x(_,N,j,p,g,b)===!1)return!1}return!0}function h(p,g,x,b){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const j=new Set;for(let N=0;N<g.length;N++){const _=g[N];let E=!1;for(let k=0;k<p.length;k++){if(j.has(k))continue;const A=p[k];let I=!1;if(x(A,_,N,p,g,b)&&(I=!0),I){j.add(k),E=!0;break}}if(!E)return!1}return!0}function m(p,g,x,b){return g.size===0?!0:p instanceof Set?h([...p],[...g],x,b):!1}e.isMatchWith=i,e.isSetMatch=m})(M0)),M0}var sS;function QO(){return sS||(sS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zL();function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r})(P0)),P0}var U0={},$0={},q0={},oS;function UL(){return oS||(oS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(q0)),q0}var B0={},lS;function JO(){return lS||(lS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(B0)),B0}var G0={},cS;function eC(){return cS||(cS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",l="[object Arguments]",u="[object Symbol]",d="[object Date]",h="[object Map]",m="[object Set]",p="[object Array]",g="[object Function]",x="[object ArrayBuffer]",b="[object Object]",j="[object Error]",N="[object DataView]",_="[object Uint8Array]",E="[object Uint8ClampedArray]",k="[object Uint16Array]",A="[object Uint32Array]",I="[object BigUint64Array]",R="[object Int8Array]",C="[object Int16Array]",P="[object Int32Array]",Y="[object BigInt64Array]",oe="[object Float32Array]",H="[object Float64Array]";e.argumentsTag=l,e.arrayBufferTag=x,e.arrayTag=p,e.bigInt64ArrayTag=Y,e.bigUint64ArrayTag=I,e.booleanTag=i,e.dataViewTag=N,e.dateTag=d,e.errorTag=j,e.float32ArrayTag=oe,e.float64ArrayTag=H,e.functionTag=g,e.int16ArrayTag=C,e.int32ArrayTag=P,e.int8ArrayTag=R,e.mapTag=h,e.numberTag=n,e.objectTag=b,e.regexpTag=t,e.setTag=m,e.stringTag=r,e.symbolTag=u,e.uint16ArrayTag=k,e.uint32ArrayTag=A,e.uint8ArrayTag=_,e.uint8ClampedArrayTag=E})(G0)),G0}var H0={},uS;function $L(){return uS||(uS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(H0)),H0}var dS;function tC(){return dS||(dS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UL(),r=JO(),n=eC(),i=XO(),l=$L();function u(p,g){return d(p,void 0,p,new Map,g)}function d(p,g,x,b=new Map,j=void 0){const N=j==null?void 0:j(p,g,x,b);if(N!==void 0)return N;if(i.isPrimitive(p))return p;if(b.has(p))return b.get(p);if(Array.isArray(p)){const _=new Array(p.length);b.set(p,_);for(let E=0;E<p.length;E++)_[E]=d(p[E],E,x,b,j);return Object.hasOwn(p,"index")&&(_.index=p.index),Object.hasOwn(p,"input")&&(_.input=p.input),_}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const _=new RegExp(p.source,p.flags);return _.lastIndex=p.lastIndex,_}if(p instanceof Map){const _=new Map;b.set(p,_);for(const[E,k]of p)_.set(E,d(k,E,x,b,j));return _}if(p instanceof Set){const _=new Set;b.set(p,_);for(const E of p)_.add(d(E,void 0,x,b,j));return _}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(l.isTypedArray(p)){const _=new(Object.getPrototypeOf(p)).constructor(p.length);b.set(p,_);for(let E=0;E<p.length;E++)_[E]=d(p[E],E,x,b,j);return _}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const _=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return b.set(p,_),h(_,p,x,b,j),_}if(typeof File<"u"&&p instanceof File){const _=new File([p],p.name,{type:p.type});return b.set(p,_),h(_,p,x,b,j),_}if(typeof Blob<"u"&&p instanceof Blob){const _=new Blob([p],{type:p.type});return b.set(p,_),h(_,p,x,b,j),_}if(p instanceof Error){const _=new p.constructor;return b.set(p,_),_.message=p.message,_.name=p.name,_.stack=p.stack,_.cause=p.cause,h(_,p,x,b,j),_}if(p instanceof Boolean){const _=new Boolean(p.valueOf());return b.set(p,_),h(_,p,x,b,j),_}if(p instanceof Number){const _=new Number(p.valueOf());return b.set(p,_),h(_,p,x,b,j),_}if(p instanceof String){const _=new String(p.valueOf());return b.set(p,_),h(_,p,x,b,j),_}if(typeof p=="object"&&m(p)){const _=Object.create(Object.getPrototypeOf(p));return b.set(p,_),h(_,p,x,b,j),_}return p}function h(p,g,x=p,b,j){const N=[...Object.keys(g),...t.getSymbols(g)];for(let _=0;_<N.length;_++){const E=N[_],k=Object.getOwnPropertyDescriptor(p,E);(k==null||k.writable)&&(p[E]=d(g[E],E,x,b,j))}}function m(p){switch(r.getTag(p)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=u,e.cloneDeepWithImpl=d,e.copyProperties=h})($0)),$0}var fS;function qL(){return fS||(fS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tC();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(U0)),U0}var hS;function BL(){return hS||(hS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QO(),r=qL();function n(i){return i=r.cloneDeep(i),l=>t.isMatch(l,i)}e.matches=n})(R0)),R0}var F0={},V0={},K0={},mS;function GL(){return mS||(mS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tC(),r=eC();function n(i,l){return t.cloneDeepWith(i,(u,d,h,m)=>{const p=l==null?void 0:l(u,d,h,m);if(p!==void 0)return p;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const g=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(g,i),g}case r.argumentsTag:{const g={};return t.copyProperties(g,i),g.length=i.length,g[Symbol.iterator]=i[Symbol.iterator],g}default:return}})}e.cloneDeepWith=n})(K0)),K0}var pS;function HL(){return pS||(pS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GL();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(V0)),V0}var Y0={},W0={},gS;function rC(){return gS||(gS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(W0)),W0}var X0={},yS;function FL(){return yS||(yS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JO();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(X0)),X0}var vS;function VL(){return vS||(vS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HO(),r=rC(),n=FL(),i=Ex();function l(u,d){let h;if(Array.isArray(d)?h=d:typeof d=="string"&&t.isDeepKey(d)&&(u==null?void 0:u[d])==null?h=i.toPath(d):h=[d],h.length===0)return!1;let m=u;for(let p=0;p<h.length;p++){const g=h[p];if((m==null||!Object.hasOwn(m,g))&&!((Array.isArray(m)||n.isArguments(m))&&r.isIndex(g)&&g<m.length))return!1;m=m[g]}return!0}e.has=l})(Y0)),Y0}var xS;function KL(){return xS||(xS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QO(),r=Sx(),n=HL(),i=Ax(),l=VL();function u(d,h){switch(typeof d){case"object":{Object.is(d==null?void 0:d.valueOf(),-0)&&(d="-0");break}case"number":{d=r.toKey(d);break}}return h=n.cloneDeep(h),function(m){const p=i.get(m,d);return p===void 0?l.has(m,d):h===void 0?p===void 0:t.isMatch(p,h)}}e.matchesProperty=u})(F0)),F0}var bS;function YL(){return bS||(bS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YO(),r=LL(),n=BL(),i=KL();function l(u){if(u==null)return t.identity;switch(typeof u){case"function":return u;case"object":return Array.isArray(u)&&u.length===2?i.matchesProperty(u[0],u[1]):n.matches(u);case"string":case"symbol":case"number":return r.property(u)}}e.iteratee=l})(k0)),k0}var wS;function WL(){return wS||(wS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RL(),r=YO(),n=IL(),i=YL();function l(u,d=r.identity){return n.isArrayLikeObject(u)?t.uniqBy(Array.from(u),i.iteratee(d)):[]}e.uniqBy=l})(_0)),_0}var Z0,jS;function XL(){return jS||(jS=1,Z0=WL().uniqBy),Z0}var ZL=XL();const NS=Ka(ZL);function nC(e,t,r){return t===!0?NS(e,r):typeof t=="function"?NS(e,t):e}var Q0={exports:{}},J0={},ey={exports:{}},ty={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _S;function QL(){if(_S)return ty;_S=1;var e=Dl();function t(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,l=e.useLayoutEffect,u=e.useDebugValue;function d(g,x){var b=x(),j=n({inst:{value:b,getSnapshot:x}}),N=j[0].inst,_=j[1];return l(function(){N.value=b,N.getSnapshot=x,h(N)&&_({inst:N})},[g,b,x]),i(function(){return h(N)&&_({inst:N}),g(function(){h(N)&&_({inst:N})})},[g]),u(b),b}function h(g){var x=g.getSnapshot;g=g.value;try{var b=x();return!r(g,b)}catch{return!0}}function m(g,x){return x()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return ty.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,ty}var SS;function JL(){return SS||(SS=1,ey.exports=QL()),ey.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ES;function ez(){if(ES)return J0;ES=1;var e=Dl(),t=JL();function r(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,l=e.useRef,u=e.useEffect,d=e.useMemo,h=e.useDebugValue;return J0.useSyncExternalStoreWithSelector=function(m,p,g,x,b){var j=l(null);if(j.current===null){var N={hasValue:!1,value:null};j.current=N}else N=j.current;j=d(function(){function E(C){if(!k){if(k=!0,A=C,C=x(C),b!==void 0&&N.hasValue){var P=N.value;if(b(P,C))return I=P}return I=C}if(P=I,n(A,C))return P;var Y=x(C);return b!==void 0&&b(P,Y)?(A=C,P):(A=C,I=Y)}var k=!1,A,I,R=g===void 0?null:g;return[function(){return E(p())},R===null?void 0:function(){return E(R())}]},[p,g,x,b]);var _=i(m,j[0],j[1]);return u(function(){N.hasValue=!0,N.value=_},[_]),h(_),_},J0}var AS;function tz(){return AS||(AS=1,Q0.exports=ez()),Q0.exports}var rz=tz(),Tx=w.createContext(null),nz=e=>e,Bt=()=>{var e=w.useContext(Tx);return e?e.store.dispatch:nz},zf=()=>{},az=()=>zf,iz=(e,t)=>e===t;function Ue(e){var t=w.useContext(Tx);return rz.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:az,t?t.store.getState:zf,t?t.store.getState:zf,t?e:zf,iz)}function sz(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function oz(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function lz(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var OS=e=>Array.isArray(e)?e:[e];function cz(e){const t=Array.isArray(e[0])?e[0]:e;return lz(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function uz(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var dz=class{constructor(e){this.value=e}deref(){return this.value}},fz=typeof WeakRef<"u"?WeakRef:dz,hz=0,CS=1;function wf(){return{s:hz,v:void 0,o:null,p:null}}function aC(e,t={}){let r=wf();const{resultEqualityCheck:n}=t;let i,l=0;function u(){var g;let d=r;const{length:h}=arguments;for(let x=0,b=h;x<b;x++){const j=arguments[x];if(typeof j=="function"||typeof j=="object"&&j!==null){let N=d.o;N===null&&(d.o=N=new WeakMap);const _=N.get(j);_===void 0?(d=wf(),N.set(j,d)):d=_}else{let N=d.p;N===null&&(d.p=N=new Map);const _=N.get(j);_===void 0?(d=wf(),N.set(j,d)):d=_}}const m=d;let p;if(d.s===CS)p=d.v;else if(p=e.apply(null,arguments),l++,n){const x=((g=i==null?void 0:i.deref)==null?void 0:g.call(i))??i;x!=null&&n(x,p)&&(p=x,l!==0&&l--),i=typeof p=="object"&&p!==null||typeof p=="function"?new fz(p):p}return m.s=CS,m.v=p,p}return u.clearCache=()=>{r=wf(),u.resetResultsCount()},u.resultsCount=()=>l,u.resetResultsCount=()=>{l=0},u}function mz(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let l=0,u=0,d,h={},m=i.pop();typeof m=="object"&&(h=m,m=i.pop()),sz(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const p={...r,...h},{memoize:g,memoizeOptions:x=[],argsMemoize:b=aC,argsMemoizeOptions:j=[]}=p,N=OS(x),_=OS(j),E=cz(i),k=g(function(){return l++,m.apply(null,arguments)},...N),A=b(function(){u++;const R=uz(E,arguments);return d=k.apply(null,R),d},..._);return Object.assign(A,{resultFunc:m,memoizedResultFunc:k,dependencies:E,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>d,recomputations:()=>l,resetRecomputations:()=>{l=0},memoize:g,argsMemoize:b})};return Object.assign(n,{withTypes:()=>n}),n}var ae=mz(aC),pz=Object.assign((e,t=ae)=>{oz(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(l=>e[l]);return t(n,(...l)=>l.reduce((u,d,h)=>(u[r[h]]=d,u),{}))},{withTypes:()=>pz}),ry={},ny={},ay={},TS;function gz(){return TS||(TS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,l)=>{if(n!==i){const u=t(n),d=t(i);if(u===d&&u===0){if(n<i)return l==="desc"?1:-1;if(n>i)return l==="desc"?-1:1}return l==="desc"?d-u:u-d}return 0};e.compareValues=r})(ay)),ay}var iy={},sy={},kS;function iC(){return kS||(kS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(sy)),sy}var DS;function yz(){return DS||(DS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iC(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(l,u){return Array.isArray(l)?!1:typeof l=="number"||typeof l=="boolean"||l==null||t.isSymbol(l)?!0:typeof l=="string"&&(n.test(l)||!r.test(l))||u!=null&&Object.hasOwn(u,l)}e.isKey=i})(iy)),iy}var RS;function vz(){return RS||(RS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gz(),r=yz(),n=Ex();function i(l,u,d,h){if(l==null)return[];d=h?void 0:d,Array.isArray(l)||(l=Object.values(l)),Array.isArray(u)||(u=u==null?[null]:[u]),u.length===0&&(u=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(b=>String(b));const m=(b,j)=>{let N=b;for(let _=0;_<j.length&&N!=null;++_)N=N[j[_]];return N},p=(b,j)=>j==null||b==null?j:typeof b=="object"&&"key"in b?Object.hasOwn(j,b.key)?j[b.key]:m(j,b.path):typeof b=="function"?b(j):Array.isArray(b)?m(j,b):typeof j=="object"?j[b]:j,g=u.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||r.isKey(b)?b:{key:b,path:n.toPath(b)}));return l.map(b=>({original:b,criteria:g.map(j=>p(j,b))})).slice().sort((b,j)=>{for(let N=0;N<g.length;N++){const _=t.compareValues(b.criteria[N],j.criteria[N],d[N]);if(_!==0)return _}return 0}).map(b=>b.original)}e.orderBy=i})(ny)),ny}var oy={},PS;function xz(){return PS||(PS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],l=Math.floor(n),u=(d,h)=>{for(let m=0;m<d.length;m++){const p=d[m];Array.isArray(p)&&h<l?u(p,h+1):i.push(p)}};return u(r,0),i}e.flatten=t})(oy)),oy}var ly={},MS;function sC(){return MS||(MS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rC(),r=Cx(),n=WO(),i=ZO();function l(u,d,h){return n.isObject(h)&&(typeof d=="number"&&r.isArrayLike(h)&&t.isIndex(d)&&d<h.length||typeof d=="string"&&d in h)?i.eq(h[d],u):!1}e.isIterateeCall=l})(ly)),ly}var IS;function bz(){return IS||(IS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vz(),r=xz(),n=sC();function i(l,...u){const d=u.length;return d>1&&n.isIterateeCall(l,u[0],u[1])?u=[]:d>2&&n.isIterateeCall(u[0],u[1],u[2])&&(u=[u[0]]),t.orderBy(l,r.flatten(u),["asc"])}e.sortBy=i})(ry)),ry}var cy,LS;function wz(){return LS||(LS=1,cy=bz().sortBy),cy}var jz=wz();const Qh=Ka(jz);var oC=e=>e.legend.settings,Nz=e=>e.legend.size,_z=e=>e.legend.payload,Sz=ae([_z,oC],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Qh(n,r):n});function Ez(){return Ue(Sz)}var jf=1;function lC(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=w.useState({height:0,left:0,top:0,width:0}),n=w.useCallback(i=>{if(i!=null){var l=i.getBoundingClientRect(),u={height:l.height,left:l.left,top:l.top,width:l.width};(Math.abs(u.height-t.height)>jf||Math.abs(u.left-t.left)>jf||Math.abs(u.top-t.top)>jf||Math.abs(u.width-t.width)>jf)&&r({height:u.height,left:u.left,top:u.top,width:u.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Xr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Az=typeof Symbol=="function"&&Symbol.observable||"@@observable",zS=Az,uy=()=>Math.random().toString(36).substring(7).split("").join("."),Oz={INIT:`@@redux/INIT${uy()}`,REPLACE:`@@redux/REPLACE${uy()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${uy()}`},eh=Oz;function kx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function cC(e,t,r){if(typeof e!="function")throw new Error(Xr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Xr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Xr(1));return r(cC)(e,t)}let n=e,i=t,l=new Map,u=l,d=0,h=!1;function m(){u===l&&(u=new Map,l.forEach((_,E)=>{u.set(E,_)}))}function p(){if(h)throw new Error(Xr(3));return i}function g(_){if(typeof _!="function")throw new Error(Xr(4));if(h)throw new Error(Xr(5));let E=!0;m();const k=d++;return u.set(k,_),function(){if(E){if(h)throw new Error(Xr(6));E=!1,m(),u.delete(k),l=null}}}function x(_){if(!kx(_))throw new Error(Xr(7));if(typeof _.type>"u")throw new Error(Xr(8));if(typeof _.type!="string")throw new Error(Xr(17));if(h)throw new Error(Xr(9));try{h=!0,i=n(i,_)}finally{h=!1}return(l=u).forEach(k=>{k()}),_}function b(_){if(typeof _!="function")throw new Error(Xr(10));n=_,x({type:eh.REPLACE})}function j(){const _=g;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(Xr(11));function k(){const I=E;I.next&&I.next(p())}return k(),{unsubscribe:_(k)}},[zS](){return this}}}return x({type:eh.INIT}),{dispatch:x,subscribe:g,getState:p,replaceReducer:b,[zS]:j}}function Cz(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:eh.INIT})>"u")throw new Error(Xr(12));if(typeof r(void 0,{type:eh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Xr(13))})}function uC(e){const t=Object.keys(e),r={};for(let l=0;l<t.length;l++){const u=t[l];typeof e[u]=="function"&&(r[u]=e[u])}const n=Object.keys(r);let i;try{Cz(r)}catch(l){i=l}return function(u={},d){if(i)throw i;let h=!1;const m={};for(let p=0;p<n.length;p++){const g=n[p],x=r[g],b=u[g],j=x(b,d);if(typeof j>"u")throw d&&d.type,new Error(Xr(14));m[g]=j,h=h||j!==b}return h=h||n.length!==Object.keys(u).length,h?m:u}}function th(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Tz(...e){return t=>(r,n)=>{const i=t(r,n);let l=()=>{throw new Error(Xr(15))};const u={getState:i.getState,dispatch:(h,...m)=>l(h,...m)},d=e.map(h=>h(u));return l=th(...d)(i.dispatch),{...i,dispatch:l}}}function dC(e){return kx(e)&&"type"in e&&typeof e.type=="string"}var fC=Symbol.for("immer-nothing"),US=Symbol.for("immer-draftable"),mn=Symbol.for("immer-state");function Aa(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Bn=Object,Nl=Bn.getPrototypeOf,rh="constructor",Jh="prototype",yv="configurable",nh="enumerable",Uf="writable",cu="value",ji=e=>!!e&&!!e[mn];function Ha(e){var t;return e?hC(e)||em(e)||!!e[US]||!!((t=e[rh])!=null&&t[US])||tm(e)||rm(e):!1}var kz=Bn[Jh][rh].toString(),$S=new WeakMap;function hC(e){if(!e||!Dx(e))return!1;const t=Nl(e);if(t===null||t===Bn[Jh])return!0;const r=Bn.hasOwnProperty.call(t,rh)&&t[rh];if(r===Object)return!0;if(!pl(r))return!1;let n=$S.get(r);return n===void 0&&(n=Function.toString.call(r),$S.set(r,n)),n===kz}function Tu(e,t,r=!0){ku(e)===0?(r?Reflect.ownKeys(e):Bn.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function ku(e){const t=e[mn];return t?t.type_:em(e)?1:tm(e)?2:rm(e)?3:0}var qS=(e,t,r=ku(e))=>r===2?e.has(t):Bn[Jh].hasOwnProperty.call(e,t),vv=(e,t,r=ku(e))=>r===2?e.get(t):e[t],ah=(e,t,r,n=ku(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function Dz(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var em=Array.isArray,tm=e=>e instanceof Map,rm=e=>e instanceof Set,Dx=e=>typeof e=="object",pl=e=>typeof e=="function",dy=e=>typeof e=="boolean",hi=e=>e.copy_||e.base_,Rx=e=>e.modified_?e.copy_:e.base_;function xv(e,t){if(tm(e))return new Map(e);if(rm(e))return new Set(e);if(em(e))return Array[Jh].slice.call(e);const r=hC(e);if(t===!0||t==="class_only"&&!r){const n=Bn.getOwnPropertyDescriptors(e);delete n[mn];let i=Reflect.ownKeys(n);for(let l=0;l<i.length;l++){const u=i[l],d=n[u];d[Uf]===!1&&(d[Uf]=!0,d[yv]=!0),(d.get||d.set)&&(n[u]={[yv]:!0,[Uf]:!0,[nh]:d[nh],[cu]:e[u]})}return Bn.create(Nl(e),n)}else{const n=Nl(e);if(n!==null&&r)return{...e};const i=Bn.create(n);return Bn.assign(i,e)}}function Px(e,t=!1){return nm(e)||ji(e)||(ku(e)>1&&Bn.defineProperties(e,{set:Nf,add:Nf,clear:Nf,delete:Nf}),Bn.freeze(e),t&&Tu(e,(r,n)=>{Px(n,!0)},!1)),e}function Rz(){Aa(2)}var Nf={[cu]:Rz};function nm(e){return e===null||!Dx(e)?!0:Bn.isFrozen(e)}var ih="MapSet",bv="Patches",mC={};function _l(e){const t=mC[e];return t||Aa(0,e),t}var Pz=e=>!!mC[e],uu,pC=()=>uu,Mz=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Pz(ih)?_l(ih):void 0});function BS(e,t){t&&(e.patchPlugin_=_l(bv),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function wv(e){jv(e),e.drafts_.forEach(Iz),e.drafts_=null}function jv(e){e===uu&&(uu=e.parent_)}var GS=e=>uu=Mz(uu,e);function Iz(e){const t=e[mn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function HS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[mn].modified_&&(wv(t),Aa(4)),Ha(e)&&(e=FS(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(r[mn].base_,e,t)}else e=FS(t,r);return Lz(t,e,!0),wv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==fC?e:void 0}function FS(e,t){if(nm(t))return t;const r=t[mn];if(!r)return Mx(t,e.handledSet_,e);if(!am(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);vC(r,e)}return r.copy_}function Lz(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Px(t,r)}function gC(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var am=(e,t)=>e.scope_===t,zz=[];function yC(e,t,r,n){const i=hi(e),l=e.type_;if(n!==void 0&&vv(i,n,l)===t){ah(i,n,r,l);return}if(!e.draftLocations_){const d=e.draftLocations_=new Map;Tu(i,(h,m)=>{if(ji(m)){const p=d.get(m)||[];p.push(h),d.set(m,p)}})}const u=e.draftLocations_.get(t)??zz;for(const d of u)ah(i,d,r,l)}function Uz(e,t,r){e.callbacks_.push(function(i){var d;const l=t;if(!l||!am(l,i))return;(d=i.mapSetPlugin_)==null||d.fixSetContents(l);const u=Rx(l);yC(e,l.draft_??l,u,r),vC(l,i)})}function vC(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:i}=t;if(i){const l=i.getPath(e);l&&i.generatePatches_(e,l,t)}gC(e)}}function $z(e,t,r){const{scope_:n}=e;if(ji(r)){const i=r[mn];am(i,n)&&i.callbacks_.push(function(){$f(e);const u=Rx(i);yC(e,r,u,t)})}else Ha(r)&&e.callbacks_.push(function(){const l=hi(e);vv(l,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Mx(vv(e.copy_,t,e.type_),n.handledSet_,n)})}function Mx(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||ji(e)||t.has(e)||!Ha(e)||nm(e)||(t.add(e),Tu(e,(n,i)=>{if(ji(i)){const l=i[mn];if(am(l,r)){const u=Rx(l);ah(e,n,u,e.type_),gC(l)}}else Ha(i)&&Mx(i,t,r)})),e}function qz(e,t){const r=em(e),n={type_:r?1:0,scope_:t?t.scope_:pC(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,l=Ix;r&&(i=[n],l=du);const{revoke:u,proxy:d}=Proxy.revocable(i,l);return n.draft_=d,n.revoke_=u,[d,n]}var Ix={get(e,t){if(t===mn)return e;const r=hi(e);if(!qS(r,t,e.type_))return Bz(e,r,t);const n=r[t];if(e.finalized_||!Ha(n))return n;if(n===fy(e.base_,t)){$f(e);const i=e.type_===1?+t:t,l=_v(e.scope_,n,e,i);return e.copy_[i]=l}return n},has(e,t){return t in hi(e)},ownKeys(e){return Reflect.ownKeys(hi(e))},set(e,t,r){const n=xC(hi(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=fy(hi(e),t),l=i==null?void 0:i[mn];if(l&&l.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(Dz(r,i)&&(r!==void 0||qS(e.base_,t,e.type_)))return!0;$f(e),Nv(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),$z(e,t,r)),!0},deleteProperty(e,t){return $f(e),fy(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Nv(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=hi(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[Uf]:!0,[yv]:e.type_!==1||t!=="length",[nh]:n[nh],[cu]:r[t]}},defineProperty(){Aa(11)},getPrototypeOf(e){return Nl(e.base_)},setPrototypeOf(){Aa(12)}},du={};Tu(Ix,(e,t)=>{du[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});du.deleteProperty=function(e,t){return du.set.call(this,e,t,void 0)};du.set=function(e,t,r){return Ix.set.call(this,e[0],t,r,e[0])};function fy(e,t){const r=e[mn];return(r?hi(r):e)[t]}function Bz(e,t,r){var i;const n=xC(t,r);return n?cu in n?n[cu]:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function xC(e,t){if(!(t in e))return;let r=Nl(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Nl(r)}}function Nv(e){e.modified_||(e.modified_=!0,e.parent_&&Nv(e.parent_))}function $f(e){e.copy_||(e.assigned_=new Map,e.copy_=xv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Gz=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(pl(r)&&!pl(n)){const u=n;n=r;const d=this;return function(m=u,...p){return d.produce(m,g=>n.call(this,g,...p))}}pl(n)||Aa(6),i!==void 0&&!pl(i)&&Aa(7);let l;if(Ha(r)){const u=GS(this),d=_v(u,r,void 0);let h=!0;try{l=n(d),h=!1}finally{h?wv(u):jv(u)}return BS(u,i),HS(l,u)}else if(!r||!Dx(r)){if(l=n(r),l===void 0&&(l=r),l===fC&&(l=void 0),this.autoFreeze_&&Px(l,!0),i){const u=[],d=[];_l(bv).generateReplacementPatches_(r,l,{patches_:u,inversePatches_:d}),i(u,d)}return l}else Aa(1,r)},this.produceWithPatches=(r,n)=>{if(pl(r))return(d,...h)=>this.produceWithPatches(d,m=>r(m,...h));let i,l;return[this.produce(r,n,(d,h)=>{i=d,l=h}),i,l]},dy(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),dy(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),dy(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Ha(t)||Aa(8),ji(t)&&(t=Ta(t));const r=GS(this),n=_v(r,t,void 0);return n[mn].isManual_=!0,jv(r),n}finishDraft(t,r){const n=t&&t[mn];(!n||!n.isManual_)&&Aa(9);const{scope_:i}=n;return BS(i,r),HS(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const l=r[n];if(l.path.length===0&&l.op==="replace"){t=l.value;break}}n>-1&&(r=r.slice(n+1));const i=_l(bv).applyPatches_;return ji(t)?i(t,r):this.produce(t,l=>i(l,r))}};function _v(e,t,r,n){const[i,l]=tm(t)?_l(ih).proxyMap_(t,r):rm(t)?_l(ih).proxySet_(t,r):qz(t,r);return((r==null?void 0:r.scope_)??pC()).drafts_.push(i),l.callbacks_=(r==null?void 0:r.callbacks_)??[],l.key_=n,r&&n!==void 0?Uz(r,l,n):l.callbacks_.push(function(h){var p;(p=h.mapSetPlugin_)==null||p.fixSetContents(l);const{patchPlugin_:m}=h;l.modified_&&m&&m.generatePatches_(l,[],h)}),i}function Ta(e){return ji(e)||Aa(10,e),bC(e)}function bC(e){if(!Ha(e)||nm(e))return e;const t=e[mn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=xv(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=xv(e,!0);return Tu(r,(i,l)=>{ah(r,i,bC(l))},n),t&&(t.finalized_=!1),r}var Hz=new Gz,wC=Hz.produce;function jC(e){return({dispatch:r,getState:n})=>i=>l=>typeof l=="function"?l(r,n,e):i(l)}var Fz=jC(),Vz=jC,Kz=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?th:th.apply(null,arguments)};function ua(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(Hn(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>dC(n)&&n.type===e,r}var NC=class Kc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Kc.prototype)}static get[Symbol.species](){return Kc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Kc(...t[0].concat(this)):new Kc(...t.concat(this))}};function VS(e){return Ha(e)?wC(e,()=>{}):e}function _f(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Yz(e){return typeof e=="boolean"}var Wz=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:l=!0}=t??{};let u=new NC;return r&&(Yz(r)?u.push(Fz):u.push(Vz(r.extraArgument))),u},_C="RTK_autoBatch",Wt=()=>e=>({payload:e,meta:{[_C]:!0}}),KS=e=>t=>{setTimeout(t,e)},SC=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,l=!1,u=!1;const d=new Set,h=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:KS(10):e.type==="callback"?e.queueNotification:KS(e.timeout),m=()=>{u=!1,l&&(l=!1,d.forEach(p=>p()))};return Object.assign({},n,{subscribe(p){const g=()=>i&&p(),x=n.subscribe(g);return d.add(p),()=>{x(),d.delete(p)}},dispatch(p){var g;try{return i=!((g=p==null?void 0:p.meta)!=null&&g[_C]),l=!i,l&&(u||(u=!0,h(m))),n.dispatch(p)}finally{i=!0}}})},Xz=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new NC(e);return n&&i.push(SC(typeof n=="object"?n:void 0)),i};function Zz(e){const t=Wz(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:l=void 0,enhancers:u=void 0}=e||{};let d;if(typeof r=="function")d=r;else if(kx(r))d=uC(r);else throw new Error(Hn(1));let h;typeof n=="function"?h=n(t):h=t();let m=th;i&&(m=Kz({trace:!1,...typeof i=="object"&&i}));const p=Tz(...h),g=Xz(p);let x=typeof u=="function"?u(g):g();const b=m(...x);return cC(d,l,b)}function EC(e){const t={},r=[];let n;const i={addCase(l,u){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(Hn(28));if(d in t)throw new Error(Hn(29));return t[d]=u,i},addAsyncThunk(l,u){return u.pending&&(t[l.pending.type]=u.pending),u.rejected&&(t[l.rejected.type]=u.rejected),u.fulfilled&&(t[l.fulfilled.type]=u.fulfilled),u.settled&&r.push({matcher:l.settled,reducer:u.settled}),i},addMatcher(l,u){return r.push({matcher:l,reducer:u}),i},addDefaultCase(l){return n=l,i}};return e(i),[t,r,n]}function Qz(e){return typeof e=="function"}function Jz(e,t){let[r,n,i]=EC(t),l;if(Qz(e))l=()=>VS(e());else{const d=VS(e);l=()=>d}function u(d=l(),h){let m=[r[h.type],...n.filter(({matcher:p})=>p(h)).map(({reducer:p})=>p)];return m.filter(p=>!!p).length===0&&(m=[i]),m.reduce((p,g)=>{if(g)if(ji(p)){const b=g(p,h);return b===void 0?p:b}else{if(Ha(p))return wC(p,x=>g(x,h));{const x=g(p,h);if(x===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}}return p},d)}return u.getInitialState=l,u}var e8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",t8=(e=21)=>{let t="",r=e;for(;r--;)t+=e8[Math.random()*64|0];return t},r8=Symbol.for("rtk-slice-createasyncthunk");function n8(e,t){return`${e}/${t}`}function a8({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[r8];return function(i){const{name:l,reducerPath:u=l}=i;if(!l)throw new Error(Hn(11));const d=(typeof i.reducers=="function"?i.reducers(s8()):i.reducers)||{},h=Object.keys(d),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(I,R){const C=typeof I=="string"?I:I.type;if(!C)throw new Error(Hn(12));if(C in m.sliceCaseReducersByType)throw new Error(Hn(13));return m.sliceCaseReducersByType[C]=R,p},addMatcher(I,R){return m.sliceMatchers.push({matcher:I,reducer:R}),p},exposeAction(I,R){return m.actionCreators[I]=R,p},exposeCaseReducer(I,R){return m.sliceCaseReducersByName[I]=R,p}};h.forEach(I=>{const R=d[I],C={reducerName:I,type:n8(l,I),createNotation:typeof i.reducers=="function"};l8(R)?u8(C,R,p,t):o8(C,R,p)});function g(){const[I={},R=[],C=void 0]=typeof i.extraReducers=="function"?EC(i.extraReducers):[i.extraReducers],P={...I,...m.sliceCaseReducersByType};return Jz(i.initialState,Y=>{for(let oe in P)Y.addCase(oe,P[oe]);for(let oe of m.sliceMatchers)Y.addMatcher(oe.matcher,oe.reducer);for(let oe of R)Y.addMatcher(oe.matcher,oe.reducer);C&&Y.addDefaultCase(C)})}const x=I=>I,b=new Map,j=new WeakMap;let N;function _(I,R){return N||(N=g()),N(I,R)}function E(){return N||(N=g()),N.getInitialState()}function k(I,R=!1){function C(Y){let oe=Y[I];return typeof oe>"u"&&R&&(oe=_f(j,C,E)),oe}function P(Y=x){const oe=_f(b,R,()=>new WeakMap);return _f(oe,Y,()=>{const H={};for(const[$,U]of Object.entries(i.selectors??{}))H[$]=i8(U,Y,()=>_f(j,Y,E),R);return H})}return{reducerPath:I,getSelectors:P,get selectors(){return P(C)},selectSlice:C}}const A={name:l,reducer:_,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:E,...k(u),injectInto(I,{reducerPath:R,...C}={}){const P=R??u;return I.inject({reducerPath:P,reducer:_},C),{...A,...k(P,!0)}}};return A}}function i8(e,t,r,n){function i(l,...u){let d=t(l);return typeof d>"u"&&n&&(d=r()),e(d,...u)}return i.unwrapped=e,i}var An=a8();function s8(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function o8({type:e,reducerName:t,createNotation:r},n,i){let l,u;if("reducer"in n){if(r&&!c8(n))throw new Error(Hn(17));l=n.reducer,u=n.prepare}else l=n;i.addCase(e,l).exposeCaseReducer(t,l).exposeAction(t,u?ua(e,u):ua(e))}function l8(e){return e._reducerDefinitionType==="asyncThunk"}function c8(e){return e._reducerDefinitionType==="reducerWithPrepare"}function u8({type:e,reducerName:t},r,n,i){if(!i)throw new Error(Hn(18));const{payloadCreator:l,fulfilled:u,pending:d,rejected:h,settled:m,options:p}=r,g=i(e,l,p);n.exposeAction(t,g),u&&n.addCase(g.fulfilled,u),d&&n.addCase(g.pending,d),h&&n.addCase(g.rejected,h),m&&n.addMatcher(g.settled,m),n.exposeCaseReducer(t,{fulfilled:u||Sf,pending:d||Sf,rejected:h||Sf,settled:m||Sf})}function Sf(){}var d8="task",AC="listener",OC="completed",Lx="cancelled",f8=`task-${Lx}`,h8=`task-${OC}`,Sv=`${AC}-${Lx}`,m8=`${AC}-${OC}`,im=class{constructor(e){Yg(this,"name","TaskAbortError");Yg(this,"message");this.code=e,this.message=`${d8} ${Lx} (reason: ${e})`}},zx=(e,t)=>{if(typeof e!="function")throw new TypeError(Hn(32))},sh=()=>{},CC=(e,t=sh)=>(e.catch(t),e),TC=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),oo=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},lo=e=>{if(e.aborted){const{reason:t}=e;throw new im(t)}};function kC(e,t){let r=sh;return new Promise((n,i)=>{const l=()=>i(new im(e.reason));if(e.aborted){l();return}r=TC(e,l),t.finally(()=>r()).then(n,i)}).finally(()=>{r=sh})}var p8=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof im?"cancelled":"rejected",error:r}}finally{t==null||t()}},oh=e=>t=>CC(kC(e,t).then(r=>(lo(e),r))),DC=e=>{const t=oh(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:bl}=Object,YS={},sm="listenerMiddleware",g8=(e,t)=>{const r=n=>TC(e,()=>oo(n,e.reason));return(n,i)=>{zx(n);const l=new AbortController;r(l);const u=p8(async()=>{lo(e),lo(l.signal);const d=await n({pause:oh(l.signal),delay:DC(l.signal),signal:l.signal});return lo(l.signal),d},()=>oo(l,h8));return i!=null&&i.autoJoin&&t.push(u.catch(sh)),{result:oh(e)(u),cancel(){oo(l,f8)}}}},y8=(e,t)=>{const r=async(n,i)=>{lo(t);let l=()=>{};const d=[new Promise((h,m)=>{let p=e({predicate:n,effect:(g,x)=>{x.unsubscribe(),h([g,x.getState(),x.getOriginalState()])}});l=()=>{p(),m()}})];i!=null&&d.push(new Promise(h=>setTimeout(h,i,null)));try{const h=await kC(t,Promise.race(d));return lo(t),h}finally{l()}};return(n,i)=>CC(r(n,i))},RC=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:l}=e;if(t)i=ua(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(Hn(21));return zx(l),{predicate:i,type:t,effect:l}},PC=bl(e=>{const{type:t,predicate:r,effect:n}=RC(e);return{id:t8(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Hn(22))}}},{withTypes:()=>PC}),WS=(e,t)=>{const{type:r,effect:n,predicate:i}=RC(t);return Array.from(e.values()).find(l=>(typeof r=="string"?l.type===r:l.predicate===i)&&l.effect===n)},Ev=e=>{e.pending.forEach(t=>{oo(t,Sv)})},v8=(e,t)=>()=>{for(const r of t.keys())Ev(r);e.clear()},XS=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},MC=bl(ua(`${sm}/add`),{withTypes:()=>MC}),x8=ua(`${sm}/removeAll`),IC=bl(ua(`${sm}/remove`),{withTypes:()=>IC}),b8=(...e)=>{console.error(`${sm}/error`,...e)},Du=(e={})=>{const t=new Map,r=new Map,n=b=>{const j=r.get(b)??0;r.set(b,j+1)},i=b=>{const j=r.get(b)??1;j===1?r.delete(b):r.set(b,j-1)},{extra:l,onError:u=b8}=e;zx(u);const d=b=>(b.unsubscribe=()=>t.delete(b.id),t.set(b.id,b),j=>{b.unsubscribe(),j!=null&&j.cancelActive&&Ev(b)}),h=b=>{const j=WS(t,b)??PC(b);return d(j)};bl(h,{withTypes:()=>h});const m=b=>{const j=WS(t,b);return j&&(j.unsubscribe(),b.cancelActive&&Ev(j)),!!j};bl(m,{withTypes:()=>m});const p=async(b,j,N,_)=>{const E=new AbortController,k=y8(h,E.signal),A=[];try{b.pending.add(E),n(b),await Promise.resolve(b.effect(j,bl({},N,{getOriginalState:_,condition:(I,R)=>k(I,R).then(Boolean),take:k,delay:DC(E.signal),pause:oh(E.signal),extra:l,signal:E.signal,fork:g8(E.signal,A),unsubscribe:b.unsubscribe,subscribe:()=>{t.set(b.id,b)},cancelActiveListeners:()=>{b.pending.forEach((I,R,C)=>{I!==E&&(oo(I,Sv),C.delete(I))})},cancel:()=>{oo(E,Sv),b.pending.delete(E)},throwIfCancelled:()=>{lo(E.signal)}})))}catch(I){I instanceof im||XS(u,I,{raisedBy:"effect"})}finally{await Promise.all(A),oo(E,m8),i(b),b.pending.delete(E)}},g=v8(t,r);return{middleware:b=>j=>N=>{if(!dC(N))return j(N);if(MC.match(N))return h(N.payload);if(x8.match(N)){g();return}if(IC.match(N))return m(N.payload);let _=b.getState();const E=()=>{if(_===YS)throw new Error(Hn(23));return _};let k;try{if(k=j(N),t.size>0){const A=b.getState(),I=Array.from(t.values());for(const R of I){let C=!1;try{C=R.predicate(N,A,_)}catch(P){C=!1,XS(u,P,{raisedBy:"predicate"})}C&&p(R,N,b,E)}}}finally{_=YS}return k},startListening:h,stopListening:m,clearListeners:g}};function Hn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var w8={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},LC=An({name:"chartLayout",initialState:w8,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,l;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(l=t.payload.left)!==null&&l!==void 0?l:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:j8,setLayout:N8,setChartSize:_8,setScale:S8}=LC.actions,E8=LC.reducer;function zC(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function ZS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function yl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZS(Object(r),!0).forEach(function(n){A8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A8(e,t,r){return(t=O8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O8(e){var t=C8(e,"string");return typeof t=="symbol"?t:t+""}function C8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xt(e,t,r){return $r(e)||$r(t)?r:Ga(t)?ho(e,t,r):typeof t=="function"?t(e):r}var T8=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:l,verticalAlign:u,layout:d}=t;if((d==="vertical"||d==="horizontal"&&u==="middle")&&l!=="center"&&$e(e[l]))return yl(yl({},e),{},{[l]:e[l]+(n||0)});if((d==="horizontal"||d==="vertical"&&l==="center")&&u!=="middle"&&$e(e[u]))return yl(yl({},e),{},{[u]:e[u]+(i||0)})}return e},bo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",UC=(e,t,r,n)=>{if(n)return e.map(d=>d.coordinate);var i,l,u=e.map(d=>(d.coordinate===t&&(i=!0),d.coordinate===r&&(l=!0),d.coordinate));return i||u.push(t),l||u.push(r),u},$C=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:l,scale:u,realScaleType:d,isCategorical:h,categoricalDomain:m,tickCount:p,ticks:g,niceTicks:x,axisType:b}=e;if(!u)return null;var j=d==="scaleBand"&&u.bandwidth?u.bandwidth()/2:2,N=i==="category"&&u.bandwidth?u.bandwidth()/j:0;if(N=b==="angleAxis"&&l&&l.length>=2?Ur(l[0]-l[1])*2*N:N,g||x){var _=(g||x||[]).map((E,k)=>{var A=n?n.indexOf(E):E;return{coordinate:u(A)+N,value:E,offset:N,index:k}});return _.filter(E=>!Da(E.coordinate))}return h&&m?m.map((E,k)=>({coordinate:u(E)+N,value:E,index:k,offset:N})):u.ticks&&p!=null?u.ticks(p).map((E,k)=>({coordinate:u(E)+N,value:E,offset:N,index:k})):u.domain().map((E,k)=>({coordinate:u(E)+N,value:n?n[E]:E,index:k,offset:N}))},QS=1e-4,k8=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-QS,l=Math.max(n[0],n[1])+QS,u=e(t[0]),d=e(t[r-1]);(u<i||u>l||d<i||d>l)&&e.domain([t[0],t[r-1]])}},D8=(e,t)=>{if(!t||t.length!==2||!$e(t[0])||!$e(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!$e(e[0])||e[0]<r)&&(i[0]=r),(!$e(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},R8=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,l=0,u=0;u<t;++u){var d=Da(e[u][r][1])?e[u][r][0]:e[u][r][1];d>=0?(e[u][r][0]=i,e[u][r][1]=i+d,i=e[u][r][1]):(e[u][r][0]=l,e[u][r][1]=l+d,l=e[u][r][1])}},P8=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,l=0;l<t;++l){var u=Da(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=i,e[l][r][1]=i+u,i=e[l][r][1]):(e[l][r][0]=0,e[l][r][1]=0)}},M8={sign:R8,expand:J6,none:jl,silhouette:eL,wiggle:tL,positive:P8},I8=(e,t,r)=>{var n=M8[r],i=Q6().keys(t).value((l,u)=>Number(Xt(l,u,0))).order(pv).offset(n);return i(e)};function L8(e){return e==null?void 0:String(e)}var JS=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:l,index:u}=e;if(t.type==="category")return r[u]?r[u].coordinate+n:null;var d=Xt(l,t.dataKey,t.scale.domain()[u]);return $r(d)?null:t.scale(d)-i/2+n},z8=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},U8=e=>{var t=e.flat(2).filter($e);return[Math.min(...t),Math.max(...t)]},$8=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],q8=(e,t,r)=>{if(e!=null)return $8(Object.keys(e).reduce((n,i)=>{var l=e[i],{stackedData:u}=l,d=u.reduce((h,m)=>{var p=zC(m,t,r),g=U8(p);return[Math.min(h[0],g[0]),Math.max(h[1],g[1])]},[1/0,-1/0]);return[Math.min(d[0],n[0]),Math.max(d[1],n[1])]},[1/0,-1/0]))},eE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lh=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=Qh(t,p=>p.coordinate),l=1/0,u=1,d=i.length;u<d;u++){var h=i[u],m=i[u-1];l=Math.min((h.coordinate||0)-(m.coordinate||0),l)}return l===1/0?0:l}return r?void 0:0};function rE(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:l}=e;return yl(yl({},t),{},{dataKey:r,payload:n,value:i,name:l})}function om(e,t){if(e)return String(e);if(typeof t=="string")return t}var B8=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},G8=(e,t)=>t==="centric"?e.angle:e.radius,Ci=e=>e.layout.width,Ti=e=>e.layout.height,H8=e=>e.layout.scale,qC=e=>e.layout.margin,lm=ae(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),cm=ae(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),BC="data-recharts-item-index",GC="data-recharts-item-data-key",Ru=60;function nE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ef(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nE(Object(r),!0).forEach(function(n){F8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F8(e,t,r){return(t=V8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V8(e){var t=K8(e,"string");return typeof t=="symbol"?t:t+""}function K8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y8=e=>e.brush.height;function W8(e){var t=cm(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Ru;return r+i}return r},0)}function X8(e){var t=cm(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Ru;return r+i}return r},0)}function Z8(e){var t=lm(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function Q8(e){var t=lm(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Tr=ae([Ci,Ti,qC,Y8,W8,X8,Z8,Q8,oC,Nz],(e,t,r,n,i,l,u,d,h,m)=>{var p={left:(r.left||0)+i,right:(r.right||0)+l},g={top:(r.top||0)+u,bottom:(r.bottom||0)+d},x=Ef(Ef({},g),p),b=x.bottom;x.bottom+=n,x=T8(x,h,m);var j=e-x.left-x.right,N=t-x.top-x.bottom;return Ef(Ef({brushBottom:b},x),{},{width:Math.max(j,0),height:Math.max(N,0)})}),J8=ae(Tr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Ux=ae(Ci,Ti,(e,t)=>({x:0,y:0,width:e,height:t})),eU=w.createContext(null),On=()=>w.useContext(eU)!=null,um=e=>e.brush,dm=ae([um,Tr,qC],(e,t,r)=>({height:e.height,x:$e(e.x)?e.x:t.left,y:$e(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:$e(e.width)?e.width:t.width})),hy={},my={},py={},aE;function tU(){return aE||(aE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:l}={}){let u,d=null;const h=l!=null&&l.includes("leading"),m=l==null||l.includes("trailing"),p=()=>{d!==null&&(r.apply(u,d),u=void 0,d=null)},g=()=>{m&&p(),N()};let x=null;const b=()=>{x!=null&&clearTimeout(x),x=setTimeout(()=>{x=null,g()},n)},j=()=>{x!==null&&(clearTimeout(x),x=null)},N=()=>{j(),u=void 0,d=null},_=()=>{p()},E=function(...k){if(i!=null&&i.aborted)return;u=this,d=k;const A=x==null;b(),h&&A&&p()};return E.schedule=b,E.cancel=N,E.flush=_,i==null||i.addEventListener("abort",N,{once:!0}),E}e.debounce=t})(py)),py}var iE;function rU(){return iE||(iE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tU();function r(n,i=0,l={}){typeof l!="object"&&(l={});const{leading:u=!1,trailing:d=!0,maxWait:h}=l,m=Array(2);u&&(m[0]="leading"),d&&(m[1]="trailing");let p,g=null;const x=t.debounce(function(...N){p=n.apply(this,N),g=null},i,{edges:m}),b=function(...N){return h!=null&&(g===null&&(g=Date.now()),Date.now()-g>=h)?(p=n.apply(this,N),g=Date.now(),x.cancel(),x.schedule(),p):(x.apply(this,N),p)},j=()=>(x.flush(),p);return b.cancel=x.cancel,b.flush=j,b}e.debounce=r})(my)),my}var sE;function nU(){return sE||(sE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rU();function r(n,i=0,l={}){const{leading:u=!0,trailing:d=!0}=l;return t.debounce(n,i,{leading:u,maxWait:i,trailing:d})}e.throttle=r})(hy)),hy}var gy,oE;function aU(){return oE||(oE=1,gy=nU().throttle),gy}var iU=aU();const sU=Ka(iU);var ch=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),l=2;l<n;l++)i[l-2]=arguments[l];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=0;console.warn(r.replace(/%s/g,()=>i[u++]))}},HC=(e,t,r)=>{var{width:n="100%",height:i="100%",aspect:l,maxHeight:u}=r,d=wi(n)?e:Number(n),h=wi(i)?t:Number(i);return l&&l>0&&(d?h=d/l:h&&(d=h*l),u&&h!=null&&h>u&&(h=u)),{calculatedWidth:d,calculatedHeight:h}},oU={width:0,height:0,overflow:"visible"},lU={width:0,overflowX:"visible"},cU={height:0,overflowY:"visible"},uU={},dU=e=>{var{width:t,height:r}=e,n=wi(t),i=wi(r);return n&&i?oU:n?lU:i?cU:uU};function fU(e){var{width:t,height:r,aspect:n}=e,i=t,l=r;return i===void 0&&l===void 0?(i="100%",l="100%"):i===void 0?i=n&&n>0?void 0:"100%":l===void 0&&(l=n&&n>0?void 0:"100%"),{width:i,height:l}}function dr(e){return Number.isFinite(e)}function Fa(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Av.apply(null,arguments)}function lE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lE(Object(r),!0).forEach(function(n){hU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hU(e,t,r){return(t=mU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mU(e){var t=pU(e,"string");return typeof t=="symbol"?t:t+""}function pU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FC=w.createContext({width:-1,height:-1});function gU(e){return Fa(e.width)&&Fa(e.height)}function VC(e){var{children:t,width:r,height:n}=e,i=w.useMemo(()=>({width:r,height:n}),[r,n]);return gU(i)?w.createElement(FC.Provider,{value:i},t):null}var $x=()=>w.useContext(FC),yU=w.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:l,minWidth:u=0,minHeight:d,maxHeight:h,children:m,debounce:p=0,id:g,className:x,onResize:b,style:j={}}=e,N=w.useRef(null),_=w.useRef();_.current=b,w.useImperativeHandle(t,()=>N.current);var[E,k]=w.useState({containerWidth:n.width,containerHeight:n.height}),A=w.useCallback((Y,oe)=>{k(H=>{var $=Math.round(Y),U=Math.round(oe);return H.containerWidth===$&&H.containerHeight===U?H:{containerWidth:$,containerHeight:U}})},[]);w.useEffect(()=>{if(N.current==null||typeof ResizeObserver>"u")return Ou;var Y=U=>{var ce,{width:G,height:V}=U[0].contentRect;A(G,V),(ce=_.current)===null||ce===void 0||ce.call(_,G,V)};p>0&&(Y=sU(Y,p,{trailing:!0,leading:!1}));var oe=new ResizeObserver(Y),{width:H,height:$}=N.current.getBoundingClientRect();return A(H,$),oe.observe(N.current),()=>{oe.disconnect()}},[A,p]);var{containerWidth:I,containerHeight:R}=E;ch(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:C,calculatedHeight:P}=HC(I,R,{width:i,height:l,aspect:r,maxHeight:h});return ch(C!=null&&C>0||P!=null&&P>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,C,P,i,l,u,d,r),w.createElement("div",{id:g?"".concat(g):void 0,className:Ot("recharts-responsive-container",x),style:cE(cE({},j),{},{width:i,height:l,minWidth:u,minHeight:d,maxHeight:h}),ref:N},w.createElement("div",{style:dU({width:i,height:l})},w.createElement(VC,{width:C,height:P},m)))}),fu=w.forwardRef((e,t)=>{var r=$x();if(Fa(r.width)&&Fa(r.height))return e.children;var{width:n,height:i}=fU({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:l,calculatedHeight:u}=HC(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return $e(l)&&$e(u)?w.createElement(VC,{width:l,height:u},e.children):w.createElement(yU,Av({},e,{width:n,height:i,ref:t}))});function KC(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var fm=()=>{var e,t=On(),r=Ue(J8),n=Ue(dm),i=(e=Ue(um))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},vU={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},YC=()=>{var e;return(e=Ue(Tr))!==null&&e!==void 0?e:vU},qx=()=>Ue(Ci),Bx=()=>Ue(Ti),xU=()=>Ue(e=>e.layout.margin),yt=e=>e.layout.layoutType,hm=()=>Ue(yt),bU=()=>{var e=hm();return e!==void 0},mm=e=>{var t=Bt(),r=On(),{width:n,height:i}=e,l=$x(),u=n,d=i;return l&&(u=l.width>0?l.width:n,d=l.height>0?l.height:i),w.useEffect(()=>{!r&&Fa(u)&&Fa(d)&&t(_8({width:u,height:d}))},[t,r,u,d]),null},WC=Symbol.for("immer-nothing"),uE=Symbol.for("immer-draftable"),Fn=Symbol.for("immer-state");function Oa(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var hu=Object.getPrototypeOf;function Sl(e){return!!e&&!!e[Fn]}function mo(e){var t;return e?XC(e)||Array.isArray(e)||!!e[uE]||!!((t=e.constructor)!=null&&t[uE])||Pu(e)||gm(e):!1}var wU=Object.prototype.constructor.toString(),dE=new WeakMap;function XC(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=dE.get(r);return n===void 0&&(n=Function.toString.call(r),dE.set(r,n)),n===wU}function uh(e,t,r=!0){pm(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function pm(e){const t=e[Fn];return t?t.type_:Array.isArray(e)?1:Pu(e)?2:gm(e)?3:0}function Ov(e,t){return pm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ZC(e,t,r){const n=pm(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function jU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Pu(e){return e instanceof Map}function gm(e){return e instanceof Set}function Xs(e){return e.copy_||e.base_}function Cv(e,t){if(Pu(e))return new Map(e);if(gm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=XC(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Fn];let i=Reflect.ownKeys(n);for(let l=0;l<i.length;l++){const u=i[l],d=n[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(n[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[u]})}return Object.create(hu(e),n)}else{const n=hu(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function Gx(e,t=!1){return ym(e)||Sl(e)||!mo(e)||(pm(e)>1&&Object.defineProperties(e,{set:Af,add:Af,clear:Af,delete:Af}),Object.freeze(e),t&&Object.values(e).forEach(r=>Gx(r,!0))),e}function NU(){Oa(2)}var Af={value:NU};function ym(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var _U={};function po(e){const t=_U[e];return t||Oa(0,e),t}var mu;function QC(){return mu}function SU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function fE(e,t){t&&(po("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Tv(e){kv(e),e.drafts_.forEach(EU),e.drafts_=null}function kv(e){e===mu&&(mu=e.parent_)}function hE(e){return mu=SU(mu,e)}function EU(e){const t=e[Fn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function mE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Fn].modified_&&(Tv(t),Oa(4)),mo(e)&&(e=dh(t,e),t.parent_||fh(t,e)),t.patches_&&po("Patches").generateReplacementPatches_(r[Fn].base_,e,t.patches_,t.inversePatches_)):e=dh(t,r,[]),Tv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==WC?e:void 0}function dh(e,t,r){if(ym(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[Fn];if(!i)return uh(t,(l,u)=>pE(e,i,t,l,u,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return fh(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const l=i.copy_;let u=l,d=!1;i.type_===3&&(u=new Set(l),l.clear(),d=!0),uh(u,(h,m)=>pE(e,i,l,h,m,r,d),n),fh(e,l,!1),r&&e.patches_&&po("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function pE(e,t,r,n,i,l,u){if(i==null||typeof i!="object"&&!u)return;const d=ym(i);if(!(d&&!u)){if(Sl(i)){const h=l&&t&&t.type_!==3&&!Ov(t.assigned_,n)?l.concat(n):void 0,m=dh(e,i,h);if(ZC(r,n,m),Sl(m))e.canAutoFreeze_=!1;else return}else u&&r.add(i);if(mo(i)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&d)return;dh(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Pu(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&fh(e,i)}}}function fh(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Gx(t,r)}function AU(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:QC(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,l=Hx;r&&(i=[n],l=pu);const{revoke:u,proxy:d}=Proxy.revocable(i,l);return n.draft_=d,n.revoke_=u,d}var Hx={get(e,t){if(t===Fn)return e;const r=Xs(e);if(!Ov(r,t))return OU(e,r,t);const n=r[t];return e.finalized_||!mo(n)?n:n===yy(e.base_,t)?(vy(e),e.copy_[t]=Rv(n,e)):n},has(e,t){return t in Xs(e)},ownKeys(e){return Reflect.ownKeys(Xs(e))},set(e,t,r){const n=JC(Xs(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=yy(Xs(e),t),l=i==null?void 0:i[Fn];if(l&&l.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(jU(r,i)&&(r!==void 0||Ov(e.base_,t)))return!0;vy(e),Dv(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return yy(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,vy(e),Dv(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Xs(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Oa(11)},getPrototypeOf(e){return hu(e.base_)},setPrototypeOf(){Oa(12)}},pu={};uh(Hx,(e,t)=>{pu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});pu.deleteProperty=function(e,t){return pu.set.call(this,e,t,void 0)};pu.set=function(e,t,r){return Hx.set.call(this,e[0],t,r,e[0])};function yy(e,t){const r=e[Fn];return(r?Xs(r):e)[t]}function OU(e,t,r){var i;const n=JC(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function JC(e,t){if(!(t in e))return;let r=hu(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=hu(r)}}function Dv(e){e.modified_||(e.modified_=!0,e.parent_&&Dv(e.parent_))}function vy(e){e.copy_||(e.copy_=Cv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var CU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const l=r;r=t;const u=this;return function(h=l,...m){return u.produce(h,p=>r.call(this,p,...m))}}typeof r!="function"&&Oa(6),n!==void 0&&typeof n!="function"&&Oa(7);let i;if(mo(t)){const l=hE(this),u=Rv(t,void 0);let d=!0;try{i=r(u),d=!1}finally{d?Tv(l):kv(l)}return fE(l,n),mE(i,l)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===WC&&(i=void 0),this.autoFreeze_&&Gx(i,!0),n){const l=[],u=[];po("Patches").generateReplacementPatches_(t,i,l,u),n(l,u)}return i}else Oa(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(u,...d)=>this.produceWithPatches(u,h=>t(h,...d));let n,i;return[this.produce(t,r,(u,d)=>{n=u,i=d}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){mo(e)||Oa(8),Sl(e)&&(e=TU(e));const t=hE(this),r=Rv(e,void 0);return r[Fn].isManual_=!0,kv(t),r}finishDraft(e,t){const r=e&&e[Fn];(!r||!r.isManual_)&&Oa(9);const{scope_:n}=r;return fE(n,t),mE(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=po("Patches").applyPatches_;return Sl(e)?n(e,t):this.produce(e,i=>n(i,t))}};function Rv(e,t){const r=Pu(e)?po("MapSet").proxyMap_(e,t):gm(e)?po("MapSet").proxySet_(e,t):AU(e,t);return(t?t.scope_:QC()).drafts_.push(r),r}function TU(e){return Sl(e)||Oa(10,e),eT(e)}function eT(e){if(!mo(e)||ym(e))return e;const t=e[Fn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Cv(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Cv(e,!0);return uh(r,(i,l)=>{ZC(r,i,eT(l))},n),t&&(t.finalized_=!1),r}var kU=new CU;kU.produce;var DU={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},tT=An({name:"legend",initialState:DU,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Wt()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Ta(e).payload.indexOf(r);i>-1&&(e.payload[i]=n)},prepare:Wt()},removeLegendPayload:{reducer(e,t){var r=Ta(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Wt()}}}),{setLegendSize:gE,setLegendSettings:RU,addLegendPayload:rT,replaceLegendPayload:nT,removeLegendPayload:aT}=tT.actions,PU=tT.reducer,MU=["contextPayload"];function Pv(){return Pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pv.apply(null,arguments)}function yE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function El(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yE(Object(r),!0).forEach(function(n){IU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IU(e,t,r){return(t=LU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LU(e){var t=zU(e,"string");return typeof t=="symbol"?t:t+""}function zU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UU(e,t){if(e==null)return{};var r,n,i=$U(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function $U(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qU(e){return e.value}function BU(e){var{contextPayload:t}=e,r=UU(e,MU),n=nC(t,e.payloadUniqBy,qU),i=El(El({},r),{},{payload:n});return w.isValidElement(e.content)?w.cloneElement(e.content,i):typeof e.content=="function"?w.createElement(e.content,i):w.createElement(DL,i)}function GU(e,t,r,n,i,l){var{layout:u,align:d,verticalAlign:h}=t,m,p;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(d==="center"&&u==="vertical"?m={left:((n||0)-l.width)/2}:m=d==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(h==="middle"?p={top:((i||0)-l.height)/2}:p=h==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),El(El({},m),p)}function HU(e){var t=Bt();return w.useEffect(()=>{t(RU(e))},[t,e]),null}function FU(e){var t=Bt();return w.useEffect(()=>(t(gE(e)),()=>{t(gE({width:0,height:0}))}),[t,e]),null}function VU(e,t,r,n){return e==="vertical"&&$e(t)?{height:t}:e==="horizontal"?{width:r||n}:null}var KU={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function iT(e){var t=qr(e,KU),r=Ez(),n=j6(),i=xU(),{width:l,height:u,wrapperStyle:d,portal:h}=t,[m,p]=lC([r]),g=qx(),x=Bx();if(g==null||x==null)return null;var b=g-((i==null?void 0:i.left)||0)-((i==null?void 0:i.right)||0),j=VU(t.layout,u,l,b),N=h?d:El(El({position:"absolute",width:(j==null?void 0:j.width)||l||"auto",height:(j==null?void 0:j.height)||u||"auto"},GU(d,t,i,g,x,m)),d),_=h??n;if(_==null||r==null)return null;var E=w.createElement("div",{className:"recharts-legend-wrapper",style:N,ref:p},w.createElement(HU,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!h&&w.createElement(FU,{width:m.width,height:m.height}),w.createElement(BU,Pv({},t,j,{margin:i,chartWidth:g,chartHeight:x,contextPayload:r})));return wx.createPortal(E,_)}iT.displayName="Legend";function Mv(){return Mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mv.apply(null,arguments)}function vE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vE(Object(r),!0).forEach(function(n){YU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YU(e,t,r){return(t=WU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WU(e){var t=XU(e,"string");return typeof t=="symbol"?t:t+""}function XU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZU(e){return Array.isArray(e)&&Ga(e[0])&&Ga(e[1])?e.join(" ~ "):e}var QU=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:l,formatter:u,itemSorter:d,wrapperClassName:h,labelClassName:m,label:p,labelFormatter:g,accessibilityLayer:x=!1}=e,b=()=>{if(l&&l.length){var R={padding:0,margin:0},C=(d?Qh(l,d):l).map((P,Y)=>{if(P.type==="none")return null;var oe=P.formatter||u||ZU,{value:H,name:$}=P,U=H,ce=$;if(oe){var G=oe(H,$,P,Y,l);if(Array.isArray(G))[U,ce]=G;else if(G!=null)U=G;else return null}var V=xy({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},n);return w.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:V},Ga(ce)?w.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,Ga(ce)?w.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,w.createElement("span",{className:"recharts-tooltip-item-value"},U),w.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return w.createElement("ul",{className:"recharts-tooltip-item-list",style:R},C)}return null},j=xy({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),N=xy({margin:0},i),_=!$r(p),E=_?p:"",k=Ot("recharts-default-tooltip",h),A=Ot("recharts-tooltip-label",m);_&&g&&l!==void 0&&l!==null&&(E=g(p,l));var I=x?{role:"status","aria-live":"assertive"}:{};return w.createElement("div",Mv({className:k,style:j},I),w.createElement("p",{className:A,style:N},w.isValidElement(E)?E:"".concat(E)),b())},zc="recharts-tooltip-wrapper",JU={visibility:"hidden"};function e$(e){var{coordinate:t,translateX:r,translateY:n}=e;return Ot(zc,{["".concat(zc,"-right")]:$e(r)&&t&&$e(t.x)&&r>=t.x,["".concat(zc,"-left")]:$e(r)&&t&&$e(t.x)&&r<t.x,["".concat(zc,"-bottom")]:$e(n)&&t&&$e(t.y)&&n>=t.y,["".concat(zc,"-top")]:$e(n)&&t&&$e(t.y)&&n<t.y})}function xE(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:l,reverseDirection:u,tooltipDimension:d,viewBox:h,viewBoxDimension:m}=e;if(l&&$e(l[n]))return l[n];var p=r[n]-d-(i>0?i:0),g=r[n]+i;if(t[n])return u[n]?p:g;var x=h[n];if(x==null)return 0;if(u[n]){var b=p,j=x;return b<j?Math.max(g,x):Math.max(p,x)}if(m==null)return 0;var N=g+d,_=x+m;return N>_?Math.max(p,x):Math.max(g,x)}function t$(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function r$(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:l,tooltipBox:u,useTranslate3d:d,viewBox:h}=e,m,p,g;return u.height>0&&u.width>0&&r?(p=xE({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:l,tooltipDimension:u.width,viewBox:h,viewBoxDimension:h.width}),g=xE({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:l,tooltipDimension:u.height,viewBox:h,viewBoxDimension:h.height}),m=t$({translateX:p,translateY:g,useTranslate3d:d})):m=JU,{cssProperties:m,cssClasses:e$({translateX:p,translateY:g,coordinate:r})}}function bE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Of(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bE(Object(r),!0).forEach(function(n){Iv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Iv(e,t,r){return(t=n$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n$(e){var t=a$(e,"string");return typeof t=="symbol"?t:t+""}function a$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class i$ extends w.PureComponent{constructor(){super(...arguments),Iv(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Iv(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,l;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(l=this.props.coordinate)===null||l===void 0?void 0:l.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:l,coordinate:u,hasPayload:d,isAnimationActive:h,offset:m,position:p,reverseDirection:g,useTranslate3d:x,viewBox:b,wrapperStyle:j,lastBoundingBox:N,innerRef:_,hasPortalFromProps:E}=this.props,{cssClasses:k,cssProperties:A}=r$({allowEscapeViewBox:r,coordinate:u,offsetTopLeft:m,position:p,reverseDirection:g,tooltipBox:{height:N.height,width:N.width},useTranslate3d:x,viewBox:b}),I=E?{}:Of(Of({transition:h&&t?"transform ".concat(n,"ms ").concat(i):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&d?"visible":"hidden",position:"absolute",top:0,left:0}),R=Of(Of({},I),{},{visibility:!this.state.dismissed&&t&&d?"visible":"hidden"},j);return w.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:R,ref:_},l)}}var s$=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),wo={devToolsEnabled:!1,isSsr:s$()},sT=()=>{var e;return(e=Ue(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Lv(){return Lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lv.apply(null,arguments)}function wE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wE(Object(r),!0).forEach(function(n){o$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o$(e,t,r){return(t=l$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l$(e){var t=c$(e,"string");return typeof t=="symbol"?t:t+""}function c$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NE={curveBasisClosed:q6,curveBasisOpen:B6,curveBasis:$6,curveBumpX:E6,curveBumpY:A6,curveLinearClosed:G6,curveLinear:Xh,curveMonotoneX:H6,curveMonotoneY:F6,curveNatural:V6,curveStep:K6,curveStepAfter:W6,curveStepBefore:Y6},hh=e=>dr(e.x)&&dr(e.y),_E=e=>e.base!=null&&hh(e.base)&&hh(e),Uc=e=>e.x,$c=e=>e.y,u$=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Au(e));return(r==="curveMonotone"||r==="curveBump")&&t?NE["".concat(r).concat(t==="vertical"?"Y":"X")]:NE[r]||Xh},d$=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:l=!1}=e,u=u$(t,i),d=l?r.filter(hh):r,h;if(Array.isArray(n)){var m=r.map((b,j)=>jE(jE({},b),{},{base:n[j]}));i==="vertical"?h=bf().y($c).x1(Uc).x0(b=>b.base.x):h=bf().x(Uc).y1($c).y0(b=>b.base.y);var p=h.defined(_E).curve(u),g=l?m.filter(_E):m;return p(g)}i==="vertical"&&$e(n)?h=bf().y($c).x1(Uc).x0(n):$e(n)?h=bf().x(Uc).y1($c).y0(n):h=RO().x(Uc).y($c);var x=h.defined(hh).curve(u);return x(d)},Fx=e=>{var{className:t,points:r,path:n,pathRef:i}=e;if((!r||!r.length)&&!n)return null;var l=r&&r.length?d$(e):n;return w.createElement("path",Lv({},ka(e),xL(e),{className:Ot("recharts-curve",t),d:l===null?void 0:l,ref:i}))},f$=["x","y","top","left","width","height","className"];function zv(){return zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zv.apply(null,arguments)}function SE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function h$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SE(Object(r),!0).forEach(function(n){m$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m$(e,t,r){return(t=p$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p$(e){var t=g$(e,"string");return typeof t=="symbol"?t:t+""}function g$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y$(e,t){if(e==null)return{};var r,n,i=v$(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function v$(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var x$=(e,t,r,n,i,l)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(l,",").concat(t,"h").concat(r),b$=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:l=0,height:u=0,className:d}=e,h=y$(e,f$),m=h$({x:t,y:r,top:n,left:i,width:l,height:u},h);return!$e(t)||!$e(r)||!$e(l)||!$e(u)||!$e(n)||!$e(i)?null:w.createElement("path",zv({},ca(m),{className:Ot("recharts-cross",d),d:x$(t,r,l,u,n,i)}))};function w$(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function EE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function AE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EE(Object(r),!0).forEach(function(n){j$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j$(e,t,r){return(t=N$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N$(e){var t=_$(e,"string");return typeof t=="symbol"?t:t+""}function _$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S$=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),oT=(e,t,r)=>e.map(n=>"".concat(S$(n)," ").concat(t,"ms ").concat(r)).join(","),E$=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),gu=(e,t)=>Object.keys(t).reduce((r,n)=>AE(AE({},r),{},{[n]:e(n,t[n])}),{});function OE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OE(Object(r),!0).forEach(function(n){A$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A$(e,t,r){return(t=O$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O$(e){var t=C$(e,"string");return typeof t=="symbol"?t:t+""}function C$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mh=(e,t,r)=>e+(t-e)*r,Uv=e=>{var{from:t,to:r}=e;return t!==r},lT=(e,t,r)=>{var n=gu((i,l)=>{if(Uv(l)){var[u,d]=e(l.from,l.to,l.velocity);return Cr(Cr({},l),{},{from:u,velocity:d})}return l},t);return r<1?gu((i,l)=>Uv(l)?Cr(Cr({},l),{},{velocity:mh(l.velocity,n[i].velocity,r),from:mh(l.from,n[i].from,r)}):l,t):lT(e,n,r-1)};function T$(e,t,r,n,i,l){var u,d=n.reduce((x,b)=>Cr(Cr({},x),{},{[b]:{from:e[b],velocity:0,to:t[b]}}),{}),h=()=>gu((x,b)=>b.from,d),m=()=>!Object.values(d).filter(Uv).length,p=null,g=x=>{u||(u=x);var b=x-u,j=b/r.dt;d=lT(r,d,j),i(Cr(Cr(Cr({},e),t),h())),u=x,m()||(p=l.setTimeout(g))};return()=>(p=l.setTimeout(g),()=>{var x;(x=p)===null||x===void 0||x()})}function k$(e,t,r,n,i,l,u){var d=null,h=i.reduce((g,x)=>Cr(Cr({},g),{},{[x]:[e[x],t[x]]}),{}),m,p=g=>{m||(m=g);var x=(g-m)/n,b=gu((N,_)=>mh(..._,r(x)),h);if(l(Cr(Cr(Cr({},e),t),b)),x<1)d=u.setTimeout(p);else{var j=gu((N,_)=>mh(..._,r(1)),h);l(Cr(Cr(Cr({},e),t),j))}};return()=>(d=u.setTimeout(p),()=>{var g;(g=d)===null||g===void 0||g()})}const D$=(e,t,r,n,i,l)=>{var u=E$(e,t);return r==null?()=>(i(Cr(Cr({},e),t)),()=>{}):r.isStepper===!0?T$(e,t,r,u,i,l):k$(e,t,r,n,u,i,l)};var ph=1e-4,cT=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],uT=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),CE=(e,t)=>r=>{var n=cT(e,t);return uT(n,r)},R$=(e,t)=>r=>{var n=cT(e,t),i=[...n.map((l,u)=>l*u).slice(1),0];return uT(i,r)},P$=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,l=r[0].split("(");if(l[0]==="cubic-bezier"&&((i=l[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var u=l[1].split(")")[0].split(",").map(d=>parseFloat(d));return[u[0],u[1],u[2],u[3]]}}}return r.length===4?r:[0,0,1,1]},M$=(e,t,r,n)=>{var i=CE(e,r),l=CE(t,n),u=R$(e,r),d=m=>m>1?1:m<0?0:m,h=m=>{for(var p=m>1?1:m,g=p,x=0;x<8;++x){var b=i(g)-p,j=u(g);if(Math.abs(b-p)<ph||j<ph)return l(g);g=d(g-b/j)}return l(g)};return h.isStepper=!1,h},TE=function(){return M$(...P$(...arguments))},I$=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,l=(u,d,h)=>{var m=-(u-d)*r,p=h*n,g=h+(m-p)*i/1e3,x=h*i/1e3+u;return Math.abs(x-d)<ph&&Math.abs(g)<ph?[d,0]:[x,g]};return l.isStepper=!0,l.dt=i,l},L$=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return TE(e);case"spring":return I$();default:if(e.split("(")[0]==="cubic-bezier")return TE(e)}return typeof e=="function"?e:null};function z$(e){var t,r=()=>null,n=!1,i=null,l=u=>{if(!n){if(Array.isArray(u)){if(!u.length)return;var d=u,[h,...m]=d;if(typeof h=="number"){i=e.setTimeout(l.bind(null,m),h);return}l(h),i=e.setTimeout(l.bind(null,m));return}typeof u=="string"&&(t=u,r(t)),typeof u=="object"&&(t=u,r(t)),typeof u=="function"&&u()}};return{stop:()=>{n=!0},start:u=>{n=!1,i&&(i(),i=null),l(u)},subscribe:u=>(r=u,()=>{r=()=>null}),getTimeoutController:()=>e}}class U${setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,l=u=>{u-n>=r?t(u):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(l))};return i=requestAnimationFrame(l),()=>{i!=null&&cancelAnimationFrame(i)}}}function $$(){return z$(new U$)}var q$=w.createContext($$);function B$(e,t){var r=w.useContext(q$);return w.useMemo(()=>t??r(e),[e,t,r])}var G$={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},kE={t:0},by={t:1};function vm(e){var t=qr(e,G$),{isActive:r,canBegin:n,duration:i,easing:l,begin:u,onAnimationEnd:d,onAnimationStart:h,children:m}=t,p=r==="auto"?!wo.isSsr:r,g=B$(t.animationId,t.animationManager),[x,b]=w.useState(p?kE:by),j=w.useRef(null);return w.useEffect(()=>{p||b(by)},[p]),w.useEffect(()=>{if(!p||!n)return Ou;var N=D$(kE,by,L$(l),i,b,g.getTimeoutController()),_=()=>{j.current=N()};return g.start([h,u,_,i,d]),()=>{g.stop(),j.current&&j.current(),d()}},[p,n,i,l,u,h,d,g]),m(x.t)}function xm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=w.useRef(lu(t)),n=w.useRef(e);return n.current!==e&&(r.current=lu(t),n.current=e),r.current}var H$=["radius"],F$=["radius"];function DE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function RE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DE(Object(r),!0).forEach(function(n){V$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V$(e,t,r){return(t=K$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K$(e){var t=Y$(e,"string");return typeof t=="symbol"?t:t+""}function Y$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gh(){return gh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gh.apply(null,arguments)}function PE(e,t){if(e==null)return{};var r,n,i=W$(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function W$(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ME=(e,t,r,n,i)=>{var l=Math.min(Math.abs(r)/2,Math.abs(n)/2),u=n>=0?1:-1,d=r>=0?1:-1,h=n>=0&&r>=0||n<0&&r<0?1:0,m;if(l>0&&i instanceof Array){for(var p=[0,0,0,0],g=0,x=4;g<x;g++)p[g]=i[g]>l?l:i[g];m="M".concat(e,",").concat(t+u*p[0]),p[0]>0&&(m+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(h,",").concat(e+d*p[0],",").concat(t)),m+="L ".concat(e+r-d*p[1],",").concat(t),p[1]>0&&(m+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(h,`,
        `).concat(e+r,",").concat(t+u*p[1])),m+="L ".concat(e+r,",").concat(t+n-u*p[2]),p[2]>0&&(m+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(h,`,
        `).concat(e+r-d*p[2],",").concat(t+n)),m+="L ".concat(e+d*p[3],",").concat(t+n),p[3]>0&&(m+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(t+n-u*p[3])),m+="Z"}else if(l>0&&i===+i&&i>0){var b=Math.min(l,i);m="M ".concat(e,",").concat(t+u*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(h,",").concat(e+d*b,",").concat(t,`
            L `).concat(e+r-d*b,",").concat(t,`
            A `).concat(b,",").concat(b,",0,0,").concat(h,",").concat(e+r,",").concat(t+u*b,`
            L `).concat(e+r,",").concat(t+n-u*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(h,",").concat(e+r-d*b,",").concat(t+n,`
            L `).concat(e+d*b,",").concat(t+n,`
            A `).concat(b,",").concat(b,",0,0,").concat(h,",").concat(e,",").concat(t+n-u*b," Z")}else m="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return m},IE={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dT=e=>{var t=qr(e,IE),r=w.useRef(null),[n,i]=w.useState(-1);w.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var K=r.current.getTotalLength();K&&i(K)}catch{}},[]);var{x:l,y:u,width:d,height:h,radius:m,className:p}=t,{animationEasing:g,animationDuration:x,animationBegin:b,isAnimationActive:j,isUpdateAnimationActive:N}=t,_=w.useRef(d),E=w.useRef(h),k=w.useRef(l),A=w.useRef(u),I=w.useMemo(()=>({x:l,y:u,width:d,height:h,radius:m}),[l,u,d,h,m]),R=xm(I,"rectangle-");if(l!==+l||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var C=Ot("recharts-rectangle",p);if(!N){var P=ca(t),{radius:Y}=P,oe=PE(P,H$);return w.createElement("path",gh({},oe,{radius:typeof m=="number"?m:void 0,className:C,d:ME(l,u,d,h,m)}))}var H=_.current,$=E.current,U=k.current,ce=A.current,G="0px ".concat(n===-1?1:n,"px"),V="".concat(n,"px 0px"),D=oT(["strokeDasharray"],x,typeof g=="string"?g:IE.animationEasing);return w.createElement(vm,{animationId:R,key:R,canBegin:n>0,duration:x,easing:g,isActive:N,begin:b},K=>{var fe=Or(H,d,K),Ne=Or($,h,K),_e=Or(U,l,K),L=Or(ce,u,K);r.current&&(_.current=fe,E.current=Ne,k.current=_e,A.current=L);var W;j?K>0?W={transition:D,strokeDasharray:V}:W={strokeDasharray:G}:W={strokeDasharray:V};var ve=ca(t),{radius:be}=ve,Te=PE(ve,F$);return w.createElement("path",gh({},Te,{radius:typeof m=="number"?m:void 0,className:C,d:ME(_e,L,fe,Ne,m),ref:r,style:RE(RE({},W),t.style)}))})};function LE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LE(Object(r),!0).forEach(function(n){X$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X$(e,t,r){return(t=Z$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z$(e){var t=Q$(e,"string");return typeof t=="symbol"?t:t+""}function Q$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yh=Math.PI/180,J$=e=>e*180/Math.PI,wr=(e,t,r,n)=>({x:e+Math.cos(-yh*n)*r,y:t+Math.sin(-yh*n)*r}),fT=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},eq=(e,t)=>{var{x:r,y:n}=e,{x:i,y:l}=t;return Math.sqrt((r-i)**2+(n-l)**2)},tq=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:l}=t,u=eq({x:r,y:n},{x:i,y:l});if(u<=0)return{radius:u,angle:0};var d=(r-i)/u,h=Math.acos(d);return n>l&&(h=2*Math.PI-h),{radius:u,angle:J$(h),angleInRadian:h}},rq=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),l=Math.min(n,i);return{startAngle:t-l*360,endAngle:r-l*360}},nq=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),l=Math.floor(n/360),u=Math.min(i,l);return e+u*360},aq=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:l}=tq({x:r,y:n},t),{innerRadius:u,outerRadius:d}=t;if(i<u||i>d||i===0)return null;var{startAngle:h,endAngle:m}=rq(t),p=l,g;if(h<=m){for(;p>m;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=m}else{for(;p>h;)p-=360;for(;p<m;)p+=360;g=p>=m&&p<=h}return g?zE(zE({},t),{},{radius:i,angle:nq(p,t)}):null};function hT(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:l}=e,u=wr(t,r,n,i),d=wr(t,r,n,l);return{points:[u,d],cx:t,cy:r,radius:n,startAngle:i,endAngle:l}}function $v(){return $v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$v.apply(null,arguments)}var iq=(e,t)=>{var r=Ur(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Cf=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:l,isExternal:u,cornerRadius:d,cornerIsExternal:h}=e,m=d*(u?1:-1)+n,p=Math.asin(d/m)/yh,g=h?i:i+l*p,x=wr(t,r,m,g),b=wr(t,r,n,g),j=h?i-l*p:i,N=wr(t,r,m*Math.cos(p*yh),j);return{center:x,circleTangency:b,lineTangency:N,theta:p}},mT=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:l,endAngle:u}=e,d=iq(l,u),h=l+d,m=wr(t,r,i,l),p=wr(t,r,i,h),g="M ".concat(m.x,",").concat(m.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(l>h),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(n>0){var x=wr(t,r,n,l),b=wr(t,r,n,h);g+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(l<=h),`,
            `).concat(x.x,",").concat(x.y," Z")}else g+="L ".concat(t,",").concat(r," Z");return g},sq=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:h,endAngle:m}=e,p=Ur(m-h),{circleTangency:g,lineTangency:x,theta:b}=Cf({cx:t,cy:r,radius:i,angle:h,sign:p,cornerRadius:l,cornerIsExternal:d}),{circleTangency:j,lineTangency:N,theta:_}=Cf({cx:t,cy:r,radius:i,angle:m,sign:-p,cornerRadius:l,cornerIsExternal:d}),E=d?Math.abs(h-m):Math.abs(h-m)-b-_;if(E<0)return u?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):mT({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:h,endAngle:m});var k="M ".concat(x.x,",").concat(x.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(p<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(E>180),",").concat(+(p<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(p<0),",").concat(N.x,",").concat(N.y,`
  `);if(n>0){var{circleTangency:A,lineTangency:I,theta:R}=Cf({cx:t,cy:r,radius:n,angle:h,sign:p,isExternal:!0,cornerRadius:l,cornerIsExternal:d}),{circleTangency:C,lineTangency:P,theta:Y}=Cf({cx:t,cy:r,radius:n,angle:m,sign:-p,isExternal:!0,cornerRadius:l,cornerIsExternal:d}),oe=d?Math.abs(h-m):Math.abs(h-m)-R-Y;if(oe<0&&l===0)return"".concat(k,"L").concat(t,",").concat(r,"Z");k+="L".concat(P.x,",").concat(P.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(p<0),",").concat(C.x,",").concat(C.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(oe>180),",").concat(+(p>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(p<0),",").concat(I.x,",").concat(I.y,"Z")}else k+="L".concat(t,",").concat(r,"Z");return k},oq={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},pT=e=>{var t=qr(e,oq),{cx:r,cy:n,innerRadius:i,outerRadius:l,cornerRadius:u,forceCornerRadius:d,cornerIsExternal:h,startAngle:m,endAngle:p,className:g}=t;if(l<i||m===p)return null;var x=Ot("recharts-sector",g),b=l-i,j=on(u,b,0,!0),N;return j>0&&Math.abs(m-p)<360?N=sq({cx:r,cy:n,innerRadius:i,outerRadius:l,cornerRadius:Math.min(j,b/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:m,endAngle:p}):N=mT({cx:r,cy:n,innerRadius:i,outerRadius:l,startAngle:m,endAngle:p}),w.createElement("path",$v({},ca(t),{className:x,d:N}))};function lq(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(KO(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:l,outerRadius:u,angle:d}=t,h=wr(n,i,l,d),m=wr(n,i,u,d);return[{x:h.x,y:h.y},{x:m.x,y:m.y}]}return hT(t)}}var wy={},jy={},Ny={},UE;function cq(){return UE||(UE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iC();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(Ny)),Ny}var $E;function uq(){return $E||($E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cq();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(jy)),jy}var qE;function dq(){return qE||(qE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sC(),r=uq();function n(i,l,u){u&&typeof u!="number"&&t.isIterateeCall(i,l,u)&&(l=u=void 0),i=r.toFinite(i),l===void 0?(l=i,i=0):l=r.toFinite(l),u=u===void 0?i<l?1:-1:r.toFinite(u);const d=Math.max(Math.ceil((l-i)/(u||1)),0),h=new Array(d);for(let m=0;m<d;m++)h[m]=i,i+=u;return h}e.range=n})(wy)),wy}var _y,BE;function fq(){return BE||(BE=1,_y=dq().range),_y}var hq=fq();const gT=Ka(hq);function bs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function mq(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Vx(e){let t,r,n;e.length!==2?(t=bs,r=(d,h)=>bs(e(d),h),n=(d,h)=>e(d)-h):(t=e===bs||e===mq?e:pq,r=e,n=e);function i(d,h,m=0,p=d.length){if(m<p){if(t(h,h)!==0)return p;do{const g=m+p>>>1;r(d[g],h)<0?m=g+1:p=g}while(m<p)}return m}function l(d,h,m=0,p=d.length){if(m<p){if(t(h,h)!==0)return p;do{const g=m+p>>>1;r(d[g],h)<=0?m=g+1:p=g}while(m<p)}return m}function u(d,h,m=0,p=d.length){const g=i(d,h,m,p-1);return g>m&&n(d[g-1],h)>-n(d[g],h)?g-1:g}return{left:i,center:u,right:l}}function pq(){return 0}function yT(e){return e===null?NaN:+e}function*gq(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const yq=Vx(bs),Mu=yq.right;Vx(yT).center;class GE extends Map{constructor(t,r=bq){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(HE(this,t))}has(t){return super.has(HE(this,t))}set(t,r){return super.set(vq(this,t),r)}delete(t){return super.delete(xq(this,t))}}function HE({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function vq({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function xq({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function bq(e){return e!==null&&typeof e=="object"?e.valueOf():e}function wq(e=bs){if(e===bs)return vT;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function vT(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const jq=Math.sqrt(50),Nq=Math.sqrt(10),_q=Math.sqrt(2);function vh(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),l=n/Math.pow(10,i),u=l>=jq?10:l>=Nq?5:l>=_q?2:1;let d,h,m;return i<0?(m=Math.pow(10,-i)/u,d=Math.round(e*m),h=Math.round(t*m),d/m<e&&++d,h/m>t&&--h,m=-m):(m=Math.pow(10,i)*u,d=Math.round(e/m),h=Math.round(t/m),d*m<e&&++d,h*m>t&&--h),h<d&&.5<=r&&r<2?vh(e,t,r*2):[d,h,m]}function qv(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,l,u]=n?vh(t,e,r):vh(e,t,r);if(!(l>=i))return[];const d=l-i+1,h=new Array(d);if(n)if(u<0)for(let m=0;m<d;++m)h[m]=(l-m)/-u;else for(let m=0;m<d;++m)h[m]=(l-m)*u;else if(u<0)for(let m=0;m<d;++m)h[m]=(i+m)/-u;else for(let m=0;m<d;++m)h[m]=(i+m)*u;return h}function Bv(e,t,r){return t=+t,e=+e,r=+r,vh(e,t,r)[2]}function Gv(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?Bv(t,e,r):Bv(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function FE(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function VE(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function xT(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?vT:wq(i);n>r;){if(n-r>600){const h=n-r+1,m=t-r+1,p=Math.log(h),g=.5*Math.exp(2*p/3),x=.5*Math.sqrt(p*g*(h-g)/h)*(m-h/2<0?-1:1),b=Math.max(r,Math.floor(t-m*g/h+x)),j=Math.min(n,Math.floor(t+(h-m)*g/h+x));xT(e,t,b,j,i)}const l=e[t];let u=r,d=n;for(qc(e,r,t),i(e[n],l)>0&&qc(e,r,n);u<d;){for(qc(e,u,d),++u,--d;i(e[u],l)<0;)++u;for(;i(e[d],l)>0;)--d}i(e[r],l)===0?qc(e,r,d):(++d,qc(e,d,n)),d<=t&&(r=d+1),t<=d&&(n=d-1)}return e}function qc(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Sq(e,t,r){if(e=Float64Array.from(gq(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return VE(e);if(t>=1)return FE(e);var n,i=(n-1)*t,l=Math.floor(i),u=FE(xT(e,l).subarray(0,l+1)),d=VE(e.subarray(l+1));return u+(d-u)*(i-l)}}function Eq(e,t,r=yT){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,l=Math.floor(i),u=+r(e[l],l,e),d=+r(e[l+1],l+1,e);return u+(d-u)*(i-l)}}function Aq(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,l=new Array(i);++n<i;)l[n]=e+n*r;return l}function fa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ki(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Hv=Symbol("implicit");function Kx(){var e=new GE,t=[],r=[],n=Hv;function i(l){let u=e.get(l);if(u===void 0){if(n!==Hv)return n;e.set(l,u=t.push(l)-1)}return r[u%r.length]}return i.domain=function(l){if(!arguments.length)return t.slice();t=[],e=new GE;for(const u of l)e.has(u)||e.set(u,t.push(u)-1);return i},i.range=function(l){return arguments.length?(r=Array.from(l),i):r.slice()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.copy=function(){return Kx(t,r).unknown(n)},fa.apply(i,arguments),i}function Yx(){var e=Kx().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,l,u,d=!1,h=0,m=0,p=.5;delete e.unknown;function g(){var x=t().length,b=i<n,j=b?i:n,N=b?n:i;l=(N-j)/Math.max(1,x-h+m*2),d&&(l=Math.floor(l)),j+=(N-j-l*(x-h))*p,u=l*(1-h),d&&(j=Math.round(j),u=Math.round(u));var _=Aq(x).map(function(E){return j+l*E});return r(b?_.reverse():_)}return e.domain=function(x){return arguments.length?(t(x),g()):t()},e.range=function(x){return arguments.length?([n,i]=x,n=+n,i=+i,g()):[n,i]},e.rangeRound=function(x){return[n,i]=x,n=+n,i=+i,d=!0,g()},e.bandwidth=function(){return u},e.step=function(){return l},e.round=function(x){return arguments.length?(d=!!x,g()):d},e.padding=function(x){return arguments.length?(h=Math.min(1,m=+x),g()):h},e.paddingInner=function(x){return arguments.length?(h=Math.min(1,x),g()):h},e.paddingOuter=function(x){return arguments.length?(m=+x,g()):m},e.align=function(x){return arguments.length?(p=Math.max(0,Math.min(1,x)),g()):p},e.copy=function(){return Yx(t(),[n,i]).round(d).paddingInner(h).paddingOuter(m).align(p)},fa.apply(g(),arguments)}function bT(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return bT(t())},e}function Oq(){return bT(Yx.apply(null,arguments).paddingInner(1))}function Wx(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function wT(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Iu(){}var yu=.7,xh=1/yu,wl="\\s*([+-]?\\d+)\\s*",vu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ba="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cq=/^#([0-9a-f]{3,8})$/,Tq=new RegExp(`^rgb\\(${wl},${wl},${wl}\\)$`),kq=new RegExp(`^rgb\\(${Ba},${Ba},${Ba}\\)$`),Dq=new RegExp(`^rgba\\(${wl},${wl},${wl},${vu}\\)$`),Rq=new RegExp(`^rgba\\(${Ba},${Ba},${Ba},${vu}\\)$`),Pq=new RegExp(`^hsl\\(${vu},${Ba},${Ba}\\)$`),Mq=new RegExp(`^hsla\\(${vu},${Ba},${Ba},${vu}\\)$`),KE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wx(Iu,xu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:YE,formatHex:YE,formatHex8:Iq,formatHsl:Lq,formatRgb:WE,toString:WE});function YE(){return this.rgb().formatHex()}function Iq(){return this.rgb().formatHex8()}function Lq(){return jT(this).formatHsl()}function WE(){return this.rgb().formatRgb()}function xu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Cq.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?XE(t):r===3?new En(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Tf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Tf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Tq.exec(e))?new En(t[1],t[2],t[3],1):(t=kq.exec(e))?new En(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Dq.exec(e))?Tf(t[1],t[2],t[3],t[4]):(t=Rq.exec(e))?Tf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Pq.exec(e))?JE(t[1],t[2]/100,t[3]/100,1):(t=Mq.exec(e))?JE(t[1],t[2]/100,t[3]/100,t[4]):KE.hasOwnProperty(e)?XE(KE[e]):e==="transparent"?new En(NaN,NaN,NaN,0):null}function XE(e){return new En(e>>16&255,e>>8&255,e&255,1)}function Tf(e,t,r,n){return n<=0&&(e=t=r=NaN),new En(e,t,r,n)}function zq(e){return e instanceof Iu||(e=xu(e)),e?(e=e.rgb(),new En(e.r,e.g,e.b,e.opacity)):new En}function Fv(e,t,r,n){return arguments.length===1?zq(e):new En(e,t,r,n??1)}function En(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Wx(En,Fv,wT(Iu,{brighter(e){return e=e==null?xh:Math.pow(xh,e),new En(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?yu:Math.pow(yu,e),new En(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new En(co(this.r),co(this.g),co(this.b),bh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ZE,formatHex:ZE,formatHex8:Uq,formatRgb:QE,toString:QE}));function ZE(){return`#${to(this.r)}${to(this.g)}${to(this.b)}`}function Uq(){return`#${to(this.r)}${to(this.g)}${to(this.b)}${to((isNaN(this.opacity)?1:this.opacity)*255)}`}function QE(){const e=bh(this.opacity);return`${e===1?"rgb(":"rgba("}${co(this.r)}, ${co(this.g)}, ${co(this.b)}${e===1?")":`, ${e})`}`}function bh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function co(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function to(e){return e=co(e),(e<16?"0":"")+e.toString(16)}function JE(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ca(e,t,r,n)}function jT(e){if(e instanceof Ca)return new Ca(e.h,e.s,e.l,e.opacity);if(e instanceof Iu||(e=xu(e)),!e)return new Ca;if(e instanceof Ca)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),l=Math.max(t,r,n),u=NaN,d=l-i,h=(l+i)/2;return d?(t===l?u=(r-n)/d+(r<n)*6:r===l?u=(n-t)/d+2:u=(t-r)/d+4,d/=h<.5?l+i:2-l-i,u*=60):d=h>0&&h<1?0:u,new Ca(u,d,h,e.opacity)}function $q(e,t,r,n){return arguments.length===1?jT(e):new Ca(e,t,r,n??1)}function Ca(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Wx(Ca,$q,wT(Iu,{brighter(e){return e=e==null?xh:Math.pow(xh,e),new Ca(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?yu:Math.pow(yu,e),new Ca(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new En(Sy(e>=240?e-240:e+120,i,n),Sy(e,i,n),Sy(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Ca(e2(this.h),kf(this.s),kf(this.l),bh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=bh(this.opacity);return`${e===1?"hsl(":"hsla("}${e2(this.h)}, ${kf(this.s)*100}%, ${kf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function e2(e){return e=(e||0)%360,e<0?e+360:e}function kf(e){return Math.max(0,Math.min(1,e||0))}function Sy(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Xx=e=>()=>e;function qq(e,t){return function(r){return e+r*t}}function Bq(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Gq(e){return(e=+e)==1?NT:function(t,r){return r-t?Bq(t,r,e):Xx(isNaN(t)?r:t)}}function NT(e,t){var r=t-e;return r?qq(e,r):Xx(isNaN(e)?t:e)}const t2=(function e(t){var r=Gq(t);function n(i,l){var u=r((i=Fv(i)).r,(l=Fv(l)).r),d=r(i.g,l.g),h=r(i.b,l.b),m=NT(i.opacity,l.opacity);return function(p){return i.r=u(p),i.g=d(p),i.b=h(p),i.opacity=m(p),i+""}}return n.gamma=e,n})(1);function Hq(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(l){for(i=0;i<r;++i)n[i]=e[i]*(1-l)+t[i]*l;return n}}function Fq(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Vq(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),l=new Array(r),u;for(u=0;u<n;++u)i[u]=Pl(e[u],t[u]);for(;u<r;++u)l[u]=t[u];return function(d){for(u=0;u<n;++u)l[u]=i[u](d);return l}}function Kq(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function wh(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Yq(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Pl(e[i],t[i]):n[i]=t[i];return function(l){for(i in r)n[i]=r[i](l);return n}}var Vv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ey=new RegExp(Vv.source,"g");function Wq(e){return function(){return e}}function Xq(e){return function(t){return e(t)+""}}function Zq(e,t){var r=Vv.lastIndex=Ey.lastIndex=0,n,i,l,u=-1,d=[],h=[];for(e=e+"",t=t+"";(n=Vv.exec(e))&&(i=Ey.exec(t));)(l=i.index)>r&&(l=t.slice(r,l),d[u]?d[u]+=l:d[++u]=l),(n=n[0])===(i=i[0])?d[u]?d[u]+=i:d[++u]=i:(d[++u]=null,h.push({i:u,x:wh(n,i)})),r=Ey.lastIndex;return r<t.length&&(l=t.slice(r),d[u]?d[u]+=l:d[++u]=l),d.length<2?h[0]?Xq(h[0].x):Wq(t):(t=h.length,function(m){for(var p=0,g;p<t;++p)d[(g=h[p]).i]=g.x(m);return d.join("")})}function Pl(e,t){var r=typeof t,n;return t==null||r==="boolean"?Xx(t):(r==="number"?wh:r==="string"?(n=xu(t))?(t=n,t2):Zq:t instanceof xu?t2:t instanceof Date?Kq:Fq(t)?Hq:Array.isArray(t)?Vq:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Yq:wh)(e,t)}function Zx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Qq(e,t){t===void 0&&(t=e,e=Pl);for(var r=0,n=t.length-1,i=t[0],l=new Array(n<0?0:n);r<n;)l[r]=e(i,i=t[++r]);return function(u){var d=Math.max(0,Math.min(n-1,Math.floor(u*=n)));return l[d](u-d)}}function Jq(e){return function(){return e}}function jh(e){return+e}var r2=[0,1];function fn(e){return e}function Kv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Jq(isNaN(t)?NaN:.5)}function eB(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function tB(e,t,r){var n=e[0],i=e[1],l=t[0],u=t[1];return i<n?(n=Kv(i,n),l=r(u,l)):(n=Kv(n,i),l=r(l,u)),function(d){return l(n(d))}}function rB(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),l=new Array(n),u=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<n;)i[u]=Kv(e[u],e[u+1]),l[u]=r(t[u],t[u+1]);return function(d){var h=Mu(e,d,1,n)-1;return l[h](i[h](d))}}function Lu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function bm(){var e=r2,t=r2,r=Pl,n,i,l,u=fn,d,h,m;function p(){var x=Math.min(e.length,t.length);return u!==fn&&(u=eB(e[0],e[x-1])),d=x>2?rB:tB,h=m=null,g}function g(x){return x==null||isNaN(x=+x)?l:(h||(h=d(e.map(n),t,r)))(n(u(x)))}return g.invert=function(x){return u(i((m||(m=d(t,e.map(n),wh)))(x)))},g.domain=function(x){return arguments.length?(e=Array.from(x,jh),p()):e.slice()},g.range=function(x){return arguments.length?(t=Array.from(x),p()):t.slice()},g.rangeRound=function(x){return t=Array.from(x),r=Zx,p()},g.clamp=function(x){return arguments.length?(u=x?!0:fn,p()):u!==fn},g.interpolate=function(x){return arguments.length?(r=x,p()):r},g.unknown=function(x){return arguments.length?(l=x,g):l},function(x,b){return n=x,i=b,p()}}function Qx(){return bm()(fn,fn)}function nB(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Nh(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Al(e){return e=Nh(Math.abs(e)),e?e[1]:NaN}function aB(e,t){return function(r,n){for(var i=r.length,l=[],u=0,d=e[0],h=0;i>0&&d>0&&(h+d+1>n&&(d=Math.max(1,n-h)),l.push(r.substring(i-=d,i+d)),!((h+=d+1)>n));)d=e[u=(u+1)%e.length];return l.reverse().join(t)}}function iB(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var sB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bu(e){if(!(t=sB.exec(e)))throw new Error("invalid format: "+e);var t;return new Jx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}bu.prototype=Jx.prototype;function Jx(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Jx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oB(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var _T;function lB(e,t){var r=Nh(e,t);if(!r)return e+"";var n=r[0],i=r[1],l=i-(_T=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,u=n.length;return l===u?n:l>u?n+new Array(l-u+1).join("0"):l>0?n.slice(0,l)+"."+n.slice(l):"0."+new Array(1-l).join("0")+Nh(e,Math.max(0,t+l-1))[0]}function n2(e,t){var r=Nh(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const a2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:nB,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>n2(e*100,t),r:n2,s:lB,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function i2(e){return e}var s2=Array.prototype.map,o2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function cB(e){var t=e.grouping===void 0||e.thousands===void 0?i2:aB(s2.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?i2:iB(s2.call(e.numerals,String)),u=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function m(g){g=bu(g);var x=g.fill,b=g.align,j=g.sign,N=g.symbol,_=g.zero,E=g.width,k=g.comma,A=g.precision,I=g.trim,R=g.type;R==="n"?(k=!0,R="g"):a2[R]||(A===void 0&&(A=12),I=!0,R="g"),(_||x==="0"&&b==="=")&&(_=!0,x="0",b="=");var C=N==="$"?r:N==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",P=N==="$"?n:/[%p]/.test(R)?u:"",Y=a2[R],oe=/[defgprs%]/.test(R);A=A===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function H($){var U=C,ce=P,G,V,D;if(R==="c")ce=Y($)+ce,$="";else{$=+$;var K=$<0||1/$<0;if($=isNaN($)?h:Y(Math.abs($),A),I&&($=oB($)),K&&+$==0&&j!=="+"&&(K=!1),U=(K?j==="("?j:d:j==="-"||j==="("?"":j)+U,ce=(R==="s"?o2[8+_T/3]:"")+ce+(K&&j==="("?")":""),oe){for(G=-1,V=$.length;++G<V;)if(D=$.charCodeAt(G),48>D||D>57){ce=(D===46?i+$.slice(G+1):$.slice(G))+ce,$=$.slice(0,G);break}}}k&&!_&&($=t($,1/0));var fe=U.length+$.length+ce.length,Ne=fe<E?new Array(E-fe+1).join(x):"";switch(k&&_&&($=t(Ne+$,Ne.length?E-ce.length:1/0),Ne=""),b){case"<":$=U+$+ce+Ne;break;case"=":$=U+Ne+$+ce;break;case"^":$=Ne.slice(0,fe=Ne.length>>1)+U+$+ce+Ne.slice(fe);break;default:$=Ne+U+$+ce;break}return l($)}return H.toString=function(){return g+""},H}function p(g,x){var b=m((g=bu(g),g.type="f",g)),j=Math.max(-8,Math.min(8,Math.floor(Al(x)/3)))*3,N=Math.pow(10,-j),_=o2[8+j/3];return function(E){return b(N*E)+_}}return{format:m,formatPrefix:p}}var Df,eb,ST;uB({thousands:",",grouping:[3],currency:["$",""]});function uB(e){return Df=cB(e),eb=Df.format,ST=Df.formatPrefix,Df}function dB(e){return Math.max(0,-Al(Math.abs(e)))}function fB(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Al(t)/3)))*3-Al(Math.abs(e)))}function hB(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Al(t)-Al(e))+1}function ET(e,t,r,n){var i=Gv(e,t,r),l;switch(n=bu(n??",f"),n.type){case"s":{var u=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(l=fB(i,u))&&(n.precision=l),ST(n,u)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(l=hB(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=l-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(l=dB(i))&&(n.precision=l-(n.type==="%")*2);break}}return eb(n)}function Es(e){var t=e.domain;return e.ticks=function(r){var n=t();return qv(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return ET(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,l=n.length-1,u=n[i],d=n[l],h,m,p=10;for(d<u&&(m=u,u=d,d=m,m=i,i=l,l=m);p-- >0;){if(m=Bv(u,d,r),m===h)return n[i]=u,n[l]=d,t(n);if(m>0)u=Math.floor(u/m)*m,d=Math.ceil(d/m)*m;else if(m<0)u=Math.ceil(u*m)/m,d=Math.floor(d*m)/m;else break;h=m}return e},e}function AT(){var e=Qx();return e.copy=function(){return Lu(e,AT())},fa.apply(e,arguments),Es(e)}function OT(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,jh),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return OT(e).unknown(t)},e=arguments.length?Array.from(e,jh):[0,1],Es(r)}function CT(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],l=e[n],u;return l<i&&(u=r,r=n,n=u,u=i,i=l,l=u),e[r]=t.floor(i),e[n]=t.ceil(l),e}function l2(e){return Math.log(e)}function c2(e){return Math.exp(e)}function mB(e){return-Math.log(-e)}function pB(e){return-Math.exp(-e)}function gB(e){return isFinite(e)?+("1e"+e):e<0?0:e}function yB(e){return e===10?gB:e===Math.E?Math.exp:t=>Math.pow(e,t)}function vB(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function u2(e){return(t,r)=>-e(-t,r)}function tb(e){const t=e(l2,c2),r=t.domain;let n=10,i,l;function u(){return i=vB(n),l=yB(n),r()[0]<0?(i=u2(i),l=u2(l),e(mB,pB)):e(l2,c2),t}return t.base=function(d){return arguments.length?(n=+d,u()):n},t.domain=function(d){return arguments.length?(r(d),u()):r()},t.ticks=d=>{const h=r();let m=h[0],p=h[h.length-1];const g=p<m;g&&([m,p]=[p,m]);let x=i(m),b=i(p),j,N;const _=d==null?10:+d;let E=[];if(!(n%1)&&b-x<_){if(x=Math.floor(x),b=Math.ceil(b),m>0){for(;x<=b;++x)for(j=1;j<n;++j)if(N=x<0?j/l(-x):j*l(x),!(N<m)){if(N>p)break;E.push(N)}}else for(;x<=b;++x)for(j=n-1;j>=1;--j)if(N=x>0?j/l(-x):j*l(x),!(N<m)){if(N>p)break;E.push(N)}E.length*2<_&&(E=qv(m,p,_))}else E=qv(x,b,Math.min(b-x,_)).map(l);return g?E.reverse():E},t.tickFormat=(d,h)=>{if(d==null&&(d=10),h==null&&(h=n===10?"s":","),typeof h!="function"&&(!(n%1)&&(h=bu(h)).precision==null&&(h.trim=!0),h=eb(h)),d===1/0)return h;const m=Math.max(1,n*d/t.ticks().length);return p=>{let g=p/l(Math.round(i(p)));return g*n<n-.5&&(g*=n),g<=m?h(p):""}},t.nice=()=>r(CT(r(),{floor:d=>l(Math.floor(i(d))),ceil:d=>l(Math.ceil(i(d)))})),t}function TT(){const e=tb(bm()).domain([1,10]);return e.copy=()=>Lu(e,TT()).base(e.base()),fa.apply(e,arguments),e}function d2(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function f2(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function rb(e){var t=1,r=e(d2(t),f2(t));return r.constant=function(n){return arguments.length?e(d2(t=+n),f2(t)):t},Es(r)}function kT(){var e=rb(bm());return e.copy=function(){return Lu(e,kT()).constant(e.constant())},fa.apply(e,arguments)}function h2(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function xB(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function bB(e){return e<0?-e*e:e*e}function nb(e){var t=e(fn,fn),r=1;function n(){return r===1?e(fn,fn):r===.5?e(xB,bB):e(h2(r),h2(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Es(t)}function ab(){var e=nb(bm());return e.copy=function(){return Lu(e,ab()).exponent(e.exponent())},fa.apply(e,arguments),e}function wB(){return ab.apply(null,arguments).exponent(.5)}function m2(e){return Math.sign(e)*e*e}function jB(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function DT(){var e=Qx(),t=[0,1],r=!1,n;function i(l){var u=jB(e(l));return isNaN(u)?n:r?Math.round(u):u}return i.invert=function(l){return e.invert(m2(l))},i.domain=function(l){return arguments.length?(e.domain(l),i):e.domain()},i.range=function(l){return arguments.length?(e.range((t=Array.from(l,jh)).map(m2)),i):t.slice()},i.rangeRound=function(l){return i.range(l).round(!0)},i.round=function(l){return arguments.length?(r=!!l,i):r},i.clamp=function(l){return arguments.length?(e.clamp(l),i):e.clamp()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.copy=function(){return DT(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},fa.apply(i,arguments),Es(i)}function RT(){var e=[],t=[],r=[],n;function i(){var u=0,d=Math.max(1,t.length);for(r=new Array(d-1);++u<d;)r[u-1]=Eq(e,u/d);return l}function l(u){return u==null||isNaN(u=+u)?n:t[Mu(r,u)]}return l.invertExtent=function(u){var d=t.indexOf(u);return d<0?[NaN,NaN]:[d>0?r[d-1]:e[0],d<r.length?r[d]:e[e.length-1]]},l.domain=function(u){if(!arguments.length)return e.slice();e=[];for(let d of u)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(bs),i()},l.range=function(u){return arguments.length?(t=Array.from(u),i()):t.slice()},l.unknown=function(u){return arguments.length?(n=u,l):n},l.quantiles=function(){return r.slice()},l.copy=function(){return RT().domain(e).range(t).unknown(n)},fa.apply(l,arguments)}function PT(){var e=0,t=1,r=1,n=[.5],i=[0,1],l;function u(h){return h!=null&&h<=h?i[Mu(n,h,0,r)]:l}function d(){var h=-1;for(n=new Array(r);++h<r;)n[h]=((h+1)*t-(h-r)*e)/(r+1);return u}return u.domain=function(h){return arguments.length?([e,t]=h,e=+e,t=+t,d()):[e,t]},u.range=function(h){return arguments.length?(r=(i=Array.from(h)).length-1,d()):i.slice()},u.invertExtent=function(h){var m=i.indexOf(h);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=r?[n[r-1],t]:[n[m-1],n[m]]},u.unknown=function(h){return arguments.length&&(l=h),u},u.thresholds=function(){return n.slice()},u.copy=function(){return PT().domain([e,t]).range(i).unknown(l)},fa.apply(Es(u),arguments)}function MT(){var e=[.5],t=[0,1],r,n=1;function i(l){return l!=null&&l<=l?t[Mu(e,l,0,n)]:r}return i.domain=function(l){return arguments.length?(e=Array.from(l),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(l){return arguments.length?(t=Array.from(l),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(l){var u=t.indexOf(l);return[e[u-1],e[u]]},i.unknown=function(l){return arguments.length?(r=l,i):r},i.copy=function(){return MT().domain(e).range(t).unknown(r)},fa.apply(i,arguments)}const Ay=new Date,Oy=new Date;function kr(e,t,r,n){function i(l){return e(l=arguments.length===0?new Date:new Date(+l)),l}return i.floor=l=>(e(l=new Date(+l)),l),i.ceil=l=>(e(l=new Date(l-1)),t(l,1),e(l),l),i.round=l=>{const u=i(l),d=i.ceil(l);return l-u<d-l?u:d},i.offset=(l,u)=>(t(l=new Date(+l),u==null?1:Math.floor(u)),l),i.range=(l,u,d)=>{const h=[];if(l=i.ceil(l),d=d==null?1:Math.floor(d),!(l<u)||!(d>0))return h;let m;do h.push(m=new Date(+l)),t(l,d),e(l);while(m<l&&l<u);return h},i.filter=l=>kr(u=>{if(u>=u)for(;e(u),!l(u);)u.setTime(u-1)},(u,d)=>{if(u>=u)if(d<0)for(;++d<=0;)for(;t(u,-1),!l(u););else for(;--d>=0;)for(;t(u,1),!l(u););}),r&&(i.count=(l,u)=>(Ay.setTime(+l),Oy.setTime(+u),e(Ay),e(Oy),Math.floor(r(Ay,Oy))),i.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?i.filter(n?u=>n(u)%l===0:u=>i.count(0,u)%l===0):i)),i}const _h=kr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);_h.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?kr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):_h);_h.range;const gi=1e3,oa=gi*60,yi=oa*60,Ni=yi*24,ib=Ni*7,p2=Ni*30,Cy=Ni*365,ro=kr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*gi)},(e,t)=>(t-e)/gi,e=>e.getUTCSeconds());ro.range;const sb=kr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*gi)},(e,t)=>{e.setTime(+e+t*oa)},(e,t)=>(t-e)/oa,e=>e.getMinutes());sb.range;const ob=kr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*oa)},(e,t)=>(t-e)/oa,e=>e.getUTCMinutes());ob.range;const lb=kr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*gi-e.getMinutes()*oa)},(e,t)=>{e.setTime(+e+t*yi)},(e,t)=>(t-e)/yi,e=>e.getHours());lb.range;const cb=kr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*yi)},(e,t)=>(t-e)/yi,e=>e.getUTCHours());cb.range;const zu=kr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*oa)/Ni,e=>e.getDate()-1);zu.range;const wm=kr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ni,e=>e.getUTCDate()-1);wm.range;const IT=kr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ni,e=>Math.floor(e/Ni));IT.range;function jo(e){return kr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*oa)/ib)}const jm=jo(0),Sh=jo(1),NB=jo(2),_B=jo(3),Ol=jo(4),SB=jo(5),EB=jo(6);jm.range;Sh.range;NB.range;_B.range;Ol.range;SB.range;EB.range;function No(e){return kr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/ib)}const Nm=No(0),Eh=No(1),AB=No(2),OB=No(3),Cl=No(4),CB=No(5),TB=No(6);Nm.range;Eh.range;AB.range;OB.range;Cl.range;CB.range;TB.range;const ub=kr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ub.range;const db=kr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());db.range;const _i=kr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());_i.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:kr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});_i.range;const Si=kr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Si.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:kr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Si.range;function LT(e,t,r,n,i,l){const u=[[ro,1,gi],[ro,5,5*gi],[ro,15,15*gi],[ro,30,30*gi],[l,1,oa],[l,5,5*oa],[l,15,15*oa],[l,30,30*oa],[i,1,yi],[i,3,3*yi],[i,6,6*yi],[i,12,12*yi],[n,1,Ni],[n,2,2*Ni],[r,1,ib],[t,1,p2],[t,3,3*p2],[e,1,Cy]];function d(m,p,g){const x=p<m;x&&([m,p]=[p,m]);const b=g&&typeof g.range=="function"?g:h(m,p,g),j=b?b.range(m,+p+1):[];return x?j.reverse():j}function h(m,p,g){const x=Math.abs(p-m)/g,b=Vx(([,,_])=>_).right(u,x);if(b===u.length)return e.every(Gv(m/Cy,p/Cy,g));if(b===0)return _h.every(Math.max(Gv(m,p,g),1));const[j,N]=u[x/u[b-1][2]<u[b][2]/x?b-1:b];return j.every(N)}return[d,h]}const[kB,DB]=LT(Si,db,Nm,IT,cb,ob),[RB,PB]=LT(_i,ub,jm,zu,lb,sb);function Ty(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ky(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Bc(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function MB(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,l=e.days,u=e.shortDays,d=e.months,h=e.shortMonths,m=Gc(i),p=Hc(i),g=Gc(l),x=Hc(l),b=Gc(u),j=Hc(u),N=Gc(d),_=Hc(d),E=Gc(h),k=Hc(h),A={a:K,A:fe,b:Ne,B:_e,c:null,d:w2,e:w2,f:a7,g:m7,G:g7,H:t7,I:r7,j:n7,L:zT,m:i7,M:s7,p:L,q:W,Q:_2,s:S2,S:o7,u:l7,U:c7,V:u7,w:d7,W:f7,x:null,X:null,y:h7,Y:p7,Z:y7,"%":N2},I={a:ve,A:be,b:Te,B:Ee,c:null,d:j2,e:j2,f:w7,g:k7,G:R7,H:v7,I:x7,j:b7,L:$T,m:j7,M:N7,p:Ce,q:at,Q:_2,s:S2,S:_7,u:S7,U:E7,V:A7,w:O7,W:C7,x:null,X:null,y:T7,Y:D7,Z:P7,"%":N2},R={a:H,A:$,b:U,B:ce,c:G,d:x2,e:x2,f:ZB,g:v2,G:y2,H:b2,I:b2,j:KB,L:XB,m:VB,M:YB,p:oe,q:FB,Q:JB,s:e7,S:WB,u:$B,U:qB,V:BB,w:UB,W:GB,x:V,X:D,y:v2,Y:y2,Z:HB,"%":QB};A.x=C(r,A),A.X=C(n,A),A.c=C(t,A),I.x=C(r,I),I.X=C(n,I),I.c=C(t,I);function C(z,pe){return function(ue){var re=[],Je=-1,Re=0,Ze=z.length,Ke,X,Mt;for(ue instanceof Date||(ue=new Date(+ue));++Je<Ze;)z.charCodeAt(Je)===37&&(re.push(z.slice(Re,Je)),(X=g2[Ke=z.charAt(++Je)])!=null?Ke=z.charAt(++Je):X=Ke==="e"?" ":"0",(Mt=pe[Ke])&&(Ke=Mt(ue,X)),re.push(Ke),Re=Je+1);return re.push(z.slice(Re,Je)),re.join("")}}function P(z,pe){return function(ue){var re=Bc(1900,void 0,1),Je=Y(re,z,ue+="",0),Re,Ze;if(Je!=ue.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(pe&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(Re=ky(Bc(re.y,0,1)),Ze=Re.getUTCDay(),Re=Ze>4||Ze===0?Eh.ceil(Re):Eh(Re),Re=wm.offset(Re,(re.V-1)*7),re.y=Re.getUTCFullYear(),re.m=Re.getUTCMonth(),re.d=Re.getUTCDate()+(re.w+6)%7):(Re=Ty(Bc(re.y,0,1)),Ze=Re.getDay(),Re=Ze>4||Ze===0?Sh.ceil(Re):Sh(Re),Re=zu.offset(Re,(re.V-1)*7),re.y=Re.getFullYear(),re.m=Re.getMonth(),re.d=Re.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),Ze="Z"in re?ky(Bc(re.y,0,1)).getUTCDay():Ty(Bc(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(Ze+5)%7:re.w+re.U*7-(Ze+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,ky(re)):Ty(re)}}function Y(z,pe,ue,re){for(var Je=0,Re=pe.length,Ze=ue.length,Ke,X;Je<Re;){if(re>=Ze)return-1;if(Ke=pe.charCodeAt(Je++),Ke===37){if(Ke=pe.charAt(Je++),X=R[Ke in g2?pe.charAt(Je++):Ke],!X||(re=X(z,ue,re))<0)return-1}else if(Ke!=ue.charCodeAt(re++))return-1}return re}function oe(z,pe,ue){var re=m.exec(pe.slice(ue));return re?(z.p=p.get(re[0].toLowerCase()),ue+re[0].length):-1}function H(z,pe,ue){var re=b.exec(pe.slice(ue));return re?(z.w=j.get(re[0].toLowerCase()),ue+re[0].length):-1}function $(z,pe,ue){var re=g.exec(pe.slice(ue));return re?(z.w=x.get(re[0].toLowerCase()),ue+re[0].length):-1}function U(z,pe,ue){var re=E.exec(pe.slice(ue));return re?(z.m=k.get(re[0].toLowerCase()),ue+re[0].length):-1}function ce(z,pe,ue){var re=N.exec(pe.slice(ue));return re?(z.m=_.get(re[0].toLowerCase()),ue+re[0].length):-1}function G(z,pe,ue){return Y(z,t,pe,ue)}function V(z,pe,ue){return Y(z,r,pe,ue)}function D(z,pe,ue){return Y(z,n,pe,ue)}function K(z){return u[z.getDay()]}function fe(z){return l[z.getDay()]}function Ne(z){return h[z.getMonth()]}function _e(z){return d[z.getMonth()]}function L(z){return i[+(z.getHours()>=12)]}function W(z){return 1+~~(z.getMonth()/3)}function ve(z){return u[z.getUTCDay()]}function be(z){return l[z.getUTCDay()]}function Te(z){return h[z.getUTCMonth()]}function Ee(z){return d[z.getUTCMonth()]}function Ce(z){return i[+(z.getUTCHours()>=12)]}function at(z){return 1+~~(z.getUTCMonth()/3)}return{format:function(z){var pe=C(z+="",A);return pe.toString=function(){return z},pe},parse:function(z){var pe=P(z+="",!1);return pe.toString=function(){return z},pe},utcFormat:function(z){var pe=C(z+="",I);return pe.toString=function(){return z},pe},utcParse:function(z){var pe=P(z+="",!0);return pe.toString=function(){return z},pe}}}var g2={"-":"",_:" ",0:"0"},Br=/^\s*\d+/,IB=/^%/,LB=/[\\^$*+?|[\]().{}]/g;function gt(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",l=i.length;return n+(l<r?new Array(r-l+1).join(t)+i:i)}function zB(e){return e.replace(LB,"\\$&")}function Gc(e){return new RegExp("^(?:"+e.map(zB).join("|")+")","i")}function Hc(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function UB(e,t,r){var n=Br.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function $B(e,t,r){var n=Br.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function qB(e,t,r){var n=Br.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function BB(e,t,r){var n=Br.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function GB(e,t,r){var n=Br.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function y2(e,t,r){var n=Br.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function v2(e,t,r){var n=Br.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function HB(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function FB(e,t,r){var n=Br.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function VB(e,t,r){var n=Br.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function x2(e,t,r){var n=Br.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function KB(e,t,r){var n=Br.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function b2(e,t,r){var n=Br.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function YB(e,t,r){var n=Br.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function WB(e,t,r){var n=Br.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function XB(e,t,r){var n=Br.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function ZB(e,t,r){var n=Br.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function QB(e,t,r){var n=IB.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function JB(e,t,r){var n=Br.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function e7(e,t,r){var n=Br.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function w2(e,t){return gt(e.getDate(),t,2)}function t7(e,t){return gt(e.getHours(),t,2)}function r7(e,t){return gt(e.getHours()%12||12,t,2)}function n7(e,t){return gt(1+zu.count(_i(e),e),t,3)}function zT(e,t){return gt(e.getMilliseconds(),t,3)}function a7(e,t){return zT(e,t)+"000"}function i7(e,t){return gt(e.getMonth()+1,t,2)}function s7(e,t){return gt(e.getMinutes(),t,2)}function o7(e,t){return gt(e.getSeconds(),t,2)}function l7(e){var t=e.getDay();return t===0?7:t}function c7(e,t){return gt(jm.count(_i(e)-1,e),t,2)}function UT(e){var t=e.getDay();return t>=4||t===0?Ol(e):Ol.ceil(e)}function u7(e,t){return e=UT(e),gt(Ol.count(_i(e),e)+(_i(e).getDay()===4),t,2)}function d7(e){return e.getDay()}function f7(e,t){return gt(Sh.count(_i(e)-1,e),t,2)}function h7(e,t){return gt(e.getFullYear()%100,t,2)}function m7(e,t){return e=UT(e),gt(e.getFullYear()%100,t,2)}function p7(e,t){return gt(e.getFullYear()%1e4,t,4)}function g7(e,t){var r=e.getDay();return e=r>=4||r===0?Ol(e):Ol.ceil(e),gt(e.getFullYear()%1e4,t,4)}function y7(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+gt(t/60|0,"0",2)+gt(t%60,"0",2)}function j2(e,t){return gt(e.getUTCDate(),t,2)}function v7(e,t){return gt(e.getUTCHours(),t,2)}function x7(e,t){return gt(e.getUTCHours()%12||12,t,2)}function b7(e,t){return gt(1+wm.count(Si(e),e),t,3)}function $T(e,t){return gt(e.getUTCMilliseconds(),t,3)}function w7(e,t){return $T(e,t)+"000"}function j7(e,t){return gt(e.getUTCMonth()+1,t,2)}function N7(e,t){return gt(e.getUTCMinutes(),t,2)}function _7(e,t){return gt(e.getUTCSeconds(),t,2)}function S7(e){var t=e.getUTCDay();return t===0?7:t}function E7(e,t){return gt(Nm.count(Si(e)-1,e),t,2)}function qT(e){var t=e.getUTCDay();return t>=4||t===0?Cl(e):Cl.ceil(e)}function A7(e,t){return e=qT(e),gt(Cl.count(Si(e),e)+(Si(e).getUTCDay()===4),t,2)}function O7(e){return e.getUTCDay()}function C7(e,t){return gt(Eh.count(Si(e)-1,e),t,2)}function T7(e,t){return gt(e.getUTCFullYear()%100,t,2)}function k7(e,t){return e=qT(e),gt(e.getUTCFullYear()%100,t,2)}function D7(e,t){return gt(e.getUTCFullYear()%1e4,t,4)}function R7(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Cl(e):Cl.ceil(e),gt(e.getUTCFullYear()%1e4,t,4)}function P7(){return"+0000"}function N2(){return"%"}function _2(e){return+e}function S2(e){return Math.floor(+e/1e3)}var cl,BT,GT;M7({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function M7(e){return cl=MB(e),BT=cl.format,cl.parse,GT=cl.utcFormat,cl.utcParse,cl}function I7(e){return new Date(e)}function L7(e){return e instanceof Date?+e:+new Date(+e)}function fb(e,t,r,n,i,l,u,d,h,m){var p=Qx(),g=p.invert,x=p.domain,b=m(".%L"),j=m(":%S"),N=m("%I:%M"),_=m("%I %p"),E=m("%a %d"),k=m("%b %d"),A=m("%B"),I=m("%Y");function R(C){return(h(C)<C?b:d(C)<C?j:u(C)<C?N:l(C)<C?_:n(C)<C?i(C)<C?E:k:r(C)<C?A:I)(C)}return p.invert=function(C){return new Date(g(C))},p.domain=function(C){return arguments.length?x(Array.from(C,L7)):x().map(I7)},p.ticks=function(C){var P=x();return e(P[0],P[P.length-1],C??10)},p.tickFormat=function(C,P){return P==null?R:m(P)},p.nice=function(C){var P=x();return(!C||typeof C.range!="function")&&(C=t(P[0],P[P.length-1],C??10)),C?x(CT(P,C)):p},p.copy=function(){return Lu(p,fb(e,t,r,n,i,l,u,d,h,m))},p}function z7(){return fa.apply(fb(RB,PB,_i,ub,jm,zu,lb,sb,ro,BT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function U7(){return fa.apply(fb(kB,DB,Si,db,Nm,wm,cb,ob,ro,GT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function _m(){var e=0,t=1,r,n,i,l,u=fn,d=!1,h;function m(g){return g==null||isNaN(g=+g)?h:u(i===0?.5:(g=(l(g)-r)*i,d?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([e,t]=g,r=l(e=+e),n=l(t=+t),i=r===n?0:1/(n-r),m):[e,t]},m.clamp=function(g){return arguments.length?(d=!!g,m):d},m.interpolator=function(g){return arguments.length?(u=g,m):u};function p(g){return function(x){var b,j;return arguments.length?([b,j]=x,u=g(b,j),m):[u(0),u(1)]}}return m.range=p(Pl),m.rangeRound=p(Zx),m.unknown=function(g){return arguments.length?(h=g,m):h},function(g){return l=g,r=g(e),n=g(t),i=r===n?0:1/(n-r),m}}function As(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function HT(){var e=Es(_m()(fn));return e.copy=function(){return As(e,HT())},ki.apply(e,arguments)}function FT(){var e=tb(_m()).domain([1,10]);return e.copy=function(){return As(e,FT()).base(e.base())},ki.apply(e,arguments)}function VT(){var e=rb(_m());return e.copy=function(){return As(e,VT()).constant(e.constant())},ki.apply(e,arguments)}function hb(){var e=nb(_m());return e.copy=function(){return As(e,hb()).exponent(e.exponent())},ki.apply(e,arguments)}function $7(){return hb.apply(null,arguments).exponent(.5)}function KT(){var e=[],t=fn;function r(n){if(n!=null&&!isNaN(n=+n))return t((Mu(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(bs),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,l)=>Sq(e,l/n))},r.copy=function(){return KT(t).domain(e)},ki.apply(r,arguments)}function Sm(){var e=0,t=.5,r=1,n=1,i,l,u,d,h,m=fn,p,g=!1,x;function b(N){return isNaN(N=+N)?x:(N=.5+((N=+p(N))-l)*(n*N<n*l?d:h),m(g?Math.max(0,Math.min(1,N)):N))}b.domain=function(N){return arguments.length?([e,t,r]=N,i=p(e=+e),l=p(t=+t),u=p(r=+r),d=i===l?0:.5/(l-i),h=l===u?0:.5/(u-l),n=l<i?-1:1,b):[e,t,r]},b.clamp=function(N){return arguments.length?(g=!!N,b):g},b.interpolator=function(N){return arguments.length?(m=N,b):m};function j(N){return function(_){var E,k,A;return arguments.length?([E,k,A]=_,m=Qq(N,[E,k,A]),b):[m(0),m(.5),m(1)]}}return b.range=j(Pl),b.rangeRound=j(Zx),b.unknown=function(N){return arguments.length?(x=N,b):x},function(N){return p=N,i=N(e),l=N(t),u=N(r),d=i===l?0:.5/(l-i),h=l===u?0:.5/(u-l),n=l<i?-1:1,b}}function YT(){var e=Es(Sm()(fn));return e.copy=function(){return As(e,YT())},ki.apply(e,arguments)}function WT(){var e=tb(Sm()).domain([.1,1,10]);return e.copy=function(){return As(e,WT()).base(e.base())},ki.apply(e,arguments)}function XT(){var e=rb(Sm());return e.copy=function(){return As(e,XT()).constant(e.constant())},ki.apply(e,arguments)}function mb(){var e=nb(Sm());return e.copy=function(){return As(e,mb()).exponent(e.exponent())},ki.apply(e,arguments)}function q7(){return mb.apply(null,arguments).exponent(.5)}const Yc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Yx,scaleDiverging:YT,scaleDivergingLog:WT,scaleDivergingPow:mb,scaleDivergingSqrt:q7,scaleDivergingSymlog:XT,scaleIdentity:OT,scaleImplicit:Hv,scaleLinear:AT,scaleLog:TT,scaleOrdinal:Kx,scalePoint:Oq,scalePow:ab,scaleQuantile:RT,scaleQuantize:PT,scaleRadial:DT,scaleSequential:HT,scaleSequentialLog:FT,scaleSequentialPow:hb,scaleSequentialQuantile:KT,scaleSequentialSqrt:$7,scaleSequentialSymlog:VT,scaleSqrt:wB,scaleSymlog:kT,scaleThreshold:MT,scaleTime:z7,scaleUtc:U7,tickFormat:ET},Symbol.toStringTag,{value:"Module"}));var Os=e=>e.chartData,pb=ae([Os],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),gb=(e,t,r,n)=>n?pb(e):Os(e);function Ns(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(dr(t)&&dr(r))return!0}return!1}function E2(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function ZT(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,l;if(dr(r))i=r;else if(typeof r=="function")return;if(dr(n))l=n;else if(typeof n=="function")return;var u=[i,l];if(Ns(u))return u}}function B7(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Ns(n))return E2(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,l]=e,u,d;if(i==="auto")t!=null&&(u=Math.min(...t));else if($e(i))u=i;else if(typeof i=="function")try{t!=null&&(u=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&eE.test(i)){var h=eE.exec(i);if(h==null||t==null)u=void 0;else{var m=+h[1];u=t[0]-m}}else u=t==null?void 0:t[0];if(l==="auto")t!=null&&(d=Math.max(...t));else if($e(l))d=l;else if(typeof l=="function")try{t!=null&&(d=l(t==null?void 0:t[1]))}catch{}else if(typeof l=="string"&&tE.test(l)){var p=tE.exec(l);if(p==null||t==null)d=void 0;else{var g=+p[1];d=t[1]+g}}else d=t==null?void 0:t[1];var x=[u,d];if(Ns(x))return t==null?x:E2(x,t,r)}}}var Ml=1e9,G7={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},vb,Zt=!0,da="[DecimalError] ",uo=da+"Invalid argument: ",yb=da+"Exponent out of range: ",Il=Math.floor,Zs=Math.pow,H7=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,qn,zr=1e7,Vt=7,QT=9007199254740991,Ah=Il(QT/Vt),Pe={};Pe.absoluteValue=Pe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Pe.comparedTo=Pe.cmp=function(e){var t,r,n,i,l=this;if(e=new l.constructor(e),l.s!==e.s)return l.s||-e.s;if(l.e!==e.e)return l.e>e.e^l.s<0?1:-1;for(n=l.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(l.d[t]!==e.d[t])return l.d[t]>e.d[t]^l.s<0?1:-1;return n===i?0:n>i^l.s<0?1:-1};Pe.decimalPlaces=Pe.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Vt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Pe.dividedBy=Pe.div=function(e){return xi(this,new this.constructor(e))};Pe.dividedToIntegerBy=Pe.idiv=function(e){var t=this,r=t.constructor;return Lt(xi(t,new r(e),0,1),r.precision)};Pe.equals=Pe.eq=function(e){return!this.cmp(e)};Pe.exponent=function(){return jr(this)};Pe.greaterThan=Pe.gt=function(e){return this.cmp(e)>0};Pe.greaterThanOrEqualTo=Pe.gte=function(e){return this.cmp(e)>=0};Pe.isInteger=Pe.isint=function(){return this.e>this.d.length-2};Pe.isNegative=Pe.isneg=function(){return this.s<0};Pe.isPositive=Pe.ispos=function(){return this.s>0};Pe.isZero=function(){return this.s===0};Pe.lessThan=Pe.lt=function(e){return this.cmp(e)<0};Pe.lessThanOrEqualTo=Pe.lte=function(e){return this.cmp(e)<1};Pe.logarithm=Pe.log=function(e){var t,r=this,n=r.constructor,i=n.precision,l=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(qn))throw Error(da+"NaN");if(r.s<1)throw Error(da+(r.s?"NaN":"-Infinity"));return r.eq(qn)?new n(0):(Zt=!1,t=xi(wu(r,l),wu(e,l),l),Zt=!0,Lt(t,i))};Pe.minus=Pe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?tk(t,e):JT(t,(e.s=-e.s,e))};Pe.modulo=Pe.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(da+"NaN");return r.s?(Zt=!1,t=xi(r,e,0,1).times(e),Zt=!0,r.minus(t)):Lt(new n(r),i)};Pe.naturalExponential=Pe.exp=function(){return ek(this)};Pe.naturalLogarithm=Pe.ln=function(){return wu(this)};Pe.negated=Pe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Pe.plus=Pe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?JT(t,e):tk(t,(e.s=-e.s,e))};Pe.precision=Pe.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(uo+e);if(t=jr(i)+1,n=i.d.length-1,r=n*Vt+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Pe.squareRoot=Pe.sqrt=function(){var e,t,r,n,i,l,u,d=this,h=d.constructor;if(d.s<1){if(!d.s)return new h(0);throw Error(da+"NaN")}for(e=jr(d),Zt=!1,i=Math.sqrt(+d),i==0||i==1/0?(t=qa(d.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Il((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new h(t)):n=new h(i.toString()),r=h.precision,i=u=r+3;;)if(l=n,n=l.plus(xi(d,l,u+2)).times(.5),qa(l.d).slice(0,u)===(t=qa(n.d)).slice(0,u)){if(t=t.slice(u-3,u+1),i==u&&t=="4999"){if(Lt(l,r+1,0),l.times(l).eq(d)){n=l;break}}else if(t!="9999")break;u+=4}return Zt=!0,Lt(n,r)};Pe.times=Pe.mul=function(e){var t,r,n,i,l,u,d,h,m,p=this,g=p.constructor,x=p.d,b=(e=new g(e)).d;if(!p.s||!e.s)return new g(0);for(e.s*=p.s,r=p.e+e.e,h=x.length,m=b.length,h<m&&(l=x,x=b,b=l,u=h,h=m,m=u),l=[],u=h+m,n=u;n--;)l.push(0);for(n=m;--n>=0;){for(t=0,i=h+n;i>n;)d=l[i]+b[n]*x[i-n-1]+t,l[i--]=d%zr|0,t=d/zr|0;l[i]=(l[i]+t)%zr|0}for(;!l[--u];)l.pop();return t?++r:l.shift(),e.d=l,e.e=r,Zt?Lt(e,g.precision):e};Pe.toDecimalPlaces=Pe.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Va(e,0,Ml),t===void 0?t=n.rounding:Va(t,0,8),Lt(r,e+jr(r)+1,t))};Pe.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=go(n,!0):(Va(e,0,Ml),t===void 0?t=i.rounding:Va(t,0,8),n=Lt(new i(n),e+1,t),r=go(n,!0,e+1)),r};Pe.toFixed=function(e,t){var r,n,i=this,l=i.constructor;return e===void 0?go(i):(Va(e,0,Ml),t===void 0?t=l.rounding:Va(t,0,8),n=Lt(new l(i),e+jr(i)+1,t),r=go(n.abs(),!1,e+jr(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Pe.toInteger=Pe.toint=function(){var e=this,t=e.constructor;return Lt(new t(e),jr(e)+1,t.rounding)};Pe.toNumber=function(){return+this};Pe.toPower=Pe.pow=function(e){var t,r,n,i,l,u,d=this,h=d.constructor,m=12,p=+(e=new h(e));if(!e.s)return new h(qn);if(d=new h(d),!d.s){if(e.s<1)throw Error(da+"Infinity");return d}if(d.eq(qn))return d;if(n=h.precision,e.eq(qn))return Lt(d,n);if(t=e.e,r=e.d.length-1,u=t>=r,l=d.s,u){if((r=p<0?-p:p)<=QT){for(i=new h(qn),t=Math.ceil(n/Vt+4),Zt=!1;r%2&&(i=i.times(d),O2(i.d,t)),r=Il(r/2),r!==0;)d=d.times(d),O2(d.d,t);return Zt=!0,e.s<0?new h(qn).div(i):Lt(i,n)}}else if(l<0)throw Error(da+"NaN");return l=l<0&&e.d[Math.max(t,r)]&1?-1:1,d.s=1,Zt=!1,i=e.times(wu(d,n+m)),Zt=!0,i=ek(i),i.s=l,i};Pe.toPrecision=function(e,t){var r,n,i=this,l=i.constructor;return e===void 0?(r=jr(i),n=go(i,r<=l.toExpNeg||r>=l.toExpPos)):(Va(e,1,Ml),t===void 0?t=l.rounding:Va(t,0,8),i=Lt(new l(i),e,t),r=jr(i),n=go(i,e<=r||r<=l.toExpNeg,e)),n};Pe.toSignificantDigits=Pe.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Va(e,1,Ml),t===void 0?t=n.rounding:Va(t,0,8)),Lt(new n(r),e,t)};Pe.toString=Pe.valueOf=Pe.val=Pe.toJSON=Pe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=jr(e),r=e.constructor;return go(e,t<=r.toExpNeg||t>=r.toExpPos)};function JT(e,t){var r,n,i,l,u,d,h,m,p=e.constructor,g=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),Zt?Lt(t,g):t;if(h=e.d,m=t.d,u=e.e,i=t.e,h=h.slice(),l=u-i,l){for(l<0?(n=h,l=-l,d=m.length):(n=m,i=u,d=h.length),u=Math.ceil(g/Vt),d=u>d?u+1:d+1,l>d&&(l=d,n.length=1),n.reverse();l--;)n.push(0);n.reverse()}for(d=h.length,l=m.length,d-l<0&&(l=d,n=m,m=h,h=n),r=0;l;)r=(h[--l]=h[l]+m[l]+r)/zr|0,h[l]%=zr;for(r&&(h.unshift(r),++i),d=h.length;h[--d]==0;)h.pop();return t.d=h,t.e=i,Zt?Lt(t,g):t}function Va(e,t,r){if(e!==~~e||e<t||e>r)throw Error(uo+e)}function qa(e){var t,r,n,i=e.length-1,l="",u=e[0];if(i>0){for(l+=u,t=1;t<i;t++)n=e[t]+"",r=Vt-n.length,r&&(l+=ps(r)),l+=n;u=e[t],n=u+"",r=Vt-n.length,r&&(l+=ps(r))}else if(u===0)return"0";for(;u%10===0;)u/=10;return l+u}var xi=(function(){function e(n,i){var l,u=0,d=n.length;for(n=n.slice();d--;)l=n[d]*i+u,n[d]=l%zr|0,u=l/zr|0;return u&&n.unshift(u),n}function t(n,i,l,u){var d,h;if(l!=u)h=l>u?1:-1;else for(d=h=0;d<l;d++)if(n[d]!=i[d]){h=n[d]>i[d]?1:-1;break}return h}function r(n,i,l){for(var u=0;l--;)n[l]-=u,u=n[l]<i[l]?1:0,n[l]=u*zr+n[l]-i[l];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,l,u){var d,h,m,p,g,x,b,j,N,_,E,k,A,I,R,C,P,Y,oe=n.constructor,H=n.s==i.s?1:-1,$=n.d,U=i.d;if(!n.s)return new oe(n);if(!i.s)throw Error(da+"Division by zero");for(h=n.e-i.e,P=U.length,R=$.length,b=new oe(H),j=b.d=[],m=0;U[m]==($[m]||0);)++m;if(U[m]>($[m]||0)&&--h,l==null?k=l=oe.precision:u?k=l+(jr(n)-jr(i))+1:k=l,k<0)return new oe(0);if(k=k/Vt+2|0,m=0,P==1)for(p=0,U=U[0],k++;(m<R||p)&&k--;m++)A=p*zr+($[m]||0),j[m]=A/U|0,p=A%U|0;else{for(p=zr/(U[0]+1)|0,p>1&&(U=e(U,p),$=e($,p),P=U.length,R=$.length),I=P,N=$.slice(0,P),_=N.length;_<P;)N[_++]=0;Y=U.slice(),Y.unshift(0),C=U[0],U[1]>=zr/2&&++C;do p=0,d=t(U,N,P,_),d<0?(E=N[0],P!=_&&(E=E*zr+(N[1]||0)),p=E/C|0,p>1?(p>=zr&&(p=zr-1),g=e(U,p),x=g.length,_=N.length,d=t(g,N,x,_),d==1&&(p--,r(g,P<x?Y:U,x))):(p==0&&(d=p=1),g=U.slice()),x=g.length,x<_&&g.unshift(0),r(N,g,_),d==-1&&(_=N.length,d=t(U,N,P,_),d<1&&(p++,r(N,P<_?Y:U,_))),_=N.length):d===0&&(p++,N=[0]),j[m++]=p,d&&N[0]?N[_++]=$[I]||0:(N=[$[I]],_=1);while((I++<R||N[0]!==void 0)&&k--)}return j[0]||j.shift(),b.e=h,Lt(b,u?l+jr(b)+1:l)}})();function ek(e,t){var r,n,i,l,u,d,h=0,m=0,p=e.constructor,g=p.precision;if(jr(e)>16)throw Error(yb+jr(e));if(!e.s)return new p(qn);for(Zt=!1,d=g,u=new p(.03125);e.abs().gte(.1);)e=e.times(u),m+=5;for(n=Math.log(Zs(2,m))/Math.LN10*2+5|0,d+=n,r=i=l=new p(qn),p.precision=d;;){if(i=Lt(i.times(e),d),r=r.times(++h),u=l.plus(xi(i,r,d)),qa(u.d).slice(0,d)===qa(l.d).slice(0,d)){for(;m--;)l=Lt(l.times(l),d);return p.precision=g,t==null?(Zt=!0,Lt(l,g)):l}l=u}}function jr(e){for(var t=e.e*Vt,r=e.d[0];r>=10;r/=10)t++;return t}function Dy(e,t,r){if(t>e.LN10.sd())throw Zt=!0,r&&(e.precision=r),Error(da+"LN10 precision limit exceeded");return Lt(new e(e.LN10),t)}function ps(e){for(var t="";e--;)t+="0";return t}function wu(e,t){var r,n,i,l,u,d,h,m,p,g=1,x=10,b=e,j=b.d,N=b.constructor,_=N.precision;if(b.s<1)throw Error(da+(b.s?"NaN":"-Infinity"));if(b.eq(qn))return new N(0);if(t==null?(Zt=!1,m=_):m=t,b.eq(10))return t==null&&(Zt=!0),Dy(N,m);if(m+=x,N.precision=m,r=qa(j),n=r.charAt(0),l=jr(b),Math.abs(l)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)b=b.times(e),r=qa(b.d),n=r.charAt(0),g++;l=jr(b),n>1?(b=new N("0."+r),l++):b=new N(n+"."+r.slice(1))}else return h=Dy(N,m+2,_).times(l+""),b=wu(new N(n+"."+r.slice(1)),m-x).plus(h),N.precision=_,t==null?(Zt=!0,Lt(b,_)):b;for(d=u=b=xi(b.minus(qn),b.plus(qn),m),p=Lt(b.times(b),m),i=3;;){if(u=Lt(u.times(p),m),h=d.plus(xi(u,new N(i),m)),qa(h.d).slice(0,m)===qa(d.d).slice(0,m))return d=d.times(2),l!==0&&(d=d.plus(Dy(N,m+2,_).times(l+""))),d=xi(d,new N(g),m),N.precision=_,t==null?(Zt=!0,Lt(d,_)):d;d=h,i+=2}}function A2(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=Il(r/Vt),e.d=[],n=(r+1)%Vt,r<0&&(n+=Vt),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Vt;n<i;)e.d.push(+t.slice(n,n+=Vt));t=t.slice(n),n=Vt-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Zt&&(e.e>Ah||e.e<-Ah))throw Error(yb+r)}else e.s=0,e.e=0,e.d=[0];return e}function Lt(e,t,r){var n,i,l,u,d,h,m,p,g=e.d;for(u=1,l=g[0];l>=10;l/=10)u++;if(n=t-u,n<0)n+=Vt,i=t,m=g[p=0];else{if(p=Math.ceil((n+1)/Vt),l=g.length,p>=l)return e;for(m=l=g[p],u=1;l>=10;l/=10)u++;n%=Vt,i=n-Vt+u}if(r!==void 0&&(l=Zs(10,u-i-1),d=m/l%10|0,h=t<0||g[p+1]!==void 0||m%l,h=r<4?(d||h)&&(r==0||r==(e.s<0?3:2)):d>5||d==5&&(r==4||h||r==6&&(n>0?i>0?m/Zs(10,u-i):0:g[p-1])%10&1||r==(e.s<0?8:7))),t<1||!g[0])return h?(l=jr(e),g.length=1,t=t-l-1,g[0]=Zs(10,(Vt-t%Vt)%Vt),e.e=Il(-t/Vt)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(n==0?(g.length=p,l=1,p--):(g.length=p+1,l=Zs(10,Vt-n),g[p]=i>0?(m/Zs(10,u-i)%Zs(10,i)|0)*l:0),h)for(;;)if(p==0){(g[0]+=l)==zr&&(g[0]=1,++e.e);break}else{if(g[p]+=l,g[p]!=zr)break;g[p--]=0,l=1}for(n=g.length;g[--n]===0;)g.pop();if(Zt&&(e.e>Ah||e.e<-Ah))throw Error(yb+jr(e));return e}function tk(e,t){var r,n,i,l,u,d,h,m,p,g,x=e.constructor,b=x.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new x(e),Zt?Lt(t,b):t;if(h=e.d,g=t.d,n=t.e,m=e.e,h=h.slice(),u=m-n,u){for(p=u<0,p?(r=h,u=-u,d=g.length):(r=g,n=m,d=h.length),i=Math.max(Math.ceil(b/Vt),d)+2,u>i&&(u=i,r.length=1),r.reverse(),i=u;i--;)r.push(0);r.reverse()}else{for(i=h.length,d=g.length,p=i<d,p&&(d=i),i=0;i<d;i++)if(h[i]!=g[i]){p=h[i]<g[i];break}u=0}for(p&&(r=h,h=g,g=r,t.s=-t.s),d=h.length,i=g.length-d;i>0;--i)h[d++]=0;for(i=g.length;i>u;){if(h[--i]<g[i]){for(l=i;l&&h[--l]===0;)h[l]=zr-1;--h[l],h[i]+=zr}h[i]-=g[i]}for(;h[--d]===0;)h.pop();for(;h[0]===0;h.shift())--n;return h[0]?(t.d=h,t.e=n,Zt?Lt(t,b):t):new x(0)}function go(e,t,r){var n,i=jr(e),l=qa(e.d),u=l.length;return t?(r&&(n=r-u)>0?l=l.charAt(0)+"."+l.slice(1)+ps(n):u>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(i<0?"e":"e+")+i):i<0?(l="0."+ps(-i-1)+l,r&&(n=r-u)>0&&(l+=ps(n))):i>=u?(l+=ps(i+1-u),r&&(n=r-i-1)>0&&(l=l+"."+ps(n))):((n=i+1)<u&&(l=l.slice(0,n)+"."+l.slice(n)),r&&(n=r-u)>0&&(i+1===u&&(l+="."),l+=ps(n))),e.s<0?"-"+l:l}function O2(e,t){if(e.length>t)return e.length=t,!0}function rk(e){var t,r,n;function i(l){var u=this;if(!(u instanceof i))return new i(l);if(u.constructor=i,l instanceof i){u.s=l.s,u.e=l.e,u.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(uo+l);if(l>0)u.s=1;else if(l<0)l=-l,u.s=-1;else{u.s=0,u.e=0,u.d=[0];return}if(l===~~l&&l<1e7){u.e=0,u.d=[l];return}return A2(u,l.toString())}else if(typeof l!="string")throw Error(uo+l);if(l.charCodeAt(0)===45?(l=l.slice(1),u.s=-1):u.s=1,H7.test(l))A2(u,l);else throw Error(uo+l)}if(i.prototype=Pe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=rk,i.config=i.set=F7,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function F7(e){if(!e||typeof e!="object")throw Error(da+"Object expected");var t,r,n,i=["precision",1,Ml,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(Il(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(uo+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(uo+r+": "+n);return this}var vb=rk(G7);qn=new vb(1);const At=vb;var V7=e=>e,nk={},ak=e=>e===nk,C2=e=>function t(){return arguments.length===0||arguments.length===1&&ak(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},ik=(e,t)=>e===1?t:C2(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var l=n.filter(u=>u!==nk).length;return l>=e?t(...n):ik(e-l,C2(function(){for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];var m=n.map(p=>ak(p)?d.shift():p);return t(...m,...d)}))}),K7=e=>ik(e.length,e),Yv=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Y7=K7((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),W7=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return V7;var i=r.reverse(),l=i[0],u=i.slice(1);return function(){return u.reduce((d,h)=>h(d),l(...arguments))}},Wv=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function sk(e){var t;return e===0?t=1:t=Math.floor(new At(e).abs().log(10).toNumber())+1,t}function ok(e,t,r){for(var n=new At(e),i=0,l=[];n.lt(t)&&i<1e5;)l.push(n.toNumber()),n=n.add(r),i++;return l}var lk=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},ck=(e,t,r)=>{if(e.lte(0))return new At(0);var n=sk(e.toNumber()),i=new At(10).pow(n),l=e.div(i),u=n!==1?.05:.1,d=new At(Math.ceil(l.div(u).toNumber())).add(r).mul(u),h=d.mul(i);return t?new At(h.toNumber()):new At(Math.ceil(h.toNumber()))},X7=(e,t,r)=>{var n=new At(1),i=new At(e);if(!i.isint()&&r){var l=Math.abs(e);l<1?(n=new At(10).pow(sk(e)-1),i=new At(Math.floor(i.div(n).toNumber())).mul(n)):l>1&&(i=new At(Math.floor(e)))}else e===0?i=new At(Math.floor((t-1)/2)):r||(i=new At(Math.floor(e)));var u=Math.floor((t-1)/2),d=W7(Y7(h=>i.add(new At(h-u).mul(n)).toNumber()),Yv);return d(0,t)},uk=function(t,r,n,i){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new At(0),tickMin:new At(0),tickMax:new At(0)};var u=ck(new At(r).sub(t).div(n-1),i,l),d;t<=0&&r>=0?d=new At(0):(d=new At(t).add(r).div(2),d=d.sub(new At(d).mod(u)));var h=Math.ceil(d.sub(t).div(u).toNumber()),m=Math.ceil(new At(r).sub(d).div(u).toNumber()),p=h+m+1;return p>n?uk(t,r,n,i,l+1):(p<n&&(m=r>0?m+(n-p):m,h=r>0?h:h+(n-p)),{step:u,tickMin:d.sub(new At(h).mul(u)),tickMax:d.add(new At(m).mul(u))})},Z7=function(t){var[r,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=Math.max(i,2),[d,h]=lk([r,n]);if(d===-1/0||h===1/0){var m=h===1/0?[d,...Yv(0,i-1).map(()=>1/0)]:[...Yv(0,i-1).map(()=>-1/0),h];return r>n?Wv(m):m}if(d===h)return X7(d,i,l);var{step:p,tickMin:g,tickMax:x}=uk(d,h,u,l,0),b=ok(g,x.add(new At(.1).mul(p)),p);return r>n?Wv(b):b},Q7=function(t,r){var[n,i]=t,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[u,d]=lk([n,i]);if(u===-1/0||d===1/0)return[n,i];if(u===d)return[u];var h=Math.max(r,2),m=ck(new At(d).sub(u).div(h-1),l,0),p=[...ok(new At(u),new At(d),m),d];return l===!1&&(p=p.map(g=>Math.round(g))),n>i?Wv(p):p},dk=e=>e.rootProps.maxBarSize,J7=e=>e.rootProps.barGap,fk=e=>e.rootProps.barCategoryGap,e9=e=>e.rootProps.barSize,Uu=e=>e.rootProps.stackOffset,hk=e=>e.rootProps.reverseStackOrder,xb=e=>e.options.chartName,bb=e=>e.rootProps.syncId,mk=e=>e.rootProps.syncMethod,wb=e=>e.options.eventEmitter,Qr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},mi={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Un={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Em=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},t9={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:mi.angleAxisId,includeHidden:!1,name:void 0,reversed:mi.reversed,scale:mi.scale,tick:mi.tick,tickCount:void 0,ticks:void 0,type:mi.type,unit:void 0},r9={allowDataOverflow:Un.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Un.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Un.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Un.scale,tick:Un.tick,tickCount:Un.tickCount,ticks:void 0,type:Un.type,unit:void 0},n9={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:mi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mi.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mi.scale,tick:mi.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},a9={allowDataOverflow:Un.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Un.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Un.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Un.scale,tick:Un.tick,tickCount:Un.tickCount,ticks:void 0,type:"category",unit:void 0},jb=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?n9:t9,Nb=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?a9:r9,Am=e=>e.polarOptions,_b=ae([Ci,Ti,Tr],fT),pk=ae([Am,_b],(e,t)=>{if(e!=null)return on(e.innerRadius,t,0)}),gk=ae([Am,_b],(e,t)=>{if(e!=null)return on(e.outerRadius,t,t*.8)}),i9=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},yk=ae([Am],i9);ae([jb,yk],Em);var vk=ae([_b,pk,gk],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});ae([Nb,vk],Em);var xk=ae([yt,Am,pk,gk,Ci,Ti],(e,t,r,n,i,l)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:u,cy:d,startAngle:h,endAngle:m}=t;return{cx:on(u,i,i/2),cy:on(d,l,l/2),innerRadius:r,outerRadius:n,startAngle:h,endAngle:m,clockWise:!1}}}),Qt=(e,t)=>t,$u=(e,t,r)=>r;function Sb(e){return e==null?void 0:e.id}function bk(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:l}=r,u=new Map;return e.forEach(d=>{var h,m=(h=d.data)!==null&&h!==void 0?h:n;if(!(m==null||m.length===0)){var p=Sb(d);m.forEach((g,x)=>{var b=l==null||i?x:String(Xt(g,l,null)),j=Xt(g,d.dataKey,0),N;u.has(b)?N=u.get(b):N={},Object.assign(N,{[p]:j}),u.set(b,N)})}}),Array.from(u.values())}function Om(e){return e.stackId!=null&&e.dataKey!=null}var Cm=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Tm(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function s9(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Dr=e=>{var t=yt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Ll=e=>e.tooltip.settings.axisId;function T2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Oh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T2(Object(r),!0).forEach(function(n){o9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o9(e,t,r){return(t=l9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l9(e){var t=c9(e,"string");return typeof t=="symbol"?t:t+""}function c9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xv=[0,"auto"],Ir={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},wk=(e,t)=>e.cartesianAxis.xAxis[t],Di=(e,t)=>{var r=wk(e,t);return r??Ir},Lr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Xv,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ru},jk=(e,t)=>e.cartesianAxis.yAxis[t],Ri=(e,t)=>{var r=jk(e,t);return r??Lr},u9={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Eb=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??u9},er=(e,t,r)=>{switch(t){case"xAxis":return Di(e,r);case"yAxis":return Ri(e,r);case"zAxis":return Eb(e,r);case"angleAxis":return jb(e,r);case"radiusAxis":return Nb(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},d9=(e,t,r)=>{switch(t){case"xAxis":return Di(e,r);case"yAxis":return Ri(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},qu=(e,t,r)=>{switch(t){case"xAxis":return Di(e,r);case"yAxis":return Ri(e,r);case"angleAxis":return jb(e,r);case"radiusAxis":return Nb(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Nk=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Ab(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Ob=e=>e.graphicalItems.cartesianItems,f9=ae([Qt,$u],Ab),Cb=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Bu=ae([Ob,er,f9],Cb,{memoizeOptions:{resultEqualityCheck:Tm}}),_k=ae([Bu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Om)),Sk=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),h9=ae([Bu],Sk),Tb=e=>e.map(t=>t.data).filter(Boolean).flat(1),m9=ae([Bu],Tb,{memoizeOptions:{resultEqualityCheck:Tm}}),kb=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},Db=ae([m9,gb],kb),Rb=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Xt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:Xt(i,n)}))):e.map(n=>({value:n})),km=ae([Db,er,Bu],Rb);function Ek(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function qf(e){if(Ga(e)||e instanceof Date){var t=Number(e);if(dr(t))return t}}function k2(e){if(Array.isArray(e)){var t=[qf(e[0]),qf(e[1])];return Ns(t)?t:void 0}var r=qf(e);if(r!=null)return[r,r]}function Ei(e){return e.map(qf).filter(lL)}function p9(e,t,r){return!r||typeof t!="number"||Da(t)?[]:r.length?Ei(r.flatMap(n=>{var i=Xt(e,n.dataKey),l,u;if(Array.isArray(i)?[l,u]=i:l=u=i,!(!dr(l)||!dr(u)))return[t-l,t+u]})):[]}var Rr=e=>{var t=Dr(e),r=Ll(e);return qu(e,t,r)},Gu=ae([Rr],e=>e==null?void 0:e.dataKey),g9=ae([_k,gb,Rr],bk),Ak=(e,t,r,n)=>{var i={},l=t.reduce((u,d)=>(d.stackId==null||(u[d.stackId]==null&&(u[d.stackId]=[]),u[d.stackId].push(d)),u),i);return Object.fromEntries(Object.entries(l).map(u=>{var[d,h]=u,m=n?[...h].reverse():h,p=m.map(Sb);return[d,{stackedData:I8(e,p,r),graphicalItems:m}]}))},Zv=ae([g9,_k,Uu,hk],Ak),Ok=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:l}=t;if(n==null&&r!=="zAxis"){var u=q8(e,i,l);if(!(u!=null&&u[0]===0&&u[1]===0))return u}},y9=ae([er],e=>e.allowDataOverflow),Pb=e=>{var t;if(e==null||!("domain"in e))return Xv;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Ei(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:Xv},Mb=ae([er],Pb),Ib=ae([Mb,y9],ZT),v9=ae([Zv,Os,Qt,Ib],Ok,{memoizeOptions:{resultEqualityCheck:Cm}}),Dm=e=>e.errorBars,x9=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>Ek(r,n)),Ch=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var l=i.flat(),u=Math.min(...l),d=Math.max(...l);return[u,d]}},Lb=(e,t,r,n,i)=>{var l,u;if(r.length>0&&e.forEach(d=>{r.forEach(h=>{var m,p,g=(m=n[h.id])===null||m===void 0?void 0:m.filter(E=>Ek(i,E)),x=Xt(d,(p=t.dataKey)!==null&&p!==void 0?p:h.dataKey),b=p9(d,x,g);if(b.length>=2){var j=Math.min(...b),N=Math.max(...b);(l==null||j<l)&&(l=j),(u==null||N>u)&&(u=N)}var _=k2(x);_!=null&&(l=l==null?_[0]:Math.min(l,_[0]),u=u==null?_[1]:Math.max(u,_[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(d=>{var h=k2(Xt(d,t.dataKey));h!=null&&(l=l==null?h[0]:Math.min(l,h[0]),u=u==null?h[1]:Math.max(u,h[1]))}),dr(l)&&dr(u))return[l,u]},b9=ae([Db,er,h9,Dm,Qt],Lb,{memoizeOptions:{resultEqualityCheck:Cm}});function w9(e){var{value:t}=e;if(Ga(t)||t instanceof Date)return t}var j9=(e,t,r)=>{var n=e.map(w9).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&FO(n))?gT(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},Ck=e=>e.referenceElements.dots,zl=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),N9=ae([Ck,Qt,$u],zl),Tk=e=>e.referenceElements.areas,_9=ae([Tk,Qt,$u],zl),kk=e=>e.referenceElements.lines,S9=ae([kk,Qt,$u],zl),Dk=(e,t)=>{var r=Ei(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},E9=ae(N9,Qt,Dk),Rk=(e,t)=>{var r=Ei(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},A9=ae([_9,Qt],Rk);function O9(e){var t;if(e.x!=null)return Ei([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Ei(r)}function C9(e){var t;if(e.y!=null)return Ei([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Ei(r)}var Pk=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?O9(n):C9(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},T9=ae([S9,Qt],Pk),k9=ae(E9,T9,A9,(e,t,r)=>Ch(e,r,t)),zb=(e,t,r,n,i,l,u,d)=>{if(r!=null)return r;var h=u==="vertical"&&d==="xAxis"||u==="horizontal"&&d==="yAxis",m=h?Ch(n,l,i):Ch(l,i);return B7(t,m,e.allowDataOverflow)},D9=ae([er,Mb,Ib,v9,b9,k9,yt,Qt],zb,{memoizeOptions:{resultEqualityCheck:Cm}}),R9=[0,1],Ub=(e,t,r,n,i,l,u)=>{if(!((e==null||r==null||r.length===0)&&u===void 0)){var{dataKey:d,type:h}=e,m=bo(t,l);if(m&&d==null){var p;return gT(0,(p=r==null?void 0:r.length)!==null&&p!==void 0?p:0)}return h==="category"?j9(n,e,m):i==="expand"?R9:u}},$b=ae([er,yt,Db,km,Uu,Qt,D9],Ub),Mk=(e,t,r,n,i)=>{if(e!=null){var{scale:l,type:u}=e;if(l==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":u==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":u==="category"?"band":"linear";if(typeof l=="string"){var d="scale".concat(Au(l));return d in Yc?d:"point"}}},Ul=ae([er,yt,Nk,xb,Qt],Mk);function P9(e){if(e!=null){if(e in Yc)return Yc[e]();var t="scale".concat(Au(e));if(t in Yc)return Yc[t]()}}function qb(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var i=P9(t);if(i!=null){var l=i.domain(r).range(n);return k8(l),l}}}var Bb=(e,t,r)=>{var n=Pb(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Ns(e))return Z7(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ns(e))return Q7(e,t.tickCount,t.allowDecimals)}},Gb=ae([$b,qu,Ul],Bb),Hb=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Ns(t)&&Array.isArray(r)&&r.length>0){var i=t[0],l=r[0],u=t[1],d=r[r.length-1];return[Math.min(i,l),Math.max(u,d)]}return t},M9=ae([er,$b,Gb,Qt],Hb),I9=ae(km,er,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Ei(e.map(d=>d.value))).sort((d,h)=>d-h);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var l=0;l<n.length-1;l++){var u=n[l+1]-n[l];r=Math.min(r,u)}return r/i}}),Ik=ae(I9,yt,fk,Tr,(e,t,r,n)=>n,(e,t,r,n,i)=>{if(!dr(e))return 0;var l=t==="vertical"?n.height:n.width;if(i==="gap")return e*l/2;if(i==="no-gap"){var u=on(r,e*l),d=e*l/2;return d-u-(d-u)/l*u}return 0}),L9=(e,t)=>{var r=Di(e,t);return r==null||typeof r.padding!="string"?0:Ik(e,"xAxis",t,r.padding)},z9=(e,t)=>{var r=Ri(e,t);return r==null||typeof r.padding!="string"?0:Ik(e,"yAxis",t,r.padding)},U9=ae(Di,L9,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),$9=ae(Ri,z9,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),q9=ae([Tr,U9,dm,um,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:l}=n;return i?[l.left,r.width-l.right]:[e.left+t.left,e.left+e.width-t.right]}),B9=ae([Tr,yt,$9,dm,um,(e,t,r)=>r],(e,t,r,n,i,l)=>{var{padding:u}=i;return l?[n.height-u.bottom,u.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Hu=(e,t,r,n)=>{var i;switch(t){case"xAxis":return q9(e,r,n);case"yAxis":return B9(e,r,n);case"zAxis":return(i=Eb(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return yk(e);case"radiusAxis":return vk(e,r);default:return}},Lk=ae([er,Hu],Em),$l=ae([er,Ul,M9,Lk],qb);ae([Bu,Dm,Qt],x9);function zk(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Rm=(e,t)=>t,Pm=(e,t,r)=>r,G9=ae(lm,Rm,Pm,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(zk)),H9=ae(cm,Rm,Pm,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(zk)),Uk=(e,t)=>({width:e.width,height:t.height}),F9=(e,t)=>{var r=typeof t.width=="number"?t.width:Ru;return{width:r,height:e.height}},$k=ae(Tr,Di,Uk),V9=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},K9=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Y9=ae(Ti,Tr,G9,Rm,Pm,(e,t,r,n,i)=>{var l={},u;return r.forEach(d=>{var h=Uk(t,d);u==null&&(u=V9(t,n,e));var m=n==="top"&&!i||n==="bottom"&&i;l[d.id]=u-Number(m)*h.height,u+=(m?-1:1)*h.height}),l}),W9=ae(Ci,Tr,H9,Rm,Pm,(e,t,r,n,i)=>{var l={},u;return r.forEach(d=>{var h=F9(t,d);u==null&&(u=K9(t,n,e));var m=n==="left"&&!i||n==="right"&&i;l[d.id]=u-Number(m)*h.width,u+=(m?-1:1)*h.width}),l}),X9=(e,t)=>{var r=Di(e,t);if(r!=null)return Y9(e,r.orientation,r.mirror)},Z9=ae([Tr,Di,X9,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),Q9=(e,t)=>{var r=Ri(e,t);if(r!=null)return W9(e,r.orientation,r.mirror)},J9=ae([Tr,Ri,Q9,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),qk=ae(Tr,Ri,(e,t)=>{var r=typeof t.width=="number"?t.width:Ru;return{width:r,height:e.height}}),D2=(e,t,r)=>{switch(t){case"xAxis":return $k(e,r).width;case"yAxis":return qk(e,r).height;default:return}},Bk=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:l,dataKey:u}=r,d=bo(e,n),h=t.map(m=>m.value);if(u&&d&&l==="category"&&i&&FO(h))return h}},Fb=ae([yt,km,er,Qt],Bk),Gk=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:l}=r,u=bo(e,n);if(u&&(i==="number"||l!=="auto"))return t.map(d=>d.value)}},Vb=ae([yt,km,qu,Qt],Gk),R2=ae([yt,d9,Ul,$l,Fb,Vb,Hu,Gb,Qt],(e,t,r,n,i,l,u,d,h)=>{if(t!=null){var m=bo(e,h);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:h,categoricalDomain:l,duplicateDomain:i,isCategorical:m,niceTicks:d,range:u,realScaleType:r,scale:n}}}),eG=(e,t,r,n,i,l,u,d,h)=>{if(!(t==null||n==null)){var m=bo(e,h),{type:p,ticks:g,tickCount:x}=t,b=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,j=p==="category"&&n.bandwidth?n.bandwidth()/b:0;j=h==="angleAxis"&&l!=null&&l.length>=2?Ur(l[0]-l[1])*2*j:j;var N=g||i;if(N){var _=N.map((E,k)=>{var A=u?u.indexOf(E):E;return{index:k,coordinate:n(A)+j,value:E,offset:j}});return _.filter(E=>dr(E.coordinate))}return m&&d?d.map((E,k)=>({coordinate:n(E)+j,value:E,index:k,offset:j})).filter(E=>dr(E.coordinate)):n.ticks?n.ticks(x).map(E=>({coordinate:n(E)+j,value:E,offset:j})):n.domain().map((E,k)=>({coordinate:n(E)+j,value:u?u[E]:E,index:k,offset:j}))}},Hk=ae([yt,qu,Ul,$l,Gb,Hu,Fb,Vb,Qt],eG),tG=(e,t,r,n,i,l,u)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var d=bo(e,u),{tickCount:h}=t,m=0;return m=u==="angleAxis"&&(n==null?void 0:n.length)>=2?Ur(n[0]-n[1])*2*m:m,d&&l?l.map((p,g)=>({coordinate:r(p)+m,value:p,index:g,offset:m})):r.ticks?r.ticks(h).map(p=>({coordinate:r(p)+m,value:p,offset:m})):r.domain().map((p,g)=>({coordinate:r(p)+m,value:i?i[p]:p,index:g,offset:m}))}},Tl=ae([yt,qu,$l,Hu,Fb,Vb,Qt],tG),kl=ae(er,$l,(e,t)=>{if(!(e==null||t==null))return Oh(Oh({},e),{},{scale:t})}),rG=ae([er,Ul,$b,Lk],qb);ae((e,t,r)=>Eb(e,r),rG,(e,t)=>{if(!(e==null||t==null))return Oh(Oh({},e),{},{scale:t})});var nG=ae([yt,lm,cm],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Fk=e=>e.options.defaultTooltipEventType,Vk=e=>e.options.validateTooltipEventTypes;function Kk(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Kb(e,t){var r=Fk(e),n=Vk(e);return Kk(t,r,n)}function aG(e){return Ue(t=>Kb(t,e))}var Yk=(e,t)=>{var r,n=Number(t);if(!(Da(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},iG=e=>e.tooltip.settings,vs={active:!1,index:null,dataKey:void 0,coordinate:void 0},sG={itemInteraction:{click:vs,hover:vs},axisInteraction:{click:vs,hover:vs},keyboardInteraction:vs,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Wk=An({name:"tooltip",initialState:sG,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Wt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Ta(e).tooltipItemPayloads.indexOf(r);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:Wt()},removeTooltipEntrySettings:{reducer(e,t){var r=Ta(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Wt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:oG,replaceTooltipEntrySettings:lG,removeTooltipEntrySettings:cG,setTooltipSettingsState:uG,setActiveMouseOverItemIndex:Xk,mouseLeaveItem:dG,mouseLeaveChart:Zk,setActiveClickItemIndex:fG,setMouseOverAxisIndex:Qk,setMouseClickAxisIndex:hG,setSyncInteraction:Qv,setKeyboardInteraction:Jv}=Wk.actions,mG=Wk.reducer;function P2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P2(Object(r),!0).forEach(function(n){pG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pG(e,t,r){return(t=gG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gG(e){var t=yG(e,"string");return typeof t=="symbol"?t:t+""}function yG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vG(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function xG(e){return e.index!=null}var Jk=(e,t,r,n)=>{if(t==null)return vs;var i=vG(e,t,r);if(i==null)return vs;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var l=e.settings.active===!0;if(xG(i)){if(l)return Rf(Rf({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Rf(Rf({},vs),{},{coordinate:i.coordinate})};function bG(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function wG(e,t){var r=bG(e),n=t[0],i=t[1];if(r===void 0)return!1;var l=Math.min(n,i),u=Math.max(n,i);return r>=l&&r<=u}function jG(e,t,r){if(r==null||t==null)return!0;var n=Xt(e,t);return n==null||!Ns(r)?!0:wG(n,r)}var Yb=(e,t,r,n)=>{var i=e==null?void 0:e.index;if(i==null)return null;var l=Number(i);if(!dr(l))return i;var u=0,d=1/0;t.length>0&&(d=t.length-1);var h=Math.max(u,Math.min(l,d)),m=t[h];return m==null||jG(m,r,n)?String(h):null},eD=(e,t,r,n,i,l,u,d)=>{if(!(l==null||d==null)){var h=u[0],m=h==null?void 0:d(h.positions,l);if(m!=null)return m;var p=i==null?void 0:i[Number(l)];if(p)switch(r){case"horizontal":return{x:p.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:p.coordinate}}}},tD=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return r==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(l=>{var u;return((u=l.settings)===null||u===void 0?void 0:u.dataKey)===i})},Fu=e=>e.options.tooltipPayloadSearcher,ql=e=>e.tooltip;function M2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function I2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M2(Object(r),!0).forEach(function(n){NG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NG(e,t,r){return(t=_G(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _G(e){var t=SG(e,"string");return typeof t=="symbol"?t:t+""}function SG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EG(e,t){return e??t}var rD=(e,t,r,n,i,l,u)=>{if(!(t==null||l==null)){var{chartData:d,computedData:h,dataStartIndex:m,dataEndIndex:p}=r,g=[];return e.reduce((x,b)=>{var j,{dataDefinedOnItem:N,settings:_}=b,E=EG(N,d),k=Array.isArray(E)?zC(E,m,p):E,A=(j=_==null?void 0:_.dataKey)!==null&&j!==void 0?j:n,I=_==null?void 0:_.nameKey,R;if(n&&Array.isArray(k)&&!Array.isArray(k[0])&&u==="axis"?R=oL(k,n,i):R=l(k,t,h,I),Array.isArray(R))R.forEach(P=>{var Y=I2(I2({},_),{},{name:P.name,unit:P.unit,color:void 0,fill:void 0});x.push(rE({tooltipEntrySettings:Y,dataKey:P.dataKey,payload:P.payload,value:Xt(P.payload,P.dataKey),name:P.name}))});else{var C;x.push(rE({tooltipEntrySettings:_,dataKey:A,payload:R,value:Xt(R,A),name:(C=Xt(R,I))!==null&&C!==void 0?C:_==null?void 0:_.name}))}return x},g)}},Wb=ae([Rr,yt,Nk,xb,Dr],Mk),AG=ae([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),OG=ae([Dr,Ll],Ab),Vu=ae([AG,Rr,OG],Cb,{memoizeOptions:{resultEqualityCheck:Tm}}),CG=ae([Vu],e=>e.filter(Om)),TG=ae([Vu],Tb,{memoizeOptions:{resultEqualityCheck:Tm}}),Bl=ae([TG,Os],kb),kG=ae([CG,Os,Rr],bk),Xb=ae([Bl,Rr,Vu],Rb),nD=ae([Rr],Pb),DG=ae([Rr],e=>e.allowDataOverflow),aD=ae([nD,DG],ZT),RG=ae([Vu],e=>e.filter(Om)),PG=ae([kG,RG,Uu,hk],Ak),MG=ae([PG,Os,Dr,aD],Ok),IG=ae([Vu],Sk),LG=ae([Bl,Rr,IG,Dm,Dr],Lb,{memoizeOptions:{resultEqualityCheck:Cm}}),zG=ae([Ck,Dr,Ll],zl),UG=ae([zG,Dr],Dk),$G=ae([Tk,Dr,Ll],zl),qG=ae([$G,Dr],Rk),BG=ae([kk,Dr,Ll],zl),GG=ae([BG,Dr],Pk),HG=ae([UG,GG,qG],Ch),FG=ae([Rr,nD,aD,MG,LG,HG,yt,Dr],zb),Ku=ae([Rr,yt,Bl,Xb,Uu,Dr,FG],Ub),VG=ae([Ku,Rr,Wb],Bb),KG=ae([Rr,Ku,VG,Dr],Hb),iD=e=>{var t=Dr(e),r=Ll(e),n=!1;return Hu(e,t,r,n)},sD=ae([Rr,iD],Em),oD=ae([Rr,Wb,KG,sD],qb),YG=ae([yt,Xb,Rr,Dr],Bk),WG=ae([yt,Xb,Rr,Dr],Gk),XG=(e,t,r,n,i,l,u,d)=>{if(t){var{type:h}=t,m=bo(e,d);if(n){var p=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,g=h==="category"&&n.bandwidth?n.bandwidth()/p:0;return g=d==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Ur(i[0]-i[1])*2*g:g,m&&u?u.map((x,b)=>({coordinate:n(x)+g,value:x,index:b,offset:g})):n.domain().map((x,b)=>({coordinate:n(x)+g,value:l?l[x]:x,index:b,offset:g}))}}},Pi=ae([yt,Rr,Wb,oD,iD,YG,WG,Dr],XG),Zb=ae([Fk,Vk,iG],(e,t,r)=>Kk(r.shared,e,t)),lD=e=>e.tooltip.settings.trigger,Qb=e=>e.tooltip.settings.defaultIndex,Mm=ae([ql,Zb,lD,Qb],Jk),yo=ae([Mm,Bl,Gu,Ku],Yb),cD=ae([Pi,yo],Yk),uD=ae([Mm],e=>{if(e)return e.dataKey}),dD=ae([ql,Zb,lD,Qb],tD),ZG=ae([Ci,Ti,yt,Tr,Pi,Qb,dD,Fu],eD),QG=ae([Mm,ZG],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),JG=ae([Mm],e=>e.active),eH=ae([dD,yo,Os,Gu,cD,Fu,Zb],rD);ae([eH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function L2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function z2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L2(Object(r),!0).forEach(function(n){tH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tH(e,t,r){return(t=rH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rH(e){var t=nH(e,"string");return typeof t=="symbol"?t:t+""}function nH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aH=()=>Ue(Rr),iH=()=>{var e=aH(),t=Ue(Pi),r=Ue(oD);return lh(!e||!r?void 0:z2(z2({},e),{},{scale:r}),t)};function U2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ul(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U2(Object(r),!0).forEach(function(n){sH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sH(e,t,r){return(t=oH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oH(e){var t=lH(e,"string");return typeof t=="symbol"?t:t+""}function lH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cH=(e,t,r,n)=>{var i=t.find(l=>l&&l.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},uH=(e,t,r,n)=>{var i=t.find(m=>m&&m.index===r);if(i){if(e==="centric"){var l=i.coordinate,{radius:u}=n;return ul(ul(ul({},n),wr(n.cx,n.cy,u,l)),{},{angle:l,radius:u})}var d=i.coordinate,{angle:h}=n;return ul(ul(ul({},n),wr(n.cx,n.cy,d,h)),{},{angle:h,radius:d})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function dH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var fD=(e,t,r,n,i)=>{var l,u=-1,d=(l=t==null?void 0:t.length)!==null&&l!==void 0?l:0;if(d<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var h=0;h<d;h++){var m=h>0?r[h-1].coordinate:r[d-1].coordinate,p=r[h].coordinate,g=h>=d-1?r[0].coordinate:r[h+1].coordinate,x=void 0;if(Ur(p-m)!==Ur(g-p)){var b=[];if(Ur(g-p)===Ur(i[1]-i[0])){x=g;var j=p+i[1]-i[0];b[0]=Math.min(j,(j+m)/2),b[1]=Math.max(j,(j+m)/2)}else{x=m;var N=g+i[1]-i[0];b[0]=Math.min(p,(N+p)/2),b[1]=Math.max(p,(N+p)/2)}var _=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(e>_[0]&&e<=_[1]||e>=b[0]&&e<=b[1]){({index:u}=r[h]);break}}else{var E=Math.min(m,g),k=Math.max(m,g);if(e>(E+p)/2&&e<=(k+p)/2){({index:u}=r[h]);break}}}else if(t){for(var A=0;A<d;A++)if(A===0&&e<=(t[A].coordinate+t[A+1].coordinate)/2||A>0&&A<d-1&&e>(t[A].coordinate+t[A-1].coordinate)/2&&e<=(t[A].coordinate+t[A+1].coordinate)/2||A===d-1&&e>(t[A].coordinate+t[A-1].coordinate)/2){({index:u}=t[A]);break}}return u},fH=()=>Ue(xb),Jb=(e,t)=>t,hD=(e,t,r)=>r,ew=(e,t,r,n)=>n,hH=ae(Pi,e=>Qh(e,t=>t.coordinate)),tw=ae([ql,Jb,hD,ew],Jk),rw=ae([tw,Bl,Gu,Ku],Yb),mH=(e,t,r)=>{if(t!=null){var n=ql(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},mD=ae([ql,Jb,hD,ew],tD),Th=ae([Ci,Ti,yt,Tr,Pi,ew,mD,Fu],eD),pH=ae([tw,Th],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),pD=ae([Pi,rw],Yk),gH=ae([mD,rw,Os,Gu,pD,Fu,Jb],rD),yH=ae([tw,rw],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),vH=(e,t,r,n,i,l,u)=>{if(!(!e||!r||!n||!i)&&dH(e,u)){var d=B8(e,t),h=fD(d,l,i,r,n),m=cH(t,i,h,e);return{activeIndex:String(h),activeCoordinate:m}}},xH=(e,t,r,n,i,l,u)=>{if(!(!e||!n||!i||!l||!r)){var d=aq(e,r);if(d){var h=G8(d,t),m=fD(h,u,l,n,i),p=uH(t,l,m,d);return{activeIndex:String(m),activeCoordinate:p}}}},bH=(e,t,r,n,i,l,u,d)=>{if(!(!e||!t||!n||!i||!l))return t==="horizontal"||t==="vertical"?vH(e,t,n,i,l,u,d):xH(e,t,r,n,i,l,u)},wH=ae(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),jH=ae(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(Qr)),r=Array.from(new Set(t));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:s9}});function $2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function q2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$2(Object(r),!0).forEach(function(n){NH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NH(e,t,r){return(t=_H(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _H(e){var t=SH(e,"string");return typeof t=="symbol"?t:t+""}function SH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EH={},AH={zIndexMap:Object.values(Qr).reduce((e,t)=>q2(q2({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),EH)},OH=new Set(Object.values(Qr));function CH(e){return OH.has(e)}var gD=An({name:"zIndex",initialState:AH,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Wt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!CH(r)&&delete e.zIndexMap[r])},prepare:Wt()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:i?void 0:n,panoramaElementId:i?n:void 0}},prepare:Wt()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Wt()}}}),{registerZIndexPortal:TH,unregisterZIndexPortal:kH,registerZIndexPortalId:DH,unregisterZIndexPortalId:RH}=gD.actions,PH=gD.reducer;function Pa(e){var{zIndex:t,children:r}=e,n=bU(),i=n&&t!==void 0&&t!==0,l=On(),u=Bt();w.useLayoutEffect(()=>i?(u(TH({zIndex:t})),()=>{u(kH({zIndex:t}))}):Ou,[u,t,i]);var d=Ue(m=>wH(m,t,l));if(!i)return r;if(!d)return null;var h=document.getElementById(d);return h?wx.createPortal(r,h):null}function ex(){return ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ex.apply(null,arguments)}function B2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B2(Object(r),!0).forEach(function(n){MH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MH(e,t,r){return(t=IH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IH(e){var t=LH(e,"string");return typeof t=="symbol"?t:t+""}function LH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zH(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return w.isValidElement(t)?w.cloneElement(t,n):w.createElement(r,n)}function UH(e){var t,{coordinate:r,payload:n,index:i,offset:l,tooltipAxisBandSize:u,layout:d,cursor:h,tooltipEventType:m,chartName:p}=e,g=r,x=n,b=i;if(!h||!g||p!=="ScatterChart"&&m!=="axis")return null;var j,N,_;if(p==="ScatterChart")j=g,N=b$,_=Qr.cursorLine;else if(p==="BarChart")j=w$(d,g,l,u),N=dT,_=Qr.cursorRectangle;else if(d==="radial"&&KO(g)){var{cx:E,cy:k,radius:A,startAngle:I,endAngle:R}=hT(g);j={cx:E,cy:k,startAngle:I,endAngle:R,innerRadius:A,outerRadius:A},N=pT,_=Qr.cursorLine}else j={points:lq(d,g,l)},N=Fx,_=Qr.cursorLine;var C=typeof h=="object"&&"className"in h?h.className:void 0,P=Pf(Pf(Pf(Pf({stroke:"#ccc",pointerEvents:"none"},l),j),ou(h)),{},{payload:x,payloadIndex:b,className:Ot("recharts-tooltip-cursor",C)});return w.createElement(Pa,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:_},w.createElement(zH,{cursor:h,cursorComp:N,cursorProps:P}))}function $H(e){var t=iH(),r=YC(),n=hm(),i=fH();return t==null||r==null||n==null||i==null?null:w.createElement(UH,ex({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var yD=w.createContext(null),qH=()=>w.useContext(yD),Ry={exports:{}},G2;function BH(){return G2||(G2=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(h,m,p){this.fn=h,this.context=m,this.once=p||!1}function l(h,m,p,g,x){if(typeof p!="function")throw new TypeError("The listener must be a function");var b=new i(p,g||h,x),j=r?r+m:m;return h._events[j]?h._events[j].fn?h._events[j]=[h._events[j],b]:h._events[j].push(b):(h._events[j]=b,h._eventsCount++),h}function u(h,m){--h._eventsCount===0?h._events=new n:delete h._events[m]}function d(){this._events=new n,this._eventsCount=0}d.prototype.eventNames=function(){var m=[],p,g;if(this._eventsCount===0)return m;for(g in p=this._events)t.call(p,g)&&m.push(r?g.slice(1):g);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(p)):m},d.prototype.listeners=function(m){var p=r?r+m:m,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var x=0,b=g.length,j=new Array(b);x<b;x++)j[x]=g[x].fn;return j},d.prototype.listenerCount=function(m){var p=r?r+m:m,g=this._events[p];return g?g.fn?1:g.length:0},d.prototype.emit=function(m,p,g,x,b,j){var N=r?r+m:m;if(!this._events[N])return!1;var _=this._events[N],E=arguments.length,k,A;if(_.fn){switch(_.once&&this.removeListener(m,_.fn,void 0,!0),E){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,p),!0;case 3:return _.fn.call(_.context,p,g),!0;case 4:return _.fn.call(_.context,p,g,x),!0;case 5:return _.fn.call(_.context,p,g,x,b),!0;case 6:return _.fn.call(_.context,p,g,x,b,j),!0}for(A=1,k=new Array(E-1);A<E;A++)k[A-1]=arguments[A];_.fn.apply(_.context,k)}else{var I=_.length,R;for(A=0;A<I;A++)switch(_[A].once&&this.removeListener(m,_[A].fn,void 0,!0),E){case 1:_[A].fn.call(_[A].context);break;case 2:_[A].fn.call(_[A].context,p);break;case 3:_[A].fn.call(_[A].context,p,g);break;case 4:_[A].fn.call(_[A].context,p,g,x);break;default:if(!k)for(R=1,k=new Array(E-1);R<E;R++)k[R-1]=arguments[R];_[A].fn.apply(_[A].context,k)}}return!0},d.prototype.on=function(m,p,g){return l(this,m,p,g,!1)},d.prototype.once=function(m,p,g){return l(this,m,p,g,!0)},d.prototype.removeListener=function(m,p,g,x){var b=r?r+m:m;if(!this._events[b])return this;if(!p)return u(this,b),this;var j=this._events[b];if(j.fn)j.fn===p&&(!x||j.once)&&(!g||j.context===g)&&u(this,b);else{for(var N=0,_=[],E=j.length;N<E;N++)(j[N].fn!==p||x&&!j[N].once||g&&j[N].context!==g)&&_.push(j[N]);_.length?this._events[b]=_.length===1?_[0]:_:u(this,b)}return this},d.prototype.removeAllListeners=function(m){var p;return m?(p=r?r+m:m,this._events[p]&&u(this,p)):(this._events=new n,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=r,d.EventEmitter=d,e.exports=d})(Ry)),Ry.exports}var GH=BH();const HH=Ka(GH);var ju=new HH,tx="recharts.syncEvent.tooltip",H2="recharts.syncEvent.brush";function vD(e,t){if(t){var r=Number.parseInt(t,10);if(!Da(r))return e==null?void 0:e[r]}}var FH={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},xD=An({name:"options",initialState:FH,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),VH=xD.reducer,{createEventEmitter:KH}=xD.actions;function YH(e){return e.tooltip.syncInteraction}var WH={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},bD=An({name:"chartData",initialState:WH,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:F2,setDataStartEndIndexes:XH,setComputedData:wQ}=bD.actions,ZH=bD.reducer,QH=["x","y"];function V2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V2(Object(r),!0).forEach(function(n){JH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JH(e,t,r){return(t=eF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eF(e){var t=tF(e,"string");return typeof t=="symbol"?t:t+""}function tF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rF(e,t){if(e==null)return{};var r,n,i=nF(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function nF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function aF(){var e=Ue(bb),t=Ue(wb),r=Bt(),n=Ue(mk),i=Ue(Pi),l=hm(),u=fm(),d=Ue(h=>h.rootProps.className);w.useEffect(()=>{if(e==null)return Ou;var h=(m,p,g)=>{if(t!==g&&e===m){if(n==="index"){var x;if(u&&p!==null&&p!==void 0&&(x=p.payload)!==null&&x!==void 0&&x.coordinate&&p.payload.sourceViewBox){var b=p.payload.coordinate,{x:j,y:N}=b,_=rF(b,QH),{x:E,y:k,width:A,height:I}=p.payload.sourceViewBox,R=dl(dl({},_),{},{x:u.x+(A?(j-E)/A:0)*u.width,y:u.y+(I?(N-k)/I:0)*u.height});r(dl(dl({},p),{},{payload:dl(dl({},p.payload),{},{coordinate:R})}))}else r(p);return}if(i!=null){var C;if(typeof n=="function"){var P={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},Y=n(i,P);C=i[Y]}else n==="value"&&(C=i.find(D=>String(D.value)===p.payload.label));var{coordinate:oe}=p.payload;if(C==null||p.payload.active===!1||oe==null||u==null){r(Qv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:H,y:$}=oe,U=Math.min(H,u.x+u.width),ce=Math.min($,u.y+u.height),G={x:l==="horizontal"?C.coordinate:U,y:l==="horizontal"?ce:C.coordinate},V=Qv({active:p.payload.active,coordinate:G,dataKey:p.payload.dataKey,index:String(C.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox});r(V)}}};return ju.on(tx,h),()=>{ju.off(tx,h)}},[d,r,t,e,n,i,l,u])}function iF(){var e=Ue(bb),t=Ue(wb),r=Bt();w.useEffect(()=>{if(e==null)return Ou;var n=(i,l,u)=>{t!==u&&e===i&&r(XH(l))};return ju.on(H2,n),()=>{ju.off(H2,n)}},[r,t,e])}function sF(){var e=Bt();w.useEffect(()=>{e(KH())},[e]),aF(),iF()}function oF(e,t,r,n,i,l){var u=Ue(b=>mH(b,e,t)),d=Ue(wb),h=Ue(bb),m=Ue(mk),p=Ue(YH),g=p==null?void 0:p.active,x=fm();w.useEffect(()=>{if(!g&&h!=null&&d!=null){var b=Qv({active:l,coordinate:r,dataKey:u,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:x});ju.emit(tx,h,b,d)}},[g,r,u,i,n,d,h,m,l,x])}function K2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Y2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K2(Object(r),!0).forEach(function(n){lF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lF(e,t,r){return(t=cF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cF(e){var t=uF(e,"string");return typeof t=="symbol"?t:t+""}function uF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dF(e){return e.dataKey}function fF(e,t){return w.isValidElement(e)?w.cloneElement(e,t):typeof e=="function"?w.createElement(e,t):w.createElement(QU,t)}var W2=[],hF={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!wo.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Nu(e){var t,r,n=qr(e,hF),{active:i,allowEscapeViewBox:l,animationDuration:u,animationEasing:d,content:h,filterNull:m,isAnimationActive:p,offset:g,payloadUniqBy:x,position:b,reverseDirection:j,useTranslate3d:N,wrapperStyle:_,cursor:E,shared:k,trigger:A,defaultIndex:I,portal:R,axisId:C}=n,P=Bt(),Y=typeof I=="number"?String(I):I;w.useEffect(()=>{P(uG({shared:k,trigger:A,axisId:C,active:i,defaultIndex:Y}))},[P,k,A,C,i,Y]);var oe=fm(),H=sT(),$=aG(k),{activeIndex:U,isActive:ce}=(t=Ue(Ce=>yH(Ce,$,A,Y)))!==null&&t!==void 0?t:{},G=Ue(Ce=>gH(Ce,$,A,Y)),V=Ue(Ce=>pD(Ce,$,A,Y)),D=Ue(Ce=>pH(Ce,$,A,Y)),K=G,fe=qH(),Ne=(r=i??ce)!==null&&r!==void 0?r:!1,[_e,L]=lC([K,Ne]),W=$==="axis"?V:void 0;oF($,A,D,W,U,Ne);var ve=R??fe;if(ve==null||oe==null||$==null)return null;var be=K??W2;Ne||(be=W2),m&&be.length&&(be=nC(be.filter(Ce=>Ce.value!=null&&(Ce.hide!==!0||n.includeHidden)),x,dF));var Te=be.length>0,Ee=w.createElement(i$,{allowEscapeViewBox:l,animationDuration:u,animationEasing:d,isAnimationActive:p,active:Ne,coordinate:D,hasPayload:Te,offset:g,position:b,reverseDirection:j,useTranslate3d:N,viewBox:oe,wrapperStyle:_,lastBoundingBox:_e,innerRef:L,hasPortalFromProps:!!R},fF(h,Y2(Y2({},n),{},{payload:be,label:W,active:Ne,activeIndex:U,coordinate:D,accessibilityLayer:H})));return w.createElement(w.Fragment,null,wx.createPortal(Ee,ve),Ne&&w.createElement($H,{cursor:E,tooltipEventType:$,coordinate:D,payload:be,index:U}))}var _s=e=>null;_s.displayName="Cell";function mF(e,t,r){return(t=pF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pF(e){var t=gF(e,"string");return typeof t=="symbol"?t:t+""}function gF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class yF{constructor(t){mF(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function X2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X2(Object(r),!0).forEach(function(n){xF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xF(e,t,r){return(t=bF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bF(e){var t=wF(e,"string");return typeof t=="symbol"?t:t+""}function wF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jF={cacheSize:2e3,enableCache:!0},wD=vF({},jF),Z2=new yF(wD.cacheSize),NF={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Q2="recharts_measurement_span";function _F(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",l=t.fontStyle||"",u=t.letterSpacing||"",d=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(l,"|").concat(u,"|").concat(d)}var J2=(e,t)=>{try{var r=document.getElementById(Q2);r||(r=document.createElement("span"),r.setAttribute("id",Q2),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,NF,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Zc=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||wo.isSsr)return{width:0,height:0};if(!wD.enableCache)return J2(t,r);var n=_F(t,r),i=Z2.get(n);if(i)return i;var l=J2(t,r);return Z2.set(n,l),l},eA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,tA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,SF=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,EF=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,jD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},AF=Object.keys(jD),vl="NaN";function OF(e,t){return e*jD[t]}class Sn{static parse(t){var r,[,n,i]=(r=EF.exec(t))!==null&&r!==void 0?r:[];return new Sn(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Da(t)&&(this.unit=""),r!==""&&!SF.test(r)&&(this.num=NaN,this.unit=""),AF.includes(r)&&(this.num=OF(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Sn(NaN,""):new Sn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Sn(NaN,""):new Sn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Sn(NaN,""):new Sn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Sn(NaN,""):new Sn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Da(this.num)}}function ND(e){if(e.includes(vl))return vl;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,l]=(r=eA.exec(t))!==null&&r!==void 0?r:[],u=Sn.parse(n??""),d=Sn.parse(l??""),h=i==="*"?u.multiply(d):u.divide(d);if(h.isNaN())return vl;t=t.replace(eA,h.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,p,g,x]=(m=tA.exec(t))!==null&&m!==void 0?m:[],b=Sn.parse(p??""),j=Sn.parse(x??""),N=g==="+"?b.add(j):b.subtract(j);if(N.isNaN())return vl;t=t.replace(tA,N.toString())}return t}var rA=/\(([^()]*)\)/;function CF(e){for(var t=e,r;(r=rA.exec(t))!=null;){var[,n]=r;t=t.replace(rA,ND(n))}return t}function TF(e){var t=e.replace(/\s+/g,"");return t=CF(t),t=ND(t),t}function kF(e){try{return TF(e)}catch{return vl}}function Py(e){var t=kF(e.slice(5,-1));return t===vl?"":t}var DF=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],RF=["dx","dy","angle","className","breakAll"];function rx(){return rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rx.apply(null,arguments)}function nA(e,t){if(e==null)return{};var r,n,i=PF(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function PF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _D=/[ \f\n\r\t\v\u2028\u2029]+/,SD=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];$r(t)||(r?i=t.toString().split(""):i=t.toString().split(_D));var l=i.map(d=>({word:d,width:Zc(d,n).width})),u=r?0:Zc("",n).width;return{wordsWithComputedWidth:l,spaceWidth:u}}catch{return null}};function MF(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var ED=(e,t,r,n)=>e.reduce((i,l)=>{var{word:u,width:d}=l,h=i[i.length-1];if(h&&d!=null&&(t==null||n||h.width+d+r<Number(t)))h.words.push(u),h.width+=d+r;else{var m={words:[u],width:d};i.push(m)}return i},[]),AD=e=>e.reduce((t,r)=>t.width>r.width?t:r),IF="",aA=(e,t,r,n,i,l,u,d)=>{var h=e.slice(0,t),m=SD({breakAll:r,style:n,children:h+IF});if(!m)return[!1,[]];var p=ED(m.wordsWithComputedWidth,l,u,d),g=p.length>i||AD(p).width>Number(l);return[g,p]},LF=(e,t,r,n,i)=>{var{maxLines:l,children:u,style:d,breakAll:h}=e,m=$e(l),p=String(u),g=ED(t,n,r,i);if(!m||i)return g;var x=g.length>l||AD(g).width>Number(n);if(!x)return g;for(var b=0,j=p.length-1,N=0,_;b<=j&&N<=p.length-1;){var E=Math.floor((b+j)/2),k=E-1,[A,I]=aA(p,k,h,d,l,n,r,i),[R]=aA(p,E,h,d,l,n,r,i);if(!A&&!R&&(b=E+1),A&&R&&(j=E-1),!A&&R){_=I;break}N++}return _||g},iA=e=>{var t=$r(e)?[]:e.toString().split(_D);return[{words:t,width:void 0}]},zF=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:l,maxLines:u}=e;if((t||r)&&!wo.isSsr){var d,h,m=SD({breakAll:l,children:n,style:i});if(m){var{wordsWithComputedWidth:p,spaceWidth:g}=m;d=p,h=g}else return iA(n);return LF({breakAll:l,children:n,maxLines:u,style:i},d,h,t,!!r)}return iA(n)},OD="#808080",UF={angle:0,breakAll:!1,capHeight:"0.71em",fill:OD,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Im=w.forwardRef((e,t)=>{var r=qr(e,UF),{x:n,y:i,lineHeight:l,capHeight:u,fill:d,scaleToFit:h,textAnchor:m,verticalAnchor:p}=r,g=nA(r,DF),x=w.useMemo(()=>zF({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:h,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,h,g.style,g.width]),{dx:b,dy:j,angle:N,className:_,breakAll:E}=g,k=nA(g,RF);if(!Ga(n)||!Ga(i)||x.length===0)return null;var A=Number(n)+($e(b)?b:0),I=Number(i)+($e(j)?j:0);if(!dr(A)||!dr(I))return null;var R;switch(p){case"start":R=Py("calc(".concat(u,")"));break;case"middle":R=Py("calc(".concat((x.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:R=Py("calc(".concat(x.length-1," * -").concat(l,")"));break}var C=[];if(h){var P=x[0].width,{width:Y}=g;C.push("scale(".concat($e(Y)&&$e(P)?Y/P:1,")"))}return N&&C.push("rotate(".concat(N,", ").concat(A,", ").concat(I,")")),C.length&&(k.transform=C.join(" ")),w.createElement("text",rx({},ca(k),{ref:t,x:A,y:I,className:Ot("recharts-text",_),textAnchor:m,fill:d.includes("url")?OD:d}),x.map((oe,H)=>{var $=oe.words.join(E?"":" ");return w.createElement("tspan",{x:A,dy:H===0?R:l,key:"".concat($,"-").concat(H)},$)}))});Im.displayName="Text";var $F=["labelRef"];function qF(e,t){if(e==null)return{};var r,n,i=BF(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function BF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function sA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sA(Object(r),!0).forEach(function(n){GF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GF(e,t,r){return(t=HF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HF(e){var t=FF(e,"string");return typeof t=="symbol"?t:t+""}function FF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pi(){return pi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pi.apply(null,arguments)}var CD=w.createContext(null),VF=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:l,height:u,children:d}=e,h=w.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:l,height:u}),[t,r,n,i,l,u]);return w.createElement(CD.Provider,{value:h},d)},TD=()=>{var e=w.useContext(CD),t=fm();return e||KC(t)},KF=w.createContext(null),YF=()=>{var e=w.useContext(KF),t=Ue(xk);return e||t},WF=e=>{var{value:t,formatter:r}=e,n=$r(e.children)?t:e.children;return typeof r=="function"?r(n):n},nw=e=>e!=null&&typeof e=="function",XF=(e,t)=>{var r=Ur(t-e),n=Math.min(Math.abs(t-e),360);return r*n},ZF=(e,t,r,n,i)=>{var{offset:l,className:u}=e,{cx:d,cy:h,innerRadius:m,outerRadius:p,startAngle:g,endAngle:x,clockWise:b}=i,j=(m+p)/2,N=XF(g,x),_=N>=0?1:-1,E,k;switch(t){case"insideStart":E=g+_*l,k=b;break;case"insideEnd":E=x-_*l,k=!b;break;case"end":E=x+_*l,k=b;break;default:throw new Error("Unsupported position ".concat(t))}k=N<=0?k:!k;var A=wr(d,h,j,E),I=wr(d,h,j,E+(k?1:-1)*359),R="M".concat(A.x,",").concat(A.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(k?0:1,`,
    `).concat(I.x,",").concat(I.y),C=$r(e.id)?lu("recharts-radial-line-"):e.id;return w.createElement("text",pi({},n,{dominantBaseline:"central",className:Ot("recharts-radial-bar-label",u)}),w.createElement("defs",null,w.createElement("path",{id:C,d:R})),w.createElement("textPath",{xlinkHref:"#".concat(C)},r))},QF=(e,t,r)=>{var{cx:n,cy:i,innerRadius:l,outerRadius:u,startAngle:d,endAngle:h}=e,m=(d+h)/2;if(r==="outside"){var{x:p,y:g}=wr(n,i,u+t,m);return{x:p,y:g,textAnchor:p>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var x=(l+u)/2,{x:b,y:j}=wr(n,i,x,m);return{x:b,y:j,textAnchor:"middle",verticalAnchor:"middle"}},nx=e=>"cx"in e&&$e(e.cx),JF=(e,t)=>{var{parentViewBox:r,offset:n,position:i}=e,l;r!=null&&!nx(r)&&(l=r);var{x:u,y:d,upperWidth:h,lowerWidth:m,height:p}=t,g=u,x=u+(h-m)/2,b=(g+x)/2,j=(h+m)/2,N=g+h/2,_=p>=0?1:-1,E=_*n,k=_>0?"end":"start",A=_>0?"start":"end",I=h>=0?1:-1,R=I*n,C=I>0?"end":"start",P=I>0?"start":"end";if(i==="top"){var Y={x:g+h/2,y:d-E,textAnchor:"middle",verticalAnchor:k};return cr(cr({},Y),l?{height:Math.max(d-l.y,0),width:h}:{})}if(i==="bottom"){var oe={x:x+m/2,y:d+p+E,textAnchor:"middle",verticalAnchor:A};return cr(cr({},oe),l?{height:Math.max(l.y+l.height-(d+p),0),width:m}:{})}if(i==="left"){var H={x:b-R,y:d+p/2,textAnchor:C,verticalAnchor:"middle"};return cr(cr({},H),l?{width:Math.max(H.x-l.x,0),height:p}:{})}if(i==="right"){var $={x:b+j+R,y:d+p/2,textAnchor:P,verticalAnchor:"middle"};return cr(cr({},$),l?{width:Math.max(l.x+l.width-$.x,0),height:p}:{})}var U=l?{width:j,height:p}:{};return i==="insideLeft"?cr({x:b+R,y:d+p/2,textAnchor:P,verticalAnchor:"middle"},U):i==="insideRight"?cr({x:b+j-R,y:d+p/2,textAnchor:C,verticalAnchor:"middle"},U):i==="insideTop"?cr({x:g+h/2,y:d+E,textAnchor:"middle",verticalAnchor:A},U):i==="insideBottom"?cr({x:x+m/2,y:d+p-E,textAnchor:"middle",verticalAnchor:k},U):i==="insideTopLeft"?cr({x:g+R,y:d+E,textAnchor:P,verticalAnchor:A},U):i==="insideTopRight"?cr({x:g+h-R,y:d+E,textAnchor:C,verticalAnchor:A},U):i==="insideBottomLeft"?cr({x:x+R,y:d+p-E,textAnchor:P,verticalAnchor:k},U):i==="insideBottomRight"?cr({x:x+m-R,y:d+p-E,textAnchor:C,verticalAnchor:k},U):i&&typeof i=="object"&&($e(i.x)||wi(i.x))&&($e(i.y)||wi(i.y))?cr({x:u+on(i.x,j),y:d+on(i.y,p),textAnchor:"end",verticalAnchor:"end"},U):cr({x:N,y:d+p/2,textAnchor:"middle",verticalAnchor:"middle"},U)},eV={angle:0,offset:5,zIndex:Qr.label,position:"middle",textBreakAll:!1};function gs(e){var t=qr(e,eV),{viewBox:r,position:n,value:i,children:l,content:u,className:d="",textBreakAll:h,labelRef:m}=t,p=YF(),g=TD(),x=n==="center"?g:p??g,b,j,N;if(r==null?b=x:nx(r)?b=r:b=KC(r),!b||$r(i)&&$r(l)&&!w.isValidElement(u)&&typeof u!="function")return null;var _=cr(cr({},t),{},{viewBox:b});if(w.isValidElement(u)){var{labelRef:E}=_,k=qF(_,$F);return w.cloneElement(u,k)}if(typeof u=="function"){if(j=w.createElement(u,_),w.isValidElement(j))return j}else j=WF(t);var A=ca(t);if(nx(b)){if(n==="insideStart"||n==="insideEnd"||n==="end")return ZF(t,n,j,A,b);N=QF(b,t.offset,t.position)}else N=JF(t,b);return w.createElement(Pa,{zIndex:t.zIndex},w.createElement(Im,pi({ref:m,className:Ot("recharts-label",d)},A,N,{textAnchor:MF(A.textAnchor)?A.textAnchor:N.textAnchor,breakAll:h}),j))}gs.displayName="Label";var tV=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?w.createElement(gs,pi({key:"label-implicit"},n)):Ga(e)?w.createElement(gs,pi({key:"label-implicit",value:e},n)):w.isValidElement(e)?e.type===gs?w.cloneElement(e,cr({key:"label-implicit"},n)):w.createElement(gs,pi({key:"label-implicit",content:e},n)):nw(e)?w.createElement(gs,pi({key:"label-implicit",content:e},n)):e&&typeof e=="object"?w.createElement(gs,pi({},e,{key:"label-implicit"},n)):null};function rV(e){var{label:t,labelRef:r}=e,n=TD();return tV(t,n,r)||null}var My={},Iy={},oA;function nV(){return oA||(oA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Iy)),Iy}var Ly={},lA;function aV(){return lA||(lA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Ly)),Ly}var cA;function iV(){return cA||(cA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nV(),r=aV(),n=Cx();function i(l){if(n.isArrayLike(l))return t.last(r.toArray(l))}e.last=i})(My)),My}var zy,uA;function sV(){return uA||(uA=1,zy=iV().last),zy}var oV=sV();const lV=Ka(oV);var cV=["valueAccessor"],uV=["dataKey","clockWise","id","textBreakAll","zIndex"];function kh(){return kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kh.apply(null,arguments)}function dA(e,t){if(e==null)return{};var r,n,i=dV(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function dV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var fV=e=>Array.isArray(e.value)?lV(e.value):e.value,kD=w.createContext(void 0),hV=kD.Provider,DD=w.createContext(void 0),mV=DD.Provider;function pV(){return w.useContext(kD)}function gV(){return w.useContext(DD)}function Bf(e){var{valueAccessor:t=fV}=e,r=dA(e,cV),{dataKey:n,clockWise:i,id:l,textBreakAll:u,zIndex:d}=r,h=dA(r,uV),m=pV(),p=gV(),g=m||p;return!g||!g.length?null:w.createElement(Pa,{zIndex:d??Qr.label},w.createElement(hn,{className:"recharts-label-list"},g.map((x,b)=>{var j,N=$r(n)?t(x,b):Xt(x&&x.payload,n),_=$r(l)?{}:{id:"".concat(l,"-").concat(b)};return w.createElement(gs,kh({key:"label-".concat(b)},ca(x),h,_,{fill:(j=r.fill)!==null&&j!==void 0?j:x.fill,parentViewBox:x.parentViewBox,value:N,textBreakAll:u,viewBox:x.viewBox,index:b,zIndex:0}))})))}Bf.displayName="LabelList";function RD(e){var{label:t}=e;return t?t===!0?w.createElement(Bf,{key:"labelList-implicit"}):w.isValidElement(t)||nw(t)?w.createElement(Bf,{key:"labelList-implicit",content:t}):typeof t=="object"?w.createElement(Bf,kh({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var PD=e=>e.graphicalItems.polarItems,yV=ae([Qt,$u],Ab),Lm=ae([PD,er,yV],Cb),vV=ae([Lm],Tb),zm=ae([vV,pb],kb),xV=ae([zm,er,Lm],Rb);ae([zm,er,Lm],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(i=>{var l,u=Xt(n,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:u,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Xt(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var fA=()=>{},bV=ae([zm,er,Lm,Dm,Qt],Lb),wV=ae([er,Mb,Ib,fA,bV,fA,yt,Qt],zb),MD=ae([er,yt,zm,xV,Uu,Qt,wV],Ub),jV=ae([MD,er,Ul],Bb);ae([er,MD,jV,Qt],Hb);var NV={radiusAxis:{},angleAxis:{}},ID=An({name:"polarAxis",initialState:NV,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:jQ,removeRadiusAxis:NQ,addAngleAxis:_Q,removeAngleAxis:SQ}=ID.actions,_V=ID.reducer;function hA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hA(Object(r),!0).forEach(function(n){SV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SV(e,t,r){return(t=EV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EV(e){var t=AV(e,"string");return typeof t=="symbol"?t:t+""}function AV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OV=(e,t)=>t,aw=ae([PD,OV],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),CV=[],iw=(e,t,r)=>(r==null?void 0:r.length)===0?CV:r,LD=ae([pb,aw,iw],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var i;if((t==null?void 0:t.data)!=null&&t.data.length>0?i=t.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(l=>mA(mA({},t.presentationProps),l.props))),i!=null)return i}}),TV=ae([LD,aw,iw],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,i)=>{var l,u=Xt(n,t.nameKey,t.name),d;return r!=null&&(l=r[i])!==null&&l!==void 0&&(l=l.props)!==null&&l!==void 0&&l.fill?d=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?d=n.fill:d=t.fill,{value:om(u,t.dataKey),color:d,payload:n,type:t.legendType}})}),kV=ae([LD,aw,iw,Tr],(e,t,r,n)=>{if(!(t==null||e==null))return PK({offset:n,pieSettings:t,displayedData:e,cells:r})}),Uy={exports:{}},Rt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pA;function DV(){if(pA)return Rt;pA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function j(N){if(typeof N=="object"&&N!==null){var _=N.$$typeof;switch(_){case e:switch(N=N.type,N){case r:case i:case n:case h:case m:case x:return N;default:switch(N=N&&N.$$typeof,N){case u:case d:case g:case p:return N;case l:return N;default:return _}}case t:return _}}}return Rt.ContextConsumer=l,Rt.ContextProvider=u,Rt.Element=e,Rt.ForwardRef=d,Rt.Fragment=r,Rt.Lazy=g,Rt.Memo=p,Rt.Portal=t,Rt.Profiler=i,Rt.StrictMode=n,Rt.Suspense=h,Rt.SuspenseList=m,Rt.isContextConsumer=function(N){return j(N)===l},Rt.isContextProvider=function(N){return j(N)===u},Rt.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},Rt.isForwardRef=function(N){return j(N)===d},Rt.isFragment=function(N){return j(N)===r},Rt.isLazy=function(N){return j(N)===g},Rt.isMemo=function(N){return j(N)===p},Rt.isPortal=function(N){return j(N)===t},Rt.isProfiler=function(N){return j(N)===i},Rt.isStrictMode=function(N){return j(N)===n},Rt.isSuspense=function(N){return j(N)===h},Rt.isSuspenseList=function(N){return j(N)===m},Rt.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===r||N===i||N===n||N===h||N===m||typeof N=="object"&&N!==null&&(N.$$typeof===g||N.$$typeof===p||N.$$typeof===u||N.$$typeof===l||N.$$typeof===d||N.$$typeof===b||N.getModuleId!==void 0)},Rt.typeOf=j,Rt}var gA;function RV(){return gA||(gA=1,Uy.exports=DV()),Uy.exports}var PV=RV(),yA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",vA=null,$y=null,zD=e=>{if(e===vA&&Array.isArray($y))return $y;var t=[];return w.Children.forEach(e,r=>{$r(r)||(PV.isFragment(r)?t=t.concat(zD(r.props.children)):t.push(r))}),$y=t,vA=e,t};function sw(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>yA(i)):n=[yA(t)],zD(e).forEach(i=>{var l=ho(i,"type.displayName")||ho(i,"type.name");l&&n.indexOf(l)!==-1&&r.push(i)}),r}var qy={},xA;function MV(){return xA||(xA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var i;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const l=r[Symbol.toStringTag];return l==null||!((i=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&i.writable)?!1:r.toString()===`[object ${l}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(qy)),qy}var By,bA;function IV(){return bA||(bA=1,By=MV().isPlainObject),By}var LV=IV();const zV=Ka(LV);function wA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wA(Object(r),!0).forEach(function(n){UV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UV(e,t,r){return(t=$V(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $V(e){var t=qV(e,"string");return typeof t=="symbol"?t:t+""}function qV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dh(){return Dh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dh.apply(null,arguments)}var NA=(e,t,r,n,i)=>{var l=r-n,u;return u="M ".concat(e,",").concat(t),u+="L ".concat(e+r,",").concat(t),u+="L ".concat(e+r-l/2,",").concat(t+i),u+="L ".concat(e+r-l/2-n,",").concat(t+i),u+="L ".concat(e,",").concat(t," Z"),u},BV={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},GV=e=>{var t=qr(e,BV),{x:r,y:n,upperWidth:i,lowerWidth:l,height:u,className:d}=t,{animationEasing:h,animationDuration:m,animationBegin:p,isUpdateAnimationActive:g}=t,x=w.useRef(null),[b,j]=w.useState(-1),N=w.useRef(i),_=w.useRef(l),E=w.useRef(u),k=w.useRef(r),A=w.useRef(n),I=xm(e,"trapezoid-");if(w.useEffect(()=>{if(x.current&&x.current.getTotalLength)try{var G=x.current.getTotalLength();G&&j(G)}catch{}},[]),r!==+r||n!==+n||i!==+i||l!==+l||u!==+u||i===0&&l===0||u===0)return null;var R=Ot("recharts-trapezoid",d);if(!g)return w.createElement("g",null,w.createElement("path",Dh({},ca(t),{className:R,d:NA(r,n,i,l,u)})));var C=N.current,P=_.current,Y=E.current,oe=k.current,H=A.current,$="0px ".concat(b===-1?1:b,"px"),U="".concat(b,"px 0px"),ce=oT(["strokeDasharray"],m,h);return w.createElement(vm,{animationId:I,key:I,canBegin:b>0,duration:m,easing:h,isActive:g,begin:p},G=>{var V=Or(C,i,G),D=Or(P,l,G),K=Or(Y,u,G),fe=Or(oe,r,G),Ne=Or(H,n,G);x.current&&(N.current=V,_.current=D,E.current=K,k.current=fe,A.current=Ne);var _e=G>0?{transition:ce,strokeDasharray:U}:{strokeDasharray:$};return w.createElement("path",Dh({},ca(t),{className:R,d:NA(fe,Ne,V,D,K),ref:x,style:jA(jA({},_e),t.style)}))})},HV=["option","shapeType","propTransformer","activeClassName"];function FV(e,t){if(e==null)return{};var r,n,i=VV(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function VV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_A(Object(r),!0).forEach(function(n){KV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_A(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KV(e,t,r){return(t=YV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YV(e){var t=WV(e,"string");return typeof t=="symbol"?t:t+""}function WV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XV(e,t){return Rh(Rh({},t),e)}function ZV(e,t){return e==="symbols"}function SA(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return w.createElement(dT,r);case"trapezoid":return w.createElement(GV,r);case"sector":return w.createElement(pT,r);case"symbols":if(ZV(t))return w.createElement(Ox,r);break;case"curve":return w.createElement(Fx,r);default:return null}}function QV(e){return w.isValidElement(e)?e.props:e}function UD(e){var{option:t,shapeType:r,propTransformer:n=XV,activeClassName:i="recharts-active-shape"}=e,l=FV(e,HV),u;if(w.isValidElement(t))u=w.cloneElement(t,Rh(Rh({},l),QV(t)));else if(typeof t=="function")u=t(l);else if(zV(t)&&typeof t!="boolean"){var d=n(t,l);u=w.createElement(SA,{shapeType:r,elementProps:d})}else{var h=l;u=w.createElement(SA,{shapeType:r,elementProps:h})}return l.isActive?w.createElement(hn,{className:i},u):u}var ow=(e,t)=>{var r=Bt();return(n,i)=>l=>{e==null||e(n,i,l),r(Xk({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},lw=e=>{var t=Bt();return(r,n)=>i=>{e==null||e(r,n,i),t(dG())}},cw=(e,t)=>{var r=Bt();return(n,i)=>l=>{e==null||e(n,i,l),r(fG({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function $D(e){var{tooltipEntrySettings:t}=e,r=Bt(),n=On(),i=w.useRef(null);return w.useLayoutEffect(()=>{n||(i.current===null?r(oG(t)):i.current!==t&&r(lG({prev:i.current,next:t})),i.current=t)},[t,r,n]),w.useLayoutEffect(()=>()=>{i.current&&(r(cG(i.current)),i.current=null)},[r]),null}function JV(e){var{legendPayload:t}=e,r=Bt(),n=On(),i=w.useRef(null);return w.useLayoutEffect(()=>{n||(i.current===null?r(rT(t)):i.current!==t&&r(nT({prev:i.current,next:t})),i.current=t)},[r,n,t]),w.useLayoutEffect(()=>()=>{i.current&&(r(aT(i.current)),i.current=null)},[r]),null}function eK(e){var{legendPayload:t}=e,r=Bt(),n=Ue(yt),i=w.useRef(null);return w.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(i.current===null?r(rT(t)):i.current!==t&&r(nT({prev:i.current,next:t})),i.current=t)},[r,n,t]),w.useLayoutEffect(()=>()=>{i.current&&(r(aT(i.current)),i.current=null)},[r]),null}var Gy,tK=()=>{var[e]=w.useState(()=>lu("uid-"));return e},rK=(Gy=EM.useId)!==null&&Gy!==void 0?Gy:tK;function qD(e,t){var r=rK();return t||(e?"".concat(e,"-").concat(r):r)}var nK=w.createContext(void 0),BD=e=>{var{id:t,type:r,children:n}=e,i=qD("recharts-".concat(r),t);return w.createElement(nK.Provider,{value:i},n(i))},aK={cartesianItems:[],polarItems:[]},GD=An({name:"graphicalItems",initialState:aK,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Wt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Ta(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:Wt()},removeCartesianGraphicalItem:{reducer(e,t){var r=Ta(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Wt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Wt()},removePolarGraphicalItem:{reducer(e,t){var r=Ta(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Wt()}}}),{addCartesianGraphicalItem:iK,replaceCartesianGraphicalItem:sK,removeCartesianGraphicalItem:oK,addPolarGraphicalItem:lK,removePolarGraphicalItem:cK}=GD.actions,uK=GD.reducer,dK=e=>{var t=Bt(),r=w.useRef(null);return w.useLayoutEffect(()=>{r.current===null?t(iK(e)):r.current!==e&&t(sK({prev:r.current,next:e})),r.current=e},[t,e]),w.useLayoutEffect(()=>()=>{r.current&&(t(oK(r.current)),r.current=null)},[t]),null},fK=w.memo(dK);function hK(e){var t=Bt();return w.useLayoutEffect(()=>(t(lK(e)),()=>{t(cK(e))}),[t,e]),null}var mK=["key"],pK=["onMouseEnter","onClick","onMouseLeave"],gK=["id"],yK=["id"];function EA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ir(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EA(Object(r),!0).forEach(function(n){vK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vK(e,t,r){return(t=xK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xK(e){var t=bK(e,"string");return typeof t=="symbol"?t:t+""}function bK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ss(){return Ss=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ss.apply(null,arguments)}function Um(e,t){if(e==null)return{};var r,n,i=wK(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function wK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function jK(e){var t=w.useMemo(()=>sw(e.children,_s),[e.children]),r=Ue(n=>TV(n,e.id,t));return r==null?null:w.createElement(eK,{legendPayload:r})}var NK=w.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:i,strokeWidth:l,fill:u,name:d,hide:h,tooltipType:m}=e,p={dataDefinedOnItem:n.map(g=>g.tooltipPayload),positions:n.map(g=>g.tooltipPosition),settings:{stroke:i,strokeWidth:l,fill:u,dataKey:t,nameKey:r,name:om(d,t),hide:h,type:m,color:u,unit:""}};return w.createElement($D,{tooltipEntrySettings:p})}),_K=(e,t)=>e>t?"start":e<t?"end":"middle",SK=(e,t,r)=>on(typeof t=="function"?t(e):t,r,r*.8),EK=(e,t,r)=>{var{top:n,left:i,width:l,height:u}=t,d=fT(l,u),h=i+on(e.cx,l,l/2),m=n+on(e.cy,u,u/2),p=on(e.innerRadius,d,0),g=SK(r,e.outerRadius,d),x=e.maxRadius||Math.sqrt(l*l+u*u)/2;return{cx:h,cy:m,innerRadius:p,outerRadius:g,maxRadius:x}},AK=(e,t)=>{var r=Ur(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function OK(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var CK=(e,t)=>{if(w.isValidElement(e))return w.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Ot("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,i=Um(t,mK);return w.createElement(Fx,Ss({},i,{type:"linear",className:r}))},TK=(e,t,r)=>{if(w.isValidElement(e))return w.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),w.isValidElement(n)))return n;var i=Ot("recharts-pie-label-text",OK(e));return w.createElement(Im,Ss({},t,{alignmentBaseline:"middle",className:i}),n)};function kK(e){var{sectors:t,props:r,showLabels:n}=e,{label:i,labelLine:l,dataKey:u}=r;if(!n||!i||!t)return null;var d=ka(r),h=ou(i),m=ou(l),p=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,g=t.map((x,b)=>{var j=(x.startAngle+x.endAngle)/2,N=wr(x.cx,x.cy,x.outerRadius+p,j),_=ir(ir(ir(ir({},d),x),{},{stroke:"none"},h),{},{index:b,textAnchor:_K(N.x,x.cx)},N),E=ir(ir(ir(ir({},d),x),{},{fill:"none",stroke:x.fill},m),{},{index:b,points:[wr(x.cx,x.cy,x.outerRadius,j),N],key:"line"});return w.createElement(Pa,{zIndex:Qr.label,key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(b)},w.createElement(hn,null,l&&CK(l,E),TK(i,_,Xt(x,u))))});return w.createElement(hn,{className:"recharts-pie-labels"},g)}function DK(e){var{sectors:t,props:r,showLabels:n}=e,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?w.createElement(RD,{label:i}):w.createElement(kK,{sectors:t,props:r,showLabels:n})}function RK(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:i,shape:l}=e,u=Ue(yo),{onMouseEnter:d,onClick:h,onMouseLeave:m}=i,p=Um(i,pK),g=ow(d,i.dataKey),x=lw(m),b=cw(h,i.dataKey);return t==null||t.length===0?null:w.createElement(w.Fragment,null,t.map((j,N)=>{if((j==null?void 0:j.startAngle)===0&&(j==null?void 0:j.endAngle)===0&&t.length!==1)return null;var _=String(N)===u,E=u?n:null,k=r&&_?r:E,A=ir(ir({},j),{},{stroke:j.stroke,tabIndex:-1,[BC]:N,[GC]:i.dataKey});return w.createElement(hn,Ss({key:"sector-".concat(j==null?void 0:j.startAngle,"-").concat(j==null?void 0:j.endAngle,"-").concat(j.midAngle,"-").concat(N),tabIndex:-1,className:"recharts-pie-sector"},Cu(p,j,N),{onMouseEnter:g(j,N),onMouseLeave:x(j,N),onClick:b(j,N)}),w.createElement(UD,Ss({option:l??k,shapeType:"sector",isActive:_},A)))}))}function PK(e){var t,{pieSettings:r,displayedData:n,cells:i,offset:l}=e,{cornerRadius:u,startAngle:d,endAngle:h,dataKey:m,nameKey:p,tooltipType:g}=r,x=Math.abs(r.minAngle),b=AK(d,h),j=Math.abs(b),N=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,_=n.filter(C=>Xt(C,m,0)!==0).length,E=(j>=360?_:_-1)*N,k=j-_*x-E,A=n.reduce((C,P)=>{var Y=Xt(P,m,0);return C+($e(Y)?Y:0)},0),I;if(A>0){var R;I=n.map((C,P)=>{var Y=Xt(C,m,0),oe=Xt(C,p,P),H=EK(r,l,C),$=($e(Y)?Y:0)/A,U,ce=ir(ir({},C),i&&i[P]&&i[P].props);P?U=R.endAngle+Ur(b)*N*(Y!==0?1:0):U=d;var G=U+Ur(b)*((Y!==0?x:0)+$*k),V=(U+G)/2,D=(H.innerRadius+H.outerRadius)/2,K=[{name:oe,value:Y,payload:ce,dataKey:m,type:g}],fe=wr(H.cx,H.cy,D,V);return R=ir(ir(ir(ir({},r.presentationProps),{},{percent:$,cornerRadius:typeof u=="string"?parseFloat(u):u,name:oe,tooltipPayload:K,midAngle:V,middleRadius:D,tooltipPosition:fe},ce),H),{},{value:Y,startAngle:U,endAngle:G,payload:ce,paddingAngle:Ur(b)*N}),R})}return I}function MK(e){var{showLabels:t,sectors:r,children:n}=e,i=w.useMemo(()=>!t||!r?[]:r.map(l=>({value:l.value,payload:l.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:l.cx,cy:l.cy,innerRadius:l.innerRadius,outerRadius:l.outerRadius,startAngle:l.startAngle,endAngle:l.endAngle,clockWise:!1},fill:l.fill})),[r,t]);return w.createElement(mV,{value:t?i:void 0},n)}function IK(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:i,animationBegin:l,animationDuration:u,animationEasing:d,activeShape:h,inactiveShape:m,onAnimationStart:p,onAnimationEnd:g}=t,x=xm(t,"recharts-pie-"),b=r.current,[j,N]=w.useState(!1),_=w.useCallback(()=>{typeof g=="function"&&g(),N(!1)},[g]),E=w.useCallback(()=>{typeof p=="function"&&p(),N(!0)},[p]);return w.createElement(MK,{showLabels:!j,sectors:n},w.createElement(vm,{animationId:x,begin:l,duration:u,isActive:i,easing:d,onAnimationStart:E,onAnimationEnd:_,key:x},k=>{var A=[],I=n&&n[0],R=I==null?void 0:I.startAngle;return n==null||n.forEach((C,P)=>{var Y=b&&b[P],oe=P>0?ho(C,"paddingAngle",0):0;if(Y){var H=Or(Y.endAngle-Y.startAngle,C.endAngle-C.startAngle,k),$=ir(ir({},C),{},{startAngle:R+oe,endAngle:R+H+oe});A.push($),R=$.endAngle}else{var{endAngle:U,startAngle:ce}=C,G=Or(0,U-ce,k),V=ir(ir({},C),{},{startAngle:R+oe,endAngle:R+G+oe});A.push(V),R=V.endAngle}}),r.current=A,w.createElement(hn,null,w.createElement(RK,{sectors:A,activeShape:h,inactiveShape:m,allOtherPieProps:t,shape:t.shape}))}),w.createElement(DK,{showLabels:!j,sectors:n,props:t}),t.children)}var LK={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!wo.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Qr.area};function zK(e){var{id:t}=e,r=Um(e,gK),{hide:n,className:i,rootTabIndex:l}=e,u=w.useMemo(()=>sw(e.children,_s),[e.children]),d=Ue(p=>kV(p,t,u)),h=w.useRef(null),m=Ot("recharts-pie",i);return n||d==null?(h.current=null,w.createElement(hn,{tabIndex:l,className:m})):w.createElement(Pa,{zIndex:e.zIndex},w.createElement(NK,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:d,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType}),w.createElement(hn,{tabIndex:l,className:m},w.createElement(IK,{props:ir(ir({},r),{},{sectors:d}),previousSectorsRef:h})))}function uw(e){var t=qr(e,LK),{id:r}=t,n=Um(t,yK),i=ka(n);return w.createElement(BD,{id:r,type:"pie"},l=>w.createElement(w.Fragment,null,w.createElement(hK,{type:"pie",id:l,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),w.createElement(jK,Ss({},n,{id:l})),w.createElement(zK,Ss({},n,{id:l}))))}uw.displayName="Pie";function AA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function OA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AA(Object(r),!0).forEach(function(n){UK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UK(e,t,r){return(t=$K(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $K(e){var t=qK(e,"string");return typeof t=="symbol"?t:t+""}function qK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BK={xAxis:{},yAxis:{},zAxis:{}},HD=An({name:"cartesianAxis",initialState:BK,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Wt()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Wt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Wt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Wt()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Wt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Wt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Wt()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Wt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Wt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var l=i.widthHistory||[];if(l.length===3&&l[0]===l[2]&&n===l[1]&&n!==i.width&&Math.abs(n-l[0])<=1)return;var u=[...l,n].slice(-3);e.yAxis[r]=OA(OA({},e.yAxis[r]),{},{width:n,widthHistory:u})}}}}),{addXAxis:GK,replaceXAxis:HK,removeXAxis:FK,addYAxis:VK,replaceYAxis:KK,removeYAxis:YK,addZAxis:EQ,replaceZAxis:AQ,removeZAxis:OQ,updateYAxisWidth:WK}=HD.actions,XK=HD.reducer,ZK=ae([Tr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),QK=ae([ZK,Ci,Ti],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),FD=()=>Ue(QK),JK="Invariant failed";function eY(e,t){throw new Error(JK)}var tY=["x","y"];function ax(){return ax=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ax.apply(null,arguments)}function CA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Fc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CA(Object(r),!0).forEach(function(n){rY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rY(e,t,r){return(t=nY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nY(e){var t=aY(e,"string");return typeof t=="symbol"?t:t+""}function aY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iY(e,t){if(e==null)return{};var r,n,i=sY(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function sY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function oY(e,t){var{x:r,y:n}=e,i=iY(e,tY),l="".concat(r),u=parseInt(l,10),d="".concat(n),h=parseInt(d,10),m="".concat(t.height||i.height),p=parseInt(m,10),g="".concat(t.width||i.width),x=parseInt(g,10);return Fc(Fc(Fc(Fc(Fc({},t),i),u?{x:u}:{}),h?{y:h}:{}),{},{height:p,width:x,name:t.name,radius:t.radius})}function Ph(e){return w.createElement(UD,ax({shapeType:"rectangle",propTransformer:oY,activeClassName:"recharts-active-bar"},e))}var lY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if($e(t))return t;var l=$e(n)||$r(n);return l?t(n,i):(l||eY(),r)}},cY={},VD=An({name:"errorBars",initialState:cY,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(l=>l.dataKey===n.dataKey&&l.direction===n.direction?i:l))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:CQ,replaceErrorBar:TQ,removeErrorBar:kQ}=VD.actions,uY=VD.reducer,dY=["children"];function fY(e,t){if(e==null)return{};var r,n,i=hY(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function hY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mY={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},pY=w.createContext(mY);function gY(e){var{children:t}=e,r=fY(e,dY);return w.createElement(pY.Provider,{value:r},t)}function KD(e,t){var r,n,i=Ue(m=>Di(m,e)),l=Ue(m=>Ri(m,t)),u=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:Ir.allowDataOverflow,d=(n=l==null?void 0:l.allowDataOverflow)!==null&&n!==void 0?n:Lr.allowDataOverflow,h=u||d;return{needClip:h,needClipX:u,needClipY:d}}function yY(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=FD(),{needClipX:l,needClipY:u,needClip:d}=KD(t,r);if(!d||!i)return null;var{x:h,y:m,width:p,height:g}=i;return w.createElement("clipPath",{id:"clipPath-".concat(n)},w.createElement("rect",{x:l?h:h-p/2,y:u?m:m-g/2,width:l?p:p*2,height:u?g:g*2}))}function vY(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&dr(e.zIndex)?e.zIndex:t}var Hy={exports:{}},Fy={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TA;function xY(){if(TA)return Fy;TA=1;var e=Dl();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,i=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return Fy.useSyncExternalStoreWithSelector=function(h,m,p,g,x){var b=i(null);if(b.current===null){var j={hasValue:!1,value:null};b.current=j}else j=b.current;b=u(function(){function _(R){if(!E){if(E=!0,k=R,R=g(R),x!==void 0&&j.hasValue){var C=j.value;if(x(C,R))return A=C}return A=R}if(C=A,r(k,R))return C;var P=g(R);return x!==void 0&&x(C,P)?(k=R,C):(k=R,A=P)}var E=!1,k,A,I=p===void 0?null:p;return[function(){return _(m())},I===null?void 0:function(){return _(I())}]},[m,p,g,x]);var N=n(h,b[0],b[1]);return l(function(){j.hasValue=!0,j.value=N},[N]),d(N),N},Fy}var kA;function bY(){return kA||(kA=1,Hy.exports=xY()),Hy.exports}bY();function wY(e){e()}function jY(){let e=null,t=null;return{clear(){e=null,t=null},notify(){wY(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var DA={notify(){},get:()=>[]};function NY(e,t){let r,n=DA,i=0,l=!1;function u(N){p();const _=n.subscribe(N);let E=!1;return()=>{E||(E=!0,_(),g())}}function d(){n.notify()}function h(){j.onStateChange&&j.onStateChange()}function m(){return l}function p(){i++,r||(r=e.subscribe(h),n=jY())}function g(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=DA)}function x(){l||(l=!0,p())}function b(){l&&(l=!1,g())}const j={addNestedSub:u,notifyNestedSubs:d,handleChangeWrapper:h,isSubscribed:m,trySubscribe:x,tryUnsubscribe:b,getListeners:()=>n};return j}var _Y=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SY=_Y(),EY=()=>typeof navigator<"u"&&navigator.product==="ReactNative",AY=EY(),OY=()=>SY||AY?w.useLayoutEffect:w.useEffect,CY=OY();function RA(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function TY(e,t){if(RA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!RA(e[r[i]],t[r[i]]))return!1;return!0}var Vy=Symbol.for("react-redux-context"),Ky=typeof globalThis<"u"?globalThis:{};function kY(){if(!w.createContext)return{};const e=Ky[Vy]??(Ky[Vy]=new Map);let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var DY=kY();function RY(e){const{children:t,context:r,serverState:n,store:i}=e,l=w.useMemo(()=>{const h=NY(i);return{store:i,subscription:h,getServerState:n?()=>n:void 0}},[i,n]),u=w.useMemo(()=>i.getState(),[i]);CY(()=>{const{subscription:h}=l;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),u!==i.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[l,u]);const d=r||DY;return w.createElement(d.Provider,{value:l},t)}var PY=RY,MY=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function IY(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function dw(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(MY.has(n)){if(e[n]==null&&t[n]==null)continue;if(!TY(e[n],t[n]))return!1}else if(!IY(e[n],t[n]))return!1;return!0}var LY=["onMouseEnter","onMouseLeave","onClick"],zY=["value","background","tooltipPosition"],UY=["id"],$Y=["onMouseEnter","onClick","onMouseLeave"];function Ai(){return Ai=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ai.apply(null,arguments)}function PA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PA(Object(r),!0).forEach(function(n){qY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qY(e,t,r){return(t=BY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BY(e){var t=GY(e,"string");return typeof t=="symbol"?t:t+""}function GY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mh(e,t){if(e==null)return{};var r,n,i=HY(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function HY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var FY=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:l}=e;return[{inactive:l,dataKey:t,type:i,color:n,value:om(r,t),payload:e}]},VY=w.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:l,hide:u,unit:d,tooltipType:h}=e,m={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:om(l,t),hide:u,type:h,color:i,unit:d}};return w.createElement($D,{tooltipEntrySettings:m})});function KY(e){var t=Ue(yo),{data:r,dataKey:n,background:i,allOtherBarProps:l}=e,{onMouseEnter:u,onMouseLeave:d,onClick:h}=l,m=Mh(l,LY),p=ow(u,n),g=lw(d),x=cw(h,n);if(!i||r==null)return null;var b=ou(i);return w.createElement(Pa,{zIndex:vY(i,Qr.barBackground)},r.map((j,N)=>{var{value:_,background:E,tooltipPosition:k}=j,A=Mh(j,zY);if(!E)return null;var I=p(j,N),R=g(j,N),C=x(j,N),P=dn(dn(dn(dn(dn({option:i,isActive:String(N)===t},A),{},{fill:"#eee"},E),b),Cu(m,j,N)),{},{onMouseEnter:I,onMouseLeave:R,onClick:C,dataKey:n,index:N,className:"recharts-bar-background-rectangle"});return w.createElement(Ph,Ai({key:"background-bar-".concat(N)},P))}))}function YY(e){var{showLabels:t,children:r,rects:n}=e,i=n==null?void 0:n.map(l=>{var u={x:l.x,y:l.y,width:l.width,lowerWidth:l.width,upperWidth:l.width,height:l.height};return dn(dn({},u),{},{value:l.value,payload:l.payload,parentViewBox:l.parentViewBox,viewBox:u,fill:l.fill})});return w.createElement(hV,{value:t?i:void 0},r)}function WY(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:l,dataKey:u}=e,d=Ue(yo),h=Ue(uD),m=r&&String(l)===d&&(h==null||u===h),p=m?r:t;return m?w.createElement(Pa,{zIndex:Qr.activeBar},w.createElement(Ph,Ai({},n,{name:String(n.name)},i,{isActive:m,option:p,index:l,dataKey:u}))):w.createElement(Ph,Ai({},n,{name:String(n.name)},i,{isActive:m,option:p,index:l,dataKey:u}))}function XY(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:l}=e;return w.createElement(Ph,Ai({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:i,dataKey:l}))}function ZY(e){var t,{data:r,props:n}=e,i=(t=ka(n))!==null&&t!==void 0?t:{},{id:l}=i,u=Mh(i,UY),{shape:d,dataKey:h,activeBar:m}=n,{onMouseEnter:p,onClick:g,onMouseLeave:x}=n,b=Mh(n,$Y),j=ow(p,h),N=lw(x),_=cw(g,h);return r?w.createElement(w.Fragment,null,r.map((E,k)=>w.createElement(hn,Ai({key:"rectangle-".concat(E==null?void 0:E.x,"-").concat(E==null?void 0:E.y,"-").concat(E==null?void 0:E.value,"-").concat(k),className:"recharts-bar-rectangle"},Cu(b,E,k),{onMouseEnter:j(E,k),onMouseLeave:N(E,k),onClick:_(E,k)}),m?w.createElement(WY,{shape:d,activeBar:m,baseProps:u,entry:E,index:k,dataKey:h}):w.createElement(XY,{shape:d,baseProps:u,entry:E,index:k,dataKey:h})))):null}function QY(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:l,animationBegin:u,animationDuration:d,animationEasing:h,onAnimationEnd:m,onAnimationStart:p}=t,g=r.current,x=xm(t,"recharts-bar-"),[b,j]=w.useState(!1),N=!b,_=w.useCallback(()=>{typeof m=="function"&&m(),j(!1)},[m]),E=w.useCallback(()=>{typeof p=="function"&&p(),j(!0)},[p]);return w.createElement(YY,{showLabels:N,rects:n},w.createElement(vm,{animationId:x,begin:u,duration:d,isActive:l,easing:h,onAnimationEnd:_,onAnimationStart:E,key:x},k=>{var A=k===1?n:n==null?void 0:n.map((I,R)=>{var C=g&&g[R];if(C)return dn(dn({},I),{},{x:Or(C.x,I.x,k),y:Or(C.y,I.y,k),width:Or(C.width,I.width,k),height:Or(C.height,I.height,k)});if(i==="horizontal"){var P=Or(0,I.height,k),Y=Or(I.stackedBarStart,I.y,k);return dn(dn({},I),{},{y:Y,height:P})}var oe=Or(0,I.width,k),H=Or(I.stackedBarStart,I.x,k);return dn(dn({},I),{},{width:oe,x:H})});return k>0&&(r.current=A??null),A==null?null:w.createElement(hn,null,w.createElement(ZY,{props:t,data:A}))}),w.createElement(RD,{label:t.label}),t.children)}function JY(e){var t=w.useRef(null);return w.createElement(QY,{previousRectanglesRef:t,props:e})}var YD=0,eW=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Xt(e,t)}};class tW extends w.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:l,yAxisId:u,needClip:d,background:h,id:m}=this.props;if(t||r==null)return null;var p=Ot("recharts-bar",i),g=m;return w.createElement(hn,{className:p,id:m},d&&w.createElement("defs",null,w.createElement(yY,{clipPathId:g,xAxisId:l,yAxisId:u})),w.createElement(hn,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(g,")"):void 0},w.createElement(KY,{data:r,dataKey:n,background:h,allOtherBarProps:this.props}),w.createElement(JY,this.props)))}}var rW={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:YD,xAxisId:0,yAxisId:0,zIndex:Qr.bar};function nW(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:l,activeBar:u,animationBegin:d,animationDuration:h,animationEasing:m,isAnimationActive:p}=e,{needClip:g}=KD(t,r),x=hm(),b=On(),j=sw(e.children,_s),N=Ue(k=>kW(k,t,r,b,e.id,j));if(x!=="vertical"&&x!=="horizontal")return null;var _,E=N==null?void 0:N[0];return E==null||E.height==null||E.width==null?_=0:_=x==="vertical"?E.height/2:E.width/2,w.createElement(gY,{xAxisId:t,yAxisId:r,data:N,dataPointFormatter:eW,errorBarOffset:_},w.createElement(tW,Ai({},e,{layout:x,needClip:g,data:N,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:l,activeBar:u,animationBegin:d,animationDuration:h,animationEasing:m,isAnimationActive:p})))}function aW(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:l,xAxis:u,yAxis:d,xAxisTicks:h,yAxisTicks:m,stackedData:p,displayedData:g,offset:x,cells:b,parentViewBox:j,dataStartIndex:N}=e,_=t==="horizontal"?d:u,E=p?_.scale.domain():null,k=z8({numericAxis:_}),A=_.scale(k);return g.map((I,R)=>{var C,P,Y,oe,H,$;p?C=D8(p[R+N],E):(C=Xt(I,r),Array.isArray(C)||(C=[k,C]));var U=lY(n,YD)(C[1],R);if(t==="horizontal"){var ce,[G,V]=[d.scale(C[0]),d.scale(C[1])];P=JS({axis:u,ticks:h,bandSize:l,offset:i.offset,entry:I,index:R}),Y=(ce=V??G)!==null&&ce!==void 0?ce:void 0,oe=i.size;var D=G-V;if(H=Da(D)?0:D,$={x:P,y:x.top,width:oe,height:x.height},Math.abs(U)>0&&Math.abs(H)<Math.abs(U)){var K=Ur(H||U)*(Math.abs(U)-Math.abs(H));Y-=K,H+=K}}else{var[fe,Ne]=[u.scale(C[0]),u.scale(C[1])];if(P=fe,Y=JS({axis:d,ticks:m,bandSize:l,offset:i.offset,entry:I,index:R}),oe=Ne-fe,H=i.size,$={x:x.left,y:Y,width:x.width,height:H},Math.abs(U)>0&&Math.abs(oe)<Math.abs(U)){var _e=Ur(oe||U)*(Math.abs(U)-Math.abs(oe));oe+=_e}}if(P==null||Y==null||oe==null||H==null)return null;var L=dn(dn({},I),{},{stackedBarStart:A,x:P,y:Y,width:oe,height:H,value:p?C:C[1],payload:I,background:$,tooltipPosition:{x:P+oe/2,y:Y+H/2},parentViewBox:j},b&&b[R]&&b[R].props);return L}).filter(Boolean)}function iW(e){var t=qr(e,rW),r=On();return w.createElement(BD,{id:t.id,type:"bar"},n=>w.createElement(w.Fragment,null,w.createElement(JV,{legendPayload:FY(t)}),w.createElement(VY,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),w.createElement(fK,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:L8(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),w.createElement(Pa,{zIndex:t.zIndex},w.createElement(nW,Ai({},t,{id:n})))))}var $m=w.memo(iW,dw);$m.displayName="Bar";function MA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Mf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MA(Object(r),!0).forEach(function(n){sW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sW(e,t,r){return(t=oW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oW(e){var t=lW(e,"string");return typeof t=="symbol"?t:t+""}function lW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cW=(e,t)=>t,uW=(e,t,r)=>r,dW=(e,t,r,n)=>n,fW=(e,t,r,n,i)=>i,Yu=ae([Ob,fW],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),hW=ae([Yu],e=>e==null?void 0:e.maxBarSize),mW=(e,t,r,n,i,l)=>l,IA=(e,t,r)=>{var n=r??e;if(!$r(n))return on(n,t,0)},pW=ae([yt,Ob,cW,uW,dW],(e,t,r,n,i)=>t.filter(l=>e==="horizontal"?l.xAxisId===r:l.yAxisId===n).filter(l=>l.isPanorama===i).filter(l=>l.hide===!1).filter(l=>l.type==="bar")),gW=(e,t,r,n)=>{var i=yt(e);return i==="horizontal"?Zv(e,"yAxis",r,n):Zv(e,"xAxis",t,n)},yW=(e,t,r)=>{var n=yt(e);return n==="horizontal"?D2(e,"xAxis",t):D2(e,"yAxis",r)},vW=(e,t,r)=>{var n={},i=e.filter(Om),l=e.filter(m=>m.stackId==null),u=i.reduce((m,p)=>(m[p.stackId]||(m[p.stackId]=[]),m[p.stackId].push(p),m),n),d=Object.entries(u).map(m=>{var[p,g]=m,x=g.map(j=>j.dataKey),b=IA(t,r,g[0].barSize);return{stackId:p,dataKeys:x,barSize:b}}),h=l.map(m=>{var p=[m.dataKey].filter(x=>x!=null),g=IA(t,r,m.barSize);return{stackId:void 0,dataKeys:p,barSize:g}});return[...d,...h]},xW=ae([pW,e9,yW],vW),bW=(e,t,r,n,i)=>{var l,u,d=Yu(e,t,r,n,i);if(d!=null){var h=yt(e),m=dk(e),{maxBarSize:p}=d,g=$r(p)?m:p,x,b;return h==="horizontal"?(x=kl(e,"xAxis",t,n),b=Tl(e,"xAxis",t,n)):(x=kl(e,"yAxis",r,n),b=Tl(e,"yAxis",r,n)),(l=(u=lh(x,b,!0))!==null&&u!==void 0?u:g)!==null&&l!==void 0?l:0}},WD=(e,t,r,n)=>{var i=yt(e),l,u;return i==="horizontal"?(l=kl(e,"xAxis",t,n),u=Tl(e,"xAxis",t,n)):(l=kl(e,"yAxis",r,n),u=Tl(e,"yAxis",r,n)),lh(l,u)};function wW(e,t,r,n,i){var l=n.length;if(!(l<1)){var u=on(e,r,0,!0),d,h=[];if(dr(n[0].barSize)){var m=!1,p=r/l,g=n.reduce((E,k)=>E+(k.barSize||0),0);g+=(l-1)*u,g>=r&&(g-=(l-1)*u,u=0),g>=r&&p>0&&(m=!0,p*=.9,g=l*p);var x=(r-g)/2>>0,b={offset:x-u,size:0};d=n.reduce((E,k)=>{var A,I={stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:b.offset+b.size+u,size:m?p:(A=k.barSize)!==null&&A!==void 0?A:0}},R=[...E,I];return b=R[R.length-1].position,R},h)}else{var j=on(t,r,0,!0);r-2*j-(l-1)*u<=0&&(u=0);var N=(r-2*j-(l-1)*u)/l;N>1&&(N>>=0);var _=dr(i)?Math.min(N,i):N;d=n.reduce((E,k,A)=>[...E,{stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:j+(N+u)*A+(N-_)/2,size:_}}],h)}return d}}var jW=(e,t,r,n,i,l,u)=>{var d=$r(u)?t:u,h=wW(r,n,i!==l?i:l,e,d);return i!==l&&h!=null&&(h=h.map(m=>Mf(Mf({},m),{},{position:Mf(Mf({},m.position),{},{offset:m.position.offset-i/2})}))),h},NW=ae([xW,dk,J7,fk,bW,WD,hW],jW),_W=(e,t,r,n)=>kl(e,"xAxis",t,n),SW=(e,t,r,n)=>kl(e,"yAxis",r,n),EW=(e,t,r,n)=>Tl(e,"xAxis",t,n),AW=(e,t,r,n)=>Tl(e,"yAxis",r,n),OW=ae([NW,Yu],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),CW=(e,t)=>{var r=Sb(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:l}=i;if(l)return l.find(u=>u.key===r)}}}},TW=ae([gW,Yu],CW),kW=ae([Tr,Ux,_W,SW,EW,AW,OW,yt,gb,WD,TW,Yu,mW],(e,t,r,n,i,l,u,d,h,m,p,g,x)=>{var{chartData:b,dataStartIndex:j,dataEndIndex:N}=h;if(!(g==null||u==null||t==null||d!=="horizontal"&&d!=="vertical"||r==null||n==null||i==null||l==null||m==null)){var{data:_}=g,E;if(_!=null&&_.length>0?E=_:E=b==null?void 0:b.slice(j,N+1),E!=null)return aW({layout:d,barSettings:g,pos:u,parentViewBox:t,bandSize:m,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:l,stackedData:p,displayedData:E,offset:e,cells:x,dataStartIndex:j})}}),XD=e=>{var{chartData:t}=e,r=Bt(),n=On();return w.useEffect(()=>n?()=>{}:(r(F2(t)),()=>{r(F2(void 0))}),[t,r,n]),null},LA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},ZD=An({name:"brush",initialState:LA,reducers:{setBrushSettings(e,t){return t.payload==null?LA:t.payload}}}),{setBrushSettings:DQ}=ZD.actions,DW=ZD.reducer;function RW(e,t,r){return(t=PW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PW(e){var t=MW(e,"string");return typeof t=="symbol"?t:t+""}function MW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class fw{static create(t){return new fw(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(t)+l}default:return this.scale(t)}if(r){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+u}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?t>=n&&t<=i:t>=i&&t<=n}}RW(fw,"EPS",1e-4);function IW(e){return(e%180+180)%180}var LW=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=IW(i),u=l*Math.PI/180,d=Math.atan(n/r),h=u>d&&u<Math.PI-d?n/Math.sin(u):r/Math.cos(u);return Math.abs(h)},zW={dots:[],areas:[],lines:[]},QD=An({name:"referenceElements",initialState:zW,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Ta(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Ta(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Ta(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:RQ,removeDot:PQ,addArea:MQ,removeArea:IQ,addLine:LQ,removeLine:zQ}=QD.actions,UW=QD.reducer,$W=w.createContext(void 0),qW=e=>{var{children:t}=e,[r]=w.useState("".concat(lu("recharts"),"-clip")),n=FD();if(n==null)return null;var{x:i,y:l,width:u,height:d}=n;return w.createElement($W.Provider,{value:r},w.createElement("defs",null,w.createElement("clipPath",{id:r},w.createElement("rect",{x:i,y:l,height:d,width:u}))),t)};function JD(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function BW(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return LW(n,r)}function GW(e,t,r){var n=r==="width",{x:i,y:l,width:u,height:d}=e;return t===1?{start:n?i:l,end:n?i+u:l+d}:{start:n?i+u:l+d,end:n?i:l}}function Ih(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var l=r();return e*(t-e*l/2-n)>=0&&e*(t+e*l/2-i)<=0}function HW(e,t){return JD(e,t+1)}function FW(e,t,r,n,i){for(var l=(n||[]).slice(),{start:u,end:d}=t,h=0,m=1,p=u,g=function(){var j=n==null?void 0:n[h];if(j===void 0)return{v:JD(n,m)};var N=h,_,E=()=>(_===void 0&&(_=r(j,N)),_),k=j.coordinate,A=h===0||Ih(e,k,E,p,d);A||(h=0,p=u,m+=1),A&&(p=k+e*(E()/2+i),h+=m)},x;m<=l.length;)if(x=g(),x)return x.v;return[]}function zA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zA(Object(r),!0).forEach(function(n){VW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VW(e,t,r){return(t=KW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KW(e){var t=YW(e,"string");return typeof t=="symbol"?t:t+""}function YW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WW(e,t,r,n,i){for(var l=(n||[]).slice(),u=l.length,{start:d}=t,{end:h}=t,m=function(x){var b=l[x],j,N=()=>(j===void 0&&(j=r(b,x)),j);if(x===u-1){var _=e*(b.coordinate+e*N()/2-h);l[x]=b=nn(nn({},b),{},{tickCoord:_>0?b.coordinate-_*e:b.coordinate})}else l[x]=b=nn(nn({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var E=Ih(e,b.tickCoord,N,d,h);E&&(h=b.tickCoord-e*(N()/2+i),l[x]=nn(nn({},b),{},{isShow:!0}))}},p=u-1;p>=0;p--)m(p);return l}function XW(e,t,r,n,i,l){var u=(n||[]).slice(),d=u.length,{start:h,end:m}=t;if(l){var p=n[d-1],g=r(p,d-1),x=e*(p.coordinate+e*g/2-m);if(u[d-1]=p=nn(nn({},p),{},{tickCoord:x>0?p.coordinate-x*e:p.coordinate}),p.tickCoord!=null){var b=Ih(e,p.tickCoord,()=>g,h,m);b&&(m=p.tickCoord-e*(g/2+i),u[d-1]=nn(nn({},p),{},{isShow:!0}))}}for(var j=l?d-1:d,N=function(k){var A=u[k],I,R=()=>(I===void 0&&(I=r(A,k)),I);if(k===0){var C=e*(A.coordinate-e*R()/2-h);u[k]=A=nn(nn({},A),{},{tickCoord:C<0?A.coordinate-C*e:A.coordinate})}else u[k]=A=nn(nn({},A),{},{tickCoord:A.coordinate});if(A.tickCoord!=null){var P=Ih(e,A.tickCoord,R,h,m);P&&(h=A.tickCoord+e*(R()/2+i),u[k]=nn(nn({},A),{},{isShow:!0}))}},_=0;_<j;_++)N(_);return u}function hw(e,t,r){var{tick:n,ticks:i,viewBox:l,minTickGap:u,orientation:d,interval:h,tickFormatter:m,unit:p,angle:g}=e;if(!i||!i.length||!n)return[];if($e(h)||wo.isSsr){var x;return(x=HW(i,$e(h)?h:0))!==null&&x!==void 0?x:[]}var b=[],j=d==="top"||d==="bottom"?"width":"height",N=p&&j==="width"?Zc(p,{fontSize:t,letterSpacing:r}):{width:0,height:0},_=(A,I)=>{var R=typeof m=="function"?m(A.value,I):A.value;return j==="width"?BW(Zc(R,{fontSize:t,letterSpacing:r}),N,g):Zc(R,{fontSize:t,letterSpacing:r})[j]},E=i.length>=2?Ur(i[1].coordinate-i[0].coordinate):1,k=GW(l,E,j);return h==="equidistantPreserveStart"?FW(E,k,_,i,u):(h==="preserveStart"||h==="preserveStartEnd"?b=XW(E,k,_,i,u,h==="preserveStartEnd"):b=WW(E,k,_,i,u),b.filter(A=>A.isShow))}var ZW=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:l=0}=e,u=0;if(t){Array.from(t).forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>u&&(u=g.width)}});var d=r?r.getBoundingClientRect().width:0,h=i+l,m=u+h+d+(r?n:0);return Math.round(m)}return 0},QW=["axisLine","width","height","className","hide","ticks","axisType"];function JW(e,t){if(e==null)return{};var r,n,i=eX(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function eX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function vo(){return vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vo.apply(null,arguments)}function UA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function br(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UA(Object(r),!0).forEach(function(n){tX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tX(e,t,r){return(t=rX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rX(e){var t=nX(e,"string");return typeof t=="symbol"?t:t+""}function nX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bi={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Qr.axis};function aX(e){var{x:t,y:r,width:n,height:i,orientation:l,mirror:u,axisLine:d,otherSvgProps:h}=e;if(!d)return null;var m=br(br(br({},h),ka(d)),{},{fill:"none"});if(l==="top"||l==="bottom"){var p=+(l==="top"&&!u||l==="bottom"&&u);m=br(br({},m),{},{x1:t,y1:r+p*i,x2:t+n,y2:r+p*i})}else{var g=+(l==="left"&&!u||l==="right"&&u);m=br(br({},m),{},{x1:t+g*n,y1:r,x2:t+g*n,y2:r+i})}return w.createElement("line",vo({},m,{className:Ot("recharts-cartesian-axis-line",ho(d,"className"))}))}function iX(e,t,r,n,i,l,u,d,h){var m,p,g,x,b,j,N=d?-1:1,_=e.tickSize||u,E=$e(e.tickCoord)?e.tickCoord:e.coordinate;switch(l){case"top":m=p=e.coordinate,x=r+ +!d*i,g=x-N*_,j=g-N*h,b=E;break;case"left":g=x=e.coordinate,p=t+ +!d*n,m=p-N*_,b=m-N*h,j=E;break;case"right":g=x=e.coordinate,p=t+ +d*n,m=p+N*_,b=m+N*h,j=E;break;default:m=p=e.coordinate,x=r+ +d*i,g=x+N*_,j=g+N*h,b=E;break}return{line:{x1:m,y1:g,x2:p,y2:x},tick:{x:b,y:j}}}function sX(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function oX(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function lX(e){var{option:t,tickProps:r,value:n}=e,i,l=Ot(r.className,"recharts-cartesian-axis-tick-value");if(w.isValidElement(t))i=w.cloneElement(t,br(br({},r),{},{className:l}));else if(typeof t=="function")i=t(br(br({},r),{},{className:l}));else{var u="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(u=Ot(u,t==null?void 0:t.className)),i=w.createElement(Im,vo({},r,{className:u}),n)}return i}var cX=w.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:l,tickFormatter:u,unit:d,padding:h,tickTextProps:m,orientation:p,mirror:g,x,y:b,width:j,height:N,tickSize:_,tickMargin:E,fontSize:k,letterSpacing:A,getTicksConfig:I,events:R,axisType:C}=e,P=hw(br(br({},I),{},{ticks:r}),k,A),Y=sX(p,g),oe=oX(p,g),H=ka(I),$=ou(n),U={};typeof i=="object"&&(U=i);var ce=br(br({},H),{},{fill:"none"},U),G=P.map(K=>br({entry:K},iX(K,x,b,j,N,p,_,g,E))),V=G.map(K=>{var{entry:fe,line:Ne}=K;return w.createElement(hn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(fe.value,"-").concat(fe.coordinate,"-").concat(fe.tickCoord)},i&&w.createElement("line",vo({},ce,Ne,{className:Ot("recharts-cartesian-axis-tick-line",ho(i,"className"))})))}),D=G.map((K,fe)=>{var{entry:Ne,tick:_e}=K,L=br(br(br(br({textAnchor:Y,verticalAnchor:oe},H),{},{stroke:"none",fill:l},$),_e),{},{index:fe,payload:Ne,visibleTicksCount:P.length,tickFormatter:u,padding:h},m);return w.createElement(hn,vo({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Ne.value,"-").concat(Ne.coordinate,"-").concat(Ne.tickCoord)},Cu(R,Ne,fe)),n&&w.createElement(lX,{option:n,tickProps:L,value:"".concat(typeof u=="function"?u(Ne.value,fe):Ne.value).concat(d||"")}))});return w.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(C,"-ticks")},D.length>0&&w.createElement(Pa,{zIndex:Qr.label},w.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(C,"-tick-labels"),ref:t},D)),V.length>0&&w.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(C,"-tick-lines")},V))}),uX=w.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:l,hide:u,ticks:d,axisType:h}=e,m=JW(e,QW),[p,g]=w.useState(""),[x,b]=w.useState(""),j=w.useRef(null);w.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var _;return ZW({ticks:j.current,label:(_=e.labelRef)===null||_===void 0?void 0:_.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=w.useCallback(_=>{if(_){var E=_.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=E;var k=E[0];if(k){var A=window.getComputedStyle(k),I=A.fontSize,R=A.letterSpacing;(I!==p||R!==x)&&(g(I),b(R))}}},[p,x]);return u||n!=null&&n<=0||i!=null&&i<=0?null:w.createElement(Pa,{zIndex:e.zIndex},w.createElement(hn,{className:Ot("recharts-cartesian-axis",l)},w.createElement(aX,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:ka(e)}),w.createElement(cX,{ref:N,axisType:h,events:m,fontSize:p,getTicksConfig:e,height:e.height,letterSpacing:x,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:d,unit:e.unit,width:e.width,x:e.x,y:e.y}),w.createElement(VF,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},w.createElement(rV,{label:e.label,labelRef:e.labelRef}),e.children)))}),mw=w.forwardRef((e,t)=>{var r=qr(e,bi);return w.createElement(uX,vo({},r,{ref:t}))});mw.displayName="CartesianAxis";var dX=["x1","y1","x2","y2","key"],fX=["offset"],hX=["xAxisId","yAxisId"],mX=["xAxisId","yAxisId"];function $A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function an(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$A(Object(r),!0).forEach(function(n){pX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$A(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pX(e,t,r){return(t=gX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gX(e){var t=yX(e,"string");return typeof t=="symbol"?t:t+""}function yX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function no(){return no=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},no.apply(null,arguments)}function Lh(e,t){if(e==null)return{};var r,n,i=vX(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function vX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xX=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:l,height:u,ry:d}=e;return w.createElement("rect",{x:n,y:i,ry:d,width:l,height:u,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function eR(e){var{option:t,lineItemProps:r}=e,n;if(w.isValidElement(t))n=w.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var i,{x1:l,y1:u,x2:d,y2:h,key:m}=r,p=Lh(r,dX),g=(i=ka(p))!==null&&i!==void 0?i:{},{offset:x}=g,b=Lh(g,fX);n=w.createElement("line",no({},b,{x1:l,y1:u,x2:d,y2:h,fill:"none",key:m}))}return n}function bX(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:l,yAxisId:u}=e,d=Lh(e,hX),h=i.map((m,p)=>{var g=an(an({},d),{},{x1:t,y1:m,x2:t+r,y2:m,key:"line-".concat(p),index:p});return w.createElement(eR,{key:"line-".concat(p),option:n,lineItemProps:g})});return w.createElement("g",{className:"recharts-cartesian-grid-horizontal"},h)}function wX(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:l,yAxisId:u}=e,d=Lh(e,mX),h=i.map((m,p)=>{var g=an(an({},d),{},{x1:m,y1:t,x2:m,y2:t+r,key:"line-".concat(p),index:p});return w.createElement(eR,{option:n,lineItemProps:g,key:"line-".concat(p)})});return w.createElement("g",{className:"recharts-cartesian-grid-vertical"},h)}function jX(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:l,height:u,horizontalPoints:d,horizontal:h=!0}=e;if(!h||!t||!t.length||d==null)return null;var m=d.map(g=>Math.round(g+i-i)).sort((g,x)=>g-x);i!==m[0]&&m.unshift(0);var p=m.map((g,x)=>{var b=!m[x+1],j=b?i+u-g:m[x+1]-g;if(j<=0)return null;var N=x%t.length;return w.createElement("rect",{key:"react-".concat(x),y:g,x:n,height:j,width:l,stroke:"none",fill:t[N],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function NX(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:l,width:u,height:d,verticalPoints:h}=e;if(!t||!r||!r.length)return null;var m=h.map(g=>Math.round(g+i-i)).sort((g,x)=>g-x);i!==m[0]&&m.unshift(0);var p=m.map((g,x)=>{var b=!m[x+1],j=b?i+u-g:m[x+1]-g;if(j<=0)return null;var N=x%r.length;return w.createElement("rect",{key:"react-".concat(x),x:g,y:l,width:j,height:d,stroke:"none",fill:r[N],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var _X=(e,t)=>{var{xAxis:r,width:n,height:i,offset:l}=e;return UC(hw(an(an(an({},bi),r),{},{ticks:$C(r),viewBox:{x:0,y:0,width:n,height:i}})),l.left,l.left+l.width,t)},SX=(e,t)=>{var{yAxis:r,width:n,height:i,offset:l}=e;return UC(hw(an(an(an({},bi),r),{},{ticks:$C(r),viewBox:{x:0,y:0,width:n,height:i}})),l.top,l.top+l.height,t)},EX={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Qr.grid};function qm(e){var t=qx(),r=Bx(),n=YC(),i=an(an({},qr(e,EX)),{},{x:$e(e.x)?e.x:n.left,y:$e(e.y)?e.y:n.top,width:$e(e.width)?e.width:n.width,height:$e(e.height)?e.height:n.height}),{xAxisId:l,yAxisId:u,x:d,y:h,width:m,height:p,syncWithTicks:g,horizontalValues:x,verticalValues:b}=i,j=On(),N=Ue(oe=>R2(oe,"xAxis",l,j)),_=Ue(oe=>R2(oe,"yAxis",u,j));if(!Fa(m)||!Fa(p)||!$e(d)||!$e(h))return null;var E=i.verticalCoordinatesGenerator||_X,k=i.horizontalCoordinatesGenerator||SX,{horizontalPoints:A,verticalPoints:I}=i;if((!A||!A.length)&&typeof k=="function"){var R=x&&x.length,C=k({yAxis:_?an(an({},_),{},{ticks:R?x:_.ticks}):void 0,width:t??m,height:r??p,offset:n},R?!0:g);ch(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(A=C)}if((!I||!I.length)&&typeof E=="function"){var P=b&&b.length,Y=E({xAxis:N?an(an({},N),{},{ticks:P?b:N.ticks}):void 0,width:t??m,height:r??p,offset:n},P?!0:g);ch(Array.isArray(Y),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof Y,"]")),Array.isArray(Y)&&(I=Y)}return w.createElement(Pa,{zIndex:i.zIndex},w.createElement("g",{className:"recharts-cartesian-grid"},w.createElement(xX,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),w.createElement(jX,no({},i,{horizontalPoints:A})),w.createElement(NX,no({},i,{verticalPoints:I})),w.createElement(bX,no({},i,{offset:n,horizontalPoints:A,xAxis:N,yAxis:_})),w.createElement(wX,no({},i,{offset:n,verticalPoints:I,xAxis:N,yAxis:_}))))}qm.displayName="CartesianGrid";var AX=["domain","range"],OX=["domain","range"];function qA(e,t){if(e==null)return{};var r,n,i=CX(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function CX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function BA(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function tR(e,t){if(e===t)return!0;var{domain:r,range:n}=e,i=qA(e,AX),{domain:l,range:u}=t,d=qA(t,OX);return!BA(r,l)||!BA(n,u)?!1:dw(i,d)}var TX=["dangerouslySetInnerHTML","ticks"],kX=["id"];function ix(){return ix=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ix.apply(null,arguments)}function GA(e,t){if(e==null)return{};var r,n,i=DX(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function DX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function RX(e){var t=Bt(),r=w.useRef(null);return w.useLayoutEffect(()=>{r.current===null?t(GK(e)):r.current!==e&&t(HK({prev:r.current,next:e})),r.current=e},[e,t]),w.useLayoutEffect(()=>()=>{r.current&&(t(FK(r.current)),r.current=null)},[t]),null}var PX=e=>{var{xAxisId:t,className:r}=e,n=Ue(Ux),i=On(),l="xAxis",u=Ue(_=>$l(_,l,t,i)),d=Ue(_=>Hk(_,l,t,i)),h=Ue(_=>$k(_,t)),m=Ue(_=>Z9(_,t)),p=Ue(_=>wk(_,t));if(h==null||m==null||p==null)return null;var{dangerouslySetInnerHTML:g,ticks:x}=e,b=GA(e,TX),{id:j}=p,N=GA(p,kX);return w.createElement(mw,ix({},b,N,{scale:u,x:m.x,y:m.y,width:h.width,height:h.height,className:Ot("recharts-".concat(l," ").concat(l),r),viewBox:n,ticks:d,axisType:l}))},MX={allowDataOverflow:Ir.allowDataOverflow,allowDecimals:Ir.allowDecimals,allowDuplicatedCategory:Ir.allowDuplicatedCategory,angle:Ir.angle,axisLine:bi.axisLine,height:Ir.height,hide:!1,includeHidden:Ir.includeHidden,interval:Ir.interval,minTickGap:Ir.minTickGap,mirror:Ir.mirror,orientation:Ir.orientation,padding:Ir.padding,reversed:Ir.reversed,scale:Ir.scale,tick:Ir.tick,tickCount:Ir.tickCount,tickLine:bi.tickLine,tickSize:bi.tickSize,type:Ir.type,xAxisId:0},IX=e=>{var t=qr(e,MX);return w.createElement(w.Fragment,null,w.createElement(RX,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),w.createElement(PX,t))},Bm=w.memo(IX,tR);Bm.displayName="XAxis";var LX=["dangerouslySetInnerHTML","ticks"],zX=["id"];function sx(){return sx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sx.apply(null,arguments)}function HA(e,t){if(e==null)return{};var r,n,i=UX(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function UX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $X(e){var t=Bt(),r=w.useRef(null);return w.useLayoutEffect(()=>{r.current===null?t(VK(e)):r.current!==e&&t(KK({prev:r.current,next:e})),r.current=e},[e,t]),w.useLayoutEffect(()=>()=>{r.current&&(t(YK(r.current)),r.current=null)},[t]),null}var qX=e=>{var{yAxisId:t,className:r,width:n,label:i}=e,l=w.useRef(null),u=w.useRef(null),d=Ue(Ux),h=On(),m=Bt(),p="yAxis",g=Ue(R=>$l(R,p,t,h)),x=Ue(R=>qk(R,t)),b=Ue(R=>J9(R,t)),j=Ue(R=>Hk(R,p,t,h)),N=Ue(R=>jk(R,t));if(w.useLayoutEffect(()=>{if(!(n!=="auto"||!x||nw(i)||w.isValidElement(i)||N==null)){var R=l.current;if(R){var C=R.getCalculatedWidth();Math.round(x.width)!==Math.round(C)&&m(WK({id:t,width:C}))}}},[j,x,m,i,t,n,N]),x==null||b==null||N==null)return null;var{dangerouslySetInnerHTML:_,ticks:E}=e,k=HA(e,LX),{id:A}=N,I=HA(N,zX);return w.createElement(mw,sx({},k,I,{ref:l,labelRef:u,scale:g,x:b.x,y:b.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:x.width,height:x.height,className:Ot("recharts-".concat(p," ").concat(p),r),viewBox:d,ticks:j,axisType:p}))},BX={allowDataOverflow:Lr.allowDataOverflow,allowDecimals:Lr.allowDecimals,allowDuplicatedCategory:Lr.allowDuplicatedCategory,angle:Lr.angle,axisLine:bi.axisLine,hide:!1,includeHidden:Lr.includeHidden,interval:Lr.interval,minTickGap:Lr.minTickGap,mirror:Lr.mirror,orientation:Lr.orientation,padding:Lr.padding,reversed:Lr.reversed,scale:Lr.scale,tick:Lr.tick,tickCount:Lr.tickCount,tickLine:bi.tickLine,tickSize:bi.tickSize,type:Lr.type,width:Lr.width,yAxisId:0},GX=e=>{var t=qr(e,BX);return w.createElement(w.Fragment,null,w.createElement($X,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),w.createElement(qX,t))},Gm=w.memo(GX,tR);Gm.displayName="YAxis";var HX=(e,t)=>t,pw=ae([HX,yt,xk,Dr,sD,Pi,hH,Tr],bH),gw=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},rR=ua("mouseClick"),nR=Du();nR.startListening({actionCreator:rR,effect:(e,t)=>{var r=e.payload,n=pw(t.getState(),gw(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(hG({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var ox=ua("mouseMove"),aR=Du(),If=null;aR.startListening({actionCreator:ox,effect:(e,t)=>{var r=e.payload;If!==null&&cancelAnimationFrame(If);var n=gw(r);If=requestAnimationFrame(()=>{var i=t.getState(),l=Kb(i,i.tooltip.settings.shared);if(l==="axis"){var u=pw(i,n);(u==null?void 0:u.activeIndex)!=null?t.dispatch(Qk({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate})):t.dispatch(Zk())}If=null})}});var FA={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},iR=An({name:"rootProps",initialState:FA,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:FA.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),FX=iR.reducer,{updateOptions:VX}=iR.actions,sR=An({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:KX}=sR.actions,YX=sR.reducer,oR=ua("keyDown"),lR=ua("focus"),yw=Du();yw.startListening({actionCreator:oR,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,l=e.payload;if(!(l!=="ArrowRight"&&l!=="ArrowLeft"&&l!=="Enter")){var u=Yb(i,Bl(r),Gu(r),Ku(r)),d=u==null?-1:Number(u);if(!(!Number.isFinite(d)||d<0)){var h=Pi(r);if(l==="Enter"){var m=Th(r,"axis","hover",String(i.index));t.dispatch(Jv({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:m}));return}var p=nG(r),g=p==="left-to-right"?1:-1,x=l==="ArrowRight"?1:-1,b=d+x*g;if(!(h==null||b>=h.length||b<0)){var j=Th(r,"axis","hover",String(b));t.dispatch(Jv({active:!0,activeIndex:b.toString(),activeDataKey:void 0,activeCoordinate:j}))}}}}}});yw.startListening({actionCreator:lR,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var l="0",u=Th(r,"axis","hover",String(l));t.dispatch(Jv({activeDataKey:void 0,active:!0,activeIndex:l,activeCoordinate:u}))}}}});var aa=ua("externalEvent"),cR=Du(),Yy=new Map;cR.startListening({actionCreator:aa,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var i=n.type,l=Yy.get(i);l!==void 0&&cancelAnimationFrame(l);var u=requestAnimationFrame(()=>{try{var d=t.getState(),h={activeCoordinate:QG(d),activeDataKey:uD(d),activeIndex:yo(d),activeLabel:cD(d),activeTooltipIndex:yo(d),isTooltipActive:JG(d)};r(h,n)}finally{Yy.delete(i)}});Yy.set(i,u)}}});var WX=ae([ql],e=>e.tooltipItemPayloads),XX=ae([WX,Fu,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(d=>d.settings.dataKey===n);if(i!=null){var{positions:l}=i;if(l!=null){var u=t(l,r);return u}}}),uR=ua("touchMove"),dR=Du();dR.startListening({actionCreator:uR,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),i=Kb(n,n.tooltip.settings.shared);if(i==="axis"){var l=pw(n,gw({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(l==null?void 0:l.activeIndex)!=null&&t.dispatch(Qk({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(i==="item"){var u,d=r.touches[0];if(document.elementFromPoint==null)return;var h=document.elementFromPoint(d.clientX,d.clientY);if(!h||!h.getAttribute)return;var m=h.getAttribute(BC),p=(u=h.getAttribute(GC))!==null&&u!==void 0?u:void 0,g=XX(t.getState(),m,p);t.dispatch(Xk({activeDataKey:p,activeIndex:m,activeCoordinate:g}))}}}});var ZX=uC({brush:DW,cartesianAxis:XK,chartData:ZH,errorBars:uY,graphicalItems:uK,layout:E8,legend:PU,options:VH,polarAxis:_V,polarOptions:YX,referenceElements:UW,rootProps:FX,tooltip:mG,zIndex:PH}),QX=function(t){return Zz({reducer:ZX,preloadedState:t,middleware:r=>{var n;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([nR.middleware,aR.middleware,yw.middleware,cR.middleware,dR.middleware])},enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(SC({type:"raf"}))},devTools:wo.devToolsEnabled})};function fR(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=On(),l=w.useRef(null);if(i)return r;l.current==null&&(l.current=QX(t));var u=Tx;return w.createElement(PY,{context:u,store:l.current},r)}function JX(e){var{layout:t,margin:r}=e,n=Bt(),i=On();return w.useEffect(()=>{i||(n(N8(t)),n(j8(r)))},[n,i,t,r]),null}var hR=w.memo(JX,dw);function mR(e){var t=Bt();return w.useEffect(()=>{t(VX(e))},[t,e]),null}function VA(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",i=qD("".concat(n).concat(t)),l=Bt();return w.useLayoutEffect(()=>(l(DH({zIndex:t,elementId:i,isPanorama:r})),()=>{l(RH({zIndex:t,isPanorama:r}))}),[l,t,i,r]),w.createElement("g",{id:i})}function KA(e){var{children:t,isPanorama:r}=e,n=Ue(jH);if(!n||n.length===0)return t;var i=n.filter(u=>u<0),l=n.filter(u=>u>0);return w.createElement(w.Fragment,null,i.map(u=>w.createElement(VA,{key:u,zIndex:u,isPanorama:r})),t,l.map(u=>w.createElement(VA,{key:u,zIndex:u,isPanorama:r})))}var eZ=["children"];function tZ(e,t){if(e==null)return{};var r,n,i=rZ(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function rZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zh(){return zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zh.apply(null,arguments)}var nZ={width:"100%",height:"100%",display:"block"},aZ=w.forwardRef((e,t)=>{var r=qx(),n=Bx(),i=sT();if(!Fa(r)||!Fa(n))return null;var{children:l,otherAttributes:u,title:d,desc:h}=e,m,p;return u!=null&&(typeof u.tabIndex=="number"?m=u.tabIndex:m=i?0:void 0,typeof u.role=="string"?p=u.role:p=i?"application":void 0),w.createElement(bx,zh({},u,{title:d,desc:h,role:p,tabIndex:m,width:r,height:n,style:nZ,ref:t}),l)}),iZ=e=>{var{children:t}=e,r=Ue(dm);if(!r)return null;var{width:n,height:i,y:l,x:u}=r;return w.createElement(bx,{width:n,height:i,x:u,y:l},t)},YA=w.forwardRef((e,t)=>{var{children:r}=e,n=tZ(e,eZ),i=On();return i?w.createElement(iZ,null,w.createElement(KA,{isPanorama:!0},r)):w.createElement(aZ,zh({ref:t},n),w.createElement(KA,{isPanorama:!1},r))});function sZ(){var e=Bt(),[t,r]=w.useState(null),n=Ue(H8);return w.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),l=i.width/t.offsetWidth;dr(l)&&l!==n&&e(S8(l))}},[t,e,n]),r}function WA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function oZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WA(Object(r),!0).forEach(function(n){lZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lZ(e,t,r){return(t=cZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cZ(e){var t=uZ(e,"string");return typeof t=="symbol"?t:t+""}function uZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xo(){return xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xo.apply(null,arguments)}var dZ=()=>(sF(),null);function Uh(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var fZ=w.forwardRef((e,t)=>{var r,n,i=w.useRef(null),[l,u]=w.useState({containerWidth:Uh((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Uh((n=e.style)===null||n===void 0?void 0:n.height)}),d=w.useCallback((m,p)=>{u(g=>{var x=Math.round(m),b=Math.round(p);return g.containerWidth===x&&g.containerHeight===b?g:{containerWidth:x,containerHeight:b}})},[]),h=w.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null&&typeof ResizeObserver<"u"){var{width:p,height:g}=m.getBoundingClientRect();d(p,g);var x=j=>{var{width:N,height:_}=j[0].contentRect;d(N,_)},b=new ResizeObserver(x);b.observe(m),i.current=b}},[t,d]);return w.useEffect(()=>()=>{var m=i.current;m!=null&&m.disconnect()},[d]),w.createElement(w.Fragment,null,w.createElement(mm,{width:l.containerWidth,height:l.containerHeight}),w.createElement("div",xo({ref:h},e)))}),hZ=w.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,l]=w.useState({containerWidth:Uh(r),containerHeight:Uh(n)}),u=w.useCallback((h,m)=>{l(p=>{var g=Math.round(h),x=Math.round(m);return p.containerWidth===g&&p.containerHeight===x?p:{containerWidth:g,containerHeight:x}})},[]),d=w.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null){var{width:m,height:p}=h.getBoundingClientRect();u(m,p)}},[t,u]);return w.createElement(w.Fragment,null,w.createElement(mm,{width:i.containerWidth,height:i.containerHeight}),w.createElement("div",xo({ref:d},e)))}),mZ=w.forwardRef((e,t)=>{var{width:r,height:n}=e;return w.createElement(w.Fragment,null,w.createElement(mm,{width:r,height:n}),w.createElement("div",xo({ref:t},e)))}),pZ=w.forwardRef((e,t)=>{var{width:r,height:n}=e;return wi(r)||wi(n)?w.createElement(hZ,xo({},e,{ref:t})):w.createElement(mZ,xo({},e,{ref:t}))});function gZ(e){return e===!0?fZ:pZ}var yZ=w.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:l,onContextMenu:u,onDoubleClick:d,onMouseDown:h,onMouseEnter:m,onMouseLeave:p,onMouseMove:g,onMouseUp:x,onTouchEnd:b,onTouchMove:j,onTouchStart:N,style:_,width:E,responsive:k,dispatchTouchEvents:A=!0}=e,I=w.useRef(null),R=Bt(),[C,P]=w.useState(null),[Y,oe]=w.useState(null),H=sZ(),$=$x(),U=($==null?void 0:$.width)>0?$.width:E,ce=($==null?void 0:$.height)>0?$.height:i,G=w.useCallback(z=>{H(z),typeof t=="function"&&t(z),P(z),oe(z),z!=null&&(I.current=z)},[H,t,P,oe]),V=w.useCallback(z=>{R(rR(z)),R(aa({handler:l,reactEvent:z}))},[R,l]),D=w.useCallback(z=>{R(ox(z)),R(aa({handler:m,reactEvent:z}))},[R,m]),K=w.useCallback(z=>{R(Zk()),R(aa({handler:p,reactEvent:z}))},[R,p]),fe=w.useCallback(z=>{R(ox(z)),R(aa({handler:g,reactEvent:z}))},[R,g]),Ne=w.useCallback(()=>{R(lR())},[R]),_e=w.useCallback(z=>{R(oR(z.key))},[R]),L=w.useCallback(z=>{R(aa({handler:u,reactEvent:z}))},[R,u]),W=w.useCallback(z=>{R(aa({handler:d,reactEvent:z}))},[R,d]),ve=w.useCallback(z=>{R(aa({handler:h,reactEvent:z}))},[R,h]),be=w.useCallback(z=>{R(aa({handler:x,reactEvent:z}))},[R,x]),Te=w.useCallback(z=>{R(aa({handler:N,reactEvent:z}))},[R,N]),Ee=w.useCallback(z=>{A&&R(uR(z)),R(aa({handler:j,reactEvent:z}))},[R,A,j]),Ce=w.useCallback(z=>{R(aa({handler:b,reactEvent:z}))},[R,b]),at=gZ(k);return w.createElement(yD.Provider,{value:C},w.createElement(AO.Provider,{value:Y},w.createElement(at,{width:U??(_==null?void 0:_.width),height:ce??(_==null?void 0:_.height),className:Ot("recharts-wrapper",n),style:oZ({position:"relative",cursor:"default",width:U,height:ce},_),onClick:V,onContextMenu:L,onDoubleClick:W,onFocus:Ne,onKeyDown:_e,onMouseDown:ve,onMouseEnter:D,onMouseLeave:K,onMouseMove:fe,onMouseUp:be,onTouchEnd:Ce,onTouchMove:Ee,onTouchStart:Te,ref:G},w.createElement(dZ,null),r)))}),vZ=["width","height","responsive","children","className","style","compact","title","desc"];function xZ(e,t){if(e==null)return{};var r,n,i=bZ(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function bZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var pR=w.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:l,className:u,style:d,compact:h,title:m,desc:p}=e,g=xZ(e,vZ),x=ka(g);return h?w.createElement(w.Fragment,null,w.createElement(mm,{width:r,height:n}),w.createElement(YA,{otherAttributes:x,title:m,desc:p},l)):w.createElement(yZ,{className:u,style:d,width:r,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},w.createElement(YA,{otherAttributes:x,title:m,desc:p,ref:t},w.createElement(qW,null,l)))});function lx(){return lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lx.apply(null,arguments)}var wZ={top:5,right:5,bottom:5,left:5},jZ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:wZ,reverseStackOrder:!1,syncMethod:"index",responsive:!1},NZ=w.forwardRef(function(t,r){var n,i=qr(t.categoricalChartProps,jZ),{chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,categoricalChartProps:m}=t,p={chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,eventEmitter:void 0};return w.createElement(fR,{preloadedState:{options:p},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:l},w.createElement(XD,{chartData:m.data}),w.createElement(hR,{layout:i.layout,margin:i.margin}),w.createElement(mR,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),w.createElement(pR,lx({},i,{ref:r})))}),_Z=["axis","item"],vw=w.forwardRef((e,t)=>w.createElement(NZ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:_Z,tooltipPayloadSearcher:vD,categoricalChartProps:e,ref:t}));function SZ(e){var t=Bt();return w.useEffect(()=>{t(KX(e))},[t,e]),null}var EZ=["layout"];function cx(){return cx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cx.apply(null,arguments)}function AZ(e,t){if(e==null)return{};var r,n,i=OZ(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function OZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var CZ={top:5,right:5,bottom:5,left:5},TZ={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:CZ,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},kZ=w.forwardRef(function(t,r){var n,i=qr(t.categoricalChartProps,TZ),{layout:l}=i,u=AZ(i,EZ),{chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:p}=t,g={chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:p,eventEmitter:void 0};return w.createElement(fR,{preloadedState:{options:g},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:d},w.createElement(XD,{chartData:i.data}),w.createElement(hR,{layout:l,margin:i.margin}),w.createElement(mR,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),w.createElement(SZ,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),w.createElement(pR,cx({},u,{ref:r})))}),DZ=["item"],RZ={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},gR=w.forwardRef((e,t)=>{var r=qr(e,RZ);return w.createElement(kZ,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:DZ,tooltipPayloadSearcher:vD,categoricalChartProps:r,ref:t})});const XA=({onNavigate:e})=>{var G;const{inventory:t,requisitions:r,items:n,locations:i,currentUser:l,selectedDepartmentId:u,isAdminOrGM:d,transactions:h,accountingEntries:m,performanceRecords:p,allUsers:g,getItemName:x,getLocationName:b,hasPermission:j}=Nr(),[N,_]=w.useState(!1),[E,k]=w.useState(new Date().toISOString().split("T")[0]),A=u||(d?null:l==null?void 0:l.locationId),C=(A?i.filter(V=>V.id===A||V.parentId===A):i).map(V=>V.id),P=t.filter(V=>C.includes(V.locationId)),Y=r.filter(V=>C.includes(V.sourceLocationId)||C.includes(V.targetLocationId)),oe=n.map(V=>{const D=P.filter(K=>K.itemId===V.id).reduce((K,fe)=>K+fe.quantity,0);return{name:V.name.split(" ")[0],total:D,fullName:V.name}}),H=Y.filter(V=>V.status==="PENDING").length,$=Y.filter(V=>V.status==="IN_TRANSIT").length,U=w.useMemo(()=>{const V=E,D=h.filter(Ee=>Ee.date.startsWith(V)),K=D.filter(Ee=>Ee.type===Ea.SALE),fe=D.filter(Ee=>Ee.type===Ea.EXPENSE),Ne=K.reduce((Ee,Ce)=>Ee+Ce.amount,0),_e=fe.reduce((Ee,Ce)=>Ee+Ce.amount,0),L=m.filter(Ee=>Ee.date.startsWith(V)),W=L.reduce((Ee,Ce)=>Ee+Ce.totalValue,0),ve=r.filter(Ee=>Ee.updatedAt.startsWith(V)),Te=p.filter(Ee=>Ee.date===V&&Ee.status===wt.ABSENT).map(Ee=>g.find(Ce=>Ce.id===Ee.workerId)).filter(Boolean);return{sales:K,expenses:fe,purchases:L,movements:ve,absentWorkers:Te,totalSales:Ne,totalExpenses:_e,totalPurchasesValue:W}},[E,h,m,r,p,g]),ce=V=>new Intl.NumberFormat("pt-MZ",{style:"currency",currency:"MZN"}).format(V);return o.jsxs("div",{className:"space-y-6 pb-20 md:pb-0",children:[e&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[o.jsxs("button",{onClick:()=>e("requisitions"),className:"bg-white p-3 md:p-4 rounded-xl shadow-sm border border-gray-100 hover:shadow-md hover:border-blue-200 transition-all text-left group active:scale-95",children:[o.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 bg-blue-50 text-blue-600 rounded-lg flex items-center justify-center mb-2 md:mb-3 group-hover:bg-blue-600 group-hover:text-white transition-colors",children:o.jsx($a,{size:18})}),o.jsx("h4",{className:"font-bold text-gray-800 text-sm md:text-base",children:"Requisies"}),o.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 mt-1 line-clamp-1",children:"Gerenciar pedidos"})]}),o.jsxs("button",{onClick:()=>e("inventory"),className:"bg-white p-3 md:p-4 rounded-xl shadow-sm border border-gray-100 hover:shadow-md hover:border-emerald-200 transition-all text-left group active:scale-95",children:[o.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 bg-emerald-50 text-emerald-600 rounded-lg flex items-center justify-center mb-2 md:mb-3 group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:o.jsx(px,{size:18})}),o.jsx("h4",{className:"font-bold text-gray-800 text-sm md:text-base",children:"Estoque"}),o.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 mt-1 line-clamp-1",children:"Visualizar e adicionar"})]}),o.jsxs("button",{onClick:()=>e("performance"),className:"bg-white p-3 md:p-4 rounded-xl shadow-sm border border-gray-100 hover:shadow-md hover:border-purple-200 transition-all text-left group active:scale-95",children:[o.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 bg-purple-50 text-purple-600 rounded-lg flex items-center justify-center mb-2 md:mb-3 group-hover:bg-purple-600 group-hover:text-white transition-colors",children:o.jsx(sv,{size:18})}),o.jsx("h4",{className:"font-bold text-gray-800 text-sm md:text-base",children:"Desempenho"}),o.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 mt-1 line-clamp-1",children:"RH e Produtividade"})]}),j("VIEW_REPORTS")&&o.jsxs("button",{onClick:()=>_(!0),className:"bg-white p-3 md:p-4 rounded-xl shadow-sm border border-gray-100 hover:shadow-md hover:border-orange-200 transition-all text-left group active:scale-95",children:[o.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 bg-orange-50 text-orange-600 rounded-lg flex items-center justify-center mb-2 md:mb-3 group-hover:bg-orange-600 group-hover:text-white transition-colors",children:o.jsx(la,{size:18})}),o.jsx("h4",{className:"font-bold text-gray-800 text-sm md:text-base",children:"Relatrios"}),o.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 mt-1 line-clamp-1",children:"Viso Diria"})]})]}),A&&o.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-3 md:p-4 rounded-xl flex items-center gap-3 text-blue-800",children:[o.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:o.jsx(js,{size:18})}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold text-sm md:text-base",children:["Visualizando: ",(G=i.find(V=>V.id===A))==null?void 0:G.name]}),o.jsx("p",{className:"text-[10px] md:text-xs text-blue-600",children:"Dados filtrados para este departamento."})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[o.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs md:text-sm text-gray-500 font-medium",children:"Req. Pendentes"}),o.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mt-1",children:H})]}),o.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-yellow-100 text-yellow-600 rounded-full flex items-center justify-center",children:o.jsx(_3,{size:20})})]}),o.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs md:text-sm text-gray-500 font-medium",children:"Em Trnsito"}),o.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mt-1",children:$})]}),o.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center",children:o.jsx(Eu,{size:20})})]}),o.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs md:text-sm text-gray-500 font-medium",children:"Tipos em Estoque"}),o.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mt-1",children:n.length})]}),o.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-green-100 text-green-600 rounded-full flex items-center justify-center",children:o.jsx(F5,{size:20})})]})]}),o.jsx("div",{className:"grid grid-cols-1 gap-6",children:o.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-xl shadow-sm border border-gray-100 h-80 md:h-96",children:[o.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-800 mb-4",children:"Nveis de Estoque"}),o.jsx(fu,{width:"100%",height:"100%",children:o.jsxs(vw,{data:oe,children:[o.jsx(qm,{strokeDasharray:"3 3",vertical:!1}),o.jsx(Bm,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:10},interval:0}),o.jsx(Gm,{axisLine:!1,tickLine:!1,tick:{fontSize:10}}),o.jsx(Nu,{}),o.jsx($m,{dataKey:"total",fill:"#3b82f6",radius:[4,4,0,0],children:oe.map((V,D)=>o.jsx(_s,{fill:V.total<5?"#ef4444":"#3b82f6"},`cell-${D}`))})]})})]})}),N&&o.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-end md:items-center justify-center p-0 md:p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-white w-full md:max-w-5xl h-[90vh] md:h-auto md:max-h-[90vh] rounded-t-2xl md:rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-in slide-in-from-bottom-10 md:zoom-in duration-200",children:[o.jsxs("div",{className:"bg-slate-900 text-white p-4 md:p-6 shrink-0 flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl md:text-2xl font-bold flex items-center gap-2",children:[o.jsx(la,{size:24,className:"text-orange-400"}),"Relatrio Dirio"]}),o.jsx("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-4 mt-2",children:o.jsxs("div",{className:"flex items-center gap-2 bg-slate-800 px-3 py-1.5 rounded-lg border border-slate-700 w-fit",children:[o.jsx(Su,{size:16,className:"text-gray-400"}),o.jsx("input",{type:"date",value:E,onChange:V=>k(V.target.value),"aria-label":"Data do Relatrio",className:"bg-transparent text-white text-sm outline-none cursor-pointer font-medium"})]})})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"p-2 text-slate-300 hover:text-white hover:bg-slate-800 rounded transition hidden md:block",title:"Imprimir",children:o.jsx(gx,{size:20})}),o.jsx("button",{onClick:()=>_(!1),className:"p-2 text-slate-300 hover:text-white hover:bg-slate-800 rounded transition",title:"Fechar","aria-label":"Fechar",children:o.jsx(sn,{size:24})})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 bg-gray-50 custom-scrollbar",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-xl border border-gray-100 shadow-sm flex flex-col",children:[o.jsx("span",{className:"text-[10px] md:text-xs font-bold text-gray-400 uppercase",children:"Vendas"}),o.jsx("div",{className:"mt-1 flex items-center gap-1 md:gap-2 text-green-600",children:o.jsx("span",{className:"text-lg md:text-2xl font-bold",children:ce(U.totalSales)})})]}),o.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-xl border border-gray-100 shadow-sm flex flex-col",children:[o.jsx("span",{className:"text-[10px] md:text-xs font-bold text-gray-400 uppercase",children:"Despesas"}),o.jsx("div",{className:"mt-1 flex items-center gap-1 md:gap-2 text-red-600",children:o.jsx("span",{className:"text-lg md:text-2xl font-bold",children:ce(U.totalExpenses)})})]}),o.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-xl border border-gray-100 shadow-sm flex flex-col",children:[o.jsx("span",{className:"text-[10px] md:text-xs font-bold text-gray-400 uppercase",children:"Compras"}),o.jsx("div",{className:"mt-1 flex items-center gap-1 md:gap-2 text-blue-600",children:o.jsx("span",{className:"text-lg md:text-2xl font-bold",children:ce(U.totalPurchasesValue)})})]}),o.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-xl border border-gray-100 shadow-sm flex flex-col",children:[o.jsx("span",{className:"text-[10px] md:text-xs font-bold text-gray-400 uppercase",children:"Faltas"}),o.jsx("div",{className:"mt-1 flex items-center gap-1 md:gap-2 text-orange-600",children:o.jsx("span",{className:"text-lg md:text-2xl font-bold",children:U.absentWorkers.length})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[o.jsx("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50 flex items-center justify-between",children:o.jsxs("h4",{className:"font-bold text-gray-800 flex items-center gap-2 text-sm",children:[o.jsx(Gn,{size:16})," Movimento Financeiro"]})}),o.jsx("div",{className:"max-h-60 overflow-y-auto",children:o.jsx("table",{className:"w-full text-sm text-left",children:o.jsx("tbody",{className:"divide-y divide-gray-100",children:U.sales.concat(U.expenses).length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-gray-400 text-xs",children:"Sem movimento financeiro."})}):U.sales.concat(U.expenses).map((V,D)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-2",children:o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-bold ${V.type===Ea.SALE?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:V.type===Ea.SALE?"ENT":"SAI"})}),o.jsx("td",{className:"px-4 py-2 text-gray-700 truncate max-w-[120px] text-xs",children:V.clientName||V.description||V.category}),o.jsx("td",{className:`px-4 py-2 text-right font-bold text-xs ${V.type===Ea.SALE?"text-green-600":"text-red-600"}`,children:ce(V.amount)})]},D))})})})]})}),o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[o.jsx("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50 flex items-center justify-between",children:o.jsxs("h4",{className:"font-bold text-gray-800 flex items-center gap-2 text-sm",children:[o.jsx($a,{size:16})," Logstica Hoje"]})}),o.jsx("div",{className:"max-h-60 overflow-y-auto",children:U.movements.length===0?o.jsx("div",{className:"p-8 text-center text-gray-400 text-xs",children:"Nenhuma movimentao."}):o.jsx("ul",{className:"divide-y divide-gray-100",children:U.movements.map((V,D)=>o.jsxs("li",{className:"px-4 py-3 text-sm",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("span",{className:"font-bold text-gray-800 text-xs",children:x(V.itemId)}),o.jsx("span",{className:"text-[10px] bg-gray-100 px-2 py-0.5 rounded text-gray-600",children:V.status})]}),o.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-500 mt-1",children:[o.jsx("span",{children:b(V.sourceLocationId)}),o.jsx(Vh,{size:10}),o.jsx("span",{children:b(V.targetLocationId)})]})]},D))})})]})})]})]})]})})]})};function ur(e,t){const{dateOnly:r=!1,time:n=!1,fallback:i=""}=t||{};if(e==null)return i;let l=null;if(e instanceof Date)l=e;else if(typeof e=="string"&&e.trim())l=new Date(e);else if(typeof e=="number")l=new Date(e);else if(typeof e=="object"){const u=["timestamp","created_at","createdAt","date","updated_at","updatedAt"];for(const d of u)if(d in e&&e[d]&&(l=new Date(e[d]),!isNaN(l.getTime())))break}if(!l||isNaN(l.getTime()))return i;try{return r?l.toLocaleDateString("pt-MZ",{year:"numeric",month:"2-digit",day:"2-digit"}):n?l.toLocaleString("pt-MZ",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):l.toLocaleString("pt-MZ")}catch{return i}}const PZ=({onCancel:e,onSuccess:t})=>{const{items:r,locations:n,currentUser:i,createRequisitionSheet:l,getLocationName:u}=Nr(),[d,h]=w.useState(""),[m,p]=w.useState(""),[g,x]=w.useState(null),[b,j]=w.useState([{id:"1",itemId:"",itemName:"",quantity:1,unit:"Unidade",condition:Jt.NEW,notes:""}]),[N,_]=w.useState(!1),E=n.filter(C=>C.id!==(i==null?void 0:i.locationId)),k=()=>{j([...b,{id:Math.random().toString(36).substr(2,9),itemId:"",itemName:"",quantity:1,unit:"Unidade",condition:Jt.NEW,notes:""}])},A=C=>{b.length!==1&&j(b.filter(P=>P.id!==C))},I=(C,P,Y)=>{j(b.map(oe=>{if(oe.id===C){const H={...oe,[P]:Y};if(P==="itemId"&&Y!==""){const $=r.find(U=>U.id===Y);$&&(H.itemName=$.name,H.unit=$.unit||"Unidade")}return H}return oe}))},R=async C=>{if(C.preventDefault(),!d){x({type:"info",message:"Selecione o local de destino."});return}if(b.length===0){x({type:"info",message:"Adicione pelo menos um item."});return}if(b.some(P=>!P.itemName)){x({type:"info",message:"Todos os itens precisam de uma descrio ou nome."});return}_(!0);try{await l(d,b.map(P=>({itemId:P.itemId||void 0,itemName:P.itemName,quantity:P.quantity,unit:P.unit,condition:P.condition,notes:P.notes})),m),x({type:"success",message:"Requisio criada com sucesso!"}),setTimeout(()=>t(),1500)}catch(P){x({type:"error",message:`Erro ao criar requisio: ${P instanceof Error?P.message:String(P)}`})}finally{_(!1)}};return o.jsxs("div",{className:"p-4 max-w-5xl mx-auto pb-20 md:pb-4",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full",title:"Voltar",children:o.jsx(E3,{size:20,className:"text-gray-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Nova Requisio de Materiais"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Preencha o formulrio abaixo para solicitar mltiplos itens."})]})]}),g&&o.jsx("div",{className:`p-3 rounded text-sm mb-6 ${g.type==="success"?"bg-green-100 border border-green-300 text-green-800":g.type==="error"?"bg-red-100 border border-red-300 text-red-800":"bg-blue-50 border border-blue-100 text-blue-800"}`,children:g.message}),o.jsxs("form",{onSubmit:R,className:"space-y-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"targetLocation",className:"block text-sm font-medium text-gray-700 mb-1",children:"Destino (Solicitar Para)"}),o.jsxs("select",{id:"targetLocation",className:"w-full border border-gray-300 rounded-lg p-2.5 bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-500 outline-none",value:d,onChange:C=>h(C.target.value),required:!0,children:[o.jsx("option",{value:"",children:"Selecione uma localizao..."}),E.map(C=>o.jsx("option",{value:C.id,children:C.name},C.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas / Observaes Gerais"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg p-2.5 bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Ex: Urgente para obra em Nampula",value:m,onChange:C=>p(C.target.value)})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50 flex justify-between items-center",children:[o.jsxs("h3",{className:"font-semibold text-gray-700 flex items-center gap-2",children:[o.jsx(io,{size:18})," Itens da Requisio"]}),o.jsx("span",{className:"text-xs text-gray-500 hidden md:inline",children:"Preencha os detalhes de cada item"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full min-w-[800px]",children:[o.jsx("thead",{className:"bg-gray-50 text-left",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-xs font-bold text-gray-500 uppercase w-10"}),o.jsx("th",{className:"px-4 py-3 text-xs font-bold text-gray-500 uppercase w-1/3",children:"Item (Estoque ou Manual)"}),o.jsx("th",{className:"px-4 py-3 text-xs font-bold text-gray-500 uppercase w-24",children:"Qtd"}),o.jsx("th",{className:"px-4 py-3 text-xs font-bold text-gray-500 uppercase w-24",children:"Unidade"}),o.jsx("th",{className:"px-4 py-3 text-xs font-bold text-gray-500 uppercase w-32",children:"Condio"}),o.jsx("th",{className:"px-4 py-3 text-xs font-bold text-gray-500 uppercase",children:"Observaes"}),o.jsx("th",{className:"px-4 py-3 text-xs font-bold text-gray-500 w-10"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:b.map((C,P)=>o.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[o.jsx("td",{className:"px-3 py-2 text-center text-gray-400 text-xs font-mono",children:P+1}),o.jsx("td",{className:"px-3 py-2",children:o.jsxs("div",{className:"space-y-1",children:[o.jsxs("select",{"aria-label":"Selecionar item",className:"w-full text-sm border-gray-200 rounded focus:ring-blue-500 border p-1.5",value:C.itemId,onChange:Y=>I(C.id,"itemId",Y.target.value),children:[o.jsx("option",{value:"",children:"-- Item Manual --"}),r.map(Y=>o.jsx("option",{value:Y.id,children:Y.name},Y.id))]}),C.itemId===""&&o.jsx("input",{type:"text",placeholder:"Descreva o item...","aria-label":"Nome do item manual",className:"w-full text-sm border-gray-200 rounded border p-1.5 focus:ring-blue-500",value:C.itemName,onChange:Y=>I(C.id,"itemName",Y.target.value),required:!0})]})}),o.jsx("td",{className:"px-3 py-2",children:o.jsx("input",{type:"number",min:"0.1",step:"0.1","aria-label":"Quantidade",className:"w-full text-sm border-gray-200 rounded border p-1.5 font-semibold text-center",value:C.quantity,onChange:Y=>I(C.id,"quantity",parseFloat(Y.target.value)||0)})}),o.jsx("td",{className:"px-3 py-2",children:o.jsx("input",{type:"text","aria-label":"Unidade",className:"w-full text-sm border-gray-200 rounded border p-1.5",value:C.unit,onChange:Y=>I(C.id,"unit",Y.target.value),list:"units-datalist"})}),o.jsx("td",{className:"px-3 py-2",children:o.jsxs("select",{"aria-label":"Selecionar condio",className:"w-full text-sm border-gray-200 rounded border p-1.5",value:C.condition,onChange:Y=>I(C.id,"condition",Y.target.value),children:[o.jsx("option",{value:Jt.NEW,children:"Novo"}),o.jsx("option",{value:Jt.GOOD,children:"Bom"}),o.jsx("option",{value:Jt.FAIR,children:"Usado"})]})}),o.jsx("td",{className:"px-3 py-2",children:o.jsx("input",{type:"text",placeholder:"Detalhes...","aria-label":"Observaes",className:"w-full text-sm border-gray-200 rounded border p-1.5 text-gray-500",value:C.notes,onChange:Y=>I(C.id,"notes",Y.target.value)})}),o.jsx("td",{className:"px-3 py-2 text-center",children:o.jsx("button",{type:"button",onClick:()=>A(C.id),className:"text-gray-400 hover:text-red-500 transition p-1",disabled:b.length===1,title:"Remover linha",children:o.jsx(vi,{size:16})})})]},C.id))})]})}),o.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-100",children:o.jsxs("button",{type:"button",onClick:k,className:"flex items-center gap-2 text-blue-600 font-bold text-sm hover:underline",children:[o.jsx(Zr,{size:16})," Adicionar Linha"]})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:N,className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition shadow-lg flex items-center gap-2",children:N?"Enviando...":o.jsxs(o.Fragment,{children:[o.jsx(Kh,{size:18})," Criar Requisio"]})})]})]}),o.jsxs("datalist",{id:"units-datalist",children:[o.jsx("option",{value:"Unidade"}),o.jsx("option",{value:"Kg"}),o.jsx("option",{value:"Litros"}),o.jsx("option",{value:"Metros"}),o.jsx("option",{value:"Par"}),o.jsx("option",{value:"Caixa"}),o.jsx("option",{value:"Saco"})]})]})},MZ=({sheet:e,companyInfo:t,onClose:r})=>{const n=()=>{window.print()};return o.jsxs("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 z-50 overflow-y-auto flex justify-center items-start p-4",children:[o.jsxs("div",{className:"bg-gray-100 min-h-screen w-full max-w-4xl flex flex-col items-center",children:[o.jsxs("div",{className:"w-full bg-white p-4 shadow-sm mb-4 flex justify-between items-center rounded-lg no-print",children:[o.jsx("h2",{className:"font-bold text-gray-700",children:"Visualizao de Impresso"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:r,className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",children:"Fechar"}),o.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 font-bold",children:"Imprimir"})]})]}),o.jsxs("div",{className:"bg-white w-[210mm] min-h-[297mm] p-10 shadow-lg text-sm text-gray-800 print-content",id:"printable-area",children:[o.jsxs("div",{className:"border-b-2 border-gray-800 pb-4 mb-6 flex justify-between items-start",children:[o.jsxs("div",{children:[t!=null&&t.logo?o.jsx("img",{src:t.logo,alt:"Logo",className:"h-16 mb-2"}):o.jsx("h1",{className:"text-2xl font-bold uppercase tracking-wider",children:(t==null?void 0:t.nome)||"EMPRESA DEMO"}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1 space-y-0.5",children:[o.jsx("p",{children:(t==null?void 0:t.endereco)||"Endereo da Empresa"}),o.jsxs("p",{children:["NUIT: ",(t==null?void 0:t.nuit)||"000000000"," | Tel: ",(t==null?void 0:t.contacto)||"82 000 0000"]}),o.jsx("p",{children:(t==null?void 0:t.email)||"contato@empresa.com"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 uppercase",children:"Ficha de Requisio"}),o.jsx("p",{className:"text-gray-500 font-mono text-lg mt-1",children:e.requisitionNumber}),o.jsxs("div",{className:"mt-2 text-xs",children:[o.jsxs("p",{children:["Data: ",o.jsx("strong",{children:ur(e.createdAt,{dateOnly:!0})})]}),o.jsxs("p",{children:["Status: ",o.jsx("span",{className:"uppercase font-bold",children:e.status})]})]})]})]}),o.jsxs("div",{className:"flex justify-between border border-gray-200 rounded p-4 mb-6 bg-gray-50",children:[o.jsxs("div",{className:"w-1/2",children:[o.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Origem (Fornecedor Interno)"}),o.jsx("p",{className:"font-semibold text-lg",children:e.sourceLocationName})]}),o.jsxs("div",{className:"w-1/2 border-l border-gray-200 pl-4",children:[o.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Destino (Requisitante)"}),o.jsx("p",{className:"font-semibold text-lg",children:e.targetLocationName})]})]}),o.jsxs("table",{className:"w-full mb-8 border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-100 border-b-2 border-gray-800",children:[o.jsx("th",{className:"py-2 px-2 text-left font-bold uppercase text-xs w-10",children:"#"}),o.jsx("th",{className:"py-2 px-2 text-left font-bold uppercase text-xs",children:"Item / Descrio"}),o.jsx("th",{className:"py-2 px-2 text-center font-bold uppercase text-xs w-20",children:"Qtd"}),o.jsx("th",{className:"py-2 px-2 text-center font-bold uppercase text-xs w-20",children:"Unid."}),o.jsx("th",{className:"py-2 px-2 text-center font-bold uppercase text-xs w-24",children:"Condio"}),o.jsx("th",{className:"py-2 px-2 text-left font-bold uppercase text-xs w-1/4",children:"Obs."})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:e.items.map((i,l)=>o.jsxs("tr",{children:[o.jsx("td",{className:"py-3 px-2 text-gray-500",children:l+1}),o.jsx("td",{className:"py-3 px-2 font-medium",children:i.itemName}),o.jsx("td",{className:"py-3 px-2 text-center",children:i.quantity}),o.jsx("td",{className:"py-3 px-2 text-center text-xs text-gray-500",children:i.unit}),o.jsx("td",{className:"py-3 px-2 text-center text-xs",children:i.condition}),o.jsx("td",{className:"py-3 px-2 text-xs text-gray-500 italic",children:i.notes})]},i.id))})]}),e.notes&&o.jsxs("div",{className:"mb-8 p-4 border border-gray-200 rounded bg-yellow-50",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Observaes Gerais"}),o.jsx("p",{className:"text-sm text-gray-800 italic",children:e.notes})]}),o.jsxs("div",{className:"mt-auto pt-12 grid grid-cols-2 gap-12",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"border-t border-gray-400 w-3/4 mx-auto mb-2"}),o.jsx("p",{className:"text-xs font-bold uppercase",children:"Solicitante"}),o.jsx("p",{className:"text-[10px] text-gray-400",children:"Assinatura e Carimbo"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"border-t border-gray-400 w-3/4 mx-auto mb-2"}),o.jsx("p",{className:"text-xs font-bold uppercase",children:"Autorizado Por"}),o.jsx("p",{className:"text-[10px] text-gray-400",children:"Assinatura e Carimbo"})]})]}),o.jsxs("div",{className:"text-center mt-8 pt-4 border-t border-gray-100 text-[10px] text-gray-400",children:["Processado via OFICE Logistics System | ",ur(new Date().toISOString(),{time:!0})]})]})]}),o.jsx("style",{children:`
        @media print {
          .no-print { display: none !important; }
          .bg-gray-100 { background: white !important; }
          .fixed { position: static !important; overflow: visible !important; }
          .min-h-screen { min-height: 0 !important; }
          @page { margin: 10mm; }
        }
      `})]})},IZ=()=>{const{requisitions:e,requisitionSheets:t,currentUser:r,items:n,locations:i,getItemName:l,getLocationName:u,createRequisition:d,updateRequisitionStatus:h,updateRequisitionSheetStatus:m,updateRequisitionSheetItemDelivery:p,isAdminOrGM:g,companyInfo:x}=Nr(),[b,j]=w.useState(!1),[N,_]=w.useState("list"),[E,k]=w.useState("single"),[A,I]=w.useState(null),[R,C]=w.useState(null),[P,Y]=w.useState(null),[oe,H]=w.useState(null),[$,U]=w.useState(n.length>0?n[0].id:""),[ce,G]=w.useState(1),[V,D]=w.useState(Jt.NEW);if(ao.useEffect(()=>{n.length>0&&!$&&U(n[0].id)},[n,$]),N==="form")return o.jsx(PZ,{onCancel:()=>_("list"),onSuccess:()=>_("list")});const K=e.filter(z=>{var pe,ue;if(g)return!0;if((r==null?void 0:r.role)===Ae.MANAGER){const re=((pe=i.find(Re=>Re.id===z.sourceLocationId))==null?void 0:pe.parentId)===r.locationId,Je=((ue=i.find(Re=>Re.id===z.targetLocationId))==null?void 0:ue.parentId)===r.locationId;return z.sourceLocationId===r.locationId||z.targetLocationId===r.locationId||re||Je}return z.targetLocationId===(r==null?void 0:r.locationId)||z.requesterId===(r==null?void 0:r.id)}),fe=(t||[]).filter(z=>{var pe,ue;if(g)return!0;if((r==null?void 0:r.role)===Ae.MANAGER){const re=((pe=i.find(Re=>Re.id===z.sourceLocationId))==null?void 0:pe.parentId)===r.locationId,Je=((ue=i.find(Re=>Re.id===z.targetLocationId))==null?void 0:ue.parentId)===r.locationId;return z.sourceLocationId===r.locationId||z.targetLocationId===r.locationId||re||Je}return z.targetLocationId===(r==null?void 0:r.locationId)||z.requesterId===(r==null?void 0:r.id)}),Ne=z=>{Y(P===z?null:z)},_e=async(z,pe)=>{H({type:"info",message:"Atualizando status..."});try{await h(z,pe),H({type:"success",message:`Status atualizado: ${pe}`}),setTimeout(()=>H(null),4e3)}catch(ue){H({type:"error",message:(ue==null?void 0:ue.message)||String(ue)})}},L=async(z,pe)=>{H({type:"info",message:"Atualizando status da ficha..."});try{await m(z,pe),H({type:"success",message:`Status da ficha atualizado: ${pe}`}),setTimeout(()=>H(null),4e3)}catch(ue){H({type:"error",message:(ue==null?void 0:ue.message)||String(ue)})}},W=async(z,pe)=>{H({type:"info",message:"Atualizando entrega do item..."});try{await p(z,pe),H({type:"success",message:"Entrega atualizada."}),setTimeout(()=>H(null),3e3)}catch(ue){H({type:"error",message:(ue==null?void 0:ue.message)||String(ue)})}},ve=z=>{z.preventDefault(),d($,ce,V),j(!1),G(1),D(Jt.NEW)},be=z=>{switch(z){case nt.PENDING:return o.jsxs("span",{className:"px-2 py-1 rounded text-xs font-bold bg-yellow-100 text-yellow-800 flex items-center gap-1 w-max",children:[o.jsx(iu,{size:12})," Pendente"]});case nt.APPROVED:return o.jsxs("span",{className:"px-2 py-1 rounded text-xs font-bold bg-blue-100 text-blue-800 flex items-center gap-1 w-max",children:[o.jsx(sa,{size:12})," Aprovado"]});case nt.IN_TRANSIT:return o.jsxs("span",{className:"px-2 py-1 rounded text-xs font-bold bg-indigo-100 text-indigo-800 flex items-center gap-1 w-max",children:[o.jsx($a,{size:12})," Em Trnsito"]});case nt.DELIVERED:return o.jsxs("span",{className:"px-2 py-1 rounded text-xs font-bold bg-orange-100 text-orange-800 flex items-center gap-1 w-max",children:[o.jsx(m0,{size:12})," Entregue"]});case nt.REJECTED:return o.jsxs("span",{className:"px-2 py-1 rounded text-xs font-bold bg-red-100 text-red-800 flex items-center gap-1 w-max",children:[o.jsx(Kf,{size:12})," Rejeitado"]});case nt.CONFIRMED:return o.jsxs("span",{className:"px-2 py-1 rounded text-xs font-bold bg-green-100 text-green-800 flex items-center gap-1 w-max",children:[o.jsx(sa,{size:12})," Confirmado"]});default:return null}},Te=z=>{switch(z){case Jt.NEW:return o.jsx("span",{className:"text-[10px] font-semibold text-green-600 border border-green-200 bg-green-50 px-1.5 py-0.5 rounded",children:"Novo"});case Jt.GOOD:return o.jsx("span",{className:"text-[10px] font-semibold text-blue-600 border border-blue-200 bg-blue-50 px-1.5 py-0.5 rounded",children:"Bom"});case Jt.FAIR:return o.jsx("span",{className:"text-[10px] font-semibold text-orange-600 border border-orange-200 bg-orange-50 px-1.5 py-0.5 rounded",children:"Usado"});case Jt.POOR:return o.jsx("span",{className:"text-[10px] font-semibold text-red-600 border border-red-200 bg-red-50 px-1.5 py-0.5 rounded",children:"Ruim"});default:return o.jsx("span",{className:"text-[10px] font-semibold text-gray-600 border border-gray-200 bg-gray-50 px-1.5 py-0.5 rounded",children:z})}},Ee=z=>(z==null?void 0:z.type)===Pt.CONSUMABLE?o.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded border border-purple-100",children:[o.jsx(d6,{size:10})," Consumvel"]}):o.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-slate-600 bg-slate-50 px-1.5 py-0.5 rounded border border-slate-200",children:[o.jsx(io,{size:10})," Ativo"]}),Ce=(z,pe=!1)=>{var Ze,Ke;const ue=(r==null?void 0:r.role)===Ae.MANAGER&&(z.sourceLocationId===r.locationId||((Ze=i.find(X=>X.id===z.sourceLocationId))==null?void 0:Ze.parentId)===r.locationId),re=(r==null?void 0:r.role)===Ae.MANAGER&&(z.targetLocationId===r.locationId||((Ke=i.find(X=>X.id===z.targetLocationId))==null?void 0:Ke.parentId)===r.locationId),Je=g||ue||re,Re=pe?"flex-1 py-3 justify-center text-sm font-bold shadow-md":"px-3 py-1 text-xs shadow-sm whitespace-nowrap";if(!Je&&(r==null?void 0:r.role)!==Ae.WORKER)return o.jsxs("span",{className:"text-gray-300 text-xs flex items-center gap-1",children:[o.jsx(fo,{size:10})," Visualizao"]});if(z.status===nt.PENDING&&(g||ue||re))return o.jsxs("div",{className:`flex gap-2 ${pe?"w-full mt-2":""}`,children:[o.jsx("button",{onClick:X=>{X.stopPropagation(),_e(z.id,nt.APPROVED)},className:`${Re} bg-blue-600 text-white rounded hover:bg-blue-700`,children:"Aprovar"}),o.jsx("button",{onClick:X=>{X.stopPropagation(),_e(z.id,nt.REJECTED)},className:`${Re} bg-red-50 text-red-600 rounded hover:bg-red-100 border border-red-200`,children:"Rejeitar"})]});if(z.status===nt.APPROVED)return g||ue?o.jsxs("button",{onClick:X=>{X.stopPropagation(),_e(z.id,nt.IN_TRANSIT)},className:`${Re} bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-1 ${pe?"w-full":""}`,children:[o.jsx($a,{size:12})," Despachar"]}):o.jsx("span",{className:"text-blue-500 text-xs italic",children:"Aguardando Envio..."});if(z.status===nt.IN_TRANSIT)return g||re?o.jsxs("button",{onClick:X=>{X.stopPropagation(),_e(z.id,nt.DELIVERED)},className:`${Re} bg-blue-500 text-white rounded hover:bg-blue-600 flex items-center gap-1 ${pe?"w-full":""}`,children:[o.jsx($a,{size:12})," Registrar Chegada"]}):o.jsx("span",{className:"text-indigo-500 text-xs italic",children:"Em Trnsito..."});if(z.status===nt.DELIVERED){if(g||re)return o.jsxs("button",{onClick:X=>{X.stopPropagation(),_e(z.id,nt.CONFIRMED)},className:`${Re} bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-1 animate-pulse ${pe?"w-full":""}`,children:[o.jsx(m0,{size:12})," Conferir e Aceitar"]});if((r==null?void 0:r.role)===Ae.WORKER&&z.targetLocationId===r.locationId)return o.jsxs("button",{onClick:X=>{X.stopPropagation(),_e(z.id,nt.CONFIRMED)},className:`${Re} bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-1 ${pe?"w-full":""}`,children:[o.jsx(sa,{size:12})," Confirmar"]})}return z.status===nt.CONFIRMED?o.jsxs("span",{className:"text-green-600 text-xs font-medium flex items-center gap-1",children:[o.jsx(sa,{size:12})," Concludo"]}):z.status===nt.PENDING&&!Je?o.jsxs("span",{className:"text-orange-400 text-xs font-medium flex items-center gap-1 whitespace-nowrap",children:[o.jsx(iu,{size:12})," Aguardando"]}):z.status===nt.REJECTED?o.jsxs("span",{className:"text-red-400 text-xs font-medium flex items-center gap-1 whitespace-nowrap",children:[o.jsx(Kf,{size:12})," Cancelado"]}):o.jsxs("span",{className:"text-gray-400 text-xs italic whitespace-nowrap",children:["Status: ",z.status]})},at=n.find(z=>z.id===$);return o.jsxs("div",{children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-800",children:"Fluxo de Requisies"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Gerencie a entrada e sada de materiais."})]}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-auto",children:[o.jsxs("button",{onClick:()=>j(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-3 md:py-2 rounded-lg hover:bg-blue-700 transition shadow-md w-full md:w-auto justify-center font-medium",children:[o.jsx(Zr,{size:18})," Nova Requisio (Simples)"]}),o.jsxs("button",{onClick:()=>_("form"),className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-3 md:py-2 rounded-lg hover:bg-indigo-700 transition shadow-md w-full md:w-auto justify-center font-medium",children:[o.jsx(la,{size:18})," Nova Requisio (Mltipla)"]})]})]}),oe&&o.jsx("div",{className:`mb-4 p-3 rounded ${oe.type==="success"?"bg-green-100 border border-green-300 text-green-800":oe.type==="error"?"bg-red-100 border border-red-300 text-red-800":"bg-blue-50 border border-blue-100 text-blue-800"}`,children:oe.message}),o.jsxs("div",{className:"flex gap-4 mb-4 border-b border-gray-200",children:[o.jsx("button",{onClick:()=>k("single"),className:`pb-2 px-1 text-sm font-medium ${E==="single"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Requisies Individuais (Legado)"}),o.jsx("button",{onClick:()=>k("sheets"),className:`pb-2 px-1 text-sm font-medium ${E==="sheets"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Fichas de Requisio (Mltiplos Itens)"})]}),E==="single"?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"hidden md:block bg-white rounded-xl shadow border border-gray-100 overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase whitespace-nowrap w-8"}),o.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase whitespace-nowrap",children:"Item / Condio"}),o.jsxs("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase whitespace-nowrap",children:["Origem ",o.jsx(Vh,{size:10,className:"inline mx-1"})," Destino"]}),o.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase whitespace-nowrap",children:"Qtd"}),o.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase whitespace-nowrap",children:"Status"}),o.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase whitespace-nowrap",children:"Data"}),o.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase text-right whitespace-nowrap",children:"Aes"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:K.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-400",children:"Nenhuma requisio encontrada."})}):K.map(z=>{const pe=n.find(re=>re.id===z.itemId),ue=P===z.id;return o.jsxs(ao.Fragment,{children:[o.jsxs("tr",{onClick:()=>Ne(z.id),className:`hover:bg-slate-50 transition cursor-pointer ${ue?"bg-slate-50":""}`,children:[o.jsx("td",{className:"px-6 py-4 text-center",children:ue?o.jsx(k_,{size:16,className:"text-gray-400"}):o.jsx(T_,{size:16,className:"text-gray-400"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsxs("div",{className:"font-medium text-gray-900 flex items-center gap-2",children:[pe==null?void 0:pe.name,Ee(pe)]}),o.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2 mt-1",children:[o.jsxs("span",{children:["ID: ",z.id]}),(pe==null?void 0:pe.type)===Pt.ASSET&&Te(z.condition)]})]}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 whitespace-nowrap",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("span",{className:"text-xs text-gray-400",children:["De: ",u(z.sourceLocationId)]}),o.jsxs("span",{className:"font-medium text-gray-800",children:["Para: ",u(z.targetLocationId)]})]})}),o.jsxs("td",{className:"px-6 py-4 text-sm font-semibold text-gray-900 whitespace-nowrap",children:[z.quantity," un"]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:be(z.status)}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:ur(z.createdAt,{dateOnly:!0})}),o.jsx("td",{className:"px-6 py-4 text-right whitespace-nowrap",onClick:re=>re.stopPropagation(),children:Ce(z)})]}),ue&&o.jsx("tr",{className:"bg-slate-50 border-b border-gray-100",children:o.jsx("td",{colSpan:7,className:"px-6 py-4",children:o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[o.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase flex items-center gap-2 mb-3",children:[o.jsx(mx,{size:14})," Histrico de Rastreabilidade"]}),o.jsxs("div",{className:"space-y-4 relative pl-2",children:[o.jsx("div",{className:"absolute left-3.5 top-2 bottom-2 w-0.5 bg-gray-100"}),z.logs.map((re,Je)=>o.jsxs("div",{className:"relative flex gap-4 text-sm",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-50 border-2 border-white shadow-sm z-10 mt-1 shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-800",children:re.message}),o.jsxs("p",{className:"text-xs text-gray-400",children:[ur(re.timestamp,{time:!0}),"  ",re.actorId||"Sistema"," (",re.action,")"]})]})]},Je))]})]})})})]},z.id)})})]})})}),o.jsxs("div",{className:"md:hidden space-y-4",children:[K.length===0&&o.jsxs("div",{className:"text-center p-8 bg-white rounded-xl border border-gray-200 text-gray-400",children:[o.jsx(io,{size:40,className:"mx-auto mb-2 opacity-20"}),o.jsx("p",{children:"Nenhuma requisio."})]}),K.map(z=>{const pe=n.find(ue=>ue.id===z.itemId);return o.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsxs("span",{className:"text-[10px] text-gray-400 font-mono block mb-1",children:["#",z.id.slice(-6)]}),o.jsx("h4",{className:"font-bold text-gray-900 text-lg leading-tight",children:pe==null?void 0:pe.name})]}),be(z.status)]}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[Ee(pe),(pe==null?void 0:pe.type)===Pt.ASSET&&Te(z.condition),o.jsxs("span",{className:"text-[10px] font-bold bg-gray-100 text-gray-700 px-2 py-0.5 rounded",children:[z.quantity," un"]})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-100 text-sm space-y-2 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(js,{size:14,className:"text-gray-400"}),o.jsx("span",{className:"text-gray-500 text-xs",children:"De:"}),o.jsx("span",{className:"font-medium text-gray-800",children:u(z.sourceLocationId)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(js,{size:14,className:"text-blue-500"}),o.jsx("span",{className:"text-gray-500 text-xs",children:"Para:"}),o.jsx("span",{className:"font-bold text-gray-900",children:u(z.targetLocationId)})]}),o.jsxs("div",{className:"flex items-center gap-2 border-t border-gray-100 pt-2 mt-1",children:[o.jsx(Su,{size:14,className:"text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-500",children:ur(z.createdAt,{dateOnly:!0})})]})]}),o.jsx("div",{className:"border-t border-gray-100 pt-3",children:Ce(z,!0)})]},z.id)})]})]}):o.jsx("div",{className:"bg-white rounded-xl shadow border border-gray-100 overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase whitespace-nowrap",children:"N Requisio"}),o.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase whitespace-nowrap",children:"Origem / Destino"}),o.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase whitespace-nowrap",children:"Itens"}),o.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase whitespace-nowrap",children:"Status"}),o.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase whitespace-nowrap",children:"Data"}),o.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase text-right",children:"Aes"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:fe.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-400",children:"Nenhuma ficha de requisio encontrada."})}):fe.map(z=>{var Re,Ze,Ke;const pe=R===z.id,ue=(r==null?void 0:r.role)===Ae.MANAGER&&(z.sourceLocationId===r.locationId||((Re=i.find(X=>X.id===z.sourceLocationId))==null?void 0:Re.parentId)===r.locationId),re=(r==null?void 0:r.role)===Ae.MANAGER&&(z.targetLocationId===r.locationId||((Ze=i.find(X=>X.id===z.targetLocationId))==null?void 0:Ze.parentId)===r.locationId),Je=g||ue||re;return o.jsxs(ao.Fragment,{children:[o.jsxs("tr",{className:`hover:bg-slate-50 transition cursor-pointer ${pe?"bg-slate-50":""}`,onClick:()=>C(pe?null:z.id),children:[o.jsx("td",{className:"px-6 py-4 font-mono text-sm font-medium text-gray-700",children:o.jsxs("div",{className:"flex items-center gap-2",children:[pe?o.jsx(k_,{size:14,className:"text-gray-400"}):o.jsx(T_,{size:14,className:"text-gray-400"}),z.requisitionNumber||"N/A"]})}),o.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("span",{className:"text-xs text-gray-400",children:["De: ",z.sourceLocationName]}),o.jsxs("span",{className:"font-medium text-gray-800",children:["Para: ",z.targetLocationName]})]})}),o.jsxs("td",{className:"px-6 py-4 text-sm font-semibold text-gray-900",children:[((Ke=z.items)==null?void 0:Ke.length)||0," itens"]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:be(z.status)}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:ur(z.createdAt,{dateOnly:!0})}),o.jsx("td",{className:"px-6 py-4 text-right",onClick:X=>X.stopPropagation(),children:o.jsxs("div",{className:"flex justify-end gap-2",children:[z.status===nt.PENDING&&Je&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>L(z.id,nt.APPROVED),className:"p-1 px-2 text-[10px] font-bold bg-blue-600 text-white rounded hover:bg-blue-700",children:"Aprovar"}),o.jsx("button",{onClick:()=>L(z.id,nt.REJECTED),className:"p-1 px-2 text-[10px] font-bold bg-white text-red-600 border border-red-200 rounded hover:bg-red-50",children:"Rejeitar"})]}),z.status===nt.APPROVED&&(g||ue)&&o.jsxs("button",{onClick:()=>L(z.id,nt.IN_TRANSIT),className:"p-1 px-2 text-[10px] font-bold bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-1",children:[o.jsx($a,{size:10})," Despachar"]}),z.status===nt.IN_TRANSIT&&(g||re)&&o.jsxs("button",{onClick:()=>L(z.id,nt.DELIVERED),className:"p-1 px-2 text-[10px] font-bold bg-blue-500 text-white rounded hover:bg-blue-600 flex items-center gap-1",children:[o.jsx($a,{size:10})," Registrar Chegada"]}),z.status===nt.DELIVERED&&(g||re)&&o.jsxs("button",{onClick:()=>L(z.id,nt.CONFIRMED),className:"p-1 px-2 text-[10px] font-bold bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-1",children:[o.jsx(m0,{size:10})," Aceitar"]}),o.jsx("button",{onClick:()=>I(z),className:"text-gray-400 hover:text-blue-600 p-1",title:"Imprimir",children:o.jsx(la,{size:18})})]})})]}),pe&&o.jsx("tr",{className:"bg-slate-50",children:o.jsx("td",{colSpan:6,className:"px-6 py-4",children:o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[o.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase mb-3 flex items-center gap-2",children:[o.jsx(io,{size:14})," Detalhes dos Itens e Entrega"]}),o.jsx("div",{className:"space-y-2",children:z.items.map(X=>o.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-gray-50 last:border-0 hover:bg-gray-50 rounded",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"checkbox","aria-label":`Marcar ${X.itemName} como entregue`,checked:X.isDelivered,onChange:Mt=>W(X.id,Mt.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:z.status===nt.CONFIRMED}),o.jsxs("div",{children:[o.jsx("p",{className:`text-sm font-medium ${X.isDelivered?"text-gray-400 line-through":"text-gray-900"}`,children:X.itemName}),o.jsxs("p",{className:"text-[10px] text-gray-500",children:[X.quantity," ",X.unit,"  ",X.condition]})]})]}),X.notes&&o.jsxs("p",{className:"text-[10px] text-gray-400 italic",children:['"',X.notes,'"']})]},X.id))}),z.notes&&o.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 rounded border border-yellow-100 italic text-xs text-gray-600",children:[o.jsx("strong",{children:"Notas:"})," ",z.notes]})]})})})]},z.id)})})]})})}),A&&o.jsx(MZ,{sheet:A,companyInfo:x,onClose:()=>I(null)}),b&&o.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-end md:items-center justify-center z-50 p-0 md:p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-white rounded-t-2xl md:rounded-xl shadow-2xl w-full max-w-md p-6 animate-in slide-in-from-bottom-10 md:slide-in-from-bottom-4 duration-200",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Nova Requisio"}),o.jsx("button",{onClick:()=>j(!1),className:"bg-gray-100 p-1 rounded-full",title:"Fechar","aria-label":"Fechar",children:o.jsx(sn,{size:20,className:"text-gray-500"})})]}),o.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"item-select",className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Necessrio"}),o.jsx("select",{id:"item-select",className:"w-full border border-gray-300 rounded-xl p-3 focus:ring-2 focus:ring-blue-500 focus:outline-none bg-white text-gray-900 text-base",value:$,onChange:z=>U(z.target.value),children:n.map(z=>o.jsx("option",{value:z.id,children:z.name},z.id))}),at&&o.jsx("div",{className:"mt-2",children:Ee(at)})]}),(at==null?void 0:at.type)===Pt.ASSET&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"condition-select",className:"block text-sm font-medium text-gray-700 mb-1",children:"Condio Desejada"}),o.jsxs("select",{id:"condition-select",className:"w-full border border-gray-300 rounded-xl p-3 focus:ring-2 focus:ring-blue-500 focus:outline-none bg-white text-gray-900 text-base",value:V,onChange:z=>D(z.target.value),children:[o.jsx("option",{value:Jt.NEW,children:"Novo"}),o.jsx("option",{value:Jt.GOOD,children:"Bom Estado (Usado)"}),o.jsx("option",{value:Jt.FAIR,children:"Qualquer um (Funcional)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"quantity-input",className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade"}),o.jsx("input",{id:"quantity-input",type:"number",min:"1",className:"w-full border border-gray-300 rounded-xl p-3 focus:ring-2 focus:ring-blue-500 focus:outline-none bg-white text-gray-900 text-lg font-bold",value:ce,onChange:z=>G(parseInt(z.target.value))})]}),o.jsx("div",{className:"bg-blue-50 p-4 rounded-xl text-sm text-blue-800 border border-blue-100",children:o.jsxs("p",{children:["A requisio ser enviada para aprovao do ",o.jsx("strong",{children:"Gerente Regional"})," ou ",o.jsx("strong",{children:"Administrao"}),"."]})}),o.jsxs("div",{className:"flex gap-3 mt-6 pt-2",children:[o.jsx("button",{type:"button",onClick:()=>j(!1),className:"flex-1 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl text-sm font-bold",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 text-sm font-bold shadow-md",children:"Confirmar Envio"})]})]})]})})]})},LZ=()=>{var Re,Ze,Ke;const{locations:e,items:t,inventory:r,currentUser:n,selectedDepartmentId:i,registerNewItem:l,addToInventory:u,createRequisition:d,itemTypes:h,measureUnits:m,getItemName:p,isAdminOrGM:g,deleteItem:x,allUsers:b,createFicha:j,updateItem:N}=Nr(),[_,E]=w.useState(i||(n==null?void 0:n.locationId)||"all"),[k,A]=w.useState(!1),[I,R]=w.useState(!1),[C,P]=w.useState(!1),[Y,oe]=w.useState(!1),[H,$]=w.useState(!1),[U,ce]=w.useState(!1),[G,V]=w.useState(null),[D,K]=w.useState(null),[fe,Ne]=w.useState(null),[_e,L]=w.useState({name:"",sku:"",itemTypeId:"",unit:"",qty:1,locationId:null,unitPrice:0,isForSale:!0}),[W,ve]=w.useState({itemId:"",qty:1,locationId:null,unitPrice:0}),[be,Te]=w.useState({itemId:"",targetLocationId:(n==null?void 0:n.locationId)||"",qty:1,condition:Jt.NEW});w.useEffect(()=>{i?(E(i),L(X=>({...X,locationId:i})),ve(X=>({...X,locationId:i}))):(n==null?void 0:n.role)!=="ADMIN"?n!=null&&n.locationId&&(E(n.locationId),L(X=>({...X,locationId:n.locationId})),ve(X=>({...X,locationId:n.locationId}))):E("all")},[i,n]);const Ee=r.filter(X=>_==="all"?!0:X.locationId===_),Ce=X=>{var Jr;X.preventDefault();const Mt=_e.locationId||((Jr=e[0])==null?void 0:Jr.id)||"",Fe=_e.unit||m[0],Kt=h.find(tr=>tr.id===_e.itemTypeId),Ve=Kt?Kt.name:"Geral",Cn=Kt?Kt.behavior:Pt.ASSET;l(_e.name,_e.sku,Ve,Fe,Cn,_e.qty,Mt,_e.unitPrice,_e.isForSale),A(!1),L({name:"",sku:"",itemTypeId:"",unit:"",qty:1,locationId:null,unitPrice:0,isForSale:!0})},at=X=>{var Kt,Ve;X.preventDefault();const Mt=W.locationId||((Kt=e[0])==null?void 0:Kt.id)||"",Fe=W.itemId||((Ve=t[0])==null?void 0:Ve.id)||"";u(Fe,Mt,W.qty,W.unitPrice),R(!1),ve({itemId:"",qty:1,locationId:null,unitPrice:0})},z=X=>{Te({itemId:X,targetLocationId:(n==null?void 0:n.locationId)||"",qty:1,condition:Jt.NEW}),P(!0)},pe=X=>{X.preventDefault(),d(be.itemId,be.qty,be.condition,be.targetLocationId||void 0),P(!1)},ue=X=>{const Mt=t.find(Fe=>Fe.id===X);ve({...W,itemId:X,unitPrice:(Mt==null?void 0:Mt.price)||0})},re=async X=>{V(X),$(!0)},Je=async()=>{G&&(await x(G),$(!1),V(null))};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Controle de Estoque"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Visualizao e gesto de ativos por localidade."})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded-lg border border-gray-200 shadow-sm w-full sm:w-auto",children:[o.jsx(js,{size:18,className:"text-gray-400 ml-2"}),o.jsxs("select",{"aria-label":"Filtrar por localizao",value:_||"",onChange:X=>E(X.target.value),className:"bg-transparent border-none text-sm font-medium text-gray-700 focus:outline-none pr-4 w-full sm:w-auto bg-white text-gray-900",children:[o.jsx("option",{value:"all",children:"Todas as Localizaes"}),e.map(X=>o.jsx("option",{value:X.id,children:X.name},X.id))]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[o.jsxs("button",{onClick:()=>R(!0),className:"flex items-center justify-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition shadow-sm text-sm font-medium w-full sm:w-auto",title:"Registrar entrada de estoque",children:[o.jsx(io,{size:16})," Entrada"]}),g&&o.jsxs("button",{onClick:()=>A(!0),className:"flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition shadow-sm text-sm font-medium w-full sm:w-auto",title:"Cadastrar um novo tipo de item",children:[o.jsx(Zr,{size:16})," Novo Item"]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Ee.map((X,Mt)=>{const Fe=t.find(Ve=>Ve.id===X.itemId),Kt=e.find(Ve=>Ve.id===X.locationId);return o.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm flex flex-col justify-between hover:shadow-md transition",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase tracking-wider ${(Fe==null?void 0:Fe.type)===Pt.ASSET?"bg-blue-50 text-blue-600":"bg-purple-50 text-purple-600"}`,children:Fe==null?void 0:Fe.category}),o.jsx("span",{className:"text-xs font-bold px-2 py-1 bg-gray-50 text-gray-600 rounded uppercase tracking-wider border border-gray-100",children:Fe==null?void 0:Fe.unit})]}),o.jsx("span",{className:"text-xs text-gray-400",children:Fe==null?void 0:Fe.sku})]}),o.jsx("h3",{className:"font-semibold text-gray-800 text-lg mb-1",children:Fe==null?void 0:Fe.name}),o.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[o.jsx(js,{size:12})," ",Kt==null?void 0:Kt.name]})]}),o.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-50 flex items-end justify-between",children:[o.jsx("div",{className:"text-xs text-gray-400",children:"Quantidade Disponvel"}),o.jsx("div",{className:`text-2xl font-bold ${X.quantity<5?"text-red-500":"text-gray-900"}`,children:X.quantity})]}),o.jsxs("button",{onClick:()=>z(X.itemId),className:"mt-4 w-full bg-slate-100 text-slate-700 py-2 rounded flex items-center justify-center gap-2 hover:bg-slate-200 transition text-sm font-medium",children:[o.jsx($a,{size:14})," Solicitar"]}),o.jsxs("button",{onClick:()=>{Ne(X.itemId),oe(!0)},className:"mt-2 w-full bg-emerald-50 text-emerald-700 py-2 rounded flex items-center justify-center gap-2 hover:bg-emerald-100 transition text-sm font-bold border border-emerald-100 shadow-sm",children:[o.jsx(io,{size:14})," Entregar a Pessoa"]}),g&&o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[o.jsxs("button",{onClick:()=>{const Ve=t.find(Cn=>Cn.id===X.itemId);K(Ve),ce(!0)},className:"bg-blue-50 text-blue-600 py-2 rounded flex items-center justify-center gap-2 hover:bg-blue-100 transition text-sm font-medium border border-blue-200",children:[o.jsx(Kh,{size:14})," Editar"]}),o.jsxs("button",{onClick:()=>re(X.itemId),className:"bg-red-50 text-red-600 py-2 rounded flex items-center justify-center gap-2 hover:bg-red-100 transition text-sm font-medium border border-red-200",children:[o.jsx(vi,{size:14})," Apagar"]})]})]},Mt)}),Ee.length===0&&o.jsx("div",{className:"col-span-full p-12 text-center border-2 border-dashed border-gray-200 rounded-xl text-gray-400",children:"Nenhum item encontrado nesta localizao."})]}),k&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Cadastrar Novo Item (Definio)"}),o.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",title:"Fechar","aria-label":"Fechar",children:o.jsx(sn,{size:20})})]}),o.jsxs("form",{onSubmit:Ce,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Item"}),o.jsx("input",{required:!0,type:"text",className:"w-full border rounded p-2 bg-white text-gray-900",value:_e.name,onChange:X=>L({..._e,name:X.target.value}),placeholder:"Ex: P Florestal"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU"}),o.jsx("input",{required:!0,type:"text",className:"w-full border rounded p-2 bg-white text-gray-900",value:_e.sku,onChange:X=>L({..._e,sku:X.target.value}),placeholder:"FER-001"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Item"}),o.jsxs("select",{"aria-label":"Tipo de Item",required:!0,className:"w-full border rounded p-2 bg-white text-gray-900",value:_e.itemTypeId,onChange:X=>L({..._e,itemTypeId:X.target.value}),children:[o.jsx("option",{value:"",children:"Selecione..."}),h.map(X=>o.jsxs("option",{value:X.id,children:[X.name," (",X.behavior===Pt.ASSET?"Ativo":"Consumvel",")"]},X.id))]}),o.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"Define comportamento Contbil."})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unidade"}),o.jsxs("select",{"aria-label":"Unidade",required:!0,className:"w-full border rounded p-2 bg-white text-gray-900",value:_e.unit,onChange:X=>L({..._e,unit:X.target.value}),children:[o.jsx("option",{value:"",children:"Selecione..."}),m.map(X=>o.jsx("option",{value:X,children:X},X))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo Un. (MZN)"}),o.jsx("input",{"aria-label":"Preo Un. (MZN)",required:!0,type:"number",min:"0",step:"0.01",className:"w-full border rounded p-2 bg-white text-gray-900",value:_e.unitPrice,onChange:X=>L({..._e,unitPrice:parseFloat(X.target.value)||0})})]})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded border border-gray-100",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Estoque Inicial"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Localizao"}),o.jsxs("select",{"aria-label":"Localizao",className:"w-full border rounded p-2 bg-white text-gray-900",value:_e.locationId||"",onChange:X=>L({..._e,locationId:X.target.value}),disabled:!g,children:[o.jsx("option",{value:"",children:"Selecione..."}),e.map(X=>o.jsx("option",{value:X.id,children:X.name},X.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade"}),o.jsx("input",{"aria-label":"Quantidade",type:"number",min:"0",className:"w-full border rounded p-2 bg-white text-gray-900",value:_e.qty,onChange:X=>L({..._e,qty:parseInt(X.target.value)})})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[o.jsx("input",{type:"checkbox",id:"isForSale",checked:_e.isForSale,onChange:X=>L({..._e,isForSale:X.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),o.jsx("label",{htmlFor:"isForSale",className:"text-sm font-medium text-gray-700",children:"Disponvel para venda no POS"})]}),o.jsx("div",{className:"flex justify-end gap-2 mt-4",children:o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 font-medium w-full",children:"Cadastrar"})})]})]})}),I&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Entrada de Estoque"}),o.jsx("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-600",title:"Fechar","aria-label":"Fechar",children:o.jsx(sn,{size:20})})]}),o.jsxs("form",{onSubmit:at,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item"}),o.jsxs("select",{"aria-label":"Item",className:"w-full border rounded p-2 bg-white text-gray-900",value:W.itemId,onChange:X=>ue(X.target.value),children:[o.jsx("option",{value:"",children:"Selecione o item..."}),t.map(X=>o.jsx("option",{value:X.id,children:X.name},X.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Localizao (Destino)"}),o.jsxs("select",{"aria-label":"Localizao (Destino)",className:`w-full border rounded p-2 bg-white text-gray-900 ${g?"":"bg-gray-100 text-gray-500"}`,value:W.locationId||"",onChange:X=>ve({...W,locationId:X.target.value}),disabled:!g,children:[o.jsx("option",{value:"",children:"Selecione a localizao..."}),e.map(X=>o.jsx("option",{value:X.id,children:X.name},X.id))]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade"}),o.jsx("input",{"aria-label":"Quantidade",required:!0,type:"number",min:"1",className:"w-full border rounded p-2 bg-white text-gray-900",value:W.qty,onChange:X=>ve({...W,qty:parseInt(X.target.value)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo Un. (MZN)"}),o.jsx("input",{"aria-label":"Preo Un. (MZN)",required:!0,type:"number",min:"0",step:"0.01",className:"w-full border rounded p-2 bg-white text-gray-900",value:W.unitPrice,onChange:X=>ve({...W,unitPrice:parseFloat(X.target.value)||0})})]})]}),o.jsx("p",{className:"text-xs text-gray-500",children:"Isso registrar uma entrada contbil e atualizar o patrimnio."}),o.jsx("div",{className:"flex justify-end gap-2 mt-4",children:o.jsx("button",{type:"submit",className:"bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700 font-medium w-full",children:"Confirmar Entrada"})})]})]})}),C&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Solicitar Item"}),o.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600",title:"Fechar","aria-label":"Fechar",children:o.jsx(sn,{size:20})})]}),o.jsxs("div",{className:"mb-4 text-sm text-gray-500",children:["Solicitando: ",o.jsx("span",{className:"font-bold text-gray-800",children:p(be.itemId)})]}),o.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destino (Onde ser entregue?)"}),o.jsx("select",{"aria-label":"Destino (Onde ser entregue?)",className:"w-full border rounded p-2 bg-white text-gray-900",value:be.targetLocationId||"",onChange:X=>Te({...be,targetLocationId:X.target.value}),children:e.map(X=>o.jsx("option",{value:X.id,children:X.name},X.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Requerente"}),o.jsx("input",{"aria-label":"Nome do Requerente",type:"text",disabled:!0,className:"w-full border rounded p-2 bg-gray-100 text-gray-500 cursor-not-allowed",value:(n==null?void 0:n.name)||""})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade"}),o.jsx("input",{"aria-label":"Quantidade",required:!0,type:"number",min:"1",className:"w-full border rounded p-2 bg-white text-gray-900",value:be.qty,onChange:X=>Te({...be,qty:parseInt(X.target.value)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Condio"}),o.jsxs("select",{"aria-label":"Condio",className:"w-full border rounded p-2 bg-white text-gray-900",value:be.condition,onChange:X=>Te({...be,condition:X.target.value}),children:[o.jsx("option",{value:Jt.NEW,children:"Novo"}),o.jsx("option",{value:Jt.GOOD,children:"Bom"}),o.jsx("option",{value:Jt.FAIR,children:"Regular"})]})]})]}),o.jsx("div",{className:"flex justify-end gap-2 mt-6",children:o.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 font-medium w-full flex items-center justify-center gap-2",children:[o.jsx($a,{size:16})," Enviar Requisio"]})})]})]})}),H&&G&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Confirmar Apagamento"}),o.jsxs("p",{className:"text-gray-600 mb-6",children:["Tem a certeza que deseja apagar a definio do item ",o.jsx("strong",{children:(Re=t.find(X=>X.id===G))==null?void 0:Re.name}),"? Esta ao no pode ser desfeita."]}),o.jsxs("div",{className:"flex gap-3 justify-end",children:[o.jsx("button",{onClick:()=>{$(!1),V(null)},className:"px-4 py-2 rounded border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium transition",children:"Cancelar"}),o.jsxs("button",{onClick:Je,className:"px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700 font-medium transition flex items-center gap-2",children:[o.jsx(vi,{size:16})," Apagar"]})]})]})}),Y&&fe&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in duration-200",children:[o.jsxs("div",{className:"bg-emerald-600 p-6 text-white flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold",children:"Entregar Material"}),o.jsx("p",{className:"text-emerald-100 text-[10px] uppercase font-bold tracking-widest mt-1",children:"Sada direta para funcionrio"})]}),o.jsx("button",{onClick:()=>oe(!1),className:"hover:bg-white/10 p-1 rounded-full",children:o.jsx(sn,{size:20})})]}),o.jsx("div",{className:"p-6",children:o.jsxs("form",{onSubmit:async X=>{X.preventDefault();const Mt=X.target,Fe=Mt.person.value,Kt=parseFloat(Mt.qty.value),Ve=t.find(Cn=>Cn.id===fe);if(!Fe){alert("Selecione uma pessoa.");return}await j({tipo:"ferramentas",entidade_id:Fe,entidade_tipo:"trabalhador",data:new Date().toISOString().split("T")[0],produto_id:fe,produto:(Ve==null?void 0:Ve.name)||"",quantidade:Kt,unidade:(Ve==null?void 0:Ve.unit)||"Unidade",usuario_registou:(n==null?void 0:n.id)||"",estado:"confirmado"}),oe(!1)},className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Item Selecionado"}),o.jsx("div",{className:"p-3 bg-gray-50 border border-gray-100 rounded-xl font-bold text-gray-800",children:(Ze=t.find(X=>X.id===fe))==null?void 0:Ze.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Beneficirio (Pessoa)"}),o.jsxs("select",{name:"person",required:!0,className:"w-full p-3 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-emerald-500 bg-white text-gray-900",children:[o.jsx("option",{value:"",children:"Selecione um funcionrio..."}),b.map(X=>o.jsxs("option",{value:X.id,children:[X.name," (",X.jobTitle||"Sem cargo",")"]},X.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Quantidade"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{name:"qty",type:"number",step:"0.01",defaultValue:"1",className:"flex-1 p-3 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-emerald-500 font-bold"}),o.jsx("div",{className:"px-4 flex items-center bg-gray-50 border border-gray-200 rounded-xl text-gray-500 text-sm",children:(Ke=t.find(X=>X.id===fe))==null?void 0:Ke.unit})]})]}),o.jsx("button",{type:"submit",className:"w-full bg-emerald-600 text-white font-bold py-3 rounded-xl hover:bg-emerald-700 shadow-lg shadow-emerald-100 uppercase tracking-widest text-xs mt-4",children:"Confirmar Entrega"})]})})]})}),U&&D&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Editar Definio do Item"}),o.jsx("button",{onClick:()=>ce(!1),className:"text-gray-400 hover:text-gray-600",children:o.jsx(sn,{size:20})})]}),o.jsxs("form",{onSubmit:async X=>{X.preventDefault(),await N(D.id,D),ce(!1)},className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Item"}),o.jsx("input",{required:!0,type:"text",className:"w-full border rounded p-2 bg-white text-gray-900",value:D.name,onChange:X=>K({...D,name:X.target.value})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU"}),o.jsx("input",{required:!0,type:"text",className:"w-full border rounded p-2 bg-white text-gray-900",value:D.sku,onChange:X=>K({...D,sku:X.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unidade"}),o.jsx("select",{className:"w-full border rounded p-2 bg-white text-gray-900",value:D.unit,onChange:X=>K({...D,unit:X.target.value}),children:m.map(X=>o.jsx("option",{value:X,children:X},X))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Patrimnio"}),o.jsxs("select",{className:"w-full border rounded p-2 bg-white text-gray-900",value:D.type,onChange:X=>K({...D,type:X.target.value}),children:[o.jsx("option",{value:Pt.ASSET,children:"Ativo (Permanente)"}),o.jsx("option",{value:Pt.CONSUMABLE,children:"Consumvel"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo Sugerido (Venda/Valor)"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded p-2 bg-white text-gray-900",value:D.price,onChange:X=>K({...D,price:parseFloat(X.target.value)})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"editIsForSale",checked:D.is_for_sale,onChange:X=>K({...D,is_for_sale:X.target.checked})}),o.jsx("label",{htmlFor:"editIsForSale",className:"text-sm text-gray-700",children:"Disponvel para Venda"})]}),o.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-3 rounded-xl hover:bg-blue-700 shadow-lg mt-4",children:"Salvar Alteraes"})]})]})})]})},zZ=()=>{const{currentUser:e,getWorkersByManager:t,getWorkersByLocation:r,performanceRecords:n,savePerformanceRecord:i,locations:l,selectedDepartmentId:u,allUsers:d,isAdminOrGM:h}=Nr(),[m,p]=w.useState("register"),[g,x]=w.useState(new Date().toISOString().split("T")[0]),[b,j]=w.useState(null),[N,_]=w.useState({status:wt.FULL_DAY,production:0,notes:""}),[E,k]=w.useState(()=>{const G=new Date;return G.setDate(1),G.toISOString().split("T")[0]}),[A,I]=w.useState(new Date().toISOString().split("T")[0]),R=(G,V=g)=>n.find(D=>D.workerId===G&&D.date===V),C=G=>{switch(G){case wt.FULL_DAY:return"D";case wt.HALF_DAY:return"D/2";case wt.ABSENT:return"F";default:return G}},P=G=>{switch(G){case wt.FULL_DAY:return"text-green-600 bg-green-50 border-green-200";case wt.HALF_DAY:return"text-orange-600 bg-orange-50 border-orange-200";case wt.ABSENT:return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600"}},Y=G=>{const V=R(G.id);if(V&&!h){alert("Apenas Administradores podem alterar registros j submetidos.");return}j(G.id),_(V?{status:V.status,production:V.production,notes:V.notes||""}:{status:wt.FULL_DAY,production:G.defaultDailyGoal||0,notes:""})},oe=G=>{const V=R(G.id);if(V&&!h||!confirm(`Confirmar "Falta" (F) para ${G.name} na data ${g}?`))return;const D={id:(V==null?void 0:V.id)||`perf-${Date.now()}-${G.id}`,workerId:G.id,date:g,status:wt.ABSENT,production:0,notes:"Falta Registrada (Rpido)"};i(D)},H=G=>{const V=R(G.id),D={id:(V==null?void 0:V.id)||`perf-${Date.now()}-${G.id}`,workerId:G.id,date:g,status:N.status,production:N.status===wt.ABSENT?0:N.production,notes:N.notes};i(D),j(null)},$=()=>{let G=[];if((e==null?void 0:e.role)===Ae.ADMIN){const V=d.filter(D=>D.role===Ae.WORKER);if(u){const D=l.filter(fe=>fe.parentId===u).map(fe=>fe.id),K=[u,...D];G=V.filter(fe=>fe.locationId&&K.includes(fe.locationId))}else G=V}else G=e?t(e.id):[];return G.sort((V,D)=>V.name.localeCompare(D.name)),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-2",children:[o.jsx(fo,{size:14})," Registros salvos s podem ser alterados pela Administrao."]}),o.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded-lg border border-gray-200 shadow-sm",children:[o.jsx(Su,{size:18,className:"text-gray-400"}),o.jsx("input",{type:"date",value:g,onChange:V=>x(V.target.value),className:"text-sm font-medium text-gray-700 outline-none bg-white"})]})]}),G.length===0?o.jsxs("div",{className:"text-center p-8 bg-white rounded-xl border border-dashed border-gray-300 text-gray-400",children:[o.jsx(Yh,{size:48,className:"mx-auto mb-2 opacity-20"}),o.jsx("p",{children:"Nenhum trabalhador encontrado para o filtro atual."})]}):G.map(V=>{const D=R(V.id),K=b===V.id,fe=V.defaultDailyGoal||0,Ne=!!D&&!h;return o.jsx("div",{className:`bg-white rounded-xl border transition-all ${K?"border-blue-500 shadow-md ring-1 ring-blue-500":"border-gray-200 shadow-sm hover:border-blue-300"}`,children:o.jsxs("div",{className:"p-4 flex flex-col md:flex-row items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3 w-full md:w-1/4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-600 font-bold shrink-0",children:V.name.charAt(0)}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-gray-900",children:V.name}),o.jsx("p",{className:"text-xs text-gray-500",children:V.jobTitle||"Operrio"})]})]}),o.jsx("div",{className:"flex-1 w-full",children:K?o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx("div",{className:"flex gap-2",children:[wt.FULL_DAY,wt.HALF_DAY,wt.ABSENT].map(_e=>o.jsx("button",{onClick:()=>_({...N,status:_e}),className:`flex-1 py-2 px-3 rounded border text-sm font-bold transition-all ${N.status===_e?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:C(_e)},_e))}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-[10px] uppercase text-gray-400 font-bold mb-1 block",children:"Produo"}),o.jsx("input",{type:"number",min:"0",disabled:N.status===wt.ABSENT,className:"w-full p-2 border border-gray-300 rounded focus:border-blue-500 outline-none text-sm font-semibold disabled:bg-gray-100 disabled:text-gray-400 bg-white text-gray-900",value:N.production,onChange:_e=>_({...N,production:parseFloat(_e.target.value)})})]}),o.jsxs("div",{className:"text-xs text-gray-400 pt-5",children:["Meta: ",fe]})]})]}):o.jsxs("div",{className:"flex items-center justify-between md:justify-around w-full",children:[o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Estado"}),o.jsx("span",{className:`px-3 py-1 rounded text-sm font-bold border mt-1 ${D?P(D.status):"bg-gray-100 text-gray-400"}`,children:D?C(D.status):"-"})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Produo"}),o.jsxs("div",{className:"mt-1 flex items-baseline gap-1",children:[o.jsx("span",{className:"text-lg font-bold text-gray-900",children:D?D.production:"-"}),o.jsxs("span",{className:"text-xs text-gray-400",children:["/ ",fe]})]})]})]})}),o.jsx("div",{className:"w-full md:w-auto flex justify-end gap-2 mt-2 md:mt-0",children:K?o.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[o.jsx("button",{onClick:()=>j(null),className:"flex-1 md:flex-none px-3 py-2 text-sm text-gray-500 hover:bg-gray-100 rounded border border-gray-200",children:"Cancelar"}),o.jsxs("button",{onClick:()=>H(V),className:"flex-1 md:flex-none px-4 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center justify-center gap-2",children:[o.jsx(Kh,{size:14})," Salvar"]})]}):o.jsxs(o.Fragment,{children:[!Ne&&o.jsxs("button",{onClick:()=>oe(V),className:"px-3 py-2 text-sm border border-red-200 text-red-700 bg-red-50 rounded hover:bg-red-100 transition flex items-center gap-1",title:"Registrar Falta",children:[o.jsx(Kf,{size:14})," ",o.jsx("span",{className:"hidden sm:inline",children:"Falta"})]}),Ne?o.jsxs("button",{disabled:!0,className:"px-4 py-2 text-sm border border-gray-100 bg-gray-50 text-gray-400 rounded flex items-center gap-2 cursor-not-allowed",children:[o.jsx(fo,{size:12})," Registrado"]}):o.jsx("button",{onClick:()=>Y(V),className:`px-4 py-2 text-sm border rounded hover:bg-gray-50 transition ${D?"border-gray-300 text-gray-700":"border-blue-200 text-blue-600 bg-blue-50"}`,children:D?"Editar":"Registrar"})]})})]})},V.id)})]})},U=w.useMemo(()=>{const G=d.filter(L=>L.role===Ae.WORKER);let V=G;if(!e||e.role!==Ae.ADMIN){const L=[(e==null?void 0:e.locationId)||"",...l.filter(W=>W.parentId===(e==null?void 0:e.locationId)).map(W=>W.id)];V=G.filter(W=>W.locationId&&L.includes(W.locationId))}else if(u){const L=l.filter(ve=>ve.parentId===u).map(ve=>ve.id),W=[u,...L];V=G.filter(ve=>ve.locationId&&W.includes(ve.locationId))}const D=V.map(L=>{var pe;const W=n.filter(ue=>ue.workerId===L.id&&ue.date>=E&&ue.date<=A),ve=W.filter(ue=>ue.status===wt.FULL_DAY).length,be=W.filter(ue=>ue.status===wt.HALF_DAY).length,Te=W.filter(ue=>ue.status===wt.ABSENT).length,Ee=W.reduce((ue,re)=>ue+(re.production||0),0),Ce=ve+be,at=Ce>0?(Ee/Ce).toFixed(1):"0",z=((pe=l.find(ue=>ue.id===L.locationId))==null?void 0:pe.name)||"N/A";return{worker:L,locationName:z,dCount:ve,halfCount:be,fCount:Te,totalProduction:Ee,avgProduction:parseFloat(at)}}),K=D.reduce((L,W)=>L+W.totalProduction,0),fe=D.reduce((L,W)=>L+W.fCount,0),Ne=D.reduce((L,W)=>L+W.dCount,0),_e=D.reduce((L,W)=>L+W.halfCount,0);return{rows:D,globalTotalProduction:K,globalAbsences:fe,globalD:Ne,globalHalf:_e,totalWorkers:D.length}},[d,n,l,e,u,E,A]),ce=()=>{const{rows:G,globalTotalProduction:V,globalAbsences:D,globalD:K,globalHalf:fe}=U,Ne=[...G].sort((L,W)=>W.totalProduction-L.totalProduction).slice(0,5),_e=[{name:"Dias Completos (D)",value:K,color:"#22c55e"},{name:"Meios Dias (D/2)",value:fe,color:"#f97316"},{name:"Faltas (F)",value:D,color:"#ef4444"}].filter(L=>L.value>0);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col md:flex-row items-center gap-4 justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[o.jsx(bO,{size:18}),o.jsx("span",{className:"font-semibold text-sm",children:"Filtro de Perodo:"})]}),o.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase",children:"De"}),o.jsx("input",{type:"date",value:E,onChange:L=>k(L.target.value),className:"border rounded px-2 py-1 text-sm bg-gray-50 text-gray-900 focus:outline-blue-500"})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase",children:"At"}),o.jsx("input",{type:"date",value:A,onChange:L=>I(L.target.value),className:"border rounded px-2 py-1 text-sm bg-gray-50 text-gray-900 focus:outline-blue-500"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Produo Total"}),o.jsx("h3",{className:"text-3xl font-bold text-blue-600 mt-1",children:V}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"rvores no perodo"})]}),o.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Total de Faltas"}),o.jsx("h3",{className:"text-3xl font-bold text-red-600 mt-1",children:D}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ocorrncias 'F'"})]}),o.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Assiduidade Total"}),o.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-1",children:K+fe}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Dias trabalhados (D + D/2)"})]}),o.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Mdia Geral"}),o.jsx("h3",{className:"text-3xl font-bold text-gray-800 mt-1",children:(V/(K+fe||1)).toFixed(1)}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"rvores / Dia Trabalhado"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm h-80",children:[o.jsxs("h4",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(vx,{className:"rotate-180 text-green-600"})," Top 5 Produtores"]}),o.jsx(fu,{width:"100%",height:"90%",children:o.jsxs(vw,{data:Ne,layout:"vertical",margin:{left:40,right:20},children:[o.jsx(qm,{strokeDasharray:"3 3",horizontal:!1}),o.jsx(Bm,{type:"number",hide:!0}),o.jsx(Gm,{type:"category",dataKey:"worker.name",width:100,tick:{fontSize:10}}),o.jsx(Nu,{}),o.jsx($m,{dataKey:"totalProduction",fill:"#3b82f6",radius:[0,4,4,0],children:Ne.map((L,W)=>o.jsx(_s,{fill:W===0?"#f59e0b":"#3b82f6"},`cell-${W}`))})]})})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm h-80 flex flex-col",children:[o.jsxs("h4",{className:"font-bold text-gray-800 mb-2 flex items-center gap-2",children:[o.jsx(i6,{className:"text-purple-600"})," Distribuio de Presena"]}),o.jsx("div",{className:"flex-1 w-full",children:o.jsx(fu,{width:"100%",height:"100%",children:o.jsxs(gR,{children:[o.jsx(uw,{data:_e,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:_e.map((L,W)=>o.jsx(_s,{fill:L.color},`cell-${W}`))}),o.jsx(Nu,{}),o.jsx(iT,{})]})})})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[o.jsx("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:o.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(la,{size:18})," Detalhe por Funcionrio"]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left text-sm",children:[o.jsx("thead",{className:"bg-white text-xs text-gray-500 uppercase font-semibold border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4",children:"Funcionrio"}),o.jsx("th",{className:"px-6 py-4",children:"Localizao"}),o.jsx("th",{className:"px-6 py-4 text-center text-green-700 bg-green-50/50",children:"D (Dias)"}),o.jsx("th",{className:"px-6 py-4 text-center text-orange-700 bg-orange-50/50",children:"D/2 (Meios)"}),o.jsx("th",{className:"px-6 py-4 text-center text-red-700 bg-red-50/50",children:"F (Faltas)"}),o.jsx("th",{className:"px-6 py-4 text-right",children:"Total Produo"}),o.jsx("th",{className:"px-6 py-4 text-right",children:"Mdia / Dia"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:G.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-400",children:"Nenhum dado no perodo."})}):G.map(L=>o.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[o.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:L.worker.name}),o.jsx("td",{className:"px-6 py-4 text-gray-600",children:L.locationName}),o.jsx("td",{className:"px-6 py-4 text-center font-bold text-green-700 bg-green-50/30",children:L.dCount}),o.jsx("td",{className:"px-6 py-4 text-center font-bold text-orange-700 bg-orange-50/30",children:L.halfCount}),o.jsx("td",{className:"px-6 py-4 text-center font-bold text-red-700 bg-red-50/30",children:L.fCount}),o.jsx("td",{className:"px-6 py-4 text-right font-bold text-blue-700",children:L.totalProduction}),o.jsx("td",{className:"px-6 py-4 text-right text-gray-600",children:L.avgProduction})]},L.worker.id))})]})})]})]})};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-end gap-4 border-b border-gray-200 pb-2",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Desempenho Operacional"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Controle de produo florestal e assiduidade."})]}),o.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[o.jsx("button",{onClick:()=>p("register"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${m==="register"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sa,{size:16}),"Registo Dirio"]})}),o.jsx("button",{onClick:()=>p("report"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${m==="report"?"bg-white text-purple-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(U3,{size:16}),"Relatrio Geral"]})})]})]}),m==="register"?$():ce()]})},UZ=()=>{var V;const{allUsers:e,locations:t,addUser:r,updateUser:n,deleteUser:i,performanceRecords:l,payrollParams:u,updatePayrollParams:d,isAdminOrGM:h}=Nr(),[m,p]=w.useState(""),[g,x]=w.useState(null),[b,j]=w.useState(null),[N,_]=w.useState("summary"),[E,k]=w.useState(!1),[A,I]=w.useState(null),[R,C]=w.useState({name:"",email:"",password:"",role:Ae.WORKER,locationId:null,jobTitle:"",defaultDailyGoal:10,dailyRate:236.5,halfDayRate:118,absencePenalty:95,bonusPerUnit:10}),[P,Y]=w.useState({}),oe=e.filter(D=>{var K;return D.name.toLowerCase().includes(m.toLowerCase())||((K=D.jobTitle)==null?void 0:K.toLowerCase().includes(m.toLowerCase()))}),H=async D=>{if(D.preventDefault(),!R.locationId){x({type:"info",message:"Selecione um departamento/localizao."});return}try{const K={name:R.name,email:R.email,password:R.password,role:R.role,locationId:R.locationId||void 0,jobTitle:R.jobTitle,defaultDailyGoal:R.role===Ae.WORKER?R.defaultDailyGoal:void 0,dailyRate:R.role===Ae.WORKER?R.dailyRate:void 0,halfDayRate:R.role===Ae.WORKER?R.halfDayRate:void 0,absencePenalty:R.role===Ae.WORKER?R.absencePenalty:void 0,bonusPerUnit:R.role===Ae.WORKER?R.bonusPerUnit:void 0};await r(K),x({type:"success",message:"Funcionrio adicionado com sucesso!"}),setTimeout(()=>x(null),3e3),C({name:"",email:"",password:"",role:Ae.WORKER,locationId:null,jobTitle:"",defaultDailyGoal:10,dailyRate:236.5,halfDayRate:118,absencePenalty:95,bonusPerUnit:10})}catch(K){x({type:"error",message:`Erro ao adicionar funcionrio: ${K instanceof Error?K.message:String(K)}`})}},$=D=>{j(D),_("summary"),Y({defaultDailyGoal:D.defaultDailyGoal,dailyRate:D.dailyRate,halfDayRate:D.halfDayRate,absencePenalty:D.absencePenalty,bonusPerUnit:D.bonusPerUnit,role:D.role,jobTitle:D.jobTitle})},U=D=>{I(D),k(!0)},ce=async()=>{A&&(await i(A.id),k(!1),I(null),j(null))},G=()=>{if(!b)return null;const D=new Date().toISOString().slice(0,7),K=l.filter(z=>z.workerId===b.id),fe=K.filter(z=>z.date.startsWith(D)),Ne=fe.filter(z=>z.status===wt.FULL_DAY).length,_e=fe.filter(z=>z.status===wt.HALF_DAY).length,L=fe.filter(z=>z.status===wt.ABSENT).length,W=fe.reduce((z,pe)=>z+(pe.production||0),0),be=(Ne+_e*.5)*(b.defaultDailyGoal||0),Te=Ne*(b.dailyRate||0)+_e*(b.halfDayRate||0),Ee=Math.max(0,W-be)*(b.bonusPerUnit||0),Ce=L*(b.absencePenalty||0),at=Te+Ee-Ce;if(N==="summary")return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm",children:[o.jsxs("h4",{className:"font-bold text-gray-700 mb-3 flex items-center gap-2",children:[o.jsx(iu,{size:18,className:"text-blue-500"})," Este Ms (",D,")"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between border-b border-gray-50 pb-2",children:[o.jsx("span",{className:"text-gray-500 text-sm",children:"Dias Trabalhados"}),o.jsxs("span",{className:"font-bold text-gray-800",children:[Ne," ",o.jsxs("span",{className:"text-xs font-normal text-gray-400",children:["(",_e," meios)"]})]})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-50 pb-2",children:[o.jsx("span",{className:"text-gray-500 text-sm",children:"Produo Real"}),o.jsxs("span",{className:`font-bold ${W>=be?"text-green-600":"text-orange-500"}`,children:[W," ",o.jsxs("span",{className:"text-xs text-gray-400",children:["/ ",be," meta"]})]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500 text-sm",children:"Faltas"}),o.jsx("span",{className:"font-bold text-red-500",children:L})]})]})]}),o.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm",children:[o.jsxs("h4",{className:"font-bold text-gray-700 mb-3 flex items-center gap-2",children:[o.jsx(Gn,{size:18,className:"text-green-500"})," Salrio Previsto"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between border-b border-gray-50 pb-2",children:[o.jsx("span",{className:"text-gray-500 text-sm",children:"Base Calculada"}),o.jsxs("span",{className:"font-medium text-gray-800",children:[Te.toFixed(2)," MT"]})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-50 pb-2",children:[o.jsx("span",{className:"text-gray-500 text-sm",children:"Bnus Produtividade"}),o.jsxs("span",{className:"font-medium text-blue-600",children:["+",Ee.toFixed(2)," MT"]})]}),o.jsxs("div",{className:"flex justify-between pt-1",children:[o.jsx("span",{className:"text-gray-800 font-bold text-sm",children:"Lquido Estimado"}),o.jsxs("span",{className:"font-bold text-green-700 text-lg",children:[at.toFixed(2)," MT"]})]})]})]})]}),o.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 flex items-start gap-3",children:[o.jsx(Eu,{className:"text-blue-600 mt-1",size:20}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-bold text-blue-800",children:"Anlise de Eficincia"}),o.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["O funcionrio est com uma eficincia de ",o.jsxs("strong",{children:[be>0?(W/be*100).toFixed(0):0,"%"]})," este ms.",W>be?" Excelente desempenho, acima da meta estabelecida.":" Ateno: Produo abaixo do esperado para os dias trabalhados."]})]})]})]});if(N==="history"){const z={};K.forEach(ue=>{const re=ue.date.slice(0,7);z[re]||(z[re]={d:0,h:0,f:0,prod:0}),ue.status===wt.FULL_DAY&&z[re].d++,ue.status===wt.HALF_DAY&&z[re].h++,ue.status===wt.ABSENT&&z[re].f++,z[re].prod+=ue.production||0});const pe=Object.keys(z).sort().reverse();return o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left text-sm",children:[o.jsx("thead",{className:"bg-gray-50 text-gray-500 font-semibold border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3",children:"Ms/Ano"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Dias (D)"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Faltas"}),o.jsx("th",{className:"px-4 py-3 text-right",children:"Produo"}),o.jsx("th",{className:"px-4 py-3 text-right",children:"Eficincia"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Status"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:pe.map(ue=>{const re=z[ue],Re=(re.d+re.h*.5)*(b.defaultDailyGoal||0),Ze=Re>0?re.prod/Re*100:0,Ke=ue<D;return o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsx("td",{className:"px-4 py-3 font-medium text-gray-800",children:ue}),o.jsxs("td",{className:"px-4 py-3 text-center text-gray-600",children:[re.d," ",o.jsxs("span",{className:"text-xs text-gray-400",children:["(",re.h,")"]})]}),o.jsx("td",{className:"px-4 py-3 text-center text-red-500 font-bold",children:re.f}),o.jsx("td",{className:"px-4 py-3 text-right font-medium",children:re.prod}),o.jsx("td",{className:"px-4 py-3 text-right",children:o.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${Ze>=100?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:[Ze.toFixed(0),"%"]})}),o.jsx("td",{className:"px-4 py-3 text-center",children:Ke?o.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:"Fechado"}):o.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded",children:"Aberto"})})]},ue)})})]})})}if(N==="daily"){const z=[...K].sort((pe,ue)=>ue.date.localeCompare(pe.date));return o.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2 custom-scrollbar",children:z.map(pe=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-100 rounded-lg shadow-sm hover:border-blue-200 transition",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-gray-100 text-gray-600 text-xs font-bold px-2 py-1 rounded border border-gray-200",children:ur(pe.date,{dateOnly:!0})}),o.jsx("div",{className:`text-xs font-bold px-2 py-0.5 rounded uppercase w-10 text-center ${pe.status==="D"?"bg-green-100 text-green-700":pe.status==="D/2"?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}`,children:pe.status})]}),o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"text-gray-400 text-xs mr-2",children:"PRODUO"}),o.jsx("span",{className:"font-bold text-gray-800",children:pe.production})]}),pe.notes&&o.jsxs("div",{className:"text-xs text-gray-500 italic max-w-[150px] truncate",title:pe.notes,children:['"',pe.notes,'"']})]})]},pe.id))})}if(N==="financial"){const z=[];return K.forEach(pe=>{const ue=pe.date.slice(0,7);z.includes(ue)||z.push(ue)}),z.sort().reverse(),o.jsx("div",{className:"space-y-3",children:z.map(pe=>{const ue=pe===D;return o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-xl shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${ue?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"}`,children:o.jsx(Gn,{size:20})}),o.jsxs("div",{children:[o.jsxs("h5",{className:"font-bold text-gray-800",children:["Salrio ",pe]}),o.jsx("p",{className:"text-xs text-gray-500",children:ue?"Em processamento":"Processado e Fechado"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${ue?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:ue?"Pendente":"Pago"}),o.jsx("button",{className:"text-gray-400 hover:text-blue-600",title:"Ver recibo",children:o.jsx(la,{size:18})})]})]},pe)})})}if(N==="fichas"){const{fichasIndividuais:z,createFicha:pe,items:ue,inventory:re}=Nr(),Je=z.filter(Ke=>Ke.entidade_id===b.id),[Re,Ze]=w.useState(!1);return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center bg-emerald-50 p-4 rounded-xl border border-emerald-100",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-emerald-800",children:"Carga Individual / Ferramentas"}),o.jsx("p",{className:"text-xs text-emerald-600",children:"Histrico de materiais e EPIs entregues ao funcionrio."})]}),o.jsxs("button",{onClick:()=>Ze(!0),className:"bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition flex items-center gap-2 text-sm font-bold shadow-sm",children:[o.jsx(Zr,{size:16})," Nova Entrega"]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left text-sm",children:[o.jsx("thead",{className:"bg-gray-50 text-gray-500 font-semibold border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3",children:"Data"}),o.jsx("th",{className:"px-4 py-3",children:"Produto"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Qtd"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Tipo"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Estado"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:Je.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"px-4 py-10 text-center text-gray-400",children:"Nenhuma entrega registrada."})}):Je.map(Ke=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-4 py-3 text-gray-600",children:ur(Ke.data,{dateOnly:!0})}),o.jsx("td",{className:"px-4 py-3 font-medium text-gray-800",children:Ke.produto}),o.jsxs("td",{className:"px-4 py-3 text-center font-bold text-emerald-600",children:[Ke.quantidade," ",Ke.unidade]}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-gray-100 text-gray-600 uppercase font-bold tracking-tighter",children:Ke.tipo})}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:`px-2 py-0.5 rounded-[4px] text-[10px] font-bold ${Ke.estado==="confirmado"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Ke.estado.toUpperCase()})})]},Ke.id))})]})}),Re&&o.jsx("div",{className:"fixed inset-0 bg-black/60 z-[100] flex items-center justify-center p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in duration-200",children:[o.jsxs("div",{className:"bg-emerald-600 p-6 text-white flex justify-between items-center",children:[o.jsxs("h3",{className:"text-xl font-bold",children:["Nova Entrega para ",b.name]}),o.jsx("button",{type:"button",onClick:()=>Ze(!1),title:"Fechar modal","aria-label":"Fechar",className:"hover:bg-white/10 p-1 rounded-full",children:o.jsx(sn,{size:24})})]}),o.jsx("div",{className:"p-6",children:o.jsx($Z,{userId:b.id,items:ue,inventory:re,onSave:async Ke=>{await pe(Ke),Ze(!1)},onCancel:()=>Ze(!1)})})]})})]})}return null};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Recursos Humanos"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Gesto de pessoal, cadastro e configurao de salrios."})]})}),g&&o.jsx("div",{className:`p-3 rounded text-sm ${g.type==="success"?"bg-green-100 border border-green-300 text-green-800":g.type==="error"?"bg-red-100 border border-red-300 text-red-800":"bg-blue-50 border border-blue-100 text-blue-800"}`,children:g.message}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 h-fit",children:[o.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2 mb-4",children:[o.jsx(su,{size:20,className:"text-blue-600"}),"Cadastrar Novo Funcionrio"]}),o.jsxs("form",{onSubmit:H,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo"}),o.jsx("input",{required:!0,type:"text",className:"w-full border rounded p-2 bg-white text-gray-900 focus:ring-2 focus:ring-blue-500 outline-none",value:R.name,onChange:D=>C({...R,name:D.target.value}),placeholder:"Ex: Joo da Silva"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cargo / Funo"}),o.jsx("input",{required:!0,type:"text",className:"w-full border rounded p-2 bg-white text-gray-900 focus:ring-2 focus:ring-blue-500 outline-none",value:R.jobTitle,onChange:D=>C({...R,jobTitle:D.target.value}),placeholder:"Ex: Operador de Mquina"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (para login)"}),o.jsx("input",{required:!0,type:"email",className:"w-full border rounded p-2 bg-white text-gray-900 focus:ring-2 focus:ring-blue-500 outline-none",value:R.email,onChange:D=>C({...R,email:D.target.value}),placeholder:"funcionario@example.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha Inicial"}),o.jsx("input",{required:!0,type:"password",minLength:6,className:"w-full border rounded p-2 bg-white text-gray-900 focus:ring-2 focus:ring-blue-500 outline-none",value:R.password,onChange:D=>C({...R,password:D.target.value}),placeholder:"Mnimo 6 caracteres"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nvel de Acesso"}),o.jsxs("select",{"aria-label":"Nvel de Acesso",className:"w-full border rounded p-2 bg-white text-gray-900 focus:ring-2 focus:ring-blue-500 outline-none",value:R.role,onChange:D=>C({...R,role:D.target.value}),children:[o.jsx("option",{value:Ae.WORKER,children:"Operrio (Campo)"}),o.jsx("option",{value:Ae.MANAGER,children:"Gerente Regional"}),o.jsx("option",{value:Ae.GENERAL_MANAGER,children:"Diretor Geral"}),o.jsx("option",{value:Ae.ADMIN,children:"Administrador"})]})]}),R.role===Ae.WORKER&&o.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-100 space-y-3",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase",children:"Configurao Salarial (MZN)"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Valor Dia"}),o.jsx("input",{"aria-label":"Valor Dia",title:"Valor Dia",type:"number",step:"0.1",placeholder:"0.00",className:"w-full border rounded p-1 text-sm bg-white text-gray-900",value:R.dailyRate,onChange:D=>C({...R,dailyRate:parseFloat(D.target.value)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Valor Meio Dia"}),o.jsx("input",{"aria-label":"Valor Meio Dia",title:"Valor Meio Dia",type:"number",step:"0.1",placeholder:"0.00",className:"w-full border rounded p-1 text-sm bg-white text-gray-900",value:R.halfDayRate,onChange:D=>C({...R,halfDayRate:parseFloat(D.target.value)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Valor Falta"}),o.jsx("input",{"aria-label":"Valor Falta",title:"Valor Falta",type:"number",step:"0.1",placeholder:"0.00",className:"w-full border rounded p-1 text-sm bg-white text-gray-900",value:R.absencePenalty,onChange:D=>C({...R,absencePenalty:parseFloat(D.target.value)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Bnus (Unid)"}),o.jsx("input",{"aria-label":"Bnus (Unid)",title:"Bnus por Unidade",type:"number",step:"0.1",placeholder:"0.00",className:"w-full border rounded p-1 text-sm bg-white text-gray-900",value:R.bonusPerUnit,onChange:D=>C({...R,bonusPerUnit:parseFloat(D.target.value)})})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Meta Diria (Produo)"}),o.jsx("input",{"aria-label":"Meta Diria (Produo)",title:"Meta Diria",type:"number",placeholder:"0",className:"w-full border rounded p-1 text-sm bg-white text-gray-900",value:R.defaultDailyGoal,onChange:D=>C({...R,defaultDailyGoal:parseFloat(D.target.value)})})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departamento / Alocao"}),o.jsxs("select",{"aria-label":"Departamento / Alocao",title:"Selecione o departamento",className:"w-full border rounded p-2 bg-white text-gray-900 focus:ring-2 focus:ring-blue-500 outline-none",value:R.locationId||"",onChange:D=>C({...R,locationId:D.target.value}),children:[o.jsx("option",{value:"",children:"Selecione..."}),t.filter((D,K,fe)=>K===fe.findIndex(Ne=>Ne.id===D.id)).map(D=>o.jsx("option",{value:D.id,children:D.name},D.id))]})]}),o.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-medium py-2 rounded hover:bg-blue-700 transition shadow-sm mt-4",children:"Cadastrar"})]})]}),o.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(Yh,{size:20,className:"text-blue-600"}),"Quadro de Funcionrios (",oe.length,")"]}),o.jsxs("div",{className:"relative",children:[o.jsx(xs,{size:16,className:"absolute left-2.5 top-2.5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Buscar por nome...",className:"pl-8 pr-4 py-2 border rounded-full text-sm focus:outline-none focus:border-blue-500 bg-gray-50",value:m,onChange:D=>p(D.target.value)})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100 text-xs text-gray-500 uppercase",children:[o.jsx("th",{className:"px-4 py-3",children:"Nome"}),o.jsx("th",{className:"px-4 py-3",children:"Cargo"}),o.jsx("th",{className:"px-4 py-3",children:"Departamento"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Meta"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Aes"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-50",children:oe.map(D=>{var K;return o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsxs("td",{className:"px-4 py-3 font-medium text-gray-800 flex items-center gap-2 cursor-pointer",onClick:()=>$(D),children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs font-bold text-gray-600",children:D.name.charAt(0)}),D.name]}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 cursor-pointer",onClick:()=>$(D),children:D.jobTitle||"-"}),o.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600 flex items-center gap-1 cursor-pointer",onClick:()=>$(D),children:[o.jsx(js,{size:12,className:"text-gray-400"}),(K=t.find(fe=>fe.id===D.locationId))==null?void 0:K.name]}),o.jsx("td",{className:"px-4 py-3 text-sm font-bold text-gray-700 text-center cursor-pointer",onClick:()=>$(D),children:D.defaultDailyGoal?D.defaultDailyGoal:"-"}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("button",{onClick:()=>$(D),"aria-label":`Abrir perfil de ${D.name}`,title:`Abrir perfil de ${D.name}`,className:"text-blue-600 hover:text-blue-800 text-xs font-medium border border-blue-200 px-2 py-1 rounded bg-blue-50",children:"Perfil"})})]},D.id)})})]})})]})]}),b&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-hidden",children:o.jsxs("div",{className:"bg-white w-full max-w-4xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-in fade-in zoom-in duration-200",children:[o.jsxs("div",{className:"bg-slate-900 text-white p-6 shrink-0 flex justify-between items-start",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center text-2xl font-bold border-4 border-slate-800",children:b.name.charAt(0)}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:b.name}),o.jsxs("p",{className:"text-slate-400 flex items-center gap-2",children:[o.jsx(gO,{size:14})," ",b.jobTitle," ",o.jsx("span",{className:"bg-slate-800 px-2 py-0.5 rounded text-xs text-blue-300 border border-slate-700",children:(V=t.find(D=>D.id===b.locationId))==null?void 0:V.name})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[h&&o.jsx("button",{onClick:()=>U(b),className:"text-red-400 hover:text-red-300 p-2 hover:bg-red-900/20 rounded transition",title:"Apagar Funcionrio",children:o.jsx(vi,{size:20})}),o.jsx("button",{onClick:()=>j(null),className:"text-slate-400 hover:text-white p-2","aria-label":"Fechar",children:o.jsx(sn,{size:24})})]})]}),o.jsxs("div",{className:"bg-slate-50 border-b border-gray-200 px-6 flex gap-6 overflow-x-auto shrink-0",children:[o.jsx("button",{onClick:()=>_("summary"),className:`py-4 text-sm font-medium border-b-2 transition ${N==="summary"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Resumo"}),o.jsx("button",{onClick:()=>_("history"),className:`py-4 text-sm font-medium border-b-2 transition ${N==="history"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Histrico Mensal"}),o.jsx("button",{onClick:()=>_("daily"),className:`py-4 text-sm font-medium border-b-2 transition ${N==="daily"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Registo Dirio"}),o.jsx("button",{onClick:()=>_("financial"),className:`py-4 text-sm font-medium border-b-2 transition ${N==="financial"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Financeiro"}),o.jsx("button",{onClick:()=>_("fichas"),className:`py-4 text-sm font-medium border-b-2 transition ${N==="fichas"?"border-emerald-600 text-emerald-600 underline":"border-transparent text-gray-500 hover:text-gray-700"}`,children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(la,{size:16})," Ficha de Entregas"]})}),o.jsx("button",{onClick:()=>_("settings"),className:`py-4 text-sm font-medium border-b-2 transition ${N==="settings"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Configuraes"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-white",children:G()})]})}),E&&A&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Confirmar Apagamento de Funcionrio"}),o.jsxs("p",{className:"text-gray-600 mb-6",children:["Tem a certeza que deseja apagar o funcionrio ",o.jsx("strong",{children:A.name}),"? Esta ao no pode ser desfeita e todos os seus dados relacionados sero removidos."]}),o.jsxs("div",{className:"flex gap-3 justify-end",children:[o.jsx("button",{onClick:()=>{k(!1),I(null)},className:"px-4 py-2 rounded border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium transition",children:"Cancelar"}),o.jsxs("button",{onClick:ce,className:"px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700 font-medium transition flex items-center gap-2",children:[o.jsx(vi,{size:16})," Apagar"]})]})]})})]})},$Z=({userId:e,items:t,inventory:r,onSave:n,onCancel:i})=>{const[l,u]=w.useState({tipo:"ferramentas",entidade_id:e,entidade_tipo:"trabalhador",data:new Date().toISOString().split("T")[0],produto_id:"",produto:"",quantidade:1,unidade:"Unidade",observacoes:""}),[d,h]=w.useState(""),[m,p]=w.useState(!1),g=w.useMemo(()=>d?t.filter(b=>b.name.toLowerCase().includes(d.toLowerCase())).slice(0,5):[],[t,d]),x=b=>{u({...l,produto_id:b.id,produto:b.name,unidade:b.unit||"Unidade"}),h(b.name),p(!1)};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Procurar Produto"}),o.jsxs("div",{className:"relative",children:[o.jsx(xs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),o.jsx("input",{type:"text",value:d,onChange:b=>{h(b.target.value),p(!0)},className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"Ex: Enxada, Bota, Combustvel..."})]}),m&&g.length>0&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-xl shadow-lg z-50",children:g.map(b=>o.jsxs("button",{onClick:()=>x(b),className:"w-full text-left p-3 hover:bg-emerald-50 border-b border-gray-50 last:border-0",children:[o.jsx("div",{className:"font-bold text-gray-800 text-sm",children:b.name}),o.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:b.category})]},b.id))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Quantidade"}),o.jsx("input",{type:"number",step:"0.01",value:l.quantidade,onChange:b=>u({...l,quantidade:parseFloat(b.target.value)}),className:"w-full p-3 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-emerald-500 font-bold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Unidade"}),o.jsx("div",{className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-500 text-sm",children:l.unidade})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Tipo de Ficha"}),o.jsxs("select",{value:l.tipo,onChange:b=>u({...l,tipo:b.target.value}),className:"w-full p-3 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-emerald-500 text-sm",children:[o.jsx("option",{value:"ferramentas",children:"Ferramentas"}),o.jsx("option",{value:"pecas",children:"Peas"}),o.jsx("option",{value:"materiais",children:"Materiais"}),o.jsx("option",{value:"combustivel",children:"Combustvel"}),o.jsx("option",{value:"oleo",children:"leo"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Data"}),o.jsx("input",{type:"date",value:l.data,onChange:b=>u({...l,data:b.target.value}),className:"w-full p-3 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-emerald-500 text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Observaes (Opcional)"}),o.jsx("textarea",{value:l.observacoes,onChange:b=>u({...l,observacoes:b.target.value}),className:"w-full p-3 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-emerald-500 text-sm min-h-[80px]",placeholder:"Notas adicionais..."})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{onClick:i,className:"flex-1 py-3 bg-gray-100 text-gray-600 font-bold rounded-xl hover:bg-gray-200 uppercase text-xs tracking-widest",children:"Cancelar"}),o.jsx("button",{onClick:()=>n(l),disabled:!l.produto_id,className:"flex-[2] py-3 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 disabled:opacity-50 uppercase text-xs tracking-widest shadow-lg shadow-emerald-200",children:"Confirmar Entrega"})]})]})},qZ=()=>{const{locations:e,addLocation:t,removeLocation:r,categories:n,addCategory:i,measureUnits:l,addMeasureUnit:u,itemTypes:d,addItemType:h,paymentMethods:m,addPaymentMethod:p,removePaymentMethod:g,expenseCategories:x,addExpenseCategory:b,removeExpenseCategory:j,companyInfo:N,updateCompanyInfo:_,availableCurrencies:E,defaultCurrency:k,setDefaultCurrency:A,hasPermission:I,addUser:R,resetLocalData:C}=Nr(),[P,Y]=w.useState("organization"),[oe,H]=w.useState(!1),[$,U]=w.useState(null),[ce,G]=w.useState(N),[V,D]=w.useState(""),[K,fe]=w.useState(Ar.BRANCH),[Ne,_e]=w.useState(""),[L,W]=w.useState(""),[ve,be]=w.useState(""),[Te,Ee]=w.useState(Pt.ASSET),[Ce,at]=w.useState(""),[z,pe]=w.useState(""),[ue,re]=w.useState(""),[Je,Re]=w.useState(""),[Ze,Ke]=w.useState(""),[X,Mt]=w.useState(Ae.WORKER),[Fe,Kt]=w.useState(""),Ve=I("MANAGE_SETTINGS"),Cn=we=>{if(we.preventDefault(),V.trim()!==""){const ct=e.find(pa=>pa.type===Ar.CENTRAL),Gt=ct?ct.id:null;t(V,K,Gt),D("")}},Jr=we=>{we.preventDefault(),Ne.trim()!==""&&(i(Ne),_e(""))},tr=we=>{we.preventDefault(),L.trim()!==""&&(u(L),W(""))},pn=we=>{we.preventDefault(),ve.trim()!==""&&(h(ve,Te),be(""))},gn=we=>{we.preventDefault(),Ce.trim()!==""&&(p(Ce),at(""))},en=we=>{we.preventDefault(),z.trim()!==""&&(b(z),pe(""))},Ma=we=>{we.preventDefault(),_(ce)},Tn=async we=>{if(we.preventDefault(),!ue||!Je||!Ze){U({type:"info",message:"Por favor preencha todos os campos obrigatrios."});return}if(Ze.length<8){U({type:"info",message:"A senha deve ter no mnimo 8 caracteres"});return}try{await R({name:ue,email:Je,password:Ze,role:X,locationId:Fe||void 0}),U({type:"success",message:"Usurio criado com sucesso!"}),setTimeout(()=>U(null),3e3),H(!1),re(""),Re(""),Ke(""),Mt(Ae.WORKER),Kt("")}catch(ct){U({type:"error",message:`Erro ao criar utilizador: ${ct instanceof Error?ct.message:String(ct)}`})}},ha=()=>{if(!Ve||!window.confirm("Isto ir apagar TODOS os dados locais. Continuar?"))return;if(window.prompt("Digite RESET para confirmar:")==="RESET")try{U({type:"success",message:"Dados locais reiniciados."}),setTimeout(()=>U(null),3e3)}catch(ct){U({type:"error",message:`Erro ao reiniciar dados locais: ${ct instanceof Error?ct.message:String(ct)}`})}else U({type:"info",message:"Confirmao cancelada."})},ma=({id:we,label:ct,icon:Gt})=>o.jsxs("button",{onClick:()=>Y(we),className:`flex items-center gap-2 px-4 py-3 font-medium transition-all rounded-lg ${P===we?"bg-emerald-600 text-white shadow-md":"text-gray-600 hover:bg-gray-100"}`,children:[Gt,o.jsx("span",{className:"hidden sm:inline",children:ct})]}),Ya=()=>oe&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 max-h-96 overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(su,{className:"text-emerald-600",size:24}),"Novo Usurio"]}),o.jsx("button",{"aria-label":"Fechar modal",title:"Fechar",onClick:()=>H(!1),className:"text-gray-500 hover:text-gray-700 transition",children:o.jsx(sn,{size:24})})]}),o.jsxs("form",{onSubmit:Tn,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"userFullName",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nome Completo *"}),o.jsx("input",{id:"userFullName",type:"text",value:ue,onChange:we=>re(we.target.value),className:"w-full border border-gray-300 p-2.5 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-emerald-500 transition",placeholder:"Joo Silva",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"userEmail",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email *"}),o.jsx("input",{id:"userEmail",type:"email",value:Je,onChange:we=>Re(we.target.value),className:"w-full border border-gray-300 p-2.5 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-emerald-500 transition",placeholder:"joao@example.com",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"userPassword",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Senha (min. 8 caracteres) *"}),o.jsx("input",{id:"userPassword",type:"password",value:Ze,onChange:we=>Ke(we.target.value),className:"w-full border border-gray-300 p-2.5 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-emerald-500 transition",placeholder:"",minLength:8,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"userRole",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Funo *"}),o.jsxs("select",{id:"userRole",value:X,onChange:we=>Mt(we.target.value),className:"w-full border border-gray-300 p-2.5 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-emerald-500 transition",children:[o.jsx("option",{value:Ae.WORKER,children:"Trabalhador (Campo)"}),o.jsx("option",{value:Ae.MANAGER,children:"Gerente (Filial)"}),o.jsx("option",{value:Ae.GENERAL_MANAGER,children:"Diretor Geral"}),o.jsx("option",{value:Ae.ADMIN,children:"Administrador"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"userLocation",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Localizao"}),o.jsxs("select",{id:"userLocation",value:Fe,onChange:we=>Kt(we.target.value),className:"w-full border border-gray-300 p-2.5 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-emerald-500 transition",children:[o.jsx("option",{value:"",children:"Nenhuma"}),e.map(we=>o.jsx("option",{value:we.id,children:we.name},we.id))]})]}),o.jsxs("div",{className:"pt-4 flex gap-3",children:[o.jsx("button",{type:"button",onClick:()=>H(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 py-2.5 px-4 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-medium transition shadow-sm",children:"Criar Usurio"})]})]})]})}),fr=({icon:we,title:ct,description:Gt,children:pa,className:ga=""})=>o.jsxs("div",{className:`bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition ${ga}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"p-2.5 bg-gray-100 rounded-lg",children:o.jsx(we,{size:20,className:"text-gray-700"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-800",children:ct}),Gt&&o.jsx("p",{className:"text-xs text-gray-500",children:Gt})]})]}),o.jsx("div",{className:"border-t border-gray-100 pt-4",children:pa})]});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Definies"}),o.jsx("p",{className:"text-gray-500 mt-1",children:"Configure o sistema para sua operao"})]}),!Ve&&o.jsxs("div",{className:"bg-yellow-50 text-yellow-700 px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 border border-yellow-200",children:[o.jsx(fo,{size:16})," Modo Visualizao"]})]}),$&&o.jsx("div",{className:`p-3 rounded text-sm ${$.type==="success"?"bg-green-100 border border-green-300 text-green-800":$.type==="error"?"bg-red-100 border border-red-300 text-red-800":"bg-blue-50 border border-blue-100 text-blue-800"}`,children:$.message}),o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-2 flex flex-wrap gap-1 md:gap-2",children:[o.jsx(ma,{id:"organization",label:"Organizao",icon:o.jsx(js,{size:18})}),o.jsx(ma,{id:"catalog",label:"Catlogo",icon:o.jsx(iv,{size:18})}),o.jsx(ma,{id:"finance",label:"Financeiro",icon:o.jsx(Gn,{size:18})}),I("MANAGE_USERS")&&o.jsx(ma,{id:"admin",label:"Administrao",icon:o.jsx(Yh,{size:18})})]}),P==="organization"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx(fr,{icon:yO,title:"Informaes da Empresa",description:"Dados exibidos em faturas e documentos",children:Ve?o.jsxs("form",{onSubmit:Ma,className:"space-y-4",children:[o.jsx("input",{type:"text",placeholder:"Nome da Empresa",value:ce.nome,onChange:we=>G({...ce,nome:we.target.value}),className:"w-full border border-gray-300 p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",required:!0}),o.jsx("input",{type:"text",placeholder:"NUIT",value:ce.nuit,onChange:we=>G({...ce,nuit:we.target.value}),className:"w-full border border-gray-300 p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",required:!0}),o.jsx("input",{type:"text",placeholder:"Endereo",value:ce.endereco,onChange:we=>G({...ce,endereco:we.target.value}),className:"w-full border border-gray-300 p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",required:!0}),o.jsx("input",{type:"text",placeholder:"Contacto (Opcional)",value:ce.contacto||"",onChange:we=>G({...ce,contacto:we.target.value}),className:"w-full border border-gray-300 p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500"}),o.jsx("button",{type:"submit",className:"w-full bg-emerald-600 text-white py-2.5 rounded-lg hover:bg-emerald-700 font-medium transition",children:"Guardar Informaes"})]}):o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold text-gray-700",children:"Nome:"}),o.jsx("p",{className:"text-gray-600",children:N.nome})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold text-gray-700",children:"NUIT:"}),o.jsx("p",{className:"text-gray-600",children:N.nuit})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold text-gray-700",children:"Endereo:"}),o.jsx("p",{className:"text-gray-600",children:N.endereco})]}),N.contacto&&o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold text-gray-700",children:"Contacto:"}),o.jsx("p",{className:"text-gray-600",children:N.contacto})]})]})}),o.jsxs(fr,{icon:js,title:"Localizaes",description:"Filiais, sucursais e equipes de campo",children:[Ve&&o.jsxs("form",{onSubmit:Cn,className:"mb-4 space-y-3",children:[o.jsx("input",{type:"text",placeholder:"Nome da Filial/Local",value:V,onChange:we=>D(we.target.value),className:"w-full border border-gray-300 p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500"}),o.jsxs("select",{title:"Tipo de localizao","aria-label":"Tipo de localizao",value:K,onChange:we=>fe(we.target.value),className:"w-full border border-gray-300 p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[o.jsx("option",{value:Ar.BRANCH,children:"Filial (Branch)"}),o.jsx("option",{value:Ar.FIELD,children:"Equipe de Campo (Field)"})]}),o.jsxs("button",{type:"submit",className:"w-full bg-emerald-600 text-white py-2.5 rounded-lg hover:bg-emerald-700 font-medium transition flex items-center justify-center gap-2",children:[o.jsx(Zr,{size:18})," Adicionar Local"]})]}),o.jsx("div",{className:"space-y-2",children:e.filter(we=>we.type!=="CENTRAL").map(we=>o.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-lg border border-gray-200",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-800",children:we.name}),o.jsx("p",{className:"text-xs text-gray-500",children:we.type})]}),Ve&&o.jsx("button",{onClick:()=>{window.confirm(`Remover "${we.name}"?`)&&r(we.id)},className:"text-red-500 hover:text-red-700 p-1.5 hover:bg-red-50 rounded transition",title:"Remover",children:o.jsx(vi,{size:18})})]},we.id))})]})]}),P==="catalog"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(fr,{icon:io,title:"Tipos de Item",description:"Ativo (durvel) ou Consumvel",children:[Ve&&o.jsxs("form",{onSubmit:pn,className:"mb-4 space-y-3",children:[o.jsx("input",{type:"text",placeholder:"Ex: Ferramenta Eltrica",value:ve,onChange:we=>be(we.target.value),className:"w-full border border-gray-300 p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500"}),o.jsxs("select",{title:"Comportamento do item","aria-label":"Comportamento do item",value:Te,onChange:we=>Ee(we.target.value),className:"w-full border border-gray-300 p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[o.jsx("option",{value:Pt.ASSET,children:"Ativo (Durvel)"}),o.jsx("option",{value:Pt.CONSUMABLE,children:"Consumvel"})]}),o.jsxs("button",{type:"submit",className:"w-full bg-emerald-600 text-white py-2.5 rounded-lg hover:bg-emerald-700 font-medium transition flex items-center justify-center gap-2",children:[o.jsx(Zr,{size:18})," Adicionar Tipo"]})]}),o.jsx("div",{className:"space-y-2",children:d.map(we=>o.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-lg",children:[o.jsx("p",{className:"font-medium text-gray-800",children:we.name}),o.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full font-semibold ${we.behavior===Pt.ASSET?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:we.behavior===Pt.ASSET?"Ativo":"Consumvel"})]},we.id))})]}),o.jsxs(fr,{icon:U5,title:"Unidades de Medida",description:"Ex: Kg, Litros, Unidade",children:[Ve&&o.jsxs("form",{onSubmit:tr,className:"mb-4 flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"Ex: Kg, Litros",value:L,onChange:we=>W(we.target.value),className:"flex-1 border border-gray-300 p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500"}),o.jsx("button",{type:"submit",className:"bg-emerald-600 text-white p-2.5 rounded-lg hover:bg-emerald-700 transition",title:"Adicionar",children:o.jsx(Zr,{size:18})})]}),o.jsx("div",{className:"space-y-2",children:l.map((we,ct)=>o.jsx("div",{className:"bg-gray-50 p-3 rounded-lg font-medium text-gray-800 border border-gray-200",children:we},ct))})]}),o.jsxs(fr,{icon:NO,title:"Categorias de Itens",description:"Classificao de produtos",children:[Ve&&o.jsxs("form",{onSubmit:Jr,className:"mb-4 flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"Ex: EPI, Ferramentas",value:Ne,onChange:we=>_e(we.target.value),className:"flex-1 border border-gray-300 p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500"}),o.jsx("button",{type:"submit",className:"bg-emerald-600 text-white p-2.5 rounded-lg hover:bg-emerald-700 transition",title:"Adicionar",children:o.jsx(Zr,{size:18})})]}),o.jsx("div",{className:"space-y-2",children:n.map((we,ct)=>o.jsx("div",{className:"bg-gray-50 p-3 rounded-lg font-medium text-gray-800 border border-gray-200",children:we},ct))})]})]}),P==="finance"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(fr,{icon:xO,title:"Mtodos de Pagamento",description:"Cash, Carto, Mobile Money, etc",children:[Ve&&o.jsxs("form",{onSubmit:gn,className:"mb-4 flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"Ex: PayPal, Crypto",value:Ce,onChange:we=>at(we.target.value),className:"flex-1 border border-gray-300 p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500"}),o.jsx("button",{type:"submit",className:"bg-emerald-600 text-white p-2.5 rounded-lg hover:bg-emerald-700 transition",title:"Adicionar mtodo de pagamento","aria-label":"Adicionar mtodo de pagamento",children:o.jsx(Zr,{size:18})})]}),o.jsx("div",{className:"space-y-2",children:m.map((we,ct)=>o.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-lg border border-gray-200",children:[o.jsx("p",{className:"font-medium text-gray-800",children:we}),Ve&&o.jsx("button",{onClick:()=>g(we),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-50 rounded transition",children:o.jsx(vi,{size:16})})]},ct))})]}),o.jsxs(fr,{icon:Gn,title:"Categorias de Despesas",description:"Classificao de gastos",children:[Ve&&o.jsxs("form",{onSubmit:en,className:"mb-4 flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"Ex: Marketing, Transporte",value:z,onChange:we=>pe(we.target.value),className:"flex-1 border border-gray-300 p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500"}),o.jsx("button",{type:"submit",className:"bg-emerald-600 text-white p-2.5 rounded-lg hover:bg-emerald-700 transition",title:"Adicionar categoria de despesa","aria-label":"Adicionar categoria de despesa",children:o.jsx(Zr,{size:18})})]}),o.jsx("div",{className:"space-y-2",children:x.map((we,ct)=>o.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-lg border border-gray-200",children:[o.jsx("p",{className:"font-medium text-gray-800",children:we}),Ve&&o.jsx("button",{onClick:()=>j(we),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-50 rounded transition",children:o.jsx(vi,{size:16})})]},ct))})]}),o.jsxs(fr,{icon:e5,title:"Moeda Padro",description:"Moeda para novos documentos",className:"md:col-span-2",children:['title="Moeda padro do sistema" aria-label="Moeda padro do sistema"',Ve?o.jsxs("div",{className:"space-y-4",children:[o.jsx("select",{value:k,onChange:we=>A(we.target.value),className:"w-full border border-gray-300 p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500",children:E.map(we=>o.jsx("option",{value:we,children:we},we))}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Moedas Disponveis:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:E.map(we=>o.jsx("span",{className:"px-3 py-1.5 bg-emerald-100 text-emerald-700 rounded-full text-sm font-semibold border border-emerald-200",children:we},we))})]})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx("p",{className:"text-3xl font-bold text-emerald-600 mb-2",children:k}),o.jsx("p",{className:"text-sm text-gray-500",children:"Moeda padro do sistema"})]})]})]}),P==="admin"&&I("MANAGE_USERS")&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:"Gesto de Usurios"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Criar novos usurios no sistema"})]}),o.jsxs("button",{onClick:()=>H(!0),className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-3 rounded-lg hover:bg-emerald-700 font-medium transition shadow-sm",children:[o.jsx(su,{size:18}),"Novo Usurio"]})]})}),o.jsxs("div",{className:"bg-red-50 rounded-xl border border-red-200 p-6 shadow-sm",children:[o.jsxs("h3",{className:"font-bold text-red-700 text-lg mb-2 flex items-center gap-2",children:[o.jsx(yx,{size:20})," Danger Zone"]}),o.jsx("p",{className:"text-sm text-red-600 mb-4",children:"Aes nesta seco so irreversveis. Apagam dados locais do navegador."}),o.jsx("button",{onClick:ha,className:"bg-red-600 text-white px-4 py-2.5 rounded-lg hover:bg-red-700 font-medium transition",children:"Resetar Dados Locais"})]}),o.jsx(Ya,{})]}),P==="admin"&&!I("MANAGE_USERS")&&o.jsxs("div",{className:"bg-yellow-50 rounded-xl border border-yellow-200 p-8 text-center",children:[o.jsx(fo,{size:32,className:"mx-auto text-yellow-600 mb-2"}),o.jsx("p",{className:"text-gray-600 font-medium",children:"Acesso Restrito"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Voc no tem permisso para acessar esta seco."})]})]})},BZ=()=>{const{inventory:e,items:t,locations:r,accountingEntries:n}=Nr();let i=0,l=0;e.forEach(g=>{const x=t.find(b=>b.id===g.itemId);if(x){const b=g.quantity*x.price;x.type===Pt.ASSET?i+=b:l+=b}});const u=i+l,h=r.filter(g=>g.type===Ar.BRANCH).map(g=>{const x=r.filter(N=>N.parentId===g.id).map(N=>N.id),b=[g.id,...x];let j=0;return e.filter(N=>b.includes(N.locationId)).forEach(N=>{const _=t.find(E=>E.id===N.itemId);_&&(j+=N.quantity*_.price)}),{name:g.name.replace("Filial ",""),value:j}}),m=[{name:"Ativos (Bens Durveis)",value:i,color:"#3b82f6"},{name:"Consumveis (Em Estoque)",value:l,color:"#a855f7"}],p=g=>new Intl.NumberFormat("pt-MZ",{style:"currency",currency:"MZN"}).format(g);return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(wO,{className:"text-blue-600"}),"Patrimnio & Contabilidade"]}),o.jsx("p",{className:"text-sm text-gray-500",children:"Gesto financeira de ativos e estoque."})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 relative overflow-hidden",children:[o.jsxs("div",{className:"relative z-10",children:[o.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Valor Total do Patrimnio"}),o.jsx("h3",{className:"text-3xl font-bold text-gray-900 mt-2",children:p(u)}),o.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1 mt-1",children:[o.jsx(Eu,{size:12})," Posio Atual"]})]}),o.jsx(Gn,{className:"absolute right-4 top-4 text-gray-100",size:80})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 relative overflow-hidden",children:[o.jsxs("div",{className:"relative z-10",children:[o.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Ativos Fixos (Mquinas/Equip.)"}),o.jsx("h3",{className:"text-3xl font-bold text-blue-600 mt-2",children:p(i)}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Bens durveis da empresa"})]}),o.jsx(vO,{className:"absolute right-4 top-4 text-blue-50",size:80})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 relative overflow-hidden",children:[o.jsxs("div",{className:"relative z-10",children:[o.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Passivo Circulante (Consumveis)"}),o.jsx("h3",{className:"text-3xl font-bold text-purple-600 mt-2",children:p(l)}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Estoque rotativo (EPIs, Insumos)"})]}),o.jsx(la,{className:"absolute right-4 top-4 text-purple-50",size:80})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"Valor de Estoque por Filial"}),o.jsx("div",{className:"h-64",children:o.jsx(fu,{width:"100%",height:"100%",children:o.jsxs(vw,{data:h,children:[o.jsx(qm,{strokeDasharray:"3 3",vertical:!1}),o.jsx(Bm,{dataKey:"name",axisLine:!1,tickLine:!1,fontSize:12}),o.jsx(Gm,{axisLine:!1,tickLine:!1,fontSize:12,tickFormatter:g=>`MZN ${g/1e3}k`}),o.jsx(Nu,{formatter:g=>p(g)}),o.jsx($m,{dataKey:"value",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex flex-col items-center justify-center",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-4 w-full text-left",children:"Composio do Patrimnio"}),o.jsx("div",{className:"h-64 w-full",children:o.jsx(fu,{width:"100%",height:"100%",children:o.jsxs(gR,{children:[o.jsx(uw,{data:m,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:m.map((g,x)=>o.jsx(_s,{fill:g.color},`cell-${x}`))}),o.jsx(Nu,{formatter:g=>p(g)})]})})}),o.jsxs("div",{className:"flex gap-4 text-xs mt-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),o.jsx("span",{children:"Ativos"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),o.jsx("span",{children:"Consumveis"})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[o.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[o.jsx("h3",{className:"font-bold text-gray-800",children:"Histrico de Lanamentos Contbeis (Entradas)"}),o.jsx("button",{className:"text-blue-600 text-sm hover:underline",children:"Exportar Relatrio"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{className:"bg-gray-50 text-xs text-gray-500 uppercase font-semibold",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4",children:"Data"}),o.jsx("th",{className:"px-6 py-4",children:"Item"}),o.jsx("th",{className:"px-6 py-4",children:"Tipo"}),o.jsx("th",{className:"px-6 py-4",children:"Local"}),o.jsx("th",{className:"px-6 py-4 text-right",children:"Qtd"}),o.jsx("th",{className:"px-6 py-4 text-right",children:"Preo Un."}),o.jsx("th",{className:"px-6 py-4 text-right",children:"Total"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100 text-sm",children:n.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-400",children:"Nenhum lanamento registrado recentemente."})}):n.map(g=>{var x;return o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsx("td",{className:"px-6 py-4 text-gray-600",children:ur(g.date,{dateOnly:!0})}),o.jsx("td",{className:"px-6 py-4 font-medium text-gray-800",children:g.itemName}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold border ${g.type==="ATIVO"?"bg-blue-50 text-blue-600 border-blue-200":"bg-purple-50 text-purple-600 border-purple-200"}`,children:g.type})}),o.jsx("td",{className:"px-6 py-4 text-gray-600",children:(x=r.find(b=>b.id===g.locationId))==null?void 0:x.name}),o.jsx("td",{className:"px-6 py-4 text-right font-medium",children:g.quantity}),o.jsx("td",{className:"px-6 py-4 text-right text-gray-600",children:p(g.unitPrice)}),o.jsx("td",{className:"px-6 py-4 text-right font-bold text-gray-900",children:p(g.totalValue)})]},g.id)})})]})})]})]})},$h=e=>{const t=e.reduce((i,l)=>i+l.quantidade*l.precoUnitario,0),r=e.reduce((i,l)=>{const u=(l.impostoPercent??16)/100;return i+l.quantidade*l.precoUnitario*u},0),n=t+r;return{subtotal:t,impostos:r,total:n}},qh=e=>e.reduce((t,r)=>t+r.valor,0),GZ=e=>{const{total:t}=$h(e.itens),r=qh(e.pagamentos);return r>=t-.1?{saldo:0,situacao:"Pago"}:r<=0?{saldo:t,situacao:"Por pagar"}:{saldo:t-r,situacao:"Pagamento parcial"}};function HZ({invoice:e,onClose:t,onConfirm:r}){const[n,i]=w.useState(0),[l,u]=w.useState(_n.CASH),[d,h]=w.useState("");if(!e)return null;const{total:m}=$h(e.itens),p=qh(e.pagamentos),g=Math.max(0,m-p),x=()=>{if(n<=0){alert("Insira um valor vlido.");return}if(n>g+.1&&!confirm("O valor excede o saldo restante. Deseja continuar e registrar como troco/crdito?"))return;const b={data:new Date().toISOString(),valor:n,modalidade:l,referencia:d};r(b),t()};return o.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60] backdrop-blur-sm",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[o.jsxs("div",{className:"bg-blue-600 p-4 flex justify-between items-center text-white",children:[o.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[o.jsx(Gn,{size:20})," Receber Pagamento"]}),o.jsx("button",{onClick:t,className:"hover:bg-blue-700 p-1 rounded",title:"Fechar",children:o.jsx(sn,{size:20})})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"mb-6 bg-gray-50 p-4 rounded-lg border border-gray-100 text-center",children:[o.jsxs("p",{className:"text-gray-500 text-sm",children:["Fatura N ",e.numero]}),o.jsxs("div",{className:"flex justify-between items-end mt-2",children:[o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"text-xs text-gray-400",children:"Total Fatura"}),o.jsxs("p",{className:"font-bold text-gray-800",children:[m.toFixed(2)," ",e.moeda]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-xs text-gray-400",children:"Saldo Devedor"}),o.jsxs("p",{className:"font-bold text-2xl text-red-600",children:[g.toFixed(2)," ",e.moeda]})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"payment-amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor a Pagar"}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-3 top-2.5 text-gray-400 font-bold text-sm",children:e.moeda}),o.jsx("input",{id:"payment-amount","aria-label":"Valor a pagar",title:"Valor a pagar",type:"number",step:"0.01",className:"w-full pl-12 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-lg font-bold text-gray-900 bg-white",value:n===0?"":n,onChange:b=>{const j=b.target.value;i(j===""?0:parseFloat(j))},placeholder:g.toFixed(2)})]}),o.jsx("div",{className:"flex justify-end gap-2 mt-2",children:o.jsx("button",{title:"Pagar o valor total",onClick:()=>i(g),className:"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded border border-blue-100 font-medium hover:bg-blue-100",children:"Pagar Total"})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"payment-method",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mtodo"}),o.jsxs("select",{id:"payment-method",title:"Mtodo de pagamento","aria-label":"Mtodo de pagamento",className:"w-full border rounded-lg p-2 bg-white text-gray-900",value:l,onChange:b=>u(b.target.value),children:[o.jsx("option",{value:"CASH",children:"Dinheiro"}),o.jsx("option",{value:"CARD",children:"POS / Carto"}),o.jsx("option",{value:"MOBILE_MONEY",children:"M-Pesa / E-Mola"}),o.jsx("option",{value:"BANK_TRANSFER",children:"Transferncia"}),o.jsx("option",{value:"CHEQUE",children:"Cheque"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"payment-ref",className:"block text-sm font-medium text-gray-700 mb-1",children:"Referncia"}),o.jsx("input",{id:"payment-ref",title:"Referncia do pagamento","aria-label":"Referncia do pagamento",type:"text",className:"w-full border rounded-lg p-2 bg-white text-gray-900",placeholder:"Ex: Talo 123",value:d,onChange:b=>h(b.target.value)})]})]}),o.jsxs("button",{title:"Confirmar recebimento",onClick:x,className:"w-full bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700 shadow-md flex items-center justify-center gap-2 mt-4",children:[o.jsx(sa,{size:18})," Confirmar Recebimento"]})]})]})]})})}function FZ({open:e,onClose:t,initial:r,onSave:n,companyDefaults:i}){const{clients:l,registerPayment:u}=Nr(),[d,h]=w.useState(()=>{var U,ce,G,V,D;return{id:(r==null?void 0:r.id)||`doc-${Date.now()}`,numero:(r==null?void 0:r.numero)||i.gerarNumero(),tipo:(r==null?void 0:r.tipo)??"FATURA",status:(r==null?void 0:r.status)??"RASCUNHO",locationId:(r==null?void 0:r.locationId)||i.locationId,empresa:i.empresa,cliente:{nome:((U=r==null?void 0:r.cliente)==null?void 0:U.nome)??"",nuit:((ce=r==null?void 0:r.cliente)==null?void 0:ce.nuit)??"",endereco:((G=r==null?void 0:r.cliente)==null?void 0:G.endereco)??"",contacto:((V=r==null?void 0:r.cliente)==null?void 0:V.contacto)??"",id:(D=r==null?void 0:r.cliente)==null?void 0:D.id},itens:(r==null?void 0:r.itens)??[],pagamentos:(r==null?void 0:r.pagamentos)??[],moeda:i.moeda,dataEmissao:(r==null?void 0:r.dataEmissao)||new Date().toISOString().slice(0,10),vencimento:r==null?void 0:r.vencimento,observacoes:(r==null?void 0:r.observacoes)??"",createdBy:(r==null?void 0:r.createdBy)||i.userId}}),[m,p]=w.useState({descricao:"",quantidade:1,precoUnitario:0,impostoPercent:16}),[g,x]=w.useState(!1),[b,j]=w.useState(""),[N,_]=w.useState(!1),E=w.useMemo(()=>$h(d.itens),[d.itens]),k=w.useMemo(()=>GZ(d),[d]),A=w.useRef(null);if(w.useEffect(()=>{e&&!r?h({id:`doc-${Date.now()}`,numero:i.gerarNumero(),tipo:"FATURA",status:"RASCUNHO",locationId:i.locationId,empresa:i.empresa,cliente:{nome:"",nuit:"",endereco:"",contacto:""},itens:[],pagamentos:[],moeda:i.moeda,dataEmissao:new Date().toISOString().slice(0,10),observacoes:"",createdBy:i.userId}):e&&r&&h(U=>({...U,...r}))},[e,r]),!e)return null;const I=()=>{if(!m.descricao||m.quantidade<=0)return;const U=m.impostoPercent??16;if(U<0){alert("IVA no pode ser negativo");return}if(d.status!=="RASCUNHO"){alert("No  possvel adicionar itens aps emisso da fatura");return}const ce={...m,impostoPercent:U};h(G=>({...G,itens:[...G.itens,ce]})),p({descricao:"",quantidade:1,precoUnitario:0,impostoPercent:16})},R=U=>{h(ce=>({...ce,itens:ce.itens.filter((G,V)=>V!==U)}))},C=async()=>{try{const U=d.status==="RASCUNHO"?"EMITIDA":d.status,ce={...d,status:U};await n(ce),t()}catch(U){console.error("Erro ao emitir fatura:",U),alert("Erro ao guardar fatura. Por favor tente novamente.")}},P=U=>{h(ce=>({...ce,cliente:{id:U.id,nome:U.name||U.nome||"",nuit:U.nuit||"",endereco:U.address||U.endereco||"",contacto:U.contact||U.contacto||""}})),_(!1)},Y=U=>{h(ce=>{const G=[...ce.pagamentos,U],V=G.reduce((fe,Ne)=>fe+Ne.valor,0),{total:D}=$h(ce.itens);let K=ce.status;return V>=D-.1?K="PAGA":V>0&&(K="PAGA_PARCIAL"),{...ce,pagamentos:G,status:K}}),u(d.id,U)},oe=()=>{const U=A.current;if(!U)return;U.style.display="block";const ce={margin:10,filename:`Fatura_${d.numero.replace("/","-")}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};html2pdf().set(ce).from(U).save().then(()=>{U.style.display="none"})},H=()=>{var G;const U=((G=A.current)==null?void 0:G.innerHTML)??"",ce=window.open("","_blank","width=800,height=900");ce&&(ce.document.write(`
      <html>
        <head>
          <title>${d.tipo} ${d.numero}</title>
          <style>
            body { font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; color: #333; }
            .sheet { width: 100%; max-width: 800px; margin: 0 auto; padding: 40px; }
            .header { display:flex; justify-content:space-between; margin-bottom: 30px; border-bottom: 2px solid #eee; padding-bottom: 20px; }
            .title { font-size: 24px; font-weight: bold; color: #111; text-transform: uppercase; }
            .meta { font-size: 14px; color: #666; margin-top: 5px; }
            .section-title { font-size: 12px; font-weight: bold; text-transform: uppercase; color: #888; margin-bottom: 8px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th { text-align: left; background: #f9f9f9; padding: 10px; font-size: 12px; text-transform: uppercase; border-bottom: 1px solid #ddd; }
            td { padding: 10px; font-size: 13px; border-bottom: 1px solid #eee; }
            .right { text-align: right; }
            .totals { margin-top: 30px; display: flex; justify-content: flex-end; }
            .totals-box { width: 250px; }
            .total-row { display: flex; justify-content: space-between; padding: 5px 0; }
            .grand-total { font-weight: bold; font-size: 16px; border-top: 2px solid #333; margin-top: 10px; padding-top: 10px; }
          </style>
        </head>
        <body onload="window.print(); setTimeout(()=>window.close(), 300);">
          <div class="sheet">${U}</div>
        </body>
      </html>
    `),ce.document.close())},$=l.filter(U=>(U.name||U.nome||"").toLowerCase().includes(b.toLowerCase()));return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-white w-[1000px] max-h-[90vh] overflow-y-auto rounded-xl shadow-2xl flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100 bg-gray-50",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:o.jsxs("select",{"aria-label":"Tipo de documento",value:d.tipo,onChange:U=>h({...d,tipo:U.target.value}),className:"bg-transparent border-none font-bold text-xl focus:ring-0 cursor-pointer",children:[o.jsx("option",{value:"FATURA",children:"FATURA"}),o.jsx("option",{value:"COTACAO",children:"COTAO"}),o.jsx("option",{value:"PRO_FORMA",children:"PRO FORMA"}),o.jsx("option",{value:"FATURA_RECIBO",children:"FATURA RECIBO"})]})}),o.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["N ",d.numero,"  Status: ",o.jsx("span",{className:"font-bold text-blue-600",children:d.status})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{"aria-label":"Fechar modal",title:"Fechar",className:"px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-lg flex items-center gap-2",onClick:t,children:o.jsx(sn,{size:18})}),o.jsxs("button",{"aria-label":"Descarregar PDF",title:"Descarregar PDF",className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg flex items-center gap-2 hover:bg-gray-200",onClick:oe,children:[o.jsx(hx,{size:18})," PDF"]}),o.jsxs("button",{"aria-label":"Imprimir",title:"Imprimir",className:"px-3 py-2 bg-gray-800 text-white rounded-lg flex items-center gap-2 hover:bg-gray-900",onClick:H,children:[o.jsx(gx,{size:18})," Print"]}),o.jsxs("button",{"aria-label":"Salvar fatura",title:"Salvar e emitir",className:"px-3 py-2 bg-blue-600 text-white rounded-lg flex items-center gap-2 hover:bg-blue-700 shadow-sm",onClick:C,children:[o.jsx(Kh,{size:18})," Salvar"]})]})]}),o.jsxs("div",{className:"p-8 grid grid-cols-2 gap-8",children:[o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:[o.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase mb-2",children:"Emissor (Sua Empresa)"}),o.jsxs("div",{className:"text-sm text-gray-800 space-y-1",children:[o.jsx("div",{className:"font-bold text-lg",children:d.empresa.nome}),o.jsxs("div",{children:["NUIT: ",d.empresa.nuit]}),o.jsx("div",{children:d.empresa.endereco}),d.empresa.contacto&&o.jsxs("div",{children:["Tel: ",d.empresa.contacto]})]})]}),o.jsxs("div",{className:"border border-gray-200 p-4 rounded-lg relative",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:"Cliente / Destinatrio"}),d.status==="RASCUNHO"&&o.jsxs("button",{onClick:()=>_(!N),className:"text-xs text-blue-600 font-medium flex items-center gap-1",children:[o.jsx(xs,{size:12})," Buscar Registrado"]})]}),N&&o.jsxs("div",{className:"absolute top-10 right-0 left-0 bg-white shadow-xl border border-gray-200 rounded-lg z-10 max-h-40 overflow-y-auto",children:[o.jsx("input",{className:"w-full p-2 text-sm border-b",placeholder:"Filtrar clientes...",autoFocus:!0,value:b,onChange:U=>j(U.target.value)}),$.map(U=>o.jsxs("div",{onClick:()=>P(U),className:"p-2 hover:bg-gray-50 cursor-pointer text-sm border-b border-gray-50",children:[o.jsx("span",{className:"font-bold",children:U.name}),o.jsx("span",{className:"text-gray-400 text-xs ml-2",children:U.nuit})]},U.id))]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Lf,{size:16,className:"absolute top-2.5 left-2.5 text-gray-400"}),o.jsx("input",{disabled:d.status!=="RASCUNHO",className:`border border-gray-300 p-2 pl-8 rounded text-sm w-full font-bold focus:outline-blue-500 bg-white text-gray-900 ${d.status!=="RASCUNHO"?"bg-gray-100 cursor-not-allowed opacity-60":""}`,placeholder:"Nome do cliente",value:d.cliente.nome,onChange:U=>h({...d,cliente:{...d.cliente,nome:U.target.value}})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("input",{disabled:d.status!=="RASCUNHO",className:`border border-gray-300 p-2 rounded text-sm bg-white text-gray-900 ${d.status!=="RASCUNHO"?"bg-gray-100 cursor-not-allowed opacity-60":""}`,placeholder:"NUIT",value:d.cliente.nuit??"",onChange:U=>h({...d,cliente:{...d.cliente,nuit:U.target.value}})}),o.jsx("input",{disabled:d.status!=="RASCUNHO",className:`border border-gray-300 p-2 rounded text-sm bg-white text-gray-900 ${d.status!=="RASCUNHO"?"bg-gray-100 cursor-not-allowed opacity-60":""}`,placeholder:"Contacto",value:d.cliente.contacto??"",onChange:U=>h({...d,cliente:{...d.cliente,contacto:U.target.value}})})]}),o.jsx("input",{disabled:d.status!=="RASCUNHO",className:`border border-gray-300 p-2 rounded text-sm bg-white text-gray-900 ${d.status!=="RASCUNHO"?"bg-gray-100 cursor-not-allowed opacity-60":""}`,placeholder:"Endereo",value:d.cliente.endereco??"",onChange:U=>h({...d,cliente:{...d.cliente,endereco:U.target.value}})})]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-sm font-bold text-gray-800 mb-2 flex items-center gap-2",children:"Itens do Documento"}),d.status==="RASCUNHO"&&o.jsxs("div",{className:"grid grid-cols-12 gap-2 mb-4 bg-gray-50 p-2 rounded border border-gray-200 items-end",children:[o.jsxs("div",{className:"col-span-5",children:[o.jsx("label",{className:"text-[10px] text-gray-500",children:"Descrio"}),o.jsx("input",{className:"w-full border p-2 rounded text-sm bg-white text-gray-900",placeholder:"Descrio do item",value:m.descricao,onChange:U=>p({...m,descricao:U.target.value})})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"text-[10px] text-gray-500",children:"Qtd"}),o.jsx("input",{"aria-label":"Quantidade de item",className:"w-full border p-2 rounded text-sm bg-white text-gray-900",type:"number",min:1,value:m.quantidade,onChange:U=>p({...m,quantidade:+U.target.value})})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"text-[10px] text-gray-500",children:"Preo"}),o.jsx("input",{"aria-label":"Preo unitrio",className:"w-full border p-2 rounded text-sm bg-white text-gray-900",type:"number",step:"0.01",value:m.precoUnitario,onChange:U=>p({...m,precoUnitario:+U.target.value})})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsxs("label",{className:"text-[10px] text-gray-500",children:["IVA% ",o.jsx("span",{className:"text-red-500",title:"Obrigatrio 16% (MZN)",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{"aria-label":"Percentagem de imposto IVA - Obrigatrio 16% para Moambique",className:"w-full border p-2 rounded text-sm bg-white text-gray-900",type:"number",step:"0.01",value:m.impostoPercent??16,onChange:U=>p({...m,impostoPercent:+U.target.value||16})}),(m.impostoPercent??16)!==16&&o.jsx("span",{className:"text-[9px] text-orange-500 absolute -bottom-4 left-0",children:" 16%  padro em MZN"})]})]}),o.jsx("div",{className:"col-span-1",children:o.jsx("button",{"aria-label":"Adicionar item  fatura",title:"Adicionar item",className:"w-full bg-gray-800 text-white rounded p-2 flex justify-center",onClick:I,children:o.jsx(Zr,{size:18})})})]}),o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-100 border-b border-gray-200 text-xs uppercase text-gray-500 font-semibold",children:[o.jsx("th",{className:"p-3 text-left",children:"Descrio"}),o.jsx("th",{className:"p-3 text-right",children:"Qtd"}),o.jsx("th",{className:"p-3 text-right",children:"Preo"}),o.jsx("th",{className:"p-3 text-right",children:"IVA %"}),o.jsx("th",{className:"p-3 text-right",children:"Total"}),d.status==="RASCUNHO"&&o.jsx("th",{className:"p-3 w-10"})]})}),o.jsxs("tbody",{className:"text-sm",children:[d.itens.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"text-center p-4 text-gray-400",children:"Nenhum item adicionado."})}),d.itens.map((U,ce)=>o.jsxs("tr",{className:"border-b border-gray-50",children:[o.jsx("td",{className:"p-3",children:U.descricao}),o.jsx("td",{className:"p-3 text-right",children:U.quantidade}),o.jsxs("td",{className:"p-3 text-right",children:[U.precoUnitario.toFixed(2)," ",d.moeda]}),o.jsxs("td",{className:"p-3 text-right",children:[(U.impostoPercent??0).toFixed(0),"%"]}),o.jsxs("td",{className:"p-3 text-right font-medium",children:[(U.quantidade*U.precoUnitario*(1+(U.impostoPercent??0)/100)).toFixed(2)," ",d.moeda]}),d.status==="RASCUNHO"&&o.jsx("td",{className:"p-3 text-right",children:o.jsx("button",{"aria-label":"Remover item",title:"Remover",onClick:()=>R(ce),className:"text-red-400 hover:text-red-600",children:o.jsx(sn,{size:14})})})]},ce))]})]}),o.jsx("div",{className:"flex justify-end mt-4",children:o.jsxs("div",{className:"w-64 space-y-2 bg-gray-50 p-4 rounded border border-gray-100",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{children:"Subtotal:"})," ",o.jsxs("span",{children:[E.subtotal.toFixed(2)," ",d.moeda]})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{children:"Impostos:"})," ",o.jsxs("span",{children:[E.impostos.toFixed(2)," ",d.moeda]})]}),o.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-200 pt-2 text-gray-900",children:[o.jsx("span",{children:"Total:"})," ",o.jsxs("span",{children:[E.total.toFixed(2)," ",d.moeda]})]}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-500 pt-1",children:[o.jsx("span",{children:"Saldo a Pagar:"})," ",o.jsxs("span",{className:`${k.saldo>0?"text-red-600 font-bold":"text-green-600"}`,children:[k.saldo.toFixed(2)," ",d.moeda]})]})]})})]}),o.jsxs("div",{className:"col-span-2 border-t border-gray-200 pt-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("div",{className:"text-sm font-bold text-gray-800",children:"Pagamentos & Recebimentos"}),d.tipo!=="COTACAO"&&d.tipo!=="PRO_FORMA"&&d.status!=="CANCELADA"&&o.jsxs("button",{onClick:()=>x(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg shadow-sm hover:bg-green-700 flex items-center gap-2 text-sm font-bold",children:[o.jsx(Gn,{size:16})," Receber Pagamento"]})]}),o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-100 border-b border-gray-200 text-xs uppercase text-gray-500 font-semibold",children:[o.jsx("th",{className:"p-2 text-left",children:"Data"}),o.jsx("th",{className:"p-2 text-left",children:"Modalidade"}),o.jsx("th",{className:"p-2 text-left",children:"Ref."}),o.jsx("th",{className:"p-2 text-right",children:"Valor"})]})}),o.jsxs("tbody",{className:"text-sm",children:[d.pagamentos.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"text-center p-2 text-gray-400 text-xs",children:"Nenhum pagamento registrado."})}),d.pagamentos.map((U,ce)=>o.jsxs("tr",{className:"border-b border-gray-50",children:[o.jsx("td",{className:"p-2",children:ur(U.data,{time:!0})}),o.jsx("td",{className:"p-2",children:U.modalidade}),o.jsx("td",{className:"p-2",children:U.referencia??"-"}),o.jsxs("td",{className:"p-2 text-right font-medium text-green-600",children:[U.valor.toFixed(2)," ",d.moeda]})]},ce))]})]})]})]})]})}),g&&o.jsx(HZ,{invoice:d,onClose:()=>x(!1),onConfirm:Y}),o.jsx("div",{className:"invoice-pdf-hidden",children:o.jsxs("div",{ref:A,className:"invoice-pdf-container",children:[o.jsxs("div",{className:"invoice-pdf-header",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"invoice-pdf-title",children:d.tipo.replace("_"," ")}),o.jsxs("div",{className:"invoice-pdf-meta",children:["N Documento: ",o.jsx("strong",{children:d.numero})]}),o.jsxs("div",{className:"invoice-pdf-meta",children:["Data Emisso: ",d.dataEmissao]}),d.vencimento&&o.jsxs("div",{className:"invoice-pdf-meta",children:["Vencimento: ",d.vencimento]})]}),o.jsxs("div",{className:"invoice-pdf-right",children:[o.jsx("div",{className:"invoice-pdf-section-title",children:"EMITIDO POR"}),o.jsx("div",{className:"invoice-pdf-company-name",children:d.empresa.nome}),o.jsxs("div",{className:"invoice-pdf-company-detail",children:["NUIT: ",d.empresa.nuit]}),o.jsx("div",{className:"invoice-pdf-company-detail",children:d.empresa.endereco}),d.empresa.contacto&&o.jsx("div",{className:"invoice-pdf-company-detail",children:d.empresa.contacto})]})]}),o.jsxs("div",{className:"invoice-pdf-client-box",children:[o.jsx("div",{className:"invoice-pdf-section-title",children:"CLIENTE"}),o.jsx("div",{className:"invoice-pdf-client-name",children:d.cliente.nome}),d.cliente.nuit&&o.jsxs("div",{className:"invoice-pdf-client-detail",children:["NUIT: ",d.cliente.nuit]}),d.cliente.endereco&&o.jsx("div",{className:"invoice-pdf-client-detail",children:d.cliente.endereco}),d.cliente.contacto&&o.jsx("div",{className:"invoice-pdf-client-detail",children:d.cliente.contacto})]}),o.jsxs("table",{className:"invoice-pdf-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Descrio"}),o.jsx("th",{children:"Qtd"}),o.jsx("th",{children:"Preo Un."}),o.jsx("th",{children:"IVA %"}),o.jsx("th",{children:"Total"})]})}),o.jsx("tbody",{children:d.itens.map((U,ce)=>o.jsxs("tr",{children:[o.jsx("td",{children:U.descricao}),o.jsx("td",{children:U.quantidade}),o.jsx("td",{children:U.precoUnitario.toFixed(2)}),o.jsxs("td",{children:[(U.impostoPercent??0).toFixed(0),"%"]}),o.jsx("td",{children:(U.quantidade*U.precoUnitario*(1+(U.impostoPercent??0)/100)).toFixed(2)})]},ce))})]}),o.jsx("div",{className:"invoice-pdf-totals",children:o.jsxs("div",{className:"invoice-pdf-totals-box",children:[o.jsxs("div",{className:"invoice-pdf-totals-row",children:[o.jsx("span",{children:"Subtotal:"})," ",o.jsxs("span",{children:[E.subtotal.toFixed(2)," ",d.moeda]})]}),o.jsxs("div",{className:"invoice-pdf-totals-row",children:[o.jsx("span",{children:"Impostos:"})," ",o.jsxs("span",{children:[E.impostos.toFixed(2)," ",d.moeda]})]}),o.jsxs("div",{className:"invoice-pdf-totals-total",children:[o.jsx("span",{children:"Total:"})," ",o.jsxs("span",{children:[E.total.toFixed(2)," ",d.moeda]})]}),qh(d.pagamentos)>0&&o.jsxs("div",{className:"invoice-pdf-totals-paid",children:[o.jsx("span",{children:"Valor Pago:"})," ",o.jsxs("span",{children:[qh(d.pagamentos).toFixed(2)," ",d.moeda]})]})]})}),o.jsxs("div",{className:"invoice-pdf-footer",children:[o.jsx("p",{children:"Processado por OFFICIO Software. Documento gerado eletronicamente."}),d.observacoes&&o.jsxs("p",{children:["Obs: ",d.observacoes]})]})]})})]})}const VZ=()=>{const{items:e,inventory:t,currentUser:r,processSale:n,registerExpense:i,transactions:l,invoices:u,addInvoice:d,updateInvoice:h,getNextInvoiceNumber:m,hasPermission:p,locations:g,clients:x,addClient:b,updateClient:j,getClientBalance:N,companyInfo:_}=Nr(),[E,k]=w.useState("terminal"),[A,I]=w.useState([]),[R,C]=w.useState("Consumidor Final"),[P,Y]=w.useState(""),[oe,H]=w.useState(null),[$,U]=w.useState(_n.CASH),[ce,G]=w.useState(""),[V,D]=w.useState(""),[K,fe]=w.useState(""),[Ne,_e]=w.useState(0),[L,W]=w.useState(_n.CASH),[ve,be]=w.useState(!1),[Te,Ee]=w.useState(void 0),[Ce,at]=w.useState(""),[z,pe]=w.useState(!1),[ue,re]=w.useState({}),[Je,Re]=w.useState(""),[Ze,Ke]=w.useState(!1),[X,Mt]=w.useState("ALL"),[Fe,Kt]=w.useState(null),[Ve,Cn]=w.useState(null),[Jr,tr]=w.useState(""),[pn,gn]=w.useState(1),[en,Ma]=w.useState(20),[Tn,ha]=w.useState(null),ma=()=>{const vt=l.filter(ht=>!(r!=null&&r.locationId)||ht.locationId===r.locationId).filter(ht=>X==="ALL"?!0:ht.type===X).filter(ht=>{if(!Fe&&!Ve)return!0;const jt=ht.date?ht.date.slice(0,10):"";return!(Fe&&jt<Fe||Ve&&jt>Ve)}).filter(ht=>{const jt=Jr.toLowerCase();return jt?(ht.clientName||"").toLowerCase().includes(jt)||(ht.description||"").toLowerCase().includes(jt)||(ht.category||"").toLowerCase().includes(jt):!0});if(vt.length===0)return;const _r=vt.map(ht=>({id:ht.id,date:ht.date,type:ht.type,client:ht.clientName||"",description:ht.description||"",category:ht.category||"",amount:ht.amount,paymentMethod:ht.paymentMethod||"",locationId:ht.locationId||""})),xt=Object.keys(_r[0]).join(",")+`
`+_r.map(ht=>Object.values(ht).map(jt=>`"${String(jt).replace(/"/g,'""')}"`).join(",")).join(`
`),zt=new Blob([xt],{type:"text/csv;charset=utf-8;"}),Gr=URL.createObjectURL(zt),zi=document.createElement("a");zi.href=Gr,zi.download=`transactions_${new Date().toISOString().slice(0,10)}.csv`,zi.click(),URL.revokeObjectURL(Gr)},Ya=t.filter(se=>se.locationId===(r==null?void 0:r.locationId)&&se.quantity>0).map(se=>({...e.find(ft=>ft.id===se.itemId),stockQty:se.quantity})).filter(se=>se.id&&se.name&&se.price).filter(se=>se.is_for_sale!==!1).filter(se=>{var Ge;return(Ge=se.name)==null?void 0:Ge.toLowerCase().includes(ce.toLowerCase())}),fr=se=>{I(Ge=>{const ft=Ge.find(vt=>vt.itemId===se.id);return ft?ft.quantity>=se.stockQty?Ge:Ge.map(vt=>vt.itemId===se.id?{...vt,quantity:vt.quantity+1}:vt):[...Ge,{itemId:se.id,name:se.name,quantity:1,unitPrice:se.price}]})},we=se=>{I(Ge=>Ge.filter(ft=>ft.itemId!==se))},ct=(se,Ge)=>{I(ft=>ft.map(vt=>{if(vt.itemId===se){const _r=vt.quantity+Ge;if(_r<1)return vt;const ln=Ya.find(xt=>xt.id===se);return _r>((ln==null?void 0:ln.stockQty)||0)?vt:{...vt,quantity:_r}}return vt}))},Gt=se=>{C(se.name||se.nome||""),Y(se.nuit||""),H(se.id||"")},pa=A.reduce((se,Ge)=>se+Ge.quantity*Ge.unitPrice,0),ga=pa*.16,le=pa+ga,Mi=()=>{if(A.length===0)return;const se=A.map(ft=>({itemId:ft.itemId,descricao:ft.name,quantidade:ft.quantity,precoUnitario:ft.unitPrice,impostoPercent:16}));Ee({tipo:"FATURA_RECIBO",status:"PAGA",cliente:{id:oe||void 0,nome:R,nuit:P},itens:se,observacoes:"Venda via POS Terminal - Rastreabilidade: Itens do inventrio"}),Ke(!0),be(!0)},Ii=se=>{se.preventDefault(),!(Ne<=0)&&(i(V,K,Ne,L),D(""),fe(""),_e(0),W(_n.CASH))},ya=()=>{Ee(void 0),Ke(!1),be(!0)},Vn=se=>{Ee(se),Ke(!1),be(!0)},Li=async se=>{ha({type:"info",message:"Gravando documento..."});try{u.find(ft=>ft.id===se.id)?await h(se):await d(se),be(!1),Ze&&(I([]),C("Consumidor Final"),Y(""),H(null),U(_n.CASH),Ke(!1)),ha({type:"success",message:"Documento guardado."}),setTimeout(()=>ha(null),3500)}catch(Ge){ha({type:"error",message:`Erro ao guardar fatura: ${(Ge==null?void 0:Ge.message)||String(Ge)}`})}},Wa=se=>{se.preventDefault(),ue.name&&(ue.id?j(ue):b({id:`cli-${Date.now()}`,name:ue.name,nuit:ue.nuit,contact:ue.contact,email:ue.email,address:ue.address,notes:ue.notes}),pe(!1),re({}))},Gl=se=>{re(se),pe(!0)},sr=se=>new Intl.NumberFormat("pt-MZ",{style:"currency",currency:"MZN"}).format(se);return g.find(se=>se.id===(r==null?void 0:r.locationId)),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2 border-b border-gray-200 pb-2 overflow-x-auto hide-scrollbar",children:[o.jsx("button",{onClick:()=>k("terminal"),className:`px-4 py-2 font-medium text-sm rounded-full whitespace-nowrap ${E==="terminal"?"bg-blue-600 text-white shadow":"bg-white text-gray-600 border border-gray-100"}`,children:"Terminal"}),p("VIEW_INVOICES")&&o.jsxs("button",{onClick:()=>k("invoices"),className:`px-4 py-2 font-medium text-sm rounded-full whitespace-nowrap flex items-center gap-2 ${E==="invoices"?"bg-indigo-600 text-white shadow":"bg-white text-gray-600 border border-gray-100"}`,children:[o.jsx(la,{size:16})," Documentos"]}),o.jsxs("button",{onClick:()=>k("clients"),className:`px-4 py-2 font-medium text-sm rounded-full whitespace-nowrap flex items-center gap-2 ${E==="clients"?"bg-green-600 text-white shadow":"bg-white text-gray-600 border border-gray-100"}`,children:[o.jsx(Yh,{size:16})," Clientes"]}),o.jsx("button",{onClick:()=>k("expenses"),className:`px-4 py-2 font-medium text-sm rounded-full whitespace-nowrap ${E==="expenses"?"bg-orange-600 text-white shadow":"bg-white text-gray-600 border border-gray-100"}`,children:"Despesas"}),o.jsx("button",{onClick:()=>k("history"),className:`px-4 py-2 font-medium text-sm rounded-full whitespace-nowrap ${E==="history"?"bg-gray-600 text-white shadow":"bg-white text-gray-600 border border-gray-100"}`,children:"Histrico"})]}),Tn&&o.jsx("div",{className:`mt-3 p-3 rounded ${Tn.type==="success"?"bg-green-100 border border-green-300 text-green-800":Tn.type==="error"?"bg-red-100 border border-red-300 text-red-800":"bg-blue-50 border border-blue-100 text-blue-800"}`,children:Tn.message}),E==="terminal"&&o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-auto lg:h-[calc(100vh-220px)] pb-20 lg:pb-0",children:[o.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 flex flex-col overflow-hidden h-[500px] lg:h-full",children:[o.jsx("div",{className:"p-4 border-b border-gray-100 flex gap-4 bg-white sticky top-0 z-10",children:o.jsxs("div",{className:"relative flex-1",children:[o.jsx(xs,{className:"absolute left-3 top-2.5 text-gray-400",size:18}),o.jsx("input",{type:"text",placeholder:"Buscar produto...",className:"w-full pl-10 pr-4 py-2 border rounded-lg bg-gray-50 focus:outline-none focus:border-blue-500 text-gray-900",value:ce,onChange:se=>G(se.target.value)})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 gap-3 bg-gray-50",children:Ya.length===0?o.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center text-gray-400 mt-20",children:[o.jsx(px,{size:48,className:"mb-2 opacity-30"}),o.jsx("p",{children:"Sem itens no estoque."})]}):Ya.map((se,Ge)=>o.jsxs("button",{onClick:()=>fr(se),className:"bg-white p-3 md:p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md hover:border-blue-300 transition text-left flex flex-col h-full active:scale-95",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2 w-full",children:[o.jsx("span",{className:"text-[10px] bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded truncate max-w-[60%]",children:se.sku}),o.jsxs("span",{className:"text-[10px] font-bold text-blue-600",children:[se.stockQty," un"]})]}),o.jsx("h4",{className:"font-semibold text-gray-800 text-sm mb-auto line-clamp-2 leading-tight",children:se.name}),o.jsxs("div",{className:"mt-3 flex items-end justify-between w-full",children:[o.jsx("span",{className:"text-sm md:text-lg font-bold text-gray-900",children:sr(se.price||0)}),o.jsx("div",{className:"bg-blue-50 text-blue-600 p-1 rounded-full",children:o.jsx(Zr,{size:16})})]})]},Ge))})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 flex flex-col lg:h-full order-first lg:order-last mb-4 lg:mb-0",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 bg-slate-50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(cv,{size:20,className:"text-blue-600"})," Carrinho (",A.length,")"]}),o.jsx("button",{onClick:()=>k("clients"),className:"text-xs text-blue-600 bg-white border border-blue-100 px-2 py-1 rounded font-medium",children:"Cliente"})]}),o.jsxs("div",{className:"mt-2 space-y-2",children:[x.length>0&&o.jsxs("select",{"aria-label":"Selecionar cliente rpido",className:"w-full border rounded p-1.5 text-sm bg-white text-gray-900",value:oe||"",onChange:se=>{const Ge=x.find(ft=>ft.id===se.target.value);Ge?Gt(Ge):(H(null),C("Consumidor Final"),Y(""))},children:[o.jsx("option",{value:"",children:"-- Cliente Rpido --"}),x.map(se=>o.jsx("option",{value:se.id,children:se.name},se.id))]}),o.jsx("input",{type:"text",placeholder:"Nome do Cliente",className:"w-full border rounded p-1.5 text-sm bg-white text-gray-900",value:R,onChange:se=>C(se.target.value)})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 min-h-[150px] lg:min-h-0",children:A.length===0?o.jsxs("div",{className:"text-center text-gray-400 mt-10",children:[o.jsx(cv,{size:32,className:"mx-auto mb-2 opacity-20"}),o.jsx("p",{className:"text-sm",children:"Carrinho vazio"})]}):A.map((se,Ge)=>o.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded-lg border border-gray-100",children:[o.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[o.jsx("h4",{className:"font-medium text-gray-800 text-sm truncate",children:se.name}),o.jsx("p",{className:"text-xs text-blue-600 font-bold",children:sr(se.unitPrice)})]}),o.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-0 bg-white rounded border border-gray-200",children:[o.jsx("button",{"aria-label":"Diminuir quantidade",title:"Diminuir quantidade",onClick:()=>ct(se.itemId,-1),className:"p-1 hover:bg-gray-100 text-gray-600 w-6 h-6 flex items-center justify-center",children:o.jsx(S5,{size:10})}),o.jsx("span",{className:"text-xs font-bold w-6 text-center","aria-label":`Quantidade: ${se.quantity}`,children:se.quantity}),o.jsx("button",{"aria-label":"Aumentar quantidade",title:"Aumentar quantidade",onClick:()=>ct(se.itemId,1),className:"p-1 hover:bg-gray-100 text-gray-600 w-6 h-6 flex items-center justify-center",children:o.jsx(Zr,{size:10})})]}),o.jsx("button",{"aria-label":"Remover item do carrinho",title:"Remover",onClick:()=>we(se.itemId),className:"text-red-400 hover:text-red-600",children:o.jsx(vi,{size:16})})]})]},Ge))}),o.jsxs("div",{className:"p-4 bg-white border-t border-gray-200 shadow-inner",children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1 text-gray-600",children:[o.jsx("span",{children:"Subtotal"}),o.jsx("span",{children:sr(pa)})]}),o.jsxs("div",{className:"flex justify-between text-sm mb-3 text-gray-600",children:[o.jsx("span",{children:"IVA (16%)"}),o.jsx("span",{children:sr(ga)})]}),o.jsxs("div",{className:"flex justify-between text-xl font-bold text-gray-900 mb-4",children:[o.jsx("span",{children:"Total"}),o.jsx("span",{children:sr(le)})]}),o.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[{id:_n.CASH,label:"Dinheiro",icon:fx},{id:_n.CARD,label:"POS",icon:xO},{id:_n.MOBILE_MONEY,label:"M-Pesa",icon:W5},{id:_n.BANK_TRANSFER,label:"Transf.",icon:P5}].map(se=>o.jsxs("button",{"aria-label":`Mtodo de pagamento: ${se.label}`,title:`Selecionar ${se.label}`,onClick:()=>U(se.id),className:`flex items-center justify-center gap-1 py-2 rounded text-[10px] md:text-xs font-bold border transition ${$===se.id?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-200 hover:bg-gray-100"}`,children:[o.jsx(se.icon,{size:12})," ",se.label]},se.id))}),o.jsxs("button",{onClick:Mi,disabled:A.length===0,className:"w-full bg-green-600 text-white py-3 rounded-xl font-bold hover:bg-green-700 transition shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[o.jsx(sa,{size:20})," Finalizar Venda"]})]})]})]}),E==="invoices"&&o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 flex flex-col h-[calc(100vh-220px)]",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-white sticky top-0 z-10",children:[o.jsxs("div",{className:"relative w-full max-w-xs",children:[o.jsx(xs,{className:"absolute left-3 top-2.5 text-gray-400",size:18}),o.jsx("input",{type:"text",placeholder:"Buscar documento...",className:"w-full pl-10 pr-4 py-2 border rounded-lg bg-gray-50 focus:outline-none focus:border-blue-500 text-gray-900 text-sm",value:Ce,onChange:se=>at(se.target.value)})]}),o.jsxs("button",{onClick:ya,className:"bg-blue-600 text-white p-2 md:px-4 md:py-2 rounded-lg flex items-center gap-2 hover:bg-blue-700 shadow-sm ml-2 shrink-0",children:[o.jsx(Zr,{size:18})," ",o.jsx("span",{className:"hidden md:inline",children:"Novo"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{className:"bg-gray-50 text-xs font-semibold text-gray-500 uppercase sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-4 border-b",children:"Documento"}),o.jsx("th",{className:"p-4 border-b hidden md:table-cell",children:"Cliente"}),o.jsx("th",{className:"p-4 border-b text-right",children:"Total"}),o.jsx("th",{className:"p-4 border-b text-center",children:"Status"}),o.jsx("th",{className:"p-4 border-b text-center"})]})}),o.jsxs("tbody",{className:"divide-y divide-gray-100 text-sm",children:[u.filter(se=>se.numero.includes(Ce)||se.cliente.nome.toLowerCase().includes(Ce.toLowerCase())).map(se=>{const Ge=se.itens.reduce((ft,vt)=>ft+vt.quantidade*vt.precoUnitario*(1+(vt.impostoPercent||0)/100),0);return o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsxs("td",{className:"p-4",children:[o.jsx("div",{className:"font-bold text-gray-900",children:se.numero}),o.jsx("div",{className:"text-xs text-gray-500 md:hidden",children:se.cliente.nome}),o.jsx("span",{className:"text-[10px] bg-gray-100 px-1.5 py-0.5 rounded border border-gray-200 mt-1 inline-block",children:se.tipo.replace("_"," ")})]}),o.jsx("td",{className:"p-4 text-gray-600 hidden md:table-cell",children:se.cliente.nome}),o.jsx("td",{className:"p-4 text-right font-bold text-gray-800",children:sr(Ge)}),o.jsx("td",{className:"p-4 text-center",children:o.jsx("span",{className:`text-[10px] md:text-xs font-bold px-2 py-1 rounded-full ${se.status==="PAGA"?"bg-green-100 text-green-700":se.status==="EMITIDA"?"bg-blue-100 text-blue-700":se.status==="CANCELADA"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:se.status})}),o.jsx("td",{className:"p-4 text-center",children:o.jsx("button",{"aria-label":"Editar documento",title:"Editar",onClick:()=>Vn(se),className:"text-blue-600 hover:text-blue-800 p-2 bg-blue-50 rounded-lg",children:o.jsx(R_,{size:16})})})]},se.id)}),u.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-400",children:"Nenhum documento encontrado."})})]})]})})]}),E==="clients"&&o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 flex flex-col h-[calc(100vh-220px)]",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center sticky top-0 bg-white z-10",children:[o.jsxs("div",{className:"relative w-full max-w-xs",children:[o.jsx(xs,{className:"absolute left-3 top-2.5 text-gray-400",size:18}),o.jsx("input",{type:"text",placeholder:"Buscar cliente...",className:"w-full pl-10 pr-4 py-2 border rounded-lg bg-gray-50 focus:outline-none focus:border-blue-500 text-gray-900 text-sm",value:Je,onChange:se=>Re(se.target.value)})]}),o.jsxs("button",{onClick:()=>{re({}),pe(!0)},className:"bg-green-600 text-white p-2 md:px-4 md:py-2 rounded-lg flex items-center gap-2 hover:bg-green-700 ml-2 shrink-0 shadow-sm",children:[o.jsx(su,{size:18})," ",o.jsx("span",{className:"hidden md:inline",children:"Novo"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{className:"bg-gray-50 text-xs font-semibold text-gray-500 uppercase sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-4 border-b",children:"Nome"}),o.jsx("th",{className:"p-4 border-b hidden md:table-cell",children:"Contacto"}),o.jsx("th",{className:"p-4 border-b text-right",children:"Saldo"}),o.jsx("th",{className:"p-4 border-b text-center"})]})}),o.jsxs("tbody",{className:"divide-y divide-gray-100 text-sm",children:[x.filter(se=>(se.name||se.nome||"").toLowerCase().includes(Je.toLowerCase())).map(se=>{const Ge=N(se.id||"");return o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsxs("td",{className:"p-4",children:[o.jsx("div",{className:"font-bold text-gray-800",children:se.name}),o.jsx("div",{className:"text-xs text-gray-500 md:hidden",children:se.nuit})]}),o.jsx("td",{className:"p-4 text-gray-600 hidden md:table-cell",children:se.contact||"-"}),o.jsx("td",{className:`p-4 text-right font-bold ${Ge>0?"text-red-600":"text-green-600"}`,children:sr(Ge)}),o.jsx("td",{className:"p-4 text-center",children:o.jsx("button",{"aria-label":"Editar cliente",title:"Editar",onClick:()=>Gl(se),className:"text-blue-600 hover:text-blue-800 p-2 bg-blue-50 rounded-lg",children:o.jsx(R_,{size:16})})})]},se.id)}),x.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-8 text-center text-gray-400",children:"Nenhum cliente registrado."})})]})]})})]}),E==="history"&&o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 flex flex-col h-[calc(100vh-220px)]",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center sticky top-0 z-10 bg-white",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(mx,{size:20,className:"text-gray-600"}),o.jsx("h3",{className:"font-bold text-gray-800",children:"Histrico Financeiro"})]}),o.jsx("div",{className:"text-sm text-gray-500",children:"Mostrando transaes da sua localizao"})]}),o.jsx("div",{className:"p-4 border-t bg-white flex items-center justify-between",children:(()=>{const vt=l.filter(zt=>!(r!=null&&r.locationId)||zt.locationId===r.locationId).filter(zt=>X==="ALL"?!0:zt.type===X).filter(zt=>{if(!Fe&&!Ve)return!0;const Gr=zt.date?zt.date.slice(0,10):"";return!(Fe&&Gr<Fe||Ve&&Gr>Ve)}).filter(zt=>{const Gr=Jr.toLowerCase();return Gr?(zt.clientName||"").toLowerCase().includes(Gr)||(zt.description||"").toLowerCase().includes(Gr)||(zt.category||"").toLowerCase().includes(Gr):!0}),_r=vt.length,ln=(pn-1)*en,xt=vt.slice(ln,ln+en);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",_r===0?0:ln+1," - ",Math.min(ln+xt.length,_r)," de ",_r]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{disabled:pn===1,onClick:()=>gn(pn-1),className:"px-3 py-1 bg-gray-100 rounded text-sm disabled:opacity-50",children:"Anterior"}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",pn]}),o.jsx("button",{disabled:pn*en>=_r,onClick:()=>gn(pn+1),className:"px-3 py-1 bg-gray-100 rounded text-sm disabled:opacity-50",children:"Prxima"})]})]})})()}),o.jsxs("div",{className:"p-4 border-b border-gray-100 flex flex-col gap-3 md:flex-row md:items-center md:justify-between sticky top-0 z-10 bg-white",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{htmlFor:"historyType",className:"text-xs text-gray-500",children:"Tipo"}),o.jsxs("select",{id:"historyType",value:X,onChange:se=>{Mt(se.target.value),gn(1)},className:"border px-2 py-1 rounded text-sm bg-white",children:[o.jsx("option",{value:"ALL",children:"Todos"}),o.jsx("option",{value:"SALE",children:"Recebimentos"}),o.jsx("option",{value:"EXPENSE",children:"Despesas"})]}),o.jsx("label",{htmlFor:"historyStartDate",className:"text-xs text-gray-500 ml-4",children:"De"}),o.jsx("input",{id:"historyStartDate",type:"date",value:Fe||"",onChange:se=>{Kt(se.target.value||null),gn(1)},className:"border px-2 py-1 rounded text-sm bg-white"}),o.jsx("label",{htmlFor:"historyEndDate",className:"text-xs text-gray-500 ml-2",children:"At"}),o.jsx("input",{id:"historyEndDate",type:"date",value:Ve||"",onChange:se=>{Cn(se.target.value||null),gn(1)},className:"border px-2 py-1 rounded text-sm bg-white"}),o.jsx("label",{htmlFor:"historySearch",className:"text-xs text-gray-500 ml-4",children:"Buscar"}),o.jsx("input",{id:"historySearch",placeholder:"Buscar",value:Jr,onChange:se=>{tr(se.target.value),gn(1)},className:"ml-4 border rounded px-2 py-1 text-sm bg-white"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{"aria-label":"Exportar transaes para CSV",title:"Exportar para CSV",onClick:()=>{ma()},className:"text-sm bg-blue-50 text-blue-700 px-3 py-1 rounded",children:"Exportar CSV"}),o.jsx("label",{htmlFor:"historyPageSize",className:"text-xs text-gray-500",children:"Linhas por pgina:"}),o.jsxs("select",{id:"historyPageSize",value:en,onChange:se=>{Ma(Number(se.target.value)),gn(1)},className:"border px-2 py-1 rounded text-sm bg-white",children:[o.jsx("option",{value:10,children:"10"}),o.jsx("option",{value:20,children:"20"}),o.jsx("option",{value:50,children:"50"})]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{className:"bg-gray-50 text-xs font-semibold text-gray-500 uppercase sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-3 border-b",children:"Data"}),o.jsx("th",{className:"p-3 border-b",children:"Tipo"}),o.jsx("th",{className:"p-3 border-b",children:"Origem / Descrio"}),o.jsx("th",{className:"p-3 border-b text-right",children:"Valor"}),o.jsx("th",{className:"p-3 border-b",children:"Mtodo"})]})}),o.jsxs("tbody",{className:"divide-y divide-gray-100 text-sm",children:[(()=>{const vt=l.filter(xt=>!(r!=null&&r.locationId)||xt.locationId===r.locationId).filter(xt=>X==="ALL"?!0:xt.type===X).filter(xt=>{if(!Fe&&!Ve)return!0;const zt=xt.date?xt.date.slice(0,10):"";return!(Fe&&zt<Fe||Ve&&zt>Ve)}).filter(xt=>{const zt=Jr.toLowerCase();return zt?(xt.clientName||"").toLowerCase().includes(zt)||(xt.description||"").toLowerCase().includes(zt)||(xt.category||"").toLowerCase().includes(zt):!0});vt.length;const _r=(pn-1)*en;return vt.slice(_r,_r+en).map(xt=>o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsx("td",{className:"p-3 text-xs text-gray-500",children:ur(xt.date,{time:!0})}),o.jsx("td",{className:"p-3 font-bold text-[12px]",children:xt.type==="SALE"?"Recebimento":"Despesa"}),o.jsx("td",{className:"p-3 text-gray-700",children:xt.clientName||xt.description||xt.category||"-"}),o.jsx("td",{className:"p-3 text-right font-bold text-gray-800",children:sr(xt.amount)}),o.jsx("td",{className:"p-3 text-sm text-gray-600",children:xt.paymentMethod})]},xt.id))})(),l.filter(Ge=>!(r!=null&&r.locationId)||Ge.locationId===r.locationId).filter(Ge=>X==="ALL"?!0:Ge.type===X).filter(Ge=>{if(!Fe&&!Ve)return!0;const ft=Ge.date?Ge.date.slice(0,10):"";return!(Fe&&ft<Fe||Ve&&ft>Ve)}).filter(Ge=>{const ft=Jr.toLowerCase();return ft?(Ge.clientName||"").toLowerCase().includes(ft)||(Ge.description||"").toLowerCase().includes(ft)||(Ge.category||"").toLowerCase().includes(ft):!0}).length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-400",children:"Nenhuma transao encontrada."})}):null]})]})})]}),E==="expenses"&&o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pb-20 md:pb-0",children:o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[o.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(vx,{className:"text-red-500"})," Registrar Despesa"]}),o.jsxs("form",{onSubmit:Ii,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"expenseDesc",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),o.jsx("input",{id:"expenseDesc",required:!0,type:"text",className:"w-full border rounded-lg p-3 bg-white text-gray-900",value:V,onChange:se=>D(se.target.value),placeholder:"Ex: Compra de material"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"expenseCategory",className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),o.jsxs("select",{id:"expenseCategory",className:"w-full border rounded-lg p-3 bg-white text-gray-900",value:K,onChange:se=>fe(se.target.value),children:[o.jsx("option",{value:"",children:"Selecione..."}),o.jsx("option",{value:"Combustvel",children:"Combustvel"}),o.jsx("option",{value:"Manuteno",children:"Manuteno"}),o.jsx("option",{value:"Alimentao",children:"Alimentao"}),o.jsx("option",{value:"Transporte",children:"Transporte"}),o.jsx("option",{value:"Outros",children:"Outros"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"expenseAmount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor"}),o.jsx("input",{id:"expenseAmount",required:!0,type:"number",min:"0",step:"0.01",className:"w-full border rounded-lg p-3 bg-white text-gray-900",value:Ne,onChange:se=>_e(parseFloat(se.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"expenseMethod",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mtodo"}),o.jsxs("select",{id:"expenseMethod",className:"w-full border rounded-lg p-3 bg-white text-gray-900",value:L,onChange:se=>W(se.target.value),children:[o.jsx("option",{value:_n.CASH,children:"Dinheiro"}),o.jsx("option",{value:_n.MOBILE_MONEY,children:"M-Pesa"}),o.jsx("option",{value:_n.CARD,children:"Carto"})]})]})]}),o.jsx("button",{type:"submit",className:"w-full bg-red-600 text-white py-3 rounded-xl font-bold hover:bg-red-700 mt-2 shadow-md",children:"Lanar Despesa"})]})]})}),o.jsx(FZ,{open:ve,onClose:()=>be(!1),onSave:Li,initial:Te,companyDefaults:{empresa:_,moeda:"MZN",gerarNumero:m,locationId:(r==null?void 0:r.locationId)||"",userId:(r==null?void 0:r.id)||""}}),z&&o.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-end md:items-center justify-center z-50 p-0 md:p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-t-2xl md:rounded-xl shadow-xl p-6 animate-in slide-in-from-bottom-10 md:zoom-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:ue.id?"Editar Cliente":"Novo Cliente"}),o.jsxs("form",{onSubmit:Wa,className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"clientName",className:"block text-sm font-medium text-gray-700",children:"Nome"}),o.jsx("input",{id:"clientName",className:"w-full border rounded-lg p-3 bg-white text-gray-900",required:!0,value:ue.name||"",onChange:se=>re({...ue,name:se.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"clientNuit",className:"block text-sm font-medium text-gray-700",children:"NUIT"}),o.jsx("input",{id:"clientNuit",className:"w-full border rounded-lg p-3 bg-white text-gray-900",value:ue.nuit||"",onChange:se=>re({...ue,nuit:se.target.value})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"clientContact",className:"block text-sm font-medium text-gray-700",children:"Telefone"}),o.jsx("input",{id:"clientContact",className:"w-full border rounded-lg p-3 bg-white text-gray-900",value:ue.contact||"",onChange:se=>re({...ue,contact:se.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"clientEmail",className:"block text-sm font-medium text-gray-700",children:"Email"}),o.jsx("input",{id:"clientEmail",className:"w-full border rounded-lg p-3 bg-white text-gray-900",value:ue.email||"",onChange:se=>re({...ue,email:se.target.value})})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"clientAddress",className:"block text-sm font-medium text-gray-700",children:"Endereo"}),o.jsx("input",{id:"clientAddress",className:"w-full border rounded-lg p-3 bg-white text-gray-900",value:ue.address||"",onChange:se=>re({...ue,address:se.target.value})})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{type:"button",onClick:()=>pe(!1),className:"flex-1 text-gray-700 bg-gray-100 py-3 font-bold rounded-xl",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 shadow-md",children:"Salvar"})]})]})]})})]})},KZ=()=>{const{rolePermissions:e,togglePermission:t,hasPermission:r,isAdminOrGM:n}=Nr(),i=Array.from(new Set(O_.map(u=>u.category))),l=[Ae.ADMIN,Ae.GENERAL_MANAGER,Ae.MANAGER,Ae.WORKER];return n?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(jO,{className:"text-indigo-600"}),"Matriz de Permisses"]}),o.jsx("p",{className:"text-sm text-gray-500",children:"Controle granular de acesso por cargo e funcionalidade."})]}),o.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-2 rounded-lg text-xs flex items-center gap-2",children:[o.jsx(r6,{size:14}),o.jsx("span",{children:"Alteraes entram em vigor imediatamente."})]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[o.jsx("th",{className:"p-4 text-sm font-semibold text-gray-600 uppercase tracking-wider w-1/3",children:"Funcionalidade / Permisso"}),l.map(u=>o.jsx("th",{className:"p-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider",children:u.replace("_"," ")},u))]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:i.map(u=>o.jsxs(ao.Fragment,{children:[o.jsx("tr",{className:"bg-slate-50",children:o.jsx("td",{colSpan:5,className:"px-4 py-2 text-xs font-bold text-slate-500 uppercase tracking-widest border-y border-gray-200",children:u})}),O_.filter(d=>d.category===u).map(d=>o.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[o.jsxs("td",{className:"p-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-800",children:d.label}),o.jsx("p",{className:"text-xs text-gray-400 font-mono mt-0.5",children:d.id})]}),l.map(h=>{var g;const m=(g=e[h])==null?void 0:g.includes(d.id),p=h===Ae.ADMIN&&d.id==="MANAGE_PERMISSIONS";return o.jsx("td",{className:"p-4 text-center",children:o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:m||p,disabled:p,onChange:()=>t(h,d.id)}),o.jsx("div",{className:`w-11 h-6 rounded-full peer peer-focus:ring-4 peer-focus:ring-indigo-300 dark:peer-focus:ring-indigo-800 transition-colors ${m||p?"bg-indigo-600":"bg-gray-200"}`,children:o.jsx("div",{className:`absolute top-0.5 left-[2px] bg-white border border-gray-300 rounded-full h-5 w-5 transition-all ${m||p?"translate-x-full border-white":""}`})})]})},`${h}-${d.id}`)})]},d.id))]},u))})]})})})]}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-96 text-gray-400",children:[o.jsx(fo,{size:64,className:"mb-4 text-gray-300"}),o.jsx("h2",{className:"text-xl font-bold text-gray-700",children:"Acesso Negado"}),o.jsx("p",{children:"Voc no tem permisso para gerenciar as configuraes de acesso."})]})},YZ=()=>{const{allUsers:e,calculatePayrollForUser:t,updatePayrollParams:r,payrollParams:n}=Nr(),[i,l]=w.useState(new Date().toISOString().slice(0,7)),u=e.map(x=>t(x)),d=u.reduce((x,b)=>x+b.baseSalary,0),h=u.reduce((x,b)=>x+b.productionBonus,0),m=u.reduce((x,b)=>x+b.netSalary,0),p=u.reduce((x,b)=>x+b.totalDeductions,0),g=x=>new Intl.NumberFormat("pt-MZ",{style:"currency",currency:"MZN"}).format(x);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(fx,{className:"text-green-600"}),"Folha Salarial (Payroll)"]}),o.jsx("p",{className:"text-sm text-gray-500",children:"Modelo Florestal: (Dias x Taxa) + Bnus - Descontos"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"month",className:"border rounded-lg p-2 bg-white text-gray-800 shadow-sm",value:i,onChange:x=>l(x.target.value)}),o.jsxs("button",{className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium shadow-sm hover:bg-green-700 flex items-center gap-2",children:[o.jsx(M3,{size:18})," Processar"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100",children:[o.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Total Lquido a Pagar"}),o.jsx("h3",{className:"text-2xl font-bold text-green-600 mt-1",children:g(m)})]}),o.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100",children:[o.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Total Salrio Base"}),o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:g(d)}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Dias teis"})]}),o.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100",children:[o.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Total Bnus Produo"}),o.jsx("h3",{className:"text-2xl font-bold text-blue-600 mt-1",children:g(h)})]}),o.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100",children:[o.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Total Descontos"}),o.jsx("h3",{className:"text-2xl font-bold text-red-600 mt-1",children:g(p)}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Faltas e Adiantamentos"})]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left text-sm whitespace-nowrap",children:[o.jsx("thead",{className:"bg-gray-50 text-xs text-gray-500 uppercase font-bold border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4",children:"Funcionrio"}),o.jsx("th",{className:"px-6 py-4 text-center text-green-700 bg-green-50/50",title:"Dias Completos",children:"D"}),o.jsx("th",{className:"px-6 py-4 text-center text-orange-700 bg-orange-50/50",title:"Meios Dias",children:"D/2"}),o.jsx("th",{className:"px-6 py-4 text-center text-red-700 bg-red-50/50",title:"Faltas",children:"F"}),o.jsx("th",{className:"px-6 py-4 text-center",children:"Produo (Real/Meta)"}),o.jsx("th",{className:"px-6 py-4 text-right font-bold bg-blue-50/50",children:"Salrio Base"}),o.jsx("th",{className:"px-6 py-4 text-right text-blue-600",children:"Bnus"}),o.jsx("th",{className:"px-6 py-4 text-center w-24 text-red-600",children:"Adiant."}),o.jsx("th",{className:"px-6 py-4 text-right text-red-600",children:"T. Desc."}),o.jsx("th",{className:"px-6 py-4 text-right font-bold text-green-700 bg-green-50",children:"Lquido"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:u.map(x=>{var b;return o.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[o.jsx("td",{className:"px-6 py-4 font-medium text-gray-800",children:x.userName}),o.jsx("td",{className:"px-6 py-4 text-center font-bold text-green-700 bg-green-50/30",children:x.fullDays}),o.jsx("td",{className:"px-6 py-4 text-center font-bold text-orange-700 bg-orange-50/30",children:x.halfDays}),o.jsx("td",{className:"px-6 py-4 text-center font-bold text-red-700 bg-red-50/30",children:x.absences}),o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"font-bold",children:x.realProduction}),o.jsxs("span",{className:"text-[10px] text-gray-400",children:["Meta: ",x.targetProduction]}),o.jsxs("span",{className:`text-[10px] font-bold ${x.efficiency>=100?"text-green-600":"text-orange-500"}`,children:[x.efficiency,"%"]})]})}),o.jsx("td",{className:"px-6 py-4 text-right font-bold bg-blue-50/30",children:g(x.baseSalary)}),o.jsx("td",{className:"px-6 py-4 text-right text-blue-600",children:g(x.productionBonus)}),o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsx("input",{type:"number",min:"0",className:"w-20 border rounded p-1 text-center bg-white focus:ring-1 focus:ring-red-500 outline-none text-red-600 font-medium",value:((b=n[x.userId])==null?void 0:b.advances)||0,onChange:j=>r(x.userId,parseFloat(j.target.value)||0)})}),o.jsx("td",{className:"px-6 py-4 text-right text-red-600",children:g(x.totalDeductions)}),o.jsx("td",{className:"px-6 py-4 text-right font-bold text-green-700 bg-green-50 text-base border-l border-green-100",children:g(x.netSalary)})]},x.userId)})})]})})})]})},WZ=()=>{const{fichasIndividuais:e,currentUser:t,allUsers:r,isAdminOrGM:n,items:i,inventory:l,createFicha:u,confirmFicha:d,lockFicha:h,deleteFicha:m}=Nr(),[p,g]=w.useState(""),[x,b]=w.useState(null),[j,N]=w.useState(!1),[_,E]=w.useState("todos"),k=w.useMemo(()=>r.filter(P=>{var Y;return P.name.toLowerCase().includes(p.toLowerCase())||((Y=P.jobTitle)==null?void 0:Y.toLowerCase().includes(p.toLowerCase()))}),[r,p]),A=w.useMemo(()=>r.find(P=>P.id===x),[r,x]),I=w.useMemo(()=>{let P=e.filter(Y=>Y.entidade_id===x);return _!=="todos"&&(P=P.filter(Y=>Y.tipo===_)),P},[e,x,_]),R=P=>{switch(P){case"pendente":return o.jsx(iu,{className:"w-4 h-4 text-yellow-500"});case"confirmado":return o.jsx(sa,{className:"w-4 h-4 text-green-500"});case"trancado":return o.jsx(fo,{className:"w-4 h-4 text-blue-500"})}},C=P=>{switch(P){case"combustivel":return"bg-amber-100 text-amber-800";case"oleo":return"bg-orange-100 text-orange-800";case"pecas":return"bg-blue-100 text-blue-800";case"materiais":return"bg-green-100 text-green-800";case"ferramentas":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return o.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[o.jsx(la,{className:"w-8 h-8 text-emerald-600"}),"Fichas Individuais"]}),!x&&o.jsxs("button",{onClick:()=>N(!0),className:"bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-all flex items-center gap-2 shadow-sm",children:[o.jsx(Zr,{className:"w-5 h-5"}),"Nova Entrega"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6",children:[o.jsxs("div",{className:`${x?"hidden md:block md:col-span-4":"col-span-12"} bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden transition-all shrink-0`,children:[o.jsx("div",{className:"p-4 border-b border-gray-100 bg-gray-50/50",children:o.jsxs("div",{className:"relative",children:[o.jsx(xs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Procurar funcionrio...",value:p,onChange:P=>g(P.target.value),className:"w-full pl-10 pr-4 py-2 bg-white border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-emerald-500 transition-all outline-none"})]})}),o.jsx("div",{className:"overflow-y-auto max-h-[calc(100vh-250px)]",children:k.length===0?o.jsx("div",{className:"p-8 text-center text-gray-500",children:"Nenhum funcionrio encontrado."}):k.map(P=>o.jsxs("button",{onClick:()=>b(P.id),className:`w-full p-4 flex items-center justify-between hover:bg-emerald-50 transition-colors border-b border-gray-50 last:border-0 ${x===P.id?"bg-emerald-50 border-r-4 border-r-emerald-500":""}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${x===P.id?"bg-emerald-600 text-white":"bg-gray-100 text-gray-500"}`,children:o.jsx(Lf,{className:"w-5 h-5"})}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-semibold text-gray-900 line-clamp-1",children:P.name}),o.jsx("div",{className:"text-xs text-gray-500",children:P.jobTitle||"Sem cargo"})]})]}),o.jsx(Vf,{className:`w-4 h-4 text-gray-400 ${x===P.id?"text-emerald-500 translate-x-1":""} transition-transform`})]},P.id))})]}),o.jsx("div",{className:`${x?"col-span-12 md:col-span-8":"hidden md:flex md:col-span-8 items-center justify-center"} bg-white rounded-xl shadow-sm border border-gray-200 min-h-[500px] overflow-hidden`,children:A?o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-start bg-white sticky top-0 z-10",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>b(null),title:"Voltar","aria-label":"Voltar",className:"md:hidden p-2 hover:bg-gray-100 rounded-lg -ml-2",children:o.jsx(G3,{className:"w-6 h-6 text-gray-600"})}),o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-100 text-emerald-700 flex items-center justify-center shadow-inner",children:o.jsx(Lf,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:A.name}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[o.jsx("span",{className:"font-medium",children:A.jobTitle||"Cargo no definido"}),o.jsx("span",{children:""}),o.jsx("span",{children:A.locationId?"Local vinculado":"Sem local fixo"})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>N(!0),className:"bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-all flex items-center gap-2 shadow-sm text-sm",children:[o.jsx(Zr,{className:"w-4 h-4"}),"Nova Entrega"]}),o.jsx("button",{className:"p-2 border border-gray-200 rounded-lg hover:bg-gray-50 text-gray-600 shadow-sm transition-all",title:"Imprimir Ficha",children:o.jsx(gx,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-100 flex flex-wrap gap-4 items-center justify-between",children:[o.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 no-scrollbar",children:["todos","combustivel","oleo","pecas","materiais","ferramentas"].map(P=>o.jsx("button",{onClick:()=>E(P),className:`px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-all ${_===P?"bg-emerald-600 text-white shadow-sm":"bg-white text-gray-600 border border-gray-200 hover:border-emerald-300"}`,children:P==="todos"?"Todos":P.charAt(0).toUpperCase()+P.slice(1)},P))}),o.jsxs("div",{className:"text-xs text-gray-500 font-medium",children:[I.length," registros encontrados"]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:I.length===0?o.jsxs("div",{className:"p-20 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4 text-gray-400",children:o.jsx(mx,{className:"w-8 h-8"})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Sem histrico"}),o.jsx("p",{className:"text-gray-500 text-sm max-w-xs mx-auto mt-1",children:"Este funcionrio ainda no recebeu nenhuma entrega registrada."})]}):o.jsx("div",{className:"divide-y divide-gray-50",children:I.map(P=>o.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider ${C(P.tipo)}`,children:P.tipo}),o.jsx("span",{className:"text-xs text-gray-400 font-mono tracking-tighter",children:P.codigo})]}),o.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium bg-white px-2 py-1 rounded-full border border-gray-100 shadow-sm",children:[R(P.estado),o.jsx("span",{className:"text-gray-600 capitalize",children:P.estado})]})]}),o.jsxs("div",{className:"flex items-end justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-bold text-gray-900 group-hover:text-emerald-700 transition-colors",children:P.produto}),o.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[o.jsxs("div",{className:"text-2xl font-black text-emerald-600",children:[P.quantidade," ",o.jsx("span",{className:"text-sm font-medium text-gray-500",children:P.unidade})]}),o.jsx("div",{className:"h-4 w-px bg-gray-200"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Entrega"}),o.jsx("span",{className:"text-sm text-gray-600 font-medium",children:ur(P.data)})]})]})]}),o.jsx("div",{className:"text-right",children:P.stock_antes!==void 0&&o.jsxs("div",{className:"text-[10px] text-gray-400 flex flex-col items-end",children:[o.jsx("span",{className:"uppercase font-bold tracking-widest",children:"Saldo Stock"}),o.jsxs("div",{className:"flex items-center gap-1 mt-0.5 font-medium",children:[o.jsx("span",{children:P.stock_antes}),o.jsx(Vh,{className:"w-3 h-3"}),o.jsx("span",{className:"text-emerald-600",children:P.stock_depois})]})]})})]}),P.observacoes&&o.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg border border-gray-100 text-sm text-gray-600 italic",children:['"',P.observacoes,'"']})]},P.id))})})]}):o.jsxs("div",{className:"p-20 text-center max-w-md mx-auto",children:[o.jsx("div",{className:"w-20 h-20 bg-emerald-50 rounded-3xl flex items-center justify-center mx-auto mb-6 text-emerald-500 shadow-inner",children:o.jsx(Lf,{className:"w-10 h-10"})}),o.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Selecione um Funcionrio"}),o.jsx("p",{className:"text-gray-500 mt-2",children:"Escolha uma pessoa ao lado para visualizar seu histrico individual de entregas e consumos."}),o.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-100 grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.length}),o.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-widest font-bold",children:"Pessoas"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.length}),o.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-widest font-bold",children:"Entregas"})]})]})]})})]}),j&&o.jsx(XZ,{initialPersonId:x||void 0,allPeople:r,allItems:i,inventory:l,currentUser:t,onClose:()=>N(!1),onSave:async P=>{await u(P),N(!1)}})]})})},XZ=({initialPersonId:e,allPeople:t,allItems:r,inventory:n,currentUser:i,onClose:l,onSave:u})=>{const[d,h]=w.useState({tipo:"combustivel",entidade_id:e||"",entidade_tipo:"trabalhador",data:new Date().toISOString().split("T")[0],produto_id:"",produto:"",quantidade:1,unidade:"Unidade",observacoes:""}),[m,p]=w.useState(""),[g,x]=w.useState(!1),b=w.useMemo(()=>m?r.filter(A=>{var I;return A.name.toLowerCase().includes(m.toLowerCase())||((I=A.sku)==null?void 0:I.toLowerCase().includes(m.toLowerCase()))}):r.slice(0,5),[r,m]),j=w.useMemo(()=>t.find(A=>A.id===d.entidade_id),[t,d.entidade_id]),N=w.useMemo(()=>(j==null?void 0:j.locationId)||(i==null?void 0:i.locationId),[j,i]),_=w.useMemo(()=>{if(!d.produto_id||!N)return 0;const A=n.find(I=>I.itemId===d.produto_id&&I.locationId===N);return(A==null?void 0:A.quantity)||0},[d.produto_id,N,n]),E=A=>{if(A.preventDefault(),!d.entidade_id||!d.produto){alert("Por favor, selecione o funcionrio e o produto.");return}u(d)},k=A=>{h({...d,produto_id:A.id,produto:A.name,unidade:A.unit||"Unidade"}),p(A.name),x(!1)};return o.jsx("div",{className:"fixed inset-0 bg-gray-900/60 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[o.jsxs("div",{className:"bg-emerald-600 p-6 text-white flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold",children:"Registrar Entrega de Material"}),o.jsx("p",{className:"text-emerald-100 text-xs mt-1 uppercase tracking-widest font-bold",children:"Sada de Stock Individual"})]}),o.jsx("button",{title:"Fechar","aria-label":"Fechar",onClick:l,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:o.jsx(sn,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:E,className:"p-8 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"col-span-1 md:col-span-2",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Funcionrio / Beneficirio"}),o.jsxs("select",{id:"ficha-entidade",title:"Funcionrio","aria-label":"Funcionrio",value:d.entidade_id,onChange:A=>h({...d,entidade_id:A.target.value}),className:"w-full border border-gray-200 rounded-xl p-3 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all",required:!0,children:[o.jsx("option",{value:"",children:"Selecione um funcionrio..."}),t.map(A=>o.jsxs("option",{value:A.id,children:[A.name," (",A.jobTitle||"Sem cargo",")"]},A.id))]})]}),o.jsxs("div",{className:"col-span-1 md:col-span-2 relative",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Produto / Material"}),o.jsxs("div",{className:"relative",children:[o.jsx(xs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{id:"ficha-search-product",title:"Pesquisar produto no inventrio","aria-label":"Pesquisar produto no inventrio",type:"text",placeholder:"Buscar no inventrio...",value:m,onChange:A=>{p(A.target.value),x(!0)},onFocus:()=>x(!0),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500 outline-none transition-all"}),g&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-100 rounded-xl shadow-xl z-20 max-h-48 overflow-y-auto",children:b.map(A=>o.jsxs("button",{type:"button",onClick:()=>k(A),className:"w-full p-3 text-left hover:bg-emerald-50 flex items-center justify-between border-b border-gray-50 last:border-0",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-gray-900",children:A.name}),o.jsxs("div",{className:"text-[10px] text-gray-500 uppercase tracking-wide",children:[A.category,"  SKU: ",A.sku]})]}),o.jsx(Vh,{className:"w-4 h-4 text-gray-300"})]},A.id))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Categoria da Ficha"}),o.jsxs("select",{id:"ficha-tipo",title:"Categoria da ficha","aria-label":"Categoria da ficha",value:d.tipo,onChange:A=>h({...d,tipo:A.target.value}),className:"w-full border border-gray-200 rounded-xl p-3 text-sm focus:ring-2 focus:ring-emerald-500 outline-none",children:[o.jsx("option",{value:"combustivel",children:"Combustvel"}),o.jsx("option",{value:"oleo",children:"leo"}),o.jsx("option",{value:"pecas",children:"Peas"}),o.jsx("option",{value:"materiais",children:"Materiais"}),o.jsx("option",{value:"ferramentas",children:"Ferramentas"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Data de Entrega"}),o.jsx("input",{id:"ficha-data",title:"Data da entrega","aria-label":"Data da entrega",type:"date",value:d.data,onChange:A=>h({...d,data:A.target.value}),className:"w-full border border-gray-200 rounded-xl p-3 text-sm focus:ring-2 focus:ring-emerald-500 outline-none",required:!0})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-2xl border border-gray-100 col-span-1 md:col-span-2",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"Quantidade a Entregar"}),d.produto_id&&o.jsxs("div",{className:"text-[10px] font-bold text-gray-400 bg-white px-2 py-1 rounded-full border border-gray-100 shadow-sm",children:["STOCK DISPONVEL: ",o.jsxs("span",{className:"text-emerald-600",children:[_," ",d.unidade]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx("input",{id:"ficha-quantidade",title:"Quantidade a entregar","aria-label":"Quantidade a entregar",type:"number",step:"0.01",placeholder:"0.00",value:d.quantidade,onChange:A=>h({...d,quantidade:parseFloat(A.target.value)}),min:"0.01",className:"w-full border border-gray-200 rounded-xl p-3 text-lg font-bold text-emerald-700 focus:ring-2 focus:ring-emerald-500 outline-none",required:!0}),o.jsx("div",{className:"flex items-center px-4 bg-white border border-gray-200 rounded-xl text-sm font-medium text-gray-600",children:d.unidade})]})]}),o.jsxs("div",{className:"col-span-1 md:col-span-2",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Notas / Observaes"}),o.jsx("textarea",{value:d.observacoes,onChange:A=>h({...d,observacoes:A.target.value}),className:"w-full border border-gray-200 rounded-xl p-3 text-sm focus:ring-2 focus:ring-emerald-500 outline-none min-h-[80px]",placeholder:"Ex: Entrega para manuteno de campo, requisio extra, etc."})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-100",children:[o.jsx("button",{type:"button",onClick:l,className:"flex-1 px-6 py-3 bg-gray-100 text-gray-600 font-bold rounded-xl hover:bg-gray-200 transition-colors uppercase tracking-widest text-xs",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-[2] px-6 py-3 bg-emerald-600 text-white font-bold rounded-xl hover:bg-emerald-700 shadow-lg shadow-emerald-200 transition-all uppercase tracking-widest text-xs",children:"Confirmar Entrega"})]})]})]})})},ws={async createGroup(e,t,r,n){const{data:{user:i}}=await ne.auth.getUser();if(!i)throw new Error("User not authenticated");const{data:l,error:u}=await ne.from("chat_groups").insert({name:e,type:t,description:r,location_id:n,created_by:i.id}).select().single();if(u)throw u;return l},async getUserGroups(){const{data:{user:e}}=await ne.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:t,error:r}=await ne.from("chat_groups").select(`
        *,
        chat_group_members(*),
        chat_messages(created_at)
      `).eq("chat_group_members.user_id",e.id).order("created_at",{ascending:!1});return r?(console.error("Error fetching user chat groups:",r),[]):t},async getGroupDetails(e){const{data:t,error:r}=await ne.from("chat_groups").select(`
        *,
        chat_group_members(*)
      `).eq("id",e).single();if(r)throw r;return t},async addGroupMember(e,t,r="MEMBER"){const{data:n,error:i}=await ne.from("chat_group_members").insert({group_id:e,user_id:t,role:r}).select().single();if(i)throw i;return n},async removeGroupMember(e,t){const{error:r}=await ne.from("chat_group_members").delete().eq("group_id",e).eq("user_id",t);if(r)throw r},async getOrCreateDirectGroup(e,t){const[r,n]=[e,t].sort(),i=`DIRECT-${r.slice(0,8)}-${n.slice(0,8)}`,{data:l,error:u}=await ne.from("chat_groups").select("*").eq("name",i).eq("type","DIRECT").single();if(u&&u.code!=="PGRST116")throw u;if(l)return l;const{data:d,error:h}=await ne.from("chat_groups").insert({name:i,type:"DIRECT",created_by:e}).select().single();if(h)throw h;return await ws.addGroupMember(d.id,e),await ws.addGroupMember(d.id,t),d},async sendMessage(e,t,r="TEXT"){const{data:{user:n}}=await ne.auth.getUser();if(!n)throw new Error("User not authenticated");const{data:i,error:l}=await ne.from("chat_messages").insert({group_id:e,sender_id:n.id,content:t,message_type:r}).select().single();if(l)throw l;return i},async getGroupMessages(e,t=50,r=0){const{data:n,error:i}=await ne.from("chat_messages").select(`
        *,
        chat_file_attachments(*)
      `).eq("group_id",e).eq("is_deleted",!1).order("created_at",{ascending:!1}).range(r,r+t-1);if(i)throw i;return(n==null?void 0:n.reverse())||[]},async editMessage(e,t){const{data:{user:r}}=await ne.auth.getUser();if(!r)throw new Error("User not authenticated");const{data:n,error:i}=await ne.from("chat_messages").update({content:t,is_edited:!0,edited_at:new Date().toISOString()}).eq("id",e).eq("sender_id",r.id).select().single();if(i)throw i;return n},async deleteMessage(e){const{data:{user:t}}=await ne.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:r,error:n}=await ne.from("chat_messages").update({is_deleted:!0,deleted_by:t.id}).eq("id",e).eq("sender_id",t.id).select().single();if(n)throw n;return r},async markMessageAsRead(e){const{data:{user:t}}=await ne.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:r,error:n}=await ne.from("chat_message_reads").insert({message_id:e,user_id:t.id}).select().single();if(n&&n.code!=="23505")throw n;return r},async getUnreadCount(e){const{data:{user:t}}=await ne.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:r,error:n}=await ne.from("chat_messages").select("id").eq("group_id",e).not("chat_message_reads","is",null);if(n)throw n;return(r==null?void 0:r.length)||0},async validateFileUpload(e,t){const{data:{session:r}}=await ne.auth.getSession();if(!(r!=null&&r.access_token))throw new Error("User not authenticated");const n=await fetch("/functions/v1/validate-chat-file",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.access_token}`},body:JSON.stringify({fileSize:e.size,mimeType:e.type,groupId:t})});if(!n.ok){const i=await n.json();throw new Error(i.error||"File validation failed")}return await n.json()},async uploadFile(e,t,r){var p;const n=await ws.validateFileUpload(e,t),i=`${t}/${r}/${e.name}`,{data:l,error:u}=await ne.storage.from("chat-files").upload(i,e);if(u)throw u;const d="https://kwnbyiqzrphkembkwyvd.supabase.co",{data:h,error:m}=await ne.from("chat_file_attachments").insert({message_id:r,file_name:e.name,file_url:`${d}/storage/v1/object/public/chat-files/${i}`,file_size:e.size,mime_type:e.type,storage_path:i,uploaded_by:((p=(await ne.auth.getUser()).data.user)==null?void 0:p.id)||"",expires_at:n.expiresAt}).select().single();if(m)throw m;return h},async getFileDownloadUrl(e,t=900){const{data:r,error:n}=await ne.storage.from("chat-files").createSignedUrl(e,t);if(n)throw n;return r.signedUrl},async getMessageAttachments(e){const{data:t,error:r}=await ne.from("chat_file_attachments").select("*").eq("message_id",e).order("uploaded_at",{ascending:!1});if(r)throw r;return t},async addReaction(e,t){const{data:{user:r}}=await ne.auth.getUser();if(!r)throw new Error("User not authenticated");const{data:n,error:i}=await ne.from("chat_reactions").insert({message_id:e,user_id:r.id,emoji:t}).select().single();if(i&&i.code!=="23505")throw i;return n},async removeReaction(e,t){const{data:{user:r}}=await ne.auth.getUser();if(!r)throw new Error("User not authenticated");const{error:n}=await ne.from("chat_reactions").delete().eq("message_id",e).eq("user_id",r.id).eq("emoji",t);if(n)throw n},async getMessageReactions(e){const{data:t,error:r}=await ne.from("chat_reactions").select("*").eq("message_id",e);if(r)throw r;return(t||[]).reduce((i,l)=>(i[l.emoji]||(i[l.emoji]=[]),i[l.emoji].push(l.user_id),i),{})}},ZZ=()=>{const{currentUser:e,allUsers:t}=Nr(),[r,n]=w.useState([]),[i,l]=w.useState(null),[u,d]=w.useState([]),[h,m]=w.useState(""),[p,g]=w.useState(new Set),[x,b]=w.useState(!1),[j,N]=w.useState(""),[_,E]=w.useState(!1),[k,A]=w.useState(null);w.useEffect(()=>{I()},[]),w.useEffect(()=>{if(!i)return;let H;return(async()=>{H=await f3(ne,i.id,U=>{d(ce=>[...ce,U.new])})})(),R(i.id),()=>{H&&H()}},[i]),w.useEffect(()=>{if(!i)return;let H;return(async()=>{H=await h3(ne,i.id,U=>{g(ce=>{const G=new Set(ce);return U.isTyping?G.add(U.userId):G.delete(U.userId),G})})})(),()=>{H&&H()}},[i]);const I=async()=>{try{const H=await ws.getUserGroups();n(H),H.length>0&&l(H[0])}catch(H){A({type:"error",message:`Erro ao carregar conversas: ${H instanceof Error?H.message:String(H)}`})}},R=async H=>{b(!0);try{const $=await ws.getGroupMessages(H);d($)}catch($){A({type:"error",message:`Erro ao carregar mensagens: ${$ instanceof Error?$.message:String($)}`})}finally{b(!1)}},C=async()=>{if(!(!h.trim()||!i))try{await ws.sendMessage(i.id,h),m(""),await l0(ne,i.id,(e==null?void 0:e.id)||"",!1)}catch(H){A({type:"error",message:`Erro ao enviar mensagem: ${H instanceof Error?H.message:String(H)}`})}},P=async()=>{i&&(await l0(ne,i.id,(e==null?void 0:e.id)||"",!0),setTimeout(()=>{h.trim()||l0(ne,i.id,(e==null?void 0:e.id)||"",!1)},3e3))},Y=r.filter(H=>H.name.toLowerCase().includes(j.toLowerCase())),oe=()=>p.size===0?"":`${Array.from(p).map($=>{var U;return(U=t.find(ce=>ce.id===$))==null?void 0:U.name}).filter(Boolean).join(", ")} is typing...`;return o.jsxs("div",{className:"flex h-screen bg-gray-100",children:[o.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(ov,{size:24,className:"text-blue-600"}),"Chats"]}),o.jsx("button",{onClick:()=>E(!0),className:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Nova conversa","aria-label":"Criar nova conversa",children:o.jsx(Zr,{size:20,className:"text-blue-600"})})]}),o.jsx("input",{type:"text",placeholder:"Procurar conversas...",value:j,onChange:H=>N(H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:Y.map(H=>o.jsxs("button",{onClick:()=>l(H),className:`w-full px-4 py-3 text-left border-b border-gray-100 hover:bg-gray-50 transition ${(i==null?void 0:i.id)===H.id?"bg-blue-50":""}`,children:[o.jsx("p",{className:"font-medium text-gray-800 truncate",children:H.name}),o.jsx("p",{className:"text-xs text-gray-500",children:H.type==="DIRECT"?"Direct message":H.type})]},H.id))})]}),o.jsx("div",{className:"flex-1 flex flex-col bg-white",children:i?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800",children:i.name}),o.jsx("p",{className:"text-sm text-gray-500",children:i.description})]}),o.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition","aria-label":"Configuraes da conversa",children:o.jsx(yx,{size:20,className:"text-gray-600"})})]}),k&&o.jsx("div",{className:`p-3 text-sm ${k.type==="error"?"bg-red-100 text-red-800 border border-red-300":k.type==="success"?"bg-green-100 text-green-800 border border-green-300":"bg-blue-50 text-blue-800 border border-blue-100"} `,children:k.message}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[x?o.jsx("div",{className:"text-center text-gray-500",children:"Carregando mensagens..."}):u.length===0?o.jsx("div",{className:"text-center text-gray-500 mt-8",children:"Nenhuma mensagem ainda. Comece a conversa!"}):u.map(H=>{const $=t.find(U=>U.id===H.sender_id);return o.jsx("div",{className:`flex ${H.sender_id===(e==null?void 0:e.id)?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:`max-w-xs px-4 py-2 rounded-lg ${H.sender_id===(e==null?void 0:e.id)?"bg-blue-600 text-white":"bg-gray-200 text-gray-800"}`,children:[H.sender_id!==(e==null?void 0:e.id)&&o.jsx("p",{className:"text-xs font-semibold mb-1",children:$==null?void 0:$.name}),o.jsx("p",{className:"text-sm break-words",children:H.content}),o.jsx("p",{className:"text-xs mt-1 opacity-70",children:new Date(H.created_at).toLocaleTimeString()})]})},H.id)}),oe()&&o.jsx("div",{className:"text-sm text-gray-500 italic",children:oe()})]}),o.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"p-2 hover:bg-gray-200 rounded-lg transition","aria-label":"Anexar ficheiro",title:"Anexar ficheiro",children:o.jsx(lv,{size:20,className:"text-gray-600"})}),o.jsx("input",{type:"text",placeholder:"Escreva uma mensagem...",value:h,onChange:H=>m(H.target.value),onKeyUp:P,onKeyPress:H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),C())},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsxs("button",{onClick:C,disabled:!h.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition flex items-center gap-2",children:[o.jsx(B5,{size:18}),"Enviar"]})]})})]}):o.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:o.jsxs("div",{className:"text-center",children:[o.jsx(ov,{size:48,className:"mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"Selecione uma conversa para comear"})]})})}),_&&o.jsx(QZ,{onClose:()=>E(!1),onGroupCreated:()=>{I(),E(!1)}})]})},QZ=({onClose:e,onGroupCreated:t})=>{const{allUsers:r,currentUser:n}=Nr(),[i,l]=w.useState("direct"),[u,d]=w.useState(""),[h,m]=w.useState("GROUP"),[p,g]=w.useState(null),[x,b]=w.useState(!1),[j,N]=w.useState(null),[_,E]=w.useState(""),[k,A]=w.useState(0),I=r.filter(H=>H.id!==(n==null?void 0:n.id)).filter(H=>H.name.toLowerCase().includes(_.toLowerCase())||(H.email||"").toLowerCase().includes(_.toLowerCase()));w.useEffect(()=>{A(0)},[_]);const R=H=>{if(i==="direct"){if(H.key==="ArrowDown")H.preventDefault(),A($=>Math.min($+1,I.length-1));else if(H.key==="ArrowUp")H.preventDefault(),A($=>Math.max($-1,0));else if(H.key==="Enter"){H.preventDefault();const $=I[k];$&&g($.id)}}},C=async()=>{if(!p){N("Selecione um usurio para iniciar a conversa.");return}b(!0);try{const H=r.find(U=>U.id===p);if(!H)throw new Error("Usurio no encontrado");const $=n;if(!$)throw new Error("Usurio atual no identificado");await ws.getOrCreateDirectGroup($.id,H.id),t()}catch(H){N(H instanceof Error?H.message:String(H))}finally{b(!1)}},P=async()=>{if(u.trim()){b(!0);try{await ws.createGroup(u,h),t()}catch(H){N(H instanceof Error?H.message:String(H))}finally{b(!1)}}},Y=(H="")=>H.split(" ").map($=>$[0]).slice(0,2).join("").toUpperCase(),oe=H=>{if(!H)return"";const $=new Date(H).getTime(),U=Date.now(),ce=Math.max(0,Math.floor((U-$)/1e3));return ce<60?"agora":ce<3600?`h ${Math.floor(ce/60)}m`:ce<86400?`h ${Math.floor(ce/3600)}h`:`h ${Math.floor(ce/86400)}d`};return o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",onKeyDown:R,tabIndex:-1,children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl p-6 w-full max-w-lg mx-4 max-h-[80vh] overflow-y-auto transform transition-all duration-200 ease-out scale-100 motion-safe:animate-fadeIn",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Nova Conversa"}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded","aria-label":"Fechar",title:"Fechar",children:o.jsx(sn,{size:20})})})]}),o.jsxs("div",{className:"flex gap-2 mb-4 border-b border-gray-200",children:[o.jsx("button",{onClick:()=>l("direct"),className:`flex-1 py-2 text-sm font-medium border-b-2 transition ${i==="direct"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,"aria-label":"Conversa Direta",title:"Conversa Direta",children:"Direto"}),o.jsx("button",{onClick:()=>l("group"),className:`flex-1 py-2 text-sm font-medium border-b-2 transition ${i==="group"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,"aria-label":"Novo Grupo",title:"Novo Grupo",children:"Grupo/Canal"})]}),i==="direct"&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{children:o.jsx("input",{type:"text",value:_,onChange:H=>E(H.target.value),placeholder:"Procurar usurio por nome ou email...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Buscar usurio"})}),o.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:I.length>0?I.map((H,$)=>o.jsxs("button",{onClick:()=>{g(H.id),A($)},className:`w-full p-3 text-left rounded-lg transition flex items-center gap-3 border-2 ${p===H.id?"border-blue-600 bg-blue-50 shadow-sm":k===$?"border-gray-300 bg-gray-50":"border-transparent hover:bg-gray-50"}`,"aria-label":`Selecionar ${H.name}`,title:H.name,children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-pink-500 flex items-center justify-center text-white font-semibold",children:Y(H.name)}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`w-2 h-2 rounded-full ${H.isOnline?"bg-emerald-400":"bg-gray-300"}`,"aria-hidden":"true"}),o.jsx("div",{className:"font-medium text-gray-900",children:H.name})]}),o.jsx("div",{className:"text-xs text-gray-500",children:H.email||""}),o.jsx("div",{className:"text-xs text-gray-400",children:H.isOnline?"Online":H.lastSeen?`Visto ${oe(H.lastSeen)}`:"Offline"})]}),o.jsx("div",{className:"text-xs text-gray-400",children:H.role})]},H.id)):o.jsx("div",{className:"text-center py-6 text-gray-500",children:"Nenhum usurio encontrado"})}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition","aria-label":"Cancelar",children:"Cancelar"}),o.jsx("button",{onClick:C,disabled:!p||x,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition flex items-center justify-center gap-2","aria-label":"Abrir conversa",children:x?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}),"Abrindo..."]}):"Abrir"})]})]}),i==="group"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Conversa"}),o.jsx("input",{type:"text",value:u,onChange:H=>d(H.target.value),placeholder:"Ex: Marketing Team",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Nome do grupo"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),o.jsxs("select",{value:h,onChange:H=>m(H.target.value),"aria-label":"Tipo de conversa",title:"Selecione o tipo de conversa",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"GROUP",children:"Grupo"}),o.jsx("option",{value:"CHANNEL",children:"Canal"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition","aria-label":"Cancelar",children:"Cancelar"}),o.jsx("button",{onClick:P,disabled:!u.trim()||x,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition","aria-label":"Criar grupo",children:x?"Criando...":"Criar"})]})]}),j&&o.jsx("div",{className:"mt-4 p-3 text-sm bg-red-100 text-red-800 border border-red-300 rounded",children:j})]})})};async function JZ(e=1){const{data:t,error:r}=await ne.from("v_overdue_installments").select("*").gte("days_overdue",e).order("days_overdue",{ascending:!1});if(r)throw r;return t||[]}async function eQ(e){let t=ne.from("v_client_balances").select("*");const{data:r,error:n}=await t.order("overdue_amount",{ascending:!1});if(n)throw n;return r||[]}async function tQ(e=30,t=50){const{data:r,error:n}=await ne.from("v_client_balances").select("*").gte("max_days_overdue",e).gte("overdue_invoice_count",1).order("max_days_overdue",{ascending:!1}).limit(t);if(n)throw n;return r||[]}async function rQ(e,t=1){let r=ne.from("v_overdue_invoices").select("*").gte("days_overdue",t);e&&(r=r.eq("location_id",e));const{data:n,error:i}=await r.order("days_overdue",{ascending:!1});if(i)throw i;return n||[]}async function nQ(e){let t=ne.from("v_overdue_invoices").select("*");e&&(t=t.eq("location_id",e));const{data:r,error:n}=await t;if(n)throw n;const i={totalOverdue:(r==null?void 0:r.length)||0,totalOverdueAmount:0,byStatus:{due:0,overdue30:0,overdue60:0,overdue90:0},averageDaysOverdue:0};return r&&r.length>0&&(i.totalOverdueAmount=r.reduce((l,u)=>l+(u.valor_total||0),0),i.averageDaysOverdue=Math.round(r.reduce((l,u)=>l+(u.days_overdue||0),0)/r.length),r.forEach(l=>{l.collection_status==="DUE"?i.byStatus.due++:l.collection_status==="OVERDUE_30"?i.byStatus.overdue30++:l.collection_status==="OVERDUE_60"?i.byStatus.overdue60++:l.collection_status==="OVERDUE_90"&&i.byStatus.overdue90++})),i}function aQ(){const{invoices:e,selectedDepartmentId:t}=Nr(),[r,n]=w.useState(!0),[i,l]=w.useState(null),[u,d]=w.useState("overview"),[h,m]=w.useState("all"),[p,g]=w.useState(null),[x,b]=w.useState([]),[j,N]=w.useState([]),[_,E]=w.useState([]),[k,A]=w.useState([]);w.useEffect(()=>{I()},[t,h]);const I=async()=>{try{n(!0);const[C,P,Y,oe,H]=await Promise.all([nQ(t||""),tQ(parseInt(h==="all"?"1":h)),rQ(t||"",1),eQ(),JZ(1)]);g(C),b(P),N(Y),E(oe),A(H)}catch(C){l({type:"error",message:`Error loading collections data: ${C instanceof Error?C.message:String(C)}`})}finally{n(!1)}},R=C=>C<=0?{label:"No Vencida",color:"bg-green-100 text-green-800"}:C<=30?{label:"Vencida",color:"bg-yellow-100 text-yellow-800"}:C<=60?{label:"Atraso 30+ dias",color:"bg-orange-100 text-orange-800"}:C<=90?{label:"Atraso 60+ dias",color:"bg-red-100 text-red-800"}:{label:"Atraso 90+ dias",color:"bg-red-200 text-red-900"};return r?o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx("div",{className:"text-gray-500",children:"Carregando..."})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("h1",{className:"text-4xl font-bold text-slate-900 flex items-center gap-3",children:[o.jsx(Gn,{className:"w-10 h-10 text-blue-600"}),"Contas a Receber"]}),o.jsx("p",{className:"text-slate-600 mt-2",children:"Dashboard de cobranas, atrasos e parcelamentos"})]}),i&&o.jsx("div",{className:`p-3 rounded text-sm mb-6 ${i.type==="success"?"bg-green-100 border border-green-300 text-green-800":i.type==="error"?"bg-red-100 border border-red-300 text-red-800":"bg-blue-50 border border-blue-100 text-blue-800"}`,children:i.message}),p&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-red-500",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Faturas Atrasadas"}),o.jsx("p",{className:"text-3xl font-bold text-slate-900",children:p.totalOverdue})]}),o.jsx(so,{className:"w-10 h-10 text-red-500 opacity-50"})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-orange-500",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Montante Atrasado"}),o.jsxs("p",{className:"text-3xl font-bold text-slate-900",children:[(p.totalOverdueAmount/1e3).toFixed(1),"K"]})]}),o.jsx(vx,{className:"w-10 h-10 text-orange-500 opacity-50"})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-yellow-500",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Dias Mdios de Atraso"}),o.jsx("p",{className:"text-3xl font-bold text-slate-900",children:p.averageDaysOverdue})]}),o.jsx(iu,{className:"w-10 h-10 text-yellow-500 opacity-50"})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-purple-500",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Clientes c/ Atraso"}),o.jsx("p",{className:"text-3xl font-bold text-slate-900",children:x.length})]}),o.jsx(Eu,{className:"w-10 h-10 text-purple-500 opacity-50"})]})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-6",children:[o.jsx("div",{className:"flex border-b border-slate-200",children:["overview","clientes","faturas","parcelamentos"].map(C=>o.jsxs("button",{onClick:()=>d(C),className:`flex-1 px-6 py-3 text-sm font-medium transition-colors ${u===C?"border-b-2 border-blue-600 text-blue-600":"text-slate-600 hover:text-slate-900"}`,children:[C==="overview"&&"Viso Geral",C==="clientes"&&"Clientes",C==="faturas"&&"Faturas",C==="parcelamentos"&&"Parcelamentos"]},C))}),o.jsxs("div",{className:"p-6",children:[u==="overview"&&o.jsxs("div",{className:"space-y-6",children:[p&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 rounded p-4 border-l-4 border-blue-500",children:[o.jsx("p",{className:"text-xs text-slate-600",children:"Vencidas"}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:p.byStatus.due})]}),o.jsxs("div",{className:"bg-yellow-50 rounded p-4 border-l-4 border-yellow-500",children:[o.jsx("p",{className:"text-xs text-slate-600",children:"30+ dias"}),o.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:p.byStatus.overdue30})]}),o.jsxs("div",{className:"bg-orange-50 rounded p-4 border-l-4 border-orange-500",children:[o.jsx("p",{className:"text-xs text-slate-600",children:"60+ dias"}),o.jsx("p",{className:"text-2xl font-bold text-orange-600",children:p.byStatus.overdue60})]}),o.jsxs("div",{className:"bg-red-50 rounded p-4 border-l-4 border-red-500",children:[o.jsx("p",{className:"text-xs text-slate-600",children:"90+ dias"}),o.jsx("p",{className:"text-2xl font-bold text-red-600",children:p.byStatus.overdue90})]})]}),o.jsxs("div",{className:"mt-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[o.jsx(so,{className:"w-5 h-5 text-red-500"}),"Clientes Prioritrios para Cobrana"]}),o.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:x.slice(0,10).map(C=>{var P;return o.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-semibold text-slate-900",children:C.clientName}),o.jsxs("p",{className:"text-sm text-slate-600",children:["NUIT: ",C.nuit||"N/A"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-semibold text-red-600",children:(P=C.overdueAmount)==null?void 0:P.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})}),o.jsxs("p",{className:"text-sm text-slate-600",children:[C.maxDaysOverdue," dias de atraso"]})]})]},C.clientId)})})]})]}),u==="clientes"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex items-center gap-4 mb-4",children:o.jsx("div",{className:"flex gap-2",children:["all","30","60","90"].map(C=>o.jsx("button",{onClick:()=>m(C),className:`px-4 py-2 rounded text-sm font-medium transition-colors ${h===C?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:C==="all"?"Todos":`${C}+ dias`},C))})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-slate-100 border-b border-slate-300",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left font-semibold text-slate-900",children:"Cliente"}),o.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-900",children:"Saldo Pendente"}),o.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-900",children:"Montante Atrasado"}),o.jsx("th",{className:"px-4 py-2 text-right font-semibold text-slate-900",children:"Dias Atraso"}),o.jsx("th",{className:"px-4 py-2 text-center font-semibold text-slate-900",children:"Faturas"}),o.jsx("th",{className:"px-4 py-2 text-center font-semibold text-slate-900",children:"Aes"})]})}),o.jsx("tbody",{children:_.map(C=>{var P,Y;return o.jsxs("tr",{className:"border-b border-slate-200 hover:bg-slate-50",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-slate-900",children:C.clientName}),o.jsx("p",{className:"text-xs text-slate-600",children:C.nuit})]})}),o.jsx("td",{className:"px-4 py-3 text-right font-semibold text-slate-900",children:(P=C.outstandingAmount)==null?void 0:P.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})}),o.jsx("td",{className:"px-4 py-3 text-right",children:o.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-semibold ${C.overdueAmount&&C.overdueAmount>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:(Y=C.overdueAmount)==null?void 0:Y.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})})}),o.jsx("td",{className:"px-4 py-3 text-right",children:o.jsx("span",{className:`inline-block px-2 py-1 rounded text-sm font-semibold ${C.maxDaysOverdue>90?"bg-red-100 text-red-800":C.maxDaysOverdue>60?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:C.maxDaysOverdue})}),o.jsx("td",{className:"px-4 py-3 text-center",children:C.overdueInvoiceCount}),o.jsxs("td",{className:"px-4 py-3 text-center flex gap-2 justify-center",children:[o.jsx("button",{className:"p-1 hover:bg-slate-200 rounded transition-colors",title:"Enviar Email",children:o.jsx(D_,{className:"w-4 h-4 text-blue-600"})}),o.jsx("button",{className:"p-1 hover:bg-slate-200 rounded transition-colors",title:"Agendar Chamada",children:o.jsx(T5,{className:"w-4 h-4 text-green-600"})})]})]},C.clientId)})})]})})]}),u==="faturas"&&o.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:j.map(C=>{var Y;const P=R(C.daysOverdue);return o.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors border-l-4 border-red-500",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(la,{className:"w-5 h-5 text-slate-600"}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-semibold text-slate-900",children:["Fatura ",C.numero]}),o.jsx("p",{className:"text-sm text-slate-600",children:C.clientName})]})]})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-semibold text-red-600",children:(Y=C.valorTotal)==null?void 0:Y.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})}),o.jsxs("p",{className:"text-sm text-slate-600",children:["Venceu em ",ur(C.dueDate)]})]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${P.color}`,children:P.label}),o.jsx(Vf,{className:"w-5 h-5 text-slate-400"})]})]},C.id)})}),u==="parcelamentos"&&o.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:k.length>0?k.map(C=>{var P;return o.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors border-l-4 border-orange-500",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Su,{className:"w-5 h-5 text-slate-600"}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-semibold text-slate-900",children:["Parcela ",C.installmentNumber,"/",C.totalInstallments]}),o.jsxs("p",{className:"text-sm text-slate-600",children:["Vencimento: ",ur(C.dueDate)]})]})]})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-semibold text-orange-600",children:(P=C.installmentAmount)==null?void 0:P.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})}),o.jsxs("p",{className:"text-sm text-slate-600",children:["Atraso: ",C.daysOverdue," dias"]})]}),o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-800",children:C.status}),o.jsx(Vf,{className:"w-5 h-5 text-slate-400"})]})]},C.id)}):o.jsx("div",{className:"text-center py-8 text-slate-500",children:"Nenhum parcelamento com atraso"})})]})]}),o.jsxs("div",{className:"flex gap-4 justify-end",children:[o.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-slate-200 text-slate-900 hover:bg-slate-300 transition-colors font-medium",children:[o.jsx(hx,{className:"w-4 h-4"}),"Exportar Relatrio"]}),o.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors font-medium",children:[o.jsx(D_,{className:"w-4 h-4"}),"Enviar Recordatrios"]})]})]})}async function iQ(e){const{data:t,error:r}=await ne.from("transactions").select("*").eq("id",e).eq("type","EXPENSE").single();if(r)throw r;return t}async function sQ(e){const{data:t,error:r}=await ne.from("expense_attachments").select("*").eq("transaction_id",e).order("uploaded_at",{ascending:!1});if(r)throw r;return t||[]}async function oQ(e,t=50){let r=ne.from("v_pending_expense_approvals").select("*");const{data:n,error:i}=await r.limit(t).order("date",{ascending:!1});if(i)throw i;return n||[]}async function lQ(e,t,r){const{data:n,error:i}=await ne.from("transactions").update({approval_status:"APPROVED",approved_by:t,approval_date:new Date().toISOString(),notes:r,requires_approval:!1}).eq("id",e).eq("type","EXPENSE").select().single();if(i)throw i;return n}async function cQ(e,t){const{data:r,error:n}=await ne.from("transactions").update({approval_status:"REJECTED",rejection_reason:t,requires_approval:!1}).eq("id",e).eq("type","EXPENSE").select().single();if(n)throw n;return r}async function uQ(e){const t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1).toISOString().split("T")[0],n=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString().split("T")[0],{data:i,error:l}=await ne.from("v_expense_budget_summary").select("*").eq("cost_center_id",e).gte("period_start",r).lte("period_end",n).single();if(l&&l.code!=="PGRST116")throw l;return i||null}async function yR(e){let t=ne.from("v_expense_budget_summary").select("*");const r=new Date,n=new Date(r.getFullYear(),r.getMonth(),1).toISOString().split("T")[0],i=new Date(r.getFullYear(),r.getMonth()+1,0).toISOString().split("T")[0],{data:l,error:u}=await t.gte("period_start",n).lte("period_end",i).order("percentage_used",{ascending:!1});if(u)throw u;return l||[]}async function dQ(e,t){const r=await uQ(e);if(!r||!r.budgetAmount)return{canApprove:!0,message:"Sem limite de oramento definido",percentageAfter:0};const n=r.spentAmount+t,i=n/r.budgetAmount*100;return{canApprove:n<=r.budgetAmount,message:i>100?`Excede oramento em ${(i-100).toFixed(2)}%`:`Utilizaria ${i.toFixed(2)}% do oramento`,percentageAfter:i}}async function fQ(e){let t=ne.from("v_expenses_by_category").select("*");const{data:r,error:n}=await t;if(n)throw n;return r||[]}async function hQ(e,t=!0){let r=ne.from("cost_centers").select("*");t&&(r=r.eq("is_active",!0)),e&&(r=r.eq("location_id",e));const{data:n,error:i}=await r.order("name");if(i)throw i;return n||[]}function mQ(){const{currentUser:e,selectedDepartmentId:t}=Nr(),[r,n]=w.useState(!0),[i,l]=w.useState("pending"),[u,d]=w.useState(null),[h,m]=w.useState([]),[p,g]=w.useState(null),[x,b]=w.useState([]),[j,N]=w.useState(!1),[_,E]=w.useState([]),[k,A]=w.useState(""),[I,R]=w.useState(null);w.useEffect(()=>{C()},[t]);const C=async()=>{try{n(!0);const[$,U]=await Promise.all([oQ(t||""),yR(t||"")]);m($),E(U)}catch($){d({type:"error",message:`Error loading expense data: ${$ instanceof Error?$.message:String($)}`})}finally{n(!1)}},P=async $=>{try{const U=await iQ($.id),ce=await sQ($.id);if(g(U),b(ce),U.costCenterId){const G=await dQ(U.costCenterId,U.amount);G.canApprove?R(null):R(G.message)}N(!0)}catch(U){d({type:"error",message:`Error loading expense details: ${U instanceof Error?U.message:String(U)}`})}},Y=async()=>{if(!(!p||!e))try{await lQ(p.id,e.id),m(h.filter($=>$.id!==p.id)),N(!1),g(null),A("")}catch($){d({type:"error",message:`Error approving expense: ${$ instanceof Error?$.message:String($)}`})}},oe=async()=>{if(!p||!k.trim()){alert("Por favor, fornea uma razo para a rejeio"),d({type:"info",message:"Por favor, fornea uma razo para a rejeio"});return}try{await cQ(p.id,k),m(h.filter($=>$.id!==p.id)),N(!1),g(null),A("")}catch($){d({type:"error",message:`Error rejecting expense: ${$ instanceof Error?$.message:String($)}`})}},H=$=>{switch($){case"EXCEEDED":return"bg-red-100 text-red-800 border-red-300";case"CRITICAL":return"bg-orange-100 text-orange-800 border-orange-300";case"WARNING":return"bg-yellow-100 text-yellow-800 border-yellow-300";default:return"bg-green-100 text-green-800 border-green-300"}};return e?o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("h1",{className:"text-4xl font-bold text-slate-900 flex items-center gap-3",children:[o.jsx(Gn,{className:"w-10 h-10 text-blue-600"}),"Aprovao de Despesas"]}),o.jsx("p",{className:"text-slate-600 mt-2",children:"Revise e aprove despesas pendentes | Monitorize oramentos"})]}),u&&o.jsx("div",{className:`p-3 rounded text-sm mb-6 ${u.type==="success"?"bg-green-100 border border-green-300 text-green-800":u.type==="error"?"bg-red-100 border border-red-300 text-red-800":"bg-blue-50 border border-blue-100 text-blue-800"}`,children:u.message}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-6",children:[o.jsx("div",{className:"flex border-b border-slate-200",children:["pending","budgets"].map($=>o.jsxs("button",{onClick:()=>l($),className:`flex-1 px-6 py-3 text-sm font-medium transition-colors ${i===$?"border-b-2 border-blue-600 text-blue-600":"text-slate-600 hover:text-slate-900"}`,children:[$==="pending"&&`Pendentes (${h.length})`,$==="budgets"&&"Oramentos"]},$))}),i==="pending"&&o.jsx("div",{className:"p-6",children:r?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):h.length===0?o.jsxs("div",{className:"text-center py-8 text-slate-500",children:[o.jsx(sa,{className:"w-12 h-12 mx-auto text-green-400 mb-3"}),o.jsx("p",{children:"Todas as despesas foram aprovadas!"})]}):o.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:h.map($=>o.jsx("div",{className:"p-4 bg-slate-50 rounded-lg border-l-4 border-orange-500 hover:bg-slate-100 transition-colors",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx(la,{className:"w-5 h-5 text-slate-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-slate-900",children:$.receiptNumber||"Recibo Sem Nmero"}),o.jsx("p",{className:"text-sm text-slate-600",children:$.userName})]})]}),$.description&&o.jsx("p",{className:"text-sm text-slate-700 ml-8 mb-2",children:$.description}),o.jsxs("div",{className:"flex flex-wrap gap-4 ml-8 text-sm text-slate-600",children:[$.category&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(NO,{className:"w-4 h-4"}),$.category]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Su,{className:"w-4 h-4"}),ur($.date)]}),$.attachmentCount>0&&o.jsxs("span",{className:"flex items-center gap-1 text-blue-600",children:[o.jsx(lv,{className:"w-4 h-4"}),$.attachmentCount," anexo",$.attachmentCount>1?"s":""]})]})]}),o.jsxs("div",{className:"flex items-center gap-4 ml-4",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-semibold text-slate-900 text-lg",children:$.amount.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})}),$.requiresApproval&&o.jsx("p",{className:"text-xs text-red-600 font-semibold",children:" Requer Aprovao"})]}),o.jsx("button",{onClick:()=>P($),className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors whitespace-nowrap",children:"Revisar"})]})]})},$.id))})}),i==="budgets"&&o.jsx("div",{className:"p-6",children:_.length===0?o.jsxs("div",{className:"text-center py-8 text-slate-500",children:[o.jsx(so,{className:"w-12 h-12 mx-auto text-slate-300 mb-3"}),o.jsx("p",{children:"Sem oramentos configurados"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:_.map($=>{var U;return o.jsxs("div",{className:`p-4 rounded-lg border-2 ${H($.budgetStatus)}`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-sm",children:$.costCenterName||"Centro Sem Nome"}),o.jsxs("p",{className:"text-xs opacity-75",children:[ur($.periodStart)," a"," ",ur($.periodEnd)]})]}),o.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded bg-current bg-opacity-20",children:$.budgetStatus})]}),o.jsxs("div",{className:"space-y-2 mb-3",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{children:"Oramento:"}),o.jsx("span",{className:"font-semibold",children:((U=$.budgetAmount)==null?void 0:U.toLocaleString("pt-BR",{style:"currency",currency:"MZN"}))||"N/A"})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{children:"Gasto:"}),o.jsx("span",{className:"font-semibold",children:$.spentAmount.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{children:"Restante:"}),o.jsx("span",{className:"font-semibold",children:$.remainingBudget.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})})]})]}),o.jsx("div",{className:"w-full bg-gray-300 rounded-full h-2 overflow-hidden",children:o.jsx("div",{className:`h-full transition-all ${$.budgetStatus==="EXCEEDED"?"bg-red-600":$.budgetStatus==="CRITICAL"?"bg-orange-600":$.budgetStatus==="WARNING"?"bg-yellow-600":"bg-green-600"}`,style:{width:`${Math.min($.percentageUsed,100)}%`}})}),o.jsxs("p",{className:"text-xs mt-2 font-semibold",children:[$.percentageUsed.toFixed(1),"% utilizado"]})]},$.costCenterId)})})})]}),j&&p&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col",children:[o.jsx("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 bg-gradient-to-r from-blue-50 to-slate-50",children:o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Detalhes da Despesa"}),o.jsx("p",{className:"text-sm text-slate-600 mt-1",children:p.receiptNumber||"Recibo sem nmero"})]})}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[I&&o.jsx("div",{className:"p-4 bg-red-50 border-l-4 border-red-500 rounded",children:o.jsxs("p",{className:"text-sm text-red-800 font-semibold flex items-center gap-2",children:[o.jsx(so,{className:"w-5 h-5"}),I]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Solicitante"}),o.jsx("p",{className:"font-semibold text-slate-900",children:p.userId})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Valor"}),o.jsx("p",{className:"font-semibold text-lg text-blue-600",children:p.amount.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Data"}),o.jsx("p",{className:"font-semibold text-slate-900",children:ur(p.date)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Categoria"}),o.jsx("p",{className:"font-semibold text-slate-900",children:p.category||"N/A"})]})]}),p.description&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Descrio"}),o.jsx("p",{className:"p-3 bg-slate-50 rounded text-slate-800",children:p.description})]}),x.length>0&&o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm font-semibold text-slate-900 mb-3",children:["Documentos (",x.length,")"]}),o.jsx("div",{className:"space-y-2",children:x.map($=>o.jsxs("a",{href:$.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 bg-slate-50 hover:bg-blue-50 rounded border border-slate-200 transition-colors",children:[o.jsx(lv,{className:"w-4 h-4 text-blue-600"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:$.fileName}),o.jsxs("p",{className:"text-xs text-slate-600",children:[$.attachmentType,"  ",ur($.uploadedAt)]})]})]},$.id))})]}),p.approvalStatus==="PENDING"&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Razo da Rejeio (se aplicvel)"}),o.jsx("textarea",{value:k,onChange:$=>A($.target.value),placeholder:"Explique por que a despesa  rejeitada...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-sm",rows:3})]})]}),o.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-200 bg-slate-50",children:[o.jsxs("button",{onClick:oe,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[o.jsx(Kf,{className:"w-4 h-4"}),"Rejeitar"]}),o.jsxs("button",{onClick:Y,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[o.jsx(sa,{className:"w-4 h-4"}),"Aprovar"]}),o.jsx("button",{onClick:()=>{N(!1),g(null),A("")},className:"flex-1 px-4 py-2 bg-slate-300 text-slate-800 rounded-lg font-medium hover:bg-slate-400 transition-colors",children:"Fechar"})]})]})})]}):o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx("div",{className:"text-gray-500",children:"Carregando..."})})}function pQ(){const{currentUser:e,selectedDepartmentId:t}=Nr(),[r,n]=w.useState(!0),[i,l]=w.useState("overview"),[u,d]=w.useState(null),[h,m]=w.useState([]),[p,g]=w.useState([]),[x,b]=w.useState([]),j=new Date,N=new Date(j.getFullYear(),j.getMonth(),1),[_,E]=w.useState({startDate:N.toISOString().split("T")[0],endDate:j.toISOString().split("T")[0],costCenterId:void 0}),[k,A]=w.useState(0),[I,R]=w.useState(0),[C,P]=w.useState(0);w.useEffect(()=>{Y()},[_,t]);const Y=async()=>{try{n(!0);const[G,V,D]=await Promise.all([yR(t||""),fQ(),hQ(t||"")]);m(G),g(V),b(D);const K=G.reduce((_e,L)=>_e+(L.budgetAmount||0),0),fe=G.reduce((_e,L)=>_e+L.spentAmount,0),Ne=G.reduce((_e,L)=>_e+(L.approvalPendingAmount||0),0);A(K),R(fe),P(Ne)}catch(G){d({type:"error",message:`Error loading report data: ${G instanceof Error?G.message:String(G)}`})}finally{n(!1)}},oe=G=>{try{if(G==="csv"){const V=H();$(V,"expenses-report.csv","text/csv")}}catch(V){d({type:"error",message:`Error exporting report: ${V instanceof Error?V.message:String(V)}`})}},H=()=>{const G=["Centro de Custo","Oramento","Gasto","Pendente","Restante","Status","% Utilizado"],V=h.map(D=>{var K,fe;return[D.costCenterName||"N/A",((K=D.budgetAmount)==null?void 0:K.toFixed(2))||"0",D.spentAmount.toFixed(2),((fe=D.approvalPendingAmount)==null?void 0:fe.toFixed(2))||"0",D.remainingBudget.toFixed(2),D.budgetStatus,D.percentageUsed.toFixed(1)]});return[G,...V].map(D=>D.join(",")).join(`
`)},$=(G,V,D)=>{const K=new Blob([G],{type:D}),fe=window.URL.createObjectURL(K),Ne=document.createElement("a");Ne.href=fe,Ne.download=V,Ne.click(),window.URL.revokeObjectURL(fe)},U=G=>{switch(G){case"EXCEEDED":return"bg-red-100 text-red-800 border-red-300";case"CRITICAL":return"bg-orange-100 text-orange-800 border-orange-300";case"WARNING":return"bg-yellow-100 text-yellow-800 border-yellow-300";default:return"bg-green-100 text-green-800 border-green-300"}},ce=G=>{switch(G){case"EXCEEDED":return"bg-red-600";case"CRITICAL":return"bg-orange-600";case"WARNING":return"bg-yellow-600";default:return"bg-green-600"}};return e?o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("h1",{className:"text-4xl font-bold text-slate-900 flex items-center gap-3",children:[o.jsx(iv,{className:"w-10 h-10 text-purple-600"}),"Relatrios de Oramento"]}),o.jsx("p",{className:"text-slate-600 mt-2",children:"Monitore gastos vs oramento | Anlise por categoria"})]}),u&&o.jsx("div",{className:`p-3 rounded text-sm mb-6 ${u.type==="success"?"bg-green-100 border border-green-300 text-green-800":u.type==="error"?"bg-red-100 border border-red-300 text-red-800":"bg-blue-50 border border-blue-100 text-blue-800"}`,children:u.message}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(bO,{className:"w-5 h-5 text-slate-600"}),o.jsx("h3",{className:"font-semibold text-slate-900",children:"Filtros"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Data Inicial"}),o.jsx("input",{type:"date",value:_.startDate,onChange:G=>E({..._,startDate:G.target.value}),"aria-label":"Data Inicial",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Data Final"}),o.jsx("input",{type:"date",value:_.endDate,onChange:G=>E({..._,endDate:G.target.value}),"aria-label":"Data Final",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Centro de Custo"}),o.jsxs("select",{value:_.costCenterId||"",onChange:G=>E({..._,costCenterId:G.target.value||void 0}),"aria-label":"Centro de Custo",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm",children:[o.jsx("option",{value:"",children:"Todos"}),x.map(G=>o.jsx("option",{value:G.id,children:G.name},G.id))]})]}),o.jsxs("div",{className:"flex items-end gap-2",children:[o.jsx("button",{onClick:Y,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors",children:"Atualizar"}),o.jsxs("button",{onClick:()=>oe("csv"),className:"px-4 py-2 bg-slate-600 text-white rounded-lg font-medium hover:bg-slate-700 transition-colors flex items-center gap-2",children:[o.jsx(hx,{className:"w-4 h-4"}),"CSV"]})]})]})]}),!r&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500",children:[o.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Oramento Total"}),o.jsx("p",{className:"text-3xl font-bold text-slate-900",children:k.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-orange-500",children:[o.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Gasto Realizado"}),o.jsx("p",{className:"text-3xl font-bold text-slate-900",children:I.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})}),o.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[k>0?(I/k*100).toFixed(1):"0","% do oramento"]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-yellow-500",children:[o.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Pendente Aprovao"}),o.jsx("p",{className:"text-3xl font-bold text-slate-900",children:C.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500",children:[o.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Restante"}),o.jsx("p",{className:"text-3xl font-bold text-slate-900",children:(k-I-C).toLocaleString("pt-BR",{style:"currency",currency:"MZN"})})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[o.jsx("div",{className:"flex border-b border-slate-200",children:["overview","details","analysis"].map(G=>o.jsxs("button",{onClick:()=>l(G),className:`flex-1 px-6 py-3 text-sm font-medium transition-colors flex items-center justify-center gap-2 ${i===G?"border-b-2 border-purple-600 text-purple-600":"text-slate-600 hover:text-slate-900"}`,children:[G==="overview"&&o.jsxs(o.Fragment,{children:[o.jsx(iv,{className:"w-4 h-4"}),"Viso Geral"]}),G==="details"&&o.jsxs(o.Fragment,{children:[o.jsx(Eu,{className:"w-4 h-4"}),"Detalhes"]}),G==="analysis"&&o.jsxs(o.Fragment,{children:[o.jsx(vO,{className:"w-4 h-4"}),"Anlise"]})]},G))}),o.jsx("div",{className:"p-6",children:r?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):i==="overview"?o.jsx("div",{className:"space-y-6",children:h.length===0?o.jsxs("div",{className:"text-center py-8 text-slate-500",children:[o.jsx(so,{className:"w-12 h-12 mx-auto text-slate-300 mb-3"}),o.jsx("p",{children:"Sem dados de oramento para o perodo selecionado"})]}):o.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:h.map(G=>{var V,D;return o.jsxs("div",{className:`p-4 rounded-lg border-2 ${U(G.budgetStatus)}`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:G.costCenterName||"Centro Sem Nome"}),o.jsxs("p",{className:"text-xs opacity-75 mt-1",children:[ur(G.periodStart)," a"," ",ur(G.periodEnd)]})]}),o.jsx("span",{className:"text-xs font-bold px-3 py-1 rounded bg-current bg-opacity-20 uppercase",children:G.budgetStatus})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs opacity-75",children:"Oramento"}),o.jsx("p",{className:"font-semibold",children:((V=G.budgetAmount)==null?void 0:V.toLocaleString("pt-BR",{style:"currency",currency:"MZN"}))||"N/A"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs opacity-75",children:"Gasto"}),o.jsx("p",{className:"font-semibold",children:G.spentAmount.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs opacity-75",children:"Pendente"}),o.jsx("p",{className:"font-semibold",children:((D=G.approvalPendingAmount)==null?void 0:D.toLocaleString("pt-BR",{style:"currency",currency:"MZN"}))||"0,00 MZN"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs opacity-75",children:"Restante"}),o.jsx("p",{className:"font-semibold",children:G.remainingBudget.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})})]})]}),o.jsx("div",{className:"w-full bg-gray-300 rounded-full h-3 overflow-hidden",children:o.jsx("div",{className:`h-full transition-all ${ce(G.budgetStatus)}`,style:{width:`${Math.min(G.percentageUsed,100)}%`}})}),o.jsxs("p",{className:"text-xs mt-2 font-semibold opacity-75",children:[G.percentageUsed.toFixed(1),"% utilizado"]})]},G.costCenterId)})})}):i==="details"?o.jsx("div",{className:"overflow-x-auto",children:h.length===0?o.jsxs("div",{className:"text-center py-8 text-slate-500",children:[o.jsx(so,{className:"w-12 h-12 mx-auto text-slate-300 mb-3"}),o.jsx("p",{children:"Sem dados para exibir"})]}):o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-slate-100",children:o.jsxs("tr",{className:"border-b border-slate-200",children:[o.jsx("th",{className:"px-4 py-3 text-left font-semibold text-slate-900",children:"Centro de Custo"}),o.jsx("th",{className:"px-4 py-3 text-right font-semibold text-slate-900",children:"Oramento"}),o.jsx("th",{className:"px-4 py-3 text-right font-semibold text-slate-900",children:"Gasto"}),o.jsx("th",{className:"px-4 py-3 text-right font-semibold text-slate-900",children:"Pendente"}),o.jsx("th",{className:"px-4 py-3 text-right font-semibold text-slate-900",children:"Restante"}),o.jsx("th",{className:"px-4 py-3 text-right font-semibold text-slate-900",children:"% Utilizado"}),o.jsx("th",{className:"px-4 py-3 text-center font-semibold text-slate-900",children:"Status"})]})}),o.jsx("tbody",{children:h.map(G=>{var V,D;return o.jsxs("tr",{className:"border-b border-slate-200 hover:bg-slate-50",children:[o.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:G.costCenterName||"N/A"}),o.jsx("td",{className:"px-4 py-3 text-right text-slate-800",children:((V=G.budgetAmount)==null?void 0:V.toLocaleString("pt-BR",{style:"currency",currency:"MZN"}))||"N/A"}),o.jsx("td",{className:"px-4 py-3 text-right text-slate-800",children:G.spentAmount.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})}),o.jsx("td",{className:"px-4 py-3 text-right text-slate-800",children:((D=G.approvalPendingAmount)==null?void 0:D.toLocaleString("pt-BR",{style:"currency",currency:"MZN"}))||"0,00 MZN"}),o.jsx("td",{className:"px-4 py-3 text-right text-slate-800",children:G.remainingBudget.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})}),o.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-slate-900",children:[G.percentageUsed.toFixed(1),"%"]}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase ${U(G.budgetStatus)}`,children:G.budgetStatus})})]},G.costCenterId)})})]})}):o.jsx("div",{className:"space-y-6",children:p.length===0?o.jsxs("div",{className:"text-center py-8 text-slate-500",children:[o.jsx(so,{className:"w-12 h-12 mx-auto text-slate-300 mb-3"}),o.jsx("p",{children:"Sem dados de categoria para o perodo selecionado"})]}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Gastos por Categoria"}),o.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:p.map((G,V)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-200",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-slate-900",children:G.categoryName||G.category||"Sem Categoria"}),o.jsxs("p",{className:"text-xs text-slate-600",children:[G.expenseCount," despesa",G.expenseCount!==1?"s":""]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-semibold text-slate-900",children:G.totalAmount.toLocaleString("pt-BR",{style:"currency",currency:"MZN"})}),o.jsxs("p",{className:"text-xs text-slate-600",children:[G.percentageOfTotal.toFixed(1),"%"]})]})]},V))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Resumo de Gastos"}),o.jsx("div",{className:"space-y-3",children:p.reduce((G,V)=>({totalExpenses:G.totalExpenses+V.totalAmount,count:G.count+V.expenseCount}),{totalExpenses:0,count:0}).totalExpenses>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[o.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Total de Gastos"}),o.jsx("p",{className:"text-xl font-bold text-blue-900",children:p.reduce((G,V)=>G+V.totalAmount,0).toLocaleString("pt-BR",{style:"currency",currency:"MZN"})})]}),o.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[o.jsx("p",{className:"text-xs text-green-600 mb-1",children:"Total de Despesas"}),o.jsx("p",{className:"text-xl font-bold text-green-900",children:p.reduce((G,V)=>G+V.expenseCount,0)})]}),o.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:[o.jsx("p",{className:"text-xs text-purple-600 mb-1",children:"Gasto Mdio"}),o.jsx("p",{className:"text-xl font-bold text-purple-900",children:(p.reduce((G,V)=>G+V.totalAmount,0)/p.reduce((G,V)=>G+V.expenseCount,1)).toLocaleString("pt-BR",{style:"currency",currency:"MZN"})})]})]})})]})]})})})]})]}):o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx("div",{className:"text-gray-500",children:"Carregando..."})})}const gQ=({onAuthSuccess:e})=>{const[t,r]=w.useState(!0),[n,i]=w.useState(""),[l,u]=w.useState(""),[d,h]=w.useState(""),[m,p]=w.useState(""),[g,x]=w.useState(""),[b,j]=w.useState(!1),[N,_]=w.useState(null),[E,k]=w.useState(null),A=async R=>{R.preventDefault(),j(!0),_(null);try{const{data:C,error:P}=await ne.auth.signInWithPassword({email:n,password:l});if(P)throw P;C.user&&(k("Login bem-sucedido! Redirecionando..."),setTimeout(()=>e(),1e3))}catch(C){_(C.message||"Erro ao fazer login")}finally{j(!1)}},I=async R=>{R.preventDefault(),j(!0),_(null);try{const C={name:d};m&&(C.jobTitle=m),g&&(C.locationId=g);const{data:P,error:Y}=await ne.auth.signUp({email:n,password:l,options:{data:C}});if(Y)throw Y;P.user&&(k("Conta criada com sucesso! Verifique seu email para confirmar."),i(""),u(""),h(""))}catch(C){_(C.message||"Erro ao criar conta")}finally{j(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-white to-blue-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-emerald-600 rounded-2xl mb-4",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"OFICE"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Sistema de Gesto Operacional"})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[o.jsxs("div",{className:"flex gap-2 mb-6 bg-gray-100 p-1 rounded-lg",children:[o.jsxs("button",{onClick:()=>{r(!0),_(null),k(null)},className:`flex-1 py-2 px-4 rounded-md font-medium transition-all ${t?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[o.jsx(p5,{size:18,className:"inline mr-2"}),"Entrar"]}),o.jsxs("button",{onClick:()=>{r(!1),_(null),k(null)},className:`flex-1 py-2 px-4 rounded-md font-medium transition-all ${t?"text-gray-600 hover:text-gray-800":"bg-white text-emerald-600 shadow-sm"}`,children:[o.jsx(su,{size:18,className:"inline mr-2"}),"Criar Conta"]})]}),N&&o.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:N}),E&&o.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 text-green-700 rounded-lg text-sm",children:E}),o.jsxs("form",{onSubmit:t?A:I,className:"space-y-4",children:[!t&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo"}),o.jsx("input",{type:"text",value:d,onChange:R=>h(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Joo Silva",required:!t,"aria-label":"Nome completo"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cargo (opcional)"}),o.jsx("input",{type:"text",value:m,onChange:R=>p(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex.: Motosserrista","aria-label":"Cargo"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Local (opcional)"}),o.jsxs("select",{value:g,onChange:R=>x(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent","aria-label":"Localizao",children:[o.jsx("option",{value:"",children:"Sem local"}),p3.map(R=>o.jsx("option",{value:R.id,children:R.name},R.id))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),o.jsx("input",{type:"email",value:n,onChange:R=>i(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"seu@email.com",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha"}),o.jsx("input",{type:"password",value:l,onChange:R=>u(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"",required:!0,minLength:6}),!t&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mnimo 6 caracteres"})]}),o.jsx("button",{type:"submit",disabled:b,className:"w-full bg-emerald-600 text-white py-3 rounded-lg font-semibold hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:b?o.jsxs(o.Fragment,{children:[o.jsx(h5,{size:20,className:"animate-spin"}),"Processando..."]}):t?"Entrar":"Criar Conta"})]}),o.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[o.jsx("button",{onClick:()=>e(),className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",title:"Bypass authentication for development (only works if Supabase is not configured)",children:" Development Mode (Skip Auth)"}),o.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Only use this for testing the UI while setting up Supabase"})]}),t&&o.jsx("div",{className:"mt-4 text-center",children:o.jsx("a",{href:"#",className:"text-sm text-emerald-600 hover:text-emerald-700",children:"Esqueceu a senha?"})})]}),o.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:[o.jsx("p",{children:"Sistema de Gesto Operacional Florestal"}),o.jsx("p",{className:"mt-1",children:" 2025 OFICE - Todos os direitos reservados"})]})]})})};function yQ(){const[e,t]=w.useState("dashboard"),[r,n]=w.useState(null),[i,l]=w.useState(!0);w.useEffect(()=>{ne.auth.getSession().then(({data:{session:h}})=>{n(h),l(!1)});const{data:{subscription:d}}=ne.auth.onAuthStateChange((h,m)=>{n(m)});return()=>d.unsubscribe()},[]);const u=()=>{switch(e){case"dashboard":return o.jsx(XA,{onNavigate:t});case"chat":return o.jsx(ZZ,{});case"requisitions":return o.jsx(IZ,{});case"inventory":return o.jsx(LZ,{});case"performance":return o.jsx(zZ,{});case"hr":return o.jsx(UZ,{});case"settings":return o.jsx(qZ,{});case"patrimony":return o.jsx(BZ,{});case"pos":return o.jsx(VZ,{});case"permissions":return o.jsx(KZ,{});case"payroll":return o.jsx(YZ,{});case"fichas":return o.jsx(WZ,{});case"contas-receber":return o.jsx(aQ,{});case"expense-approvals":return o.jsx(mQ,{});case"expense-reports":return o.jsx(pQ,{});default:return o.jsx(XA,{onNavigate:t})}};return i?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-white to-blue-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-emerald-600 rounded-2xl mb-4 animate-pulse",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsx("p",{className:"text-gray-600",children:"Carregando..."})]})}):r?o.jsx(y3,{children:o.jsx(f6,{activeTab:e,onTabChange:t,children:u()})}):o.jsx(gQ,{onAuthSuccess:()=>{ne.auth.getSession().then(({data:{session:d}})=>{n(d)})}})}const vR=document.getElementById("root");if(!vR)throw new Error("Could not find root element to mount to");const vQ=RM.createRoot(vR);vQ.render(o.jsx(ao.StrictMode,{children:o.jsx(yQ,{})}));
